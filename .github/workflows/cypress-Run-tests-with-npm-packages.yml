# .github/workflows/pr-trigger.yml
name: Run E2E tests

on:
  push:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  trigger:
    runs-on: ubuntu-latest
    steps:
      - name: Send repository dispatch
        run: |
          curl -X POST \
            -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github+json" \
            https://api.github.com/repos/wiris/mt-html-editors-e2e-tests/actions/workflows/run.e2e.tests.yml/dispatches \
            -d '{
              "ref":"main",
              "inputs":{
                "browser":"both",
                "editors":"ckeditor4|ckeditor5|froala|generic|tinymce5",
                "test_branch":"${{ github.head_ref }}",
                "suite":"regression"
              }
            }'
