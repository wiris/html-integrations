# MathType for TinyMCE V7

Type and handwrite mathematical notation with MathType.

Easily include quality math equations in your documents and digital content.

## Table of Contents

- [Install instructions](#install-instructions)
- [Services](#services)
- [Documentation](#documentation)
- [Displaying on Target Page](#displaying-on-target-page)
- [Privacy policy](#privacy-policy)

## Install instructions

1. Install the npm module:

   ```bash
   npm install @wiris/mathtype-tinymce7
   ```

   > MathType is fully compatible with TinyMCE 7 from version 7.8.0.

2. Add the plugin as an external plugin:

   ```js
   tinymce.init({ external_plugins: { tiny_mce_wiris: `node_modules/@wiris/mathtype-tinymce7/plugin.min.js` } });
   ```

3. Add MathType buttons to the TinyMCE7 toolbar and the recommended settings:

   ```js
   tinymce.init({
     toolbar: "tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry",
     // We recommend to set 'draggable_modal' to true to avoid overlapping issues
     // with the different UI modal dialog windows implementations between core and third-party plugins on TinyMCE.
     // @see: https://github.com/wiris/html-integrations/issues/134#issuecomment-905448642
     draggable_modal: true,

     // This option allows you to introduce mathml formulas with wiris plugins.
     // Not enabling this, will provide formulas from being created and rendered.
     extended_valid_elements: "*[.*]",
     valid_elements: "*[*]",
     // This option prevents the DOMPurify library from filtering wiris MathML tags.
     // It's necessary when you want to initialize the editor with a content that contains handwritten formulas.
     allow_mathml_annotation_encodings: ["wiris", "application/json"],

     // Those options are necessary to allow the additional MathML tags to be saved in the editor.
     extended_mathml_elements: [ "semantics", "annotation", "mstack", "msline", "msrow", "none" ],
     extended_mathml_attributes: [ "linebreak", "charalign", "stackalign" ],
     // You could set a different language for MathType editor:
     // language: 'fr_FR',
     // mathTypeParameters: {
     //   editorParameters: { language: 'fr' },
     // },
   });
   ```

   Notice the example assumes this directory structure:

   ```
    └───index.html
    └───node_modules
        └───@wiris/mathtype-tinymce7
   ```

   > Note: For Vite users, head to the known issues section for a workaround on the external plugin addition.

## Known issues

- We have not been able to update the latests TinyMCE plugin version on our CDN, which forces users to get the `@wiris/mathtype-tinymce7` external plugin dependency from the node_modules. This can raise issues in applications using vite, for example. Here's a workaround:

  ```js
  import wirisPlugin from '@wiris/mathtype-tinymce7/plugin.min.js?url';

   tinymce.init({ external_plugins: {
      tiny_mce_wiris: wirisPlugin,
   });
  ```

- The editor's caret is lost when inserting a new formula on Safari with ChemType [#486](https://github.com/wiris/html-integrations/issues/486)

## Services

This npm module uses remotely hosted services to render MathML data. However, we recommend you install these services on your backend. This will allow you, among other things, to configure the service and to locally store the images generated by MathType.

The services are available for Java, PHP, .NET and Ruby on Rails. If you use any of these technologies, please download the plugin for your backend technology from [here](https://store.wiris.com/en/products/downloads/mathtype/integrations#froala?utm_source=npmjs&utm_medium=referral).

## Displaying on Target Page

In order to display mathematical formulas on the target page, i.e. the page where content produced by the HTML editor will be visible, the target page needs to include the [MathType script](https://docs.wiris.com/en/mathtype/mathtype_web/integrations/mathml-mode#add_a_script_to_head). For example for the default setting this would be:

```html
<script src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image"></script>
```

## Documentation

To find out more information about MathType, please go to the following documentation:

- [Install instructions](https://docs.wiris.com/mathtype/en/mathtype-integrations/mathtype-for-html-editors/mathtype-for-tinymce.html?utm_source=npmjs&utm_medium=referral)
- [MathType documentation](https://docs.wiris.com/en/mathtype/mathtype_web/start?utm_source=npmjs&utm_medium=referral)
- [Introductory tutorials](https://docs.wiris.com/en/mathtype/mathtype_web/intro_tutorials?utm_source=npmjs&utm_medium=referral)
- [Service customization](https://docs.wiris.com/en/mathtype/mathtype_web/integrations/config-table?utm_source=npmjs&utm_medium=referral)
- [Testing](https://docs.wiris.com/en/mathtype/mathtype_web/integrations/html/plugins-test?utm_source=npmjs&utm_medium=referral)

## Privacy policy

The [MathType Privacy Policy](https://www.wiris.com/en/mathtype-privacy-policy/?utm_source=npmjs&utm_medium=referral) covers the data processing operations for the MathType users. It is an addendum of the company’s general Privacy Policy and the [general Privacy Policy](https://www.wiris.com/en/privacy-policy?utm_source=npmjs&utm_medium=referral) still applies to MathType users.
