{"version":3,"file":"index.umd.js","sources":["../../../../node_modules/dompurify/dist/purify.js","../../../devkit/src/constants.js","../../../devkit/src/mathml.js","../../../devkit/src/configuration.js","../../../devkit/src/textcache.js","../../../devkit/src/listeners.js","../../../devkit/src/serviceprovider.js","../../../devkit/src/latex.js","../../../devkit/src/stringmanager.js","../../../devkit/src/util.js","../../../devkit/src/image.js","../../../devkit/src/accessibility.js","../../../devkit/src/parser.js","../../../devkit/src/editorlistener.js","../../../devkit/telemeter-wasm/telemeter_wasm.js","../../../devkit/src/telemeter.js","../../../devkit/src/contentmanager.js","../../../devkit/src/customeditors.js","../../../devkit/src/jsvariables.js","../../../devkit/src/event.js","../../../devkit/src/popupmessage.js","../../../devkit/src/modal.js","../../../devkit/src/polyfills.js","../../../devkit/src/core.src.js","../../../devkit/src/integrationmodel.js","../../src/integration.js","../../src/commands.js","../../src/plugin.js"],"sourcesContent":["/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.DOMPurify = factory());\n})(this, (function () { 'use strict';\n\n  const {\n    entries,\n    setPrototypeOf,\n    isFrozen,\n    getPrototypeOf,\n    getOwnPropertyDescriptor\n  } = Object;\n  let {\n    freeze,\n    seal,\n    create\n  } = Object; // eslint-disable-line import/no-mutable-exports\n  let {\n    apply,\n    construct\n  } = typeof Reflect !== 'undefined' && Reflect;\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return new Func(...args);\n    };\n  }\n  const arrayForEach = unapply(Array.prototype.forEach);\n  const arrayPop = unapply(Array.prototype.pop);\n  const arrayPush = unapply(Array.prototype.push);\n  const stringToLowerCase = unapply(String.prototype.toLowerCase);\n  const stringToString = unapply(String.prototype.toString);\n  const stringMatch = unapply(String.prototype.match);\n  const stringReplace = unapply(String.prototype.replace);\n  const stringIndexOf = unapply(String.prototype.indexOf);\n  const stringTrim = unapply(String.prototype.trim);\n  const objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n  const regExpTest = unapply(RegExp.prototype.test);\n  const typeErrorCreate = unconstruct(TypeError);\n\n  /**\n   * Creates a new function that calls the given function with a specified thisArg and arguments.\n   *\n   * @param {Function} func - The function to be wrapped and called.\n   * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n   */\n  function unapply(func) {\n    return function (thisArg) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      return apply(func, thisArg, args);\n    };\n  }\n\n  /**\n   * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n   *\n   * @param {Function} func - The constructor function to be wrapped and called.\n   * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n   */\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return construct(func, args);\n    };\n  }\n\n  /**\n   * Add properties to a lookup table\n   *\n   * @param {Object} set - The set to which elements will be added.\n   * @param {Array} array - The array containing elements to be added to the set.\n   * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n   * @returns {Object} The modified set with added elements.\n   */\n  function addToSet(set, array) {\n    let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n    let l = array.length;\n    while (l--) {\n      let element = array[l];\n      if (typeof element === 'string') {\n        const lcElement = transformCaseFunc(element);\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n          element = lcElement;\n        }\n      }\n      set[element] = true;\n    }\n    return set;\n  }\n\n  /**\n   * Clean up an array to harden against CSPP\n   *\n   * @param {Array} array - The array to be cleaned.\n   * @returns {Array} The cleaned version of the array\n   */\n  function cleanArray(array) {\n    for (let index = 0; index < array.length; index++) {\n      const isPropertyExist = objectHasOwnProperty(array, index);\n      if (!isPropertyExist) {\n        array[index] = null;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * Shallow clone an object\n   *\n   * @param {Object} object - The object to be cloned.\n   * @returns {Object} A new object that copies the original.\n   */\n  function clone(object) {\n    const newObject = create(null);\n    for (const [property, value] of entries(object)) {\n      const isPropertyExist = objectHasOwnProperty(object, property);\n      if (isPropertyExist) {\n        if (Array.isArray(value)) {\n          newObject[property] = cleanArray(value);\n        } else if (value && typeof value === 'object' && value.constructor === Object) {\n          newObject[property] = clone(value);\n        } else {\n          newObject[property] = value;\n        }\n      }\n    }\n    return newObject;\n  }\n\n  /**\n   * This method automatically checks if the prop is function or getter and behaves accordingly.\n   *\n   * @param {Object} object - The object to look up the getter function in its prototype chain.\n   * @param {String} prop - The property name for which to find the getter function.\n   * @returns {Function} The getter function found in the prototype chain or a fallback function.\n   */\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      const desc = getOwnPropertyDescriptor(object, prop);\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n      object = getPrototypeOf(object);\n    }\n    function fallbackValue() {\n      return null;\n    }\n    return fallbackValue;\n  }\n\n  const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n  // SVG\n  const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n  const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n  // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n  const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n  const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n\n  // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n  const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n  const text = freeze(['#text']);\n\n  const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\n  const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n  const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n  const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  // eslint-disable-next-line unicorn/better-regex\n  const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n  const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n  const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n  const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n  const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n  const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n  const DOCTYPE_NAME = seal(/^html$/i);\n  const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\n  var EXPRESSIONS = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    MUSTACHE_EXPR: MUSTACHE_EXPR,\n    ERB_EXPR: ERB_EXPR,\n    TMPLIT_EXPR: TMPLIT_EXPR,\n    DATA_ATTR: DATA_ATTR,\n    ARIA_ATTR: ARIA_ATTR,\n    IS_ALLOWED_URI: IS_ALLOWED_URI,\n    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE: ATTR_WHITESPACE,\n    DOCTYPE_NAME: DOCTYPE_NAME,\n    CUSTOM_ELEMENT: CUSTOM_ELEMENT\n  });\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n  const NODE_TYPE = {\n    element: 1,\n    attribute: 2,\n    text: 3,\n    cdataSection: 4,\n    entityReference: 5,\n    // Deprecated\n    entityNode: 6,\n    // Deprecated\n    progressingInstruction: 7,\n    comment: 8,\n    document: 9,\n    documentType: 10,\n    documentFragment: 11,\n    notation: 12 // Deprecated\n  };\n  const getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n   * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n   * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n   * are not supported or creating the policy failed).\n   */\n  const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n    if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    }\n\n    // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n    let suffix = null;\n    const ATTR_NAME = 'data-tt-policy-suffix';\n    if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n      suffix = purifyHostElement.getAttribute(ATTR_NAME);\n    }\n    const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML(html) {\n          return html;\n        },\n        createScriptURL(scriptUrl) {\n          return scriptUrl;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n  function createDOMPurify() {\n    let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n    const DOMPurify = root => createDOMPurify(root);\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '3.1.7';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n    if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n      return DOMPurify;\n    }\n    let {\n      document\n    } = window;\n    const originalDocument = document;\n    const currentScript = originalDocument.currentScript;\n    const {\n      DocumentFragment,\n      HTMLTemplateElement,\n      Node,\n      Element,\n      NodeFilter,\n      NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n      HTMLFormElement,\n      DOMParser,\n      trustedTypes\n    } = window;\n    const ElementPrototype = Element.prototype;\n    const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    const remove = lookupGetter(ElementPrototype, 'remove');\n    const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n      const template = document.createElement('template');\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n    let trustedTypesPolicy;\n    let emptyHTML = '';\n    const {\n      implementation,\n      createNodeIterator,\n      createDocumentFragment,\n      getElementsByTagName\n    } = document;\n    const {\n      importNode\n    } = originalDocument;\n    let hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n    const {\n      MUSTACHE_EXPR,\n      ERB_EXPR,\n      TMPLIT_EXPR,\n      DATA_ATTR,\n      ARIA_ATTR,\n      IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE,\n      CUSTOM_ELEMENT\n    } = EXPRESSIONS;\n    let {\n      IS_ALLOWED_URI: IS_ALLOWED_URI$1\n    } = EXPRESSIONS;\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n    let ALLOWED_TAGS = null;\n    const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n\n    /* Allowed attribute names */\n    let ALLOWED_ATTR = null;\n    const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n\n    /*\n     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n     */\n    let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false\n      }\n    }));\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    let FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    let FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    let ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    let ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Decide if self-closing tags in attributes are allowed.\n     * Usually removed due to a mXSS issue in jQuery 3.0 */\n    let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    let SAFE_FOR_TEMPLATES = false;\n\n    /* Output should be safe even for XML used within HTML and alike.\n     * This means, DOMPurify removes comments when containing risky content.\n     */\n    let SAFE_FOR_XML = true;\n\n    /* Decide if document with <html>... should be returned */\n    let WHOLE_DOCUMENT = false;\n\n    /* Track whether config is already set on this instance of DOMPurify. */\n    let SET_CONFIG = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    let FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    let RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n    let RETURN_DOM_FRAGMENT = false;\n\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n    let RETURN_TRUSTED_TYPE = false;\n\n    /* Output should be free from DOM clobbering attacks?\n     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n     */\n    let SANITIZE_DOM = true;\n\n    /* Achieve full DOM Clobbering protection by isolating the namespace of named\n     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n     *\n     * HTML/DOM spec rules that enable DOM Clobbering:\n     *   - Named Access on Window (§7.3.3)\n     *   - DOM Tree Accessors (§3.1.5)\n     *   - Form Element Parent-Child Relations (§4.10.3)\n     *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n     *   - HTMLCollection (§4.2.10.2)\n     *\n     * Namespace isolation is implemented by prefixing `id` and `name` attributes\n     * with a constant string, i.e., `user-content-`\n     */\n    let SANITIZE_NAMED_PROPS = false;\n    const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n    /* Keep element content when removing element? */\n    let KEEP_CONTENT = true;\n\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n    let IN_PLACE = false;\n\n    /* Allow usage of profiles like html, svg and mathMl */\n    let USE_PROFILES = {};\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    let FORBID_CONTENTS = null;\n    const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n    /* Tags that are safe for data: URIs */\n    let DATA_URI_TAGS = null;\n    const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n    /* Attributes safe for values like \"javascript:\" */\n    let URI_SAFE_ATTRIBUTES = null;\n    const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n    let NAMESPACE = HTML_NAMESPACE;\n    let IS_EMPTY_INPUT = false;\n\n    /* Allowed XHTML+XML namespaces */\n    let ALLOWED_NAMESPACES = null;\n    const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n\n    /* Parsing of strict XHTML documents */\n    let PARSER_MEDIA_TYPE = null;\n    const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n    const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n    let transformCaseFunc = null;\n\n    /* Keep a reference to config to pass to hooks */\n    let CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    const formElement = document.createElement('form');\n    const isRegexOrFunction = function isRegexOrFunction(testValue) {\n      return testValue instanceof RegExp || testValue instanceof Function;\n    };\n\n    /**\n     * _parseConfig\n     *\n     * @param  {Object} cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n    const _parseConfig = function _parseConfig() {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n\n      /* Shield configuration object from tampering */\n      if (!cfg || typeof cfg !== 'object') {\n        cfg = {};\n      }\n\n      /* Shield configuration object from prototype pollution */\n      cfg = clone(cfg);\n      PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n\n      // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n\n      /* Set configuration parameters */\n      ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n      ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n      URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n      // eslint-disable-line indent\n      cfg.ADD_URI_SAFE_ATTR,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS),\n      // eslint-disable-line indent\n      cfg.ADD_DATA_URI_TAGS,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_DATA_URI_TAGS;\n      FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n      FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n      FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n      USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n      SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n      }\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n\n      /* Parse profile info */\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, text);\n        ALLOWED_ATTR = [];\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html$1);\n          addToSet(ALLOWED_ATTR, html);\n        }\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg$1);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl$1);\n          addToSet(ALLOWED_ATTR, mathMl);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n\n      /* Merge configuration parameters */\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n      }\n      if (cfg.FORBID_CONTENTS) {\n        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n          FORBID_CONTENTS = clone(FORBID_CONTENTS);\n        }\n        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n      }\n\n      /* Add #text in case KEEP_CONTENT is set to true */\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      }\n      if (cfg.TRUSTED_TYPES_POLICY) {\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n        }\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n        }\n\n        // Overwrite existing TrustedTypes policy.\n        trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n        // Sign local variables required by `sanitize`.\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      } else {\n        // Uninitialized policy, attempt to initialize the internal dompurify policy.\n        if (trustedTypesPolicy === undefined) {\n          trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n        }\n\n        // If creating the internal policy succeeded sign internal variables.\n        if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        }\n      }\n\n      // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n      if (freeze) {\n        freeze(cfg);\n      }\n      CONFIG = cfg;\n    };\n    const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n    const HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n    // Certain elements are allowed in both SVG and HTML\n    // namespace. We need to specify them explicitly\n    // so that they don't get erroneously deleted from\n    // HTML namespace.\n    const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n    const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n    const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n\n    /**\n     * @param  {Element} element a DOM element whose namespace is being checked\n     * @returns {boolean} Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n    const _checkValidNamespace = function _checkValidNamespace(element) {\n      let parent = getParentNode(element);\n\n      // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: NAMESPACE,\n          tagName: 'template'\n        };\n      }\n      const tagName = stringToLowerCase(element.tagName);\n      const parentTagName = stringToLowerCase(parent.tagName);\n      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return false;\n      }\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        }\n\n        // The only way to switch from MathML to SVG is via`\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        }\n\n        // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        }\n\n        // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        }\n\n        // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n      }\n\n      // For XHTML and XML documents that support custom namespaces\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return true;\n      }\n\n      // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n      // Return false just in case.\n      return false;\n    };\n\n    /**\n     * _forceRemove\n     *\n     * @param  {Node} node a DOM node\n     */\n    const _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, {\n        element: node\n      });\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        getParentNode(node).removeChild(node);\n      } catch (_) {\n        remove(node);\n      }\n    };\n\n    /**\n     * _removeAttribute\n     *\n     * @param  {String} name an Attribute name\n     * @param  {Node} node a DOM node\n     */\n    const _removeAttribute = function _removeAttribute(name, node) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: node.getAttributeNode(name),\n          from: node\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: node\n        });\n      }\n      node.removeAttribute(name);\n\n      // We void attribute values for unremovable \"is\"\" attributes\n      if (name === 'is' && !ALLOWED_ATTR[name]) {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(node);\n          } catch (_) {}\n        } else {\n          try {\n            node.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n\n    /**\n     * _initDocument\n     *\n     * @param  {String} dirty a string of dirty markup\n     * @return {Document} a DOM, filled with the dirty markup\n     */\n    const _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      let doc = null;\n      let leadingWhitespace = null;\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n        dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n      }\n      const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n        } catch (_) {}\n      }\n\n      /* Use createHTMLDocument in case DOMParser is not available */\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n        } catch (_) {\n          // Syntax error if dirtyPayload is invalid xml\n        }\n      }\n      const body = doc.body || doc.documentElement;\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n\n      /* Work on whole document or just its body */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n\n    /**\n     * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n     *\n     * @param  {Node} root The root element or node to start traversing on.\n     * @return {NodeIterator} The created NodeIterator\n     */\n    const _createNodeIterator = function _createNodeIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  {Node} elm element to check for clobbering attacks\n     * @return {Boolean} true if clobbered, false if safe\n     */\n    const _isClobbered = function _isClobbered(elm) {\n      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n    };\n\n    /**\n     * Checks whether the given object is a DOM node.\n     *\n     * @param  {Node} object object to check whether it's a DOM node\n     * @return {Boolean} true is object is a DOM node\n     */\n    const _isNode = function _isNode(object) {\n      return typeof Node === 'function' && object instanceof Node;\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode node to work on with the hook\n     * @param  {Object} data additional hook parameters\n     */\n    const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n      if (!hooks[entryPoint]) {\n        return;\n      }\n      arrayForEach(hooks[entryPoint], hook => {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   {Node} currentNode to check for permission to exist\n     * @return  {Boolean} true if node was killed, false if left alive\n     */\n    const _sanitizeElements = function _sanitizeElements(currentNode) {\n      let content = null;\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeElements', currentNode, null);\n\n      /* Check if element is clobbered or can clobber */\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Now let's check the element's type and name */\n      const tagName = transformCaseFunc(currentNode.nodeName);\n\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeElement', currentNode, {\n        tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n\n      /* Detect mXSS attempts abusing namespace confusion */\n      if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove any occurrence of processing instructions */\n      if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove any kind of possibly harmful comments */\n      if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove element if anything forbids its presence */\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Check if we have a custom element to handle */\n        if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n            return false;\n          }\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n            return false;\n          }\n        }\n\n        /* Keep content except for bad-listed elements */\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n          if (childNodes && parentNode) {\n            const childCount = childNodes.length;\n            for (let i = childCount - 1; i >= 0; --i) {\n              const childClone = cloneNode(childNodes[i], true);\n              childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n              parentNode.insertBefore(childClone, getNextSibling(currentNode));\n            }\n          }\n        }\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check whether element has a valid namespace */\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Make sure that older browsers don't get fallback-tag mXSS */\n      if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Sanitize element content to be template-safe */\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          content = stringReplace(content, expr, ' ');\n        });\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, {\n            element: currentNode.cloneNode()\n          });\n          currentNode.textContent = content;\n        }\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeElements', currentNode, null);\n      return false;\n    };\n\n    /**\n     * _isValidAttribute\n     *\n     * @param  {string} lcTag Lowercase tag name of containing element.\n     * @param  {string} lcName Lowercase attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n    const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n          return false;\n        }\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n        return false;\n      } else ;\n      return true;\n    };\n\n    /**\n     * _isBasicCustomElement\n     * checks if at least one dash is included in tagName, and it's not the first char\n     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n     *\n     * @param {string} tagName name of the tag of the node to sanitize\n     * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n     */\n    const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n      return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n    };\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param  {Node} currentNode to sanitize\n     */\n    const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeAttributes', currentNode, null);\n      const {\n        attributes\n      } = currentNode;\n\n      /* Check if we have attributes; if not we might have a text node */\n      if (!attributes) {\n        return;\n      }\n      const hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR\n      };\n      let l = attributes.length;\n\n      /* Go backwards over all attributes; safely remove bad ones */\n      while (l--) {\n        const attr = attributes[l];\n        const {\n          name,\n          namespaceURI,\n          value: attrValue\n        } = attr;\n        const lcName = transformCaseFunc(name);\n        let value = name === 'value' ? attrValue : stringTrim(attrValue);\n\n        /* Execute a hook if present */\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n        value = hookEvent.attrValue;\n\n        /* Did the hooks approve of the attribute? */\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n\n        /* Remove attribute */\n        _removeAttribute(name, currentNode);\n\n        /* Did the hooks approve of the attribute? */\n        if (!hookEvent.keepAttr) {\n          continue;\n        }\n\n        /* Work around a security issue in jQuery 3.0 */\n        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Sanitize attribute content to be template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            value = stringReplace(value, expr, ' ');\n          });\n        }\n\n        /* Is `value` valid for this attribute? */\n        const lcTag = transformCaseFunc(currentNode.nodeName);\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          continue;\n        }\n\n        /* Full DOM Clobbering protection via namespace isolation,\n         * Prefix id and name attributes with `user-content-`\n         */\n        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n          // Remove the attribute with this value\n          _removeAttribute(name, currentNode);\n\n          // Prefix the value and later re-create the attribute with the sanitized value\n          value = SANITIZE_NAMED_PROPS_PREFIX + value;\n        }\n\n        /* Work around a security issue with comments inside attributes */\n        if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Handle attributes that require Trusted Types */\n        if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n          if (namespaceURI) ; else {\n            switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML':\n                {\n                  value = trustedTypesPolicy.createHTML(value);\n                  break;\n                }\n              case 'TrustedScriptURL':\n                {\n                  value = trustedTypesPolicy.createScriptURL(value);\n                  break;\n                }\n            }\n          }\n        }\n\n        /* Handle invalid data-* attribute set by try-catching it */\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {}\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  {DocumentFragment} fragment to iterate over recursively\n     */\n    const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      let shadowNode = null;\n      const shadowIterator = _createNodeIterator(fragment);\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeShadowDOM', fragment, null);\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(shadowNode)) {\n          continue;\n        }\n\n        /* Deep shadow DOM detected */\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(shadowNode);\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * Sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} cfg object\n     */\n    // eslint-disable-next-line complexity\n    DOMPurify.sanitize = function (dirty) {\n      let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      let body = null;\n      let importedNode = null;\n      let currentNode = null;\n      let returnNode = null;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n      IS_EMPTY_INPUT = !dirty;\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n\n      /* Stringify, in case dirty is an object */\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        if (typeof dirty.toString === 'function') {\n          dirty = dirty.toString();\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        } else {\n          throw typeErrorCreate('toString is not a function');\n        }\n      }\n\n      /* Return dirty HTML if DOMPurify cannot run */\n      if (!DOMPurify.isSupported) {\n        return dirty;\n      }\n\n      /* Assign config vars */\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n\n      /* Clean up removed elements */\n      DOMPurify.removed = [];\n\n      /* Check if dirty is correctly typed for IN_PLACE */\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n      if (IN_PLACE) {\n        /* Do some early pre-sanitization to avoid unsafe root nodes */\n        if (dirty.nodeName) {\n          const tagName = transformCaseFunc(dirty.nodeName);\n          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n          }\n        }\n      } else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n        if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n\n        /* Initialize the document to work on */\n        body = _initDocument(dirty);\n\n        /* Check we have a DOM node from the data */\n        if (!body) {\n          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n        }\n      }\n\n      /* Remove first element node (ours) if FORCE_BODY is set */\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n\n      /* Get node iterator */\n      const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n      /* Now start iterating over the created document */\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(currentNode)) {\n          continue;\n        }\n\n        /* Shadow DOM detected, sanitize it */\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(currentNode);\n      }\n\n      /* If we sanitized `dirty` in-place, return it. */\n      if (IN_PLACE) {\n        return dirty;\n      }\n\n      /* Return sanitized string or DOM */\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n        return returnNode;\n      }\n      let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n      /* Serialize doctype if allowed */\n      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n      }\n\n      /* Sanitize final string template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          serializedHTML = stringReplace(serializedHTML, expr, ' ');\n        });\n      }\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n\n    /**\n     * Public method to set the configuration once\n     * setConfig\n     *\n     * @param {Object} cfg configuration object\n     */\n    DOMPurify.setConfig = function () {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      _parseConfig(cfg);\n      SET_CONFIG = true;\n    };\n\n    /**\n     * Public method to remove the configuration\n     * clearConfig\n     *\n     */\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n\n    /**\n     * Public method to check if an attribute value is valid.\n     * Uses last set config, if any. Otherwise, uses config defaults.\n     * isValidAttribute\n     *\n     * @param  {String} tag Tag name of containing element.\n     * @param  {String} attr Attribute name.\n     * @param  {String} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n     */\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n      const lcTag = transformCaseFunc(tag);\n      const lcName = transformCaseFunc(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n\n    /**\n     * AddHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint entry point for the hook to add\n     * @param {Function} hookFunction function to execute\n     */\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n      hooks[entryPoint] = hooks[entryPoint] || [];\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n\n    /**\n     * RemoveHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint entry point for the hook to remove\n     * @return {Function} removed(popped) hook\n     */\n    DOMPurify.removeHook = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        return arrayPop(hooks[entryPoint]);\n      }\n    };\n\n    /**\n     * RemoveHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint entry point for the hooks to remove\n     */\n    DOMPurify.removeHooks = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        hooks[entryPoint] = [];\n      }\n    };\n\n    /**\n     * RemoveAllHooks\n     * Public method to remove all DOMPurify hooks\n     */\n    DOMPurify.removeAllHooks = function () {\n      hooks = {};\n    };\n    return DOMPurify;\n  }\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","/**\n * This class represents all the constants needed in a MathType integration among different classes.\n * If a constant should be used across different classes should be defined using attribute\n * accessors.\n */\nexport default class Constants {\n  /**\n   * Safe XML entities.\n   * @type {Object}\n   */\n  static get safeXmlCharactersEntities() {\n    return {\n      tagOpener: \"&laquo;\",\n      tagCloser: \"&raquo;\",\n      doubleQuote: \"&uml;\",\n      realDoubleQuote: \"&quot;\",\n    };\n  }\n\n  /**\n   * Blackboard invalid safe characters.\n   * @type {Object}\n   */\n  static get safeBadBlackboardCharacters() {\n    return {\n      ltElement: \"«mo»<«/mo»\",\n      gtElement: \"«mo»>«/mo»\",\n      ampElement: \"«mo»&«/mo»\",\n    };\n  }\n\n  /**\n   * Blackboard valid safe characters.\n   * @type{Object}\n   */\n  static get safeGoodBlackboardCharacters() {\n    return {\n      ltElement: \"«mo»§lt;«/mo»\",\n      gtElement: \"«mo»§gt;«/mo»\",\n      ampElement: \"«mo»§amp;«/mo»\",\n    };\n  }\n\n  /**\n   * Standard XML special characters.\n   * @type {Object}\n   */\n  static get xmlCharacters() {\n    return {\n      id: \"xmlCharacters\",\n      tagOpener: \"<\", // Hex: \\x3C.\n      tagCloser: \">\", // Hex: \\x3E.\n      doubleQuote: '\"', // Hex: \\x22.\n      ampersand: \"&\", // Hex: \\x26.\n      quote: \"'\", // Hex: \\x27.\n    };\n  }\n\n  /**\n   * Safe XML special characters. This characters are used instead the standard\n   * the standard to parse the  MathML if safeXML save mode is enable. Each XML\n   * special character have a UTF-8 representation.\n   * @type {Object}\n   */\n  static get safeXmlCharacters() {\n    return {\n      id: \"safeXmlCharacters\",\n      tagOpener: \"«\", // Hex: \\xAB.\n      tagCloser: \"»\", // Hex: \\xBB.\n      doubleQuote: \"¨\", // Hex: \\xA8.\n      ampersand: \"§\", // Hex: \\xA7.\n      quote: \"`\", // Hex: \\x60.\n      realDoubleQuote: \"¨\",\n    };\n  }\n}\n","import Constants from \"./constants\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents a class to manage MathML objects.\n */\nexport default class MathML {\n  /**\n   * Checks if the mathml at position i is inside an HTML attribute or not.\n   * @param {string} content - a string containing MathML code.\n   * @param {number} i -  search index.\n   * @return {boolean} true if is inside an HTML attribute. false otherwise.\n   */\n  static isMathmlInAttribute(content, i) {\n    // Regex =\n    // '^[\\'\"][\\\\s]*=[\\\\s]*[\\\\w-]+([\\\\s]*(\"[^\"]*\"|\\'[^\\']*\\')[\\\\s]*\n    // =[\\\\s]*[\\\\w-]+[\\\\s]*)*[\\\\s]+gmi<';\n    const mathAtt = \"['\\\"][\\\\s]*=[\\\\s]*[\\\\w-]+\"; // \"=att OR '=att\n    const attContent = \"\\\"[^\\\"]*\\\"|'[^']*'\"; // \"blabla\" OR 'blabla'\n    const att = `[\\\\s]*(${attContent})[\\\\s]*=[\\\\s]*[\\\\w-]+[\\\\s]*`; // \"blabla\"=att OR 'blabla'=att\n    const atts = `('${att}')*`; // \"blabla\"=att1 \"blabla\"=att2\n    const regex = `^${mathAtt}${atts}[\\\\s]+gmi<`; // \"=att \"blabla\"=att1 \"blabla\"=att2 gmi< .\n    const expression = new RegExp(regex);\n\n    const actualContent = content.substring(0, i);\n    const reversed = actualContent.split(\"\").reverse().join(\"\");\n    const exists = expression.test(reversed);\n\n    return exists;\n  }\n\n  /**\n   * Decodes an encoded MathML with standard XML tags.\n   * We use these entities because IE doesn't support html entities\n   * on its attributes sometimes. Yes, sometimes.\n   * @param {string} input - string to be decoded.\n   * @return {string} decoded string.\n   */\n  static safeXmlDecode(input) {\n    let { tagOpener } = Constants.safeXmlCharactersEntities;\n    let { tagCloser } = Constants.safeXmlCharactersEntities;\n    let { doubleQuote } = Constants.safeXmlCharactersEntities;\n    let { realDoubleQuote } = Constants.safeXmlCharactersEntities;\n    // Decoding entities.\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\n    // Added to fix problem due to import from 1.9.x.\n    input = input.split(realDoubleQuote).join(Constants.safeXmlCharacters.realDoubleQuote);\n\n    // Blackboard.\n    const { ltElement } = Constants.safeBadBlackboardCharacters;\n    const { gtElement } = Constants.safeBadBlackboardCharacters;\n    const { ampElement } = Constants.safeBadBlackboardCharacters;\n    if (\"_wrs_blackboard\" in window && window._wrs_blackboard) {\n      input = input.split(ltElement).join(Constants.safeGoodBlackboardCharacters.ltElement);\n      input = input.split(gtElement).join(Constants.safeGoodBlackboardCharacters.gtElement);\n      input = input.split(ampElement).join(Constants.safeGoodBlackboardCharacters.ampElement);\n    }\n\n    ({ tagOpener } = Constants.safeXmlCharacters);\n    ({ tagCloser } = Constants.safeXmlCharacters);\n    ({ doubleQuote } = Constants.safeXmlCharacters);\n    ({ realDoubleQuote } = Constants.safeXmlCharacters);\n    const { ampersand } = Constants.safeXmlCharacters;\n    const { quote } = Constants.safeXmlCharacters;\n\n    // Decoding characters.\n    input = input.split(tagOpener).join(Constants.xmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.xmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.xmlCharacters.doubleQuote);\n    input = input.split(ampersand).join(Constants.xmlCharacters.ampersand);\n    input = input.split(quote).join(Constants.xmlCharacters.quote);\n\n    // We are replacing $ by & when its part of an entity for retro-compatibility.\n    // Now, the standard is replace § by &.\n    let returnValue = \"\";\n    let currentEntity = null;\n\n    for (let i = 0; i < input.length; i += 1) {\n      const character = input.charAt(i);\n      if (currentEntity == null) {\n        if (character === \"$\") {\n          currentEntity = \"\";\n        } else {\n          returnValue += character;\n        }\n      } else if (character === \";\") {\n        returnValue += `&${currentEntity}`;\n        currentEntity = null;\n      } else if (character.match(/([a-zA-Z0-9#._-] | '-')/)) {\n        // Character is part of an entity.\n        currentEntity += character;\n      } else {\n        returnValue += `$${currentEntity}`; // Is not an entity.\n        currentEntity = null;\n        i -= 1; // Parse again the current character.\n      }\n    }\n\n    return returnValue;\n  }\n\n  /**\n   * Encodes a MathML with standard XML tags to a MMathML encoded with safe XML tags.\n   * We use these entities because IE doesn't support html entities on its attributes sometimes.\n   * @param {string} input - input string to be encoded\n   * @returns {string} encoded string.\n   */\n  static safeXmlEncode(input) {\n    const { tagOpener } = Constants.xmlCharacters;\n    const { tagCloser } = Constants.xmlCharacters;\n    const { doubleQuote } = Constants.xmlCharacters;\n    const { ampersand } = Constants.xmlCharacters;\n    const { quote } = Constants.xmlCharacters;\n\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\n    input = input.split(ampersand).join(Constants.safeXmlCharacters.ampersand);\n    input = input.split(quote).join(Constants.safeXmlCharacters.quote);\n\n    return input;\n  }\n\n  /**\n   * Converts special symbols (> 128) to entities and replaces all textual\n   * entities by its number entities.\n   * @param {string} mathml - MathML string containing - or not - special symbols\n   * @returns {string} MathML with all textual entities replaced.\n   */\n  static mathMLEntities(mathml) {\n    let toReturn = \"\";\n\n    for (let i = 0; i < mathml.length; i += 1) {\n      const character = mathml.charAt(i);\n\n      // Parsing > 128 characters.\n      if (mathml.codePointAt(i) > 128) {\n        toReturn += `&#${mathml.codePointAt(i)};`;\n        // For UTF-32 characters we need to move the index one position.\n        if (mathml.codePointAt(i) > 0xffff) {\n          i += 1;\n        }\n      } else if (character === \"&\") {\n        const end = mathml.indexOf(\";\", i + 1);\n        if (end >= 0) {\n          const container = document.createElement(\"span\");\n          container.innerHTML = mathml.substring(i, end + 1);\n          toReturn += `&#${Util.fixedCharCodeAt(container.textContent || container.innerText, 0)};`;\n          i = end;\n        } else {\n          toReturn += character;\n        }\n      } else {\n        toReturn += character;\n      }\n    }\n\n    return toReturn;\n  }\n\n  /**\n   * Add a custom editor name with the prefix wrs_ to a MathML class attribute.\n   * @param {string} mathml - a MathML string created with a custom editor, like chemistry.\n   * @param {string} customEditor - custom editor name.\n   * @returns {string} MathML string with his class containing the editor toolbar string.\n   */\n  static addCustomEditorClassAttribute(mathml, customEditor) {\n    let toReturn = \"\";\n\n    const start = mathml.indexOf(\"<math\");\n    if (start === 0) {\n      const end = mathml.indexOf(\">\");\n      if (mathml.indexOf(\"class\") === -1) {\n        // Adding custom editor type.\n        toReturn = `${mathml.substr(start, end)} class=\"wrs_${customEditor}\">`;\n        toReturn += mathml.substr(end + 1, mathml.length);\n        return toReturn;\n      }\n    }\n    return mathml;\n  }\n\n  /**\n   * Remove a custom editor name from the MathML class attribute.\n   * @param {string} mathml - a MathML string.\n   * @param {string} customEditor - custom editor name.\n   * @returns {string} The input MathML without customEditor name in his class.\n   */\n  static removeCustomEditorClassAttribute(mathml, customEditor) {\n    // Discard MathML without the specified class.\n    if (mathml.indexOf(\"class\") === -1 || mathml.indexOf(`wrs_${customEditor}`) === -1) {\n      return mathml;\n    }\n\n    // Trivial case: class attribute value equal to editor name. Then\n    // class attribute is removed.\n    // First try to remove it with a space before if there is one\n    // Otherwise without the space\n    if (mathml.indexOf(` class=\"wrs_${customEditor}\"`) !== -1) {\n      return mathml.replace(` class=\"wrs_${customEditor}\"`, \"\");\n    } else if (mathml.indexOf(`class=\"wrs_${customEditor}\"`) !== -1) {\n      return mathml.replace(`class=\"wrs_${customEditor}\"`, \"\");\n    }\n\n    // Non Trivial case: class attribute contains editor name.\n    return mathml.replace(`wrs_${customEditor}`, \"\");\n  }\n\n  /**\n   * Adds annotation tag in MathML element.\n   * @param {String} mathml - valid MathML.\n   * @param {String} content - value to put inside annotation tag.\n   * @param {String} annotationEncoding - annotation encoding.\n   * @returns {String} - 'mathml' with an annotation that contains\n   * 'content' and encoding 'encoding'.\n   */\n  static addAnnotation(mathml, content, annotationEncoding) {\n    // If contains annotation, also contains semantics tag.\n    const containsAnnotation = mathml.indexOf(\"<annotation\");\n\n    let mathmlWithAnnotation = \"\";\n    if (containsAnnotation !== -1) {\n      const closeSemanticsIndex = mathml.indexOf(\"</semantics>\");\n      mathmlWithAnnotation = `${mathml.substring(0, closeSemanticsIndex)}<annotation encoding=\"${annotationEncoding}\">${content}</annotation>${mathml.substring(closeSemanticsIndex)}`;\n    } else if (MathML.isEmpty(mathml)) {\n      const endIndexInline = mathml.indexOf(\"/>\");\n      const endIndexNonInline = mathml.indexOf(\">\");\n      const endIndex = endIndexNonInline === endIndexInline ? endIndexInline : endIndexNonInline;\n      mathmlWithAnnotation = `${mathml.substring(0, endIndex)}><semantics><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`;\n    } else {\n      const beginMathMLContent = mathml.indexOf(\">\") + 1;\n      const endMathmlContent = mathml.lastIndexOf(\"</math>\");\n      const mathmlContent = mathml.substring(beginMathMLContent, endMathmlContent);\n      mathmlWithAnnotation = `${mathml.substring(0, beginMathMLContent)}<semantics><mrow>${mathmlContent}</mrow><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`; // eslint-disable-line max-len\n    }\n\n    return mathmlWithAnnotation;\n  }\n\n  /**\n   * Removes specific annotation tag in MathML element.\n   * In case of remove the unique annotation, also is removed semantics tag.\n   * @param {String} mathml - valid MathML.\n   * @param {String} annotationEncoding - annotation encoding to remove.\n   * @returns {String} - 'mathml' without the annotation encoding specified.\n   */\n  static removeAnnotation(mathml, annotationEncoding) {\n    let mathmlWithoutAnnotation = mathml;\n    const openAnnotationTag = `<annotation encoding=\"${annotationEncoding}\">`;\n    const closeAnnotationTag = \"</annotation>\";\n    const startAnnotationIndex = mathml.indexOf(openAnnotationTag);\n    if (startAnnotationIndex !== -1) {\n      let differentAnnotationFound = false;\n      let differentAnnotationIndex = mathml.indexOf(\"<annotation\");\n      while (differentAnnotationIndex !== -1) {\n        if (differentAnnotationIndex !== startAnnotationIndex) {\n          differentAnnotationFound = true;\n        }\n        differentAnnotationIndex = mathml.indexOf(\"<annotation\", differentAnnotationIndex + 1);\n      }\n\n      if (differentAnnotationFound) {\n        const closeIndex = mathml.indexOf(closeAnnotationTag, startAnnotationIndex);\n        const endAnnotationIndex = closeIndex + closeAnnotationTag.length;\n        const startIndex = mathml.substring(0, startAnnotationIndex);\n        mathmlWithoutAnnotation = startIndex + mathml.substring(endAnnotationIndex);\n      } else {\n        mathmlWithoutAnnotation = MathML.removeSemantics(mathml);\n      }\n    }\n\n    return mathmlWithoutAnnotation;\n  }\n\n  /**\n   * Removes semantics tag to mathml.\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\n   * @param {string} mathml - MathML string.\n   * @returns {string} - 'mathml' without semantics tag.\n   */\n  static removeSemantics(mathml) {\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\n    const semanticsStartingTagRegex = /<semantics>\\s*?(<mrow>)?/gm;\n\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\n    const semanticsEndingTagRegex = /(<\\/mrow>)?\\s*<annotation[\\W\\w]*?<\\/semantics>/gm;\n\n    return mathml.replace(semanticsStartingTagRegex, \"\").replace(semanticsEndingTagRegex, \"\");\n  }\n\n  /**\n   * Removes semantics tag to element that contains mathml.\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\n   * @param {string} element - Inner HTML text string.\n   * @returns {string} - 'mathml' without semantics tag.\n   */\n  static removeSafeXMLSemantics(element) {\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\n    const semanticsSafeStartingTagRegex = /«semantics»\\s*?(«mrow»)?/gm;\n\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\n    const semanticsSafeEndingTagRegex = /(«\\/mrow»)?\\s*«annotation[\\W\\w]*?«\\/semantics»/gm;\n\n    return element.replace(semanticsSafeStartingTagRegex, \"\").replace(semanticsSafeEndingTagRegex, \"\");\n  }\n\n  /**\n   * Transforms all xml mathml occurrences that contain semantics to the same\n   * xml mathml occurrences without semantics.\n   * @param {string} text - string that can contain xml mathml occurrences.\n   * @param {Constants} [characters] - Constant object containing xmlCharacters\n   * or safeXmlCharacters relation.\n   * xmlCharacters by default.\n   * @returns {string} - 'text' with all xml mathml occurrences without annotation tag.\n   */\n  static removeSemanticsOcurrences(text, characters = Constants.xmlCharacters) {\n    const mathTagStart = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    const mathTagEndline = `/${characters.tagCloser}`;\n    const { tagCloser } = characters;\n    const semanticsTagStart = `${characters.tagOpener}semantics${characters.tagCloser}`;\n    const annotationTagStart = `${characters.tagOpener}annotation encoding=`;\n\n    let output = \"\";\n    let start = text.indexOf(mathTagStart);\n    let end = 0;\n    while (start !== -1) {\n      output += text.substring(end, start);\n\n      // MathML can be written as '<math></math>' or '<math />'.\n      const mathTagEndIndex = text.indexOf(mathTagEnd, start);\n      const mathTagEndlineIndex = text.indexOf(mathTagEndline, start);\n      const firstTagCloser = text.indexOf(tagCloser, start);\n      if (mathTagEndIndex !== -1) {\n        end = mathTagEndIndex;\n      } else if (mathTagEndlineIndex === firstTagCloser - 1) {\n        end = mathTagEndlineIndex;\n      }\n\n      const semanticsIndex = text.indexOf(semanticsTagStart, start);\n      if (semanticsIndex !== -1) {\n        const mmlTagStart = text.substring(start, semanticsIndex);\n        const annotationIndex = text.indexOf(annotationTagStart, start);\n        if (annotationIndex !== -1) {\n          const startIndex = semanticsIndex + semanticsTagStart.length;\n          const mmlContent = text.substring(startIndex, annotationIndex);\n          output += mmlTagStart + mmlContent + mathTagEnd;\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\n          end += mathTagEnd.length;\n        } else {\n          end = start;\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\n        }\n      } else {\n        end = start;\n        start = text.indexOf(mathTagStart, start + mathTagStart.length);\n      }\n    }\n\n    output += text.substring(end, text.length);\n    return output;\n  }\n\n  /**\n   * Returns true if a MathML contains a certain class.\n   * @param {string} mathML - input MathML.\n   * @param {string} className - className.\n   * @returns {boolean} true if the input MathML contains the input class.\n   * false otherwise.\n   * @static\n   */\n  static containClass(mathML, className) {\n    const classIndex = mathML.indexOf(\"class\");\n    if (classIndex === -1) {\n      return false;\n    }\n    const classTagEndIndex = mathML.indexOf(\">\", classIndex);\n    const classTag = mathML.substring(classIndex, classTagEndIndex);\n    if (classTag.indexOf(className) !== -1) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns true if mathml is empty. Otherwise, false.\n   * @param {string} mathml - valid MathML with standard XML tags.\n   * @returns {boolean} - true if mathml is empty. Otherwise, false.\n   */\n  static isEmpty(mathml) {\n    // MathML can have the shape <math></math> or '<math />'.\n    const closeTag = \">\";\n    const closeTagInline = \"/>\";\n    const firstCloseTagIndex = mathml.indexOf(closeTag);\n    const firstCloseTagInlineIndex = mathml.indexOf(closeTagInline);\n    let empty = false;\n    // MathML is always empty in the second shape.\n    if (firstCloseTagInlineIndex !== -1) {\n      if (firstCloseTagInlineIndex === firstCloseTagIndex - 1) {\n        empty = true;\n      }\n    }\n\n    // MathML is always empty in the first shape when there aren't elements\n    // between math tags.\n    if (!empty) {\n      const mathTagEndRegex = new RegExp(\"</(.+:)?math>\");\n      const mathTagEndArray = mathTagEndRegex.exec(mathml);\n      if (mathTagEndArray) {\n        empty = firstCloseTagIndex + 1 === mathTagEndArray.index;\n      }\n    }\n\n    return empty;\n  }\n\n  /**\n   * Encodes html entities inside properties.\n   * @param {String} mathml - valid MathML with standard XML tags.\n   * @returns {String} - 'mathml' with property entities encoded.\n   */\n  static encodeProperties(mathml) {\n    // Search all the properties.\n    const regex = /\\w+=\".*?\"/g;\n    // Encode html entities.\n    const replacer = (match) => {\n      // It has the shape:\n      // <math propertyOne=\"somethingOne\"><children propertyTwo=\"somethingTwo\"></children></math>.\n      const quoteIndex = match.indexOf('\"');\n      const propertyValue = match.substring(quoteIndex + 1, match.length - 1);\n      const propertyValueEncoded = Util.htmlEntities(propertyValue);\n      const matchEncoded = `${match.substring(0, quoteIndex + 1)}${propertyValueEncoded}\"`;\n      return matchEncoded;\n    };\n\n    const mathmlEncoded = mathml.replace(regex, replacer);\n    return mathmlEncoded;\n  }\n}\n","/**\n * This class represents the configuration class.\n * Usually used to retrieve configuration properties generated in the backend into the frontend.\n */\nexport default class Configuration {\n  /**\n   * Adds a properties object to {@link Configuration.properties}.\n   * @param {Object} properties - properties to append to current properties.\n   */\n  static addConfiguration(properties) {\n    Object.assign(Configuration.properties, properties);\n  }\n\n  /**\n   * Static property.\n   * The configuration properties object.\n   * @private\n   * @type {Object}\n   */\n  static get properties() {\n    return Configuration._properties;\n  }\n\n  /**\n   * Static property setter.\n   * Set configuration properties.\n   * @param {Object} value - The property value.\n   * @ignore\n   */\n  static set properties(value) {\n    Configuration._properties = value;\n  }\n\n  /**\n   * Returns the value of a property key.\n   * @param {String} key - Property key\n   * @returns {String} Property value\n   */\n  static get(key) {\n    if (!Object.prototype.hasOwnProperty.call(Configuration.properties, key)) {\n      // Backwards compatibility.\n      if (Object.prototype.hasOwnProperty.call(Configuration.properties, \"_wrs_conf_\")) {\n        return Configuration.properties[`_wrs_conf_${key}`];\n      }\n      return false;\n    }\n    return Configuration.properties[key];\n  }\n\n  /**\n   * Adds a new property to Configuration class.\n   * @param {String} key - Property key.\n   * @param {Object} value - Property value.\n   */\n  static set(key, value) {\n    Configuration.properties[key] = value;\n  }\n\n  /**\n   * Updates a property object value with new values.\n   * @param {String} key - The property key to be updated.\n   * @param {Object} propertyValue - Object containing the new values.\n   */\n  static update(key, propertyValue) {\n    if (!Configuration.get(key)) {\n      Configuration.set(key, propertyValue);\n    } else {\n      const updateProperty = Object.assign(Configuration.get(key), propertyValue);\n      Configuration.set(key, updateProperty);\n    }\n  }\n}\n\n/**\n * Static properties object. Stores all configuration properties.\n * Needed to attribute accessors.\n * @private\n * @type {Object}\n */\nConfiguration._properties = {};\n","export default class TextCache {\n  /**\n   * @classdesc\n   * This class represent a client-side text cache class. Contains pairs of\n   * strings (key/value) which can be retrieved in any moment. Usually used\n   * to store AJAX responses for text services like mathml2latex\n   * (c.f {@link Latex} class) or mathml2accessible (c.f {@link Accessibility} class).\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Cache array property storing the cache entries.\n     * @type {Array.<String>}\n     */\n    this.cache = [];\n  }\n\n  /**\n   * This method populates a key/value pair into the {@link this.cache} property.\n   * @param {String} key - Cache key, usually the service string parameter.\n   * @param {String} value - Cache value, usually the service response.\n   */\n  populate(key, value) {\n    this.cache[key] = value;\n  }\n\n  /**\n   * Returns the cache value associated to certain cache key.\n   * @param {String} key - Cache key, usually the service string parameter.\n   * @return {String} value - Cache value, if exists. False otherwise.\n   */\n  get(key) {\n    if (Object.prototype.hasOwnProperty.call(this.cache, key)) {\n      return this.cache[key];\n    }\n    return false;\n  }\n}\n","/**\n * This object represents a custom listener.\n * @typedef {Object} Listener\n * @property {String} Listener.eventName - The listener name.\n * @property {Function} Listener.callback - The listener callback function.\n */\n\nexport default class Listeners {\n  /**\n   * @classdesc\n   * This class represents a custom listeners manager.\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Array containing all custom listeners.\n     * @type {Object[]}\n     */\n    this.listeners = [];\n  }\n\n  /**\n   * Add a listener to Listener class.\n   * @param {Object} listener - A listener object.\n   */\n  add(listener) {\n    this.listeners.push(listener);\n  }\n\n  /**\n   * Fires MathType event listeners\n   * @param {String} eventName - event name\n   * @param {Event} event - event object.\n   * @return {boolean} false if event has been prevented. true otherwise.\n   */\n  fire(eventName, event) {\n    for (let i = 0; i < this.listeners.length && !event.cancelled; i += 1) {\n      if (this.listeners[i].eventName === eventName) {\n        // Calling listener.\n        this.listeners[i].callback(event);\n      }\n    }\n    return event.defaultPrevented;\n  }\n\n  /**\n   * Creates a new listener object.\n   * @param {string} eventName - Event name.\n   * @param {Object} callback - Callback function.\n   * @returns {object} the listener object.\n   */\n  static newListener(eventName, callback) {\n    const listener = {};\n    listener.eventName = eventName;\n    listener.callback = callback;\n    return listener;\n  }\n}\n","import Util from \"./util\";\nimport Listeners from \"./listeners\";\nimport Configuration from \"./configuration\";\n\n/**\n * @typedef {Object} ServiceProviderProperties\n * @property {String} URI - Service URI.\n * @property {String} server - Service server language.\n */\n\n/**\n * @classdesc\n * Class representing a serviceProvider. A serviceProvider is a class containing\n * an arbitrary number of services with the correspondent path.\n */\nexport default class ServiceProvider {\n  /**\n   * Returns Service Provider listeners.\n   * @type {Listeners}\n   */\n  static get listeners() {\n    return ServiceProvider._listeners;\n  }\n\n  /**\n   * Adds a {@link Listener} instance to {@link ServiceProvider} class.\n   * @param {Listener} listener - Instance of {@link Listener}.\n   */\n  static addListener(listener) {\n    ServiceProvider.listeners.add(listener);\n  }\n\n  /**\n   * Fires events in Service Provider.\n   * @param {String} eventName - Event name.\n   * @param {Event} event - Event object.\n   */\n  static fireEvent(eventName, event) {\n    ServiceProvider.listeners.fire(eventName, event);\n  }\n\n  /**\n   * Service parameters.\n   * @type {ServiceProviderProperties}\n   *\n   */\n  static get parameters() {\n    return ServiceProvider._parameters;\n  }\n\n  /**\n   * Service parameters.\n   * @private\n   * @type {ServiceProviderProperties}\n   */\n  static set parameters(parameters) {\n    ServiceProvider._parameters = parameters;\n  }\n\n  /**\n   * Static property.\n   * Return service provider paths.\n   * @private\n   * @type {String}\n   */\n  static get servicePaths() {\n    return ServiceProvider._servicePaths;\n  }\n\n  /**\n   * Static property setter.\n   * Set service paths.\n   * @param {String} value - The property value.\n   * @ignore\n   */\n  static set servicePaths(value) {\n    ServiceProvider._servicePaths = value;\n  }\n\n  /**\n   * Adds a new service to the ServiceProvider.\n   * @param {String} service - Service name.\n   * @param {String} path - Service path.\n   * @static\n   */\n  static setServicePath(service, path) {\n    ServiceProvider.servicePaths[service] = path;\n  }\n\n  /**\n   * Returns the service path for a certain service.\n   * @param {String} serviceName - Service name.\n   * @returns {String} The service path.\n   * @static\n   */\n  static getServicePath(serviceName) {\n    return ServiceProvider.servicePaths[serviceName];\n  }\n\n  /**\n   * Static property.\n   * Service provider integration path.\n   * @type {String}\n   */\n  static get integrationPath() {\n    return ServiceProvider._integrationPath;\n  }\n\n  /**\n   * Static property setter.\n   * Set service provider integration path.\n   * @param {String} value - The property value.\n   * @ignore\n   */\n  static set integrationPath(value) {\n    ServiceProvider._integrationPath = value;\n  }\n\n  /**\n   * Returns the server URL in the form protocol://serverName:serverPort.\n   * @return {String} The client side server path.\n   */\n  static getServerURL() {\n    const url = window.location.href;\n    const arr = url.split(\"/\");\n    const result = `${arr[0]}//${arr[2]}`;\n    return result;\n  }\n\n  /**\n   * Inits {@link this} class. Uses {@link this.integrationPath} as\n   * base path to generate all backend services paths.\n   * @param {Object} parameters - Function parameters.\n   * @param {String} parameters.integrationPath - Service path.\n   */\n  static init(parameters) {\n    ServiceProvider.parameters = parameters;\n    // Services path (tech dependant).\n    let configurationURI = ServiceProvider.createServiceURI(\"configurationjs\");\n    let createImageURI = ServiceProvider.createServiceURI(\"createimage\");\n    let showImageURI = ServiceProvider.createServiceURI(\"showimage\");\n    let getMathMLURI = ServiceProvider.createServiceURI(\"getmathml\");\n    let serviceURI = ServiceProvider.createServiceURI(\"service\");\n\n    // Some backend integrations (like Java o Ruby) have an absolute backend path,\n    // for example: /app/service. For them we calculate the absolute URL path, i.e\n    // protocol://domain:port/app/service\n    if (ServiceProvider.parameters.URI.indexOf(\"/\") === 0) {\n      const serverPath = ServiceProvider.getServerURL();\n      configurationURI = serverPath + configurationURI;\n      showImageURI = serverPath + showImageURI;\n      createImageURI = serverPath + createImageURI;\n      getMathMLURI = serverPath + getMathMLURI;\n      serviceURI = serverPath + serviceURI;\n    }\n\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\n    ServiceProvider.setServicePath(\"showimage\", showImageURI);\n    ServiceProvider.setServicePath(\"createimage\", createImageURI);\n    ServiceProvider.setServicePath(\"service\", serviceURI);\n    ServiceProvider.setServicePath(\"getmathml\", getMathMLURI);\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\n\n    ServiceProvider.listeners.fire(\"onInit\", {});\n  }\n\n  /**\n   * Gets the content from an URL.\n   * @param {String} url - Target URL.\n   * @param {Object} [postVariables] - Object containing post variables.\n   * null if a GET query should be done.\n   * @returns {String} Content of the target URL.\n   * @private\n   * @static\n   */\n  static getUrl(url, postVariables) {\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n    const httpRequest = Util.createHttpRequest();\n\n    if (httpRequest) {\n      if (typeof postVariables === \"undefined\" || typeof postVariables === \"undefined\") {\n        httpRequest.open(\"GET\", url, false);\n      } else if (url.substr(0, 1) === \"/\" || url.substr(0, 7) === \"http://\" || url.substr(0, 8) === \"https://\") {\n        httpRequest.open(\"POST\", url, false);\n      } else {\n        httpRequest.open(\"POST\", currentPath + url, false);\n      }\n\n      let header = Configuration.get(\"customHeaders\");\n      if (header) {\n        if (typeof header === \"string\") {\n          header = Util.convertStringToObject(header);\n        }\n        Object.entries(header).forEach(([key, val]) => httpRequest.setRequestHeader(key, val));\n      }\n\n      if (typeof postVariables !== \"undefined\" && postVariables) {\n        httpRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n        httpRequest.send(Util.httpBuildQuery(postVariables));\n      } else {\n        httpRequest.send(null);\n      }\n\n      return httpRequest.responseText;\n    }\n    return \"\";\n  }\n\n  /**\n   * Returns the response text of a certain service.\n   * @param {String} service - Service name.\n   * @param {String} postVariables - Post variables.\n   * @param {Boolean} get - True if the request is GET instead of POST. false otherwise.\n   * @returns {String} Service response text.\n   */\n  static getService(service, postVariables, get) {\n    let response;\n    if (get === true) {\n      const getVariables = postVariables ? `?${postVariables}` : \"\";\n      const serviceUrl = `${ServiceProvider.getServicePath(service)}${getVariables}`;\n      response = ServiceProvider.getUrl(serviceUrl);\n    } else {\n      const serviceUrl = ServiceProvider.getServicePath(service);\n      response = ServiceProvider.getUrl(serviceUrl, postVariables);\n    }\n    return response;\n  }\n\n  /**\n   * Returns the server language of a certain service. The possible values\n   * are: php, aspx, java and ruby.\n   * This method has backward compatibility purposes.\n   * @param {String} service - The configuration service.\n   * @returns {String} - The server technology associated with the configuration service.\n   */\n  static getServerLanguageFromService(service) {\n    if (service.indexOf(\".php\") !== -1) {\n      return \"php\";\n    }\n    if (service.indexOf(\".aspx\") !== -1) {\n      return \"aspx\";\n    }\n    if (service.indexOf(\"wirispluginengine\") !== -1) {\n      return \"ruby\";\n    }\n    return \"java\";\n  }\n\n  /**\n   * Returns the URI associated with a certain service.\n   * @param {String} service - The service name.\n   * @return {String} The service path.\n   */\n  static createServiceURI(service) {\n    const extension = ServiceProvider.serverExtension();\n    return Util.concatenateUrl(ServiceProvider.parameters.URI, service) + extension;\n  }\n\n  static serverExtension() {\n    if (ServiceProvider.parameters.server.indexOf(\"php\") !== -1) {\n      return \".php\";\n    }\n    if (ServiceProvider.parameters.server.indexOf(\"aspx\") !== -1) {\n      return \".aspx\";\n    }\n    return \"\";\n  }\n}\n\n/**\n * @property {String} service - The service name.\n * @property {String} path - The service path.\n * @static\n */\nServiceProvider._servicePaths = {};\n\n/**\n * The integration path. Contains the path of the configuration service.\n * Used to define the path for all services.\n * @type {String}\n * @private\n */\nServiceProvider._integrationPath = \"\";\n\n/**\n * ServiceProvider static listeners.\n * @type {Listeners}\n * @private\n */\nServiceProvider._listeners = new Listeners();\n\n/**\n * Service provider parameters.\n * @type {ServiceProviderParameters}\n */\nServiceProvider._parameters = {};\n","import TextCache from \"./textcache\";\nimport MathML from \"./mathml\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Constants from \"./constants\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents a LaTeX parser. Manages the services which allows to convert\n * LaTeX into MathML and MathML into LaTeX.\n */\nexport default class Latex {\n  /**\n   * Static property.\n   * Return latex cache.\n   * @private\n   * @type {Cache}\n   */\n  static get cache() {\n    return Latex._cache;\n  }\n\n  /**\n   * Static property setter.\n   * Set latex cache.\n   * @param {Cache} value - The property value.\n   * @ignore\n   */\n  static set cache(value) {\n    Latex._cache = value;\n  }\n\n  /**\n   * Converts MathML to LaTeX by calling mathml2latex service. For text services\n   * we call a text service with the param mathml2latex.\n   * @param {String} mathml - MathML String.\n   * @return {String} LaTeX string generated by the MathML argument.\n   */\n  static getLatexFromMathML(mathml) {\n    const mathmlWithoutSemantics = MathML.removeSemantics(mathml);\n    /**\n     * @type {TextCache}\n     */\n    const { cache } = Latex;\n\n    const data = {\n      service: \"mathml2latex\",\n      mml: mathmlWithoutSemantics,\n    };\n\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n\n    // TODO: Error handling.\n    let latex = \"\";\n\n    if (jsonResponse.status === \"ok\") {\n      latex = jsonResponse.result.text;\n      const latexHtmlEntitiesEncoded = Util.htmlEntities(latex);\n      // Inserting LaTeX semantics.\n      const mathmlWithSemantics = MathML.addAnnotation(mathml, latexHtmlEntitiesEncoded, \"LaTeX\");\n      cache.populate(latex, mathmlWithSemantics);\n    }\n\n    return latex;\n  }\n\n  /**\n   * Converts LaTeX to MathML by calling latex2mathml service. For text services\n   * we call a text service with the param latex2mathml.\n   * @param {String} latex - String containing a LaTeX formula.\n   * @param {Boolean} includeLatexOnSemantics\n   * - If true LaTeX would me included into MathML semantics.\n   * @return {String} MathML string generated by the LaTeX argument.\n   */\n  static getMathMLFromLatex(latex, includeLatexOnSemantics) {\n    /**\n     * @type {TextCache}\n     */\n    const latexCache = Latex.cache;\n\n    if (Latex.cache.get(latex)) {\n      return Latex.cache.get(latex);\n    }\n    const data = {\n      service: \"latex2mathml\",\n      latex,\n    };\n\n    if (includeLatexOnSemantics) {\n      data.saveLatex = \"\";\n    }\n\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n\n    let output;\n    if (jsonResponse.status === \"ok\") {\n      let mathml = jsonResponse.result.text;\n      mathml = mathml.split(\"\\r\").join(\"\").split(\"\\n\").join(\" \");\n\n      // Populate LatexCache.\n      if (mathml.indexOf(\"semantics\") === -1 && mathml.indexOf(\"annotation\") === -1) {\n        const content = Util.htmlEntities(latex);\n        mathml = MathML.addAnnotation(mathml, content, \"LaTeX\");\n        output = mathml;\n      } else {\n        output = mathml;\n      }\n      if (!latexCache.get(latex)) {\n        latexCache.populate(latex, mathml);\n      }\n    } else {\n      output = `$$${latex}$$`;\n    }\n    return output;\n  }\n\n  /**\n   * Converts all occurrences of MathML code to LaTeX.\n   * The MathML code should containing <annotation encoding=\"LaTeX\"/> to be converted.\n   * @param {String} content - A string containing MathML valid code.\n   * @param {Object} characters - An object containing special characters.\n   * @return {String} A string containing all MathML annotated occurrences\n   * replaced by the corresponding LaTeX code.\n   */\n  static parseMathmlToLatex(content, characters) {\n    let output = \"\";\n    const mathTagBegin = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    const openTarget = `${characters.tagOpener}annotation encoding=${characters.doubleQuote}LaTeX${characters.doubleQuote}${characters.tagCloser}`;\n    const closeTarget = `${characters.tagOpener}/annotation${characters.tagCloser}`;\n    let start = content.indexOf(mathTagBegin);\n    let end = 0;\n    let mathml;\n    let startAnnotation;\n    let closeAnnotation;\n\n    while (start !== -1) {\n      output += content.substring(end, start);\n      end = content.indexOf(mathTagEnd, start);\n\n      if (end === -1) {\n        end = content.length - 1;\n      } else {\n        end += mathTagEnd.length;\n      }\n\n      mathml = content.substring(start, end);\n\n      startAnnotation = mathml.indexOf(openTarget);\n      if (startAnnotation !== -1) {\n        startAnnotation += openTarget.length;\n        closeAnnotation = mathml.indexOf(closeTarget);\n        let latex = mathml.substring(startAnnotation, closeAnnotation);\n        if (characters === Constants.safeXmlCharacters) {\n          latex = MathML.safeXmlDecode(latex);\n        }\n        output += `$$${latex}$$`;\n        // Populate latex into cache.\n\n        Latex.cache.populate(latex, mathml);\n      } else {\n        output += mathml;\n      }\n      start = content.indexOf(mathTagBegin, end);\n    }\n\n    output += content.substring(end, content.length);\n    return output;\n  }\n\n  /**\n   * Extracts the latex of a determined position in a text.\n   * @param {Node} textNode - textNode to extract the LaTeX\n   * @param {Number} caretPosition - Starting position to find LaTeX.\n   * @param {Object} latexTags - Optional parameter representing tags between latex is inserted.\n   * It has the 'open' attribute for the open tag and the 'close' attribute for the close tag.\n   * \"$$\" by default.\n   * @return {Object} An object with 3 keys: 'latex', 'start' and 'end'. Null if latex is not found.\n   * @static\n   */\n  static getLatexFromTextNode(textNode, caretPosition, latexTags) {\n    // TODO: Set LaTeX Tags as Core variable. Fix the call to this function (third argument).\n    // Tags used for LaTeX formulas.\n    const defaultLatexTags = {\n      open: \"$$\",\n      close: \"$$\",\n    };\n    // latexTags is an optional parameter. If is not set, use default latexTags.\n    if (typeof latexTags === \"undefined\" || latexTags == null) {\n      latexTags = defaultLatexTags;\n    }\n    // Looking for the first textNode.\n    let startNode = textNode;\n\n    while (startNode.previousSibling && startNode.previousSibling.nodeType === 3) {\n      // TEXT_NODE.\n      startNode = startNode.previousSibling;\n    }\n\n    /**\n     * Returns the next latex position and node from a specific node and position.\n     * @param {Node} currentNode - Node where searching latex.\n     * @param {Number} currentPosition - Current position inside the currentNode.\n     * @param {Object} latexTagsToUse - Tags used at latex beginning and latex final.\n     * \"$$\" by default.\n     * @param {Boolean} tag - Tag containing the current search.\n     * @returns {Object} Object containing the current node and the position.\n     */\n    function getNextLatexPosition(currentNode, currentPosition, tag) {\n      let position = currentNode.nodeValue.indexOf(tag, currentPosition);\n\n      while (position === -1) {\n        currentNode = currentNode.nextSibling;\n\n        if (!currentNode) {\n          // TEXT_NODE.\n          return null; // Not found.\n        }\n\n        position = currentNode.nodeValue ? currentNode.nodeValue.indexOf(latexTags.close) : -1;\n      }\n\n      return {\n        node: currentNode,\n        position,\n      };\n    }\n\n    /**\n     * Determines if a node is previous, or not, to a second one.\n     * @param {Node} node - Start node.\n     * @param {Number} position - Start node position.\n     * @param {Node} endNode - End node.\n     * @param {Number} endPosition - End node position.\n     * @returns {Boolean} True if the starting node is previous thant the en node. false otherwise.\n     */\n    function isPrevious(node, position, endNode, endPosition) {\n      if (node === endNode) {\n        return position <= endPosition;\n      }\n      while (node && node !== endNode) {\n        node = node.nextSibling;\n      }\n\n      return node === endNode;\n    }\n\n    let start;\n    let end = {\n      node: startNode,\n      position: 0,\n    };\n    // Is supposed that open and close tags has the same length.\n    const tagLength = latexTags.open.length;\n    do {\n      start = getNextLatexPosition(end.node, end.position, latexTags.open);\n\n      if (start == null || isPrevious(textNode, caretPosition, start.node, start.position)) {\n        return null;\n      }\n\n      end = getNextLatexPosition(start.node, start.position + tagLength, latexTags.close);\n\n      if (end == null) {\n        return null;\n      }\n\n      end.position += tagLength;\n    } while (isPrevious(end.node, end.position, textNode, caretPosition));\n\n    // Isolating latex.\n    let latex;\n\n    if (start.node === end.node) {\n      latex = start.node.nodeValue.substring(start.position + tagLength, end.position - tagLength);\n    } else {\n      const index = start.position + tagLength;\n      latex = start.node.nodeValue.substring(index, start.node.nodeValue.length);\n      let currentNode = start.node;\n\n      do {\n        currentNode = currentNode.nextSibling;\n        if (currentNode === end.node) {\n          latex += end.node.nodeValue.substring(0, end.position - tagLength);\n        } else {\n          latex += currentNode.nodeValue ? currentNode.nodeValue : \"\";\n        }\n      } while (currentNode !== end.node);\n    }\n\n    return {\n      latex,\n      startNode: start.node,\n      startPosition: start.position,\n      endNode: end.node,\n      endPosition: end.position,\n    };\n  }\n}\n\n/**\n * Text cache. Stores all processed LaTeX strings and it's correspondent MathML string.\n * @type {Cache}\n * @static\n */\nLatex._cache = new TextCache();\n","import translations from \"../lang/strings.json\";\n/**\n * This class represents a string manager. It's used to load localized strings.\n */\nexport default class StringManager {\n  constructor() {\n    throw new Error(\"Static class StringManager can not be instantiated.\");\n  }\n\n  /**\n   * Returns the associated value of certain string key. If the associated value\n   * doesn't exits returns the original key.\n   * @param {string} key - string key\n   * @param {string} lang - DEFAULT = null. Specify the language to translate the string\n   * @returns {string} correspondent value. If doesn't exists original key.\n   */\n  static get(key, lang) {\n    // Default language definition\n    let { language } = this;\n\n    // If parameter language, use it\n    if (lang) {\n      language = lang;\n    }\n\n    // Cut down on strings. e.g. en_US -> en\n    if (language && language.length > 2) {\n      language = language.slice(0, 2);\n    }\n\n    // Check if we support the language\n    if (!this.strings.hasOwnProperty(language)) {\n      // eslint-disable-line no-prototype-builtins\n      console.warn(`Unknown language ${language} set in StringManager.`);\n      language = \"en\";\n    }\n\n    // Check if the key is supported in the given language\n    if (!this.strings[language].hasOwnProperty(key)) {\n      // eslint-disable-line no-prototype-builtins\n      console.warn(`Unknown key ${key} for language ${language} in StringManager.`);\n      return key;\n    }\n\n    return this.strings[language][key];\n  }\n}\n\n/**\n * Dictionary of dictionaries:\n * Key: language code\n * Value: Key: id of the string\n *        Value: translation of the string\n */\nStringManager.strings = translations;\n\n/**\n * Language of the translations; English by default\n */\nStringManager.language = \"en\";\n","/* eslint-disable no-bitwise */\nimport DOMPurify from \"dompurify\";\nimport MathML from \"./mathml\";\nimport Configuration from \"./configuration\";\nimport Latex from \"./latex\";\nimport StringManager from \"./stringmanager\";\n\n/**\n * This class represents an utility class.\n */\nexport default class Util {\n  /**\n   * Fires an event in a target.\n   * @param {EventTarget} eventTarget - target where event should be fired.\n   * @param {string} eventName event to fire.\n   * @static\n   */\n  static fireEvent(eventTarget, eventName) {\n    if (document.createEvent) {\n      const eventObject = document.createEvent(\"HTMLEvents\");\n      eventObject.initEvent(eventName, true, true);\n      return !eventTarget.dispatchEvent(eventObject);\n    }\n\n    const eventObject = document.createEventObject();\n    return eventTarget.fireEvent(`on${eventName}`, eventObject);\n  }\n\n  /**\n   * Cross-browser addEventListener/attachEvent function.\n   * @param {EventTarget} eventTarget - target to add the event.\n   * @param {string} eventName - specifies the type of event.\n   * @param {Function} callBackFunction - callback function.\n   * @static\n   */\n  static addEvent(eventTarget, eventName, callBackFunction) {\n    if (eventTarget.addEventListener) {\n      eventTarget.addEventListener(eventName, callBackFunction, true);\n    } else if (eventTarget.attachEvent) {\n      // Backwards compatibility.\n      eventTarget.attachEvent(`on${eventName}`, callBackFunction);\n    }\n  }\n\n  /**\n   * Cross-browser removeEventListener/detachEvent function.\n   * @param {EventTarget} eventTarget - target to add the event.\n   * @param {string} eventName - specifies the type of event.\n   * @param {Function} callBackFunction - function to remove from the event target.\n   * @static\n   */\n  static removeEvent(eventTarget, eventName, callBackFunction) {\n    if (eventTarget.removeEventListener) {\n      eventTarget.removeEventListener(eventName, callBackFunction, true);\n    } else if (eventTarget.detachEvent) {\n      eventTarget.detachEvent(`on${eventName}`, callBackFunction);\n    }\n  }\n\n  /**\n   * Adds the a callback function, for a certain event target, to the following event types:\n   * - dblclick\n   * - mousedown\n   * - mouseup\n   * @param {EventTarget} eventTarget - event target.\n   * @param {Function} doubleClickHandler - function to run when on dblclick event.\n   * @param {Function} mousedownHandler - function to run when on mousedown event.\n   * @param {Function} mouseupHandler - function to run when on mouseup event.\n   * @static\n   */\n  static addElementEvents(eventTarget, doubleClickHandler, mousedownHandler, mouseupHandler) {\n    if (doubleClickHandler) {\n      this.callbackDblclick = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        doubleClickHandler(element, realEvent);\n      };\n\n      Util.addEvent(eventTarget, \"dblclick\", this.callbackDblclick);\n    }\n\n    if (mousedownHandler) {\n      this.callbackMousedown = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        mousedownHandler(element, realEvent);\n      };\n\n      Util.addEvent(eventTarget, \"mousedown\", this.callbackMousedown);\n    }\n\n    if (mouseupHandler) {\n      this.callbackMouseup = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        mouseupHandler(element, realEvent);\n      };\n      // Chrome doesn't trigger this event for eventTarget if we release the mouse button\n      // while the mouse is outside the editor text field.\n      // This is a workaround: we trigger the event independently of where the mouse\n      // is when we release its button.\n      Util.addEvent(document, \"mouseup\", this.callbackMouseup);\n      Util.addEvent(eventTarget, \"mouseup\", this.callbackMouseup);\n    }\n  }\n\n  /**\n   * Remove all callback function, for a certain event target, to the following event types:\n   * - dblclick\n   * - mousedown\n   * - mouseup\n   * @param {EventTarget} eventTarget - event target.\n   * @static\n   */\n  static removeElementEvents(eventTarget) {\n    Util.removeEvent(eventTarget, \"dblclick\", this.callbackDblclick);\n    Util.removeEvent(eventTarget, \"mousedown\", this.callbackMousedown);\n    Util.removeEvent(document, \"mouseup\", this.callbackMouseup);\n    Util.removeEvent(eventTarget, \"mouseup\", this.callbackMouseup);\n  }\n\n  /**\n   * Adds a class name to a HTMLElement.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the class name.\n   * @static\n   */\n  static addClass(element, className) {\n    if (!Util.containsClass(element, className)) {\n      element.className += ` ${className}`;\n    }\n  }\n\n  /**\n   * Checks if a HTMLElement contains a certain class.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the className.\n   * @returns {boolean} true if the HTMLElement contains the class name. false otherwise.\n   * @static\n   */\n  static containsClass(element, className) {\n    if (element == null || !(\"className\" in element)) {\n      return false;\n    }\n\n    const currentClasses = element.className.split(\" \");\n\n    for (let i = currentClasses.length - 1; i >= 0; i -= 1) {\n      if (currentClasses[i] === className) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Remove a certain class for a HTMLElement.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the class name.\n   * @static\n   */\n  static removeClass(element, className) {\n    let newClassName = \"\";\n    const classes = element.className.split(\" \");\n\n    for (let i = 0; i < classes.length; i += 1) {\n      if (classes[i] !== className) {\n        newClassName += `${classes[i]} `;\n      }\n    }\n    element.className = newClassName.trim();\n  }\n\n  /**\n   * Converts old xml initial text attribute (with «») to the correct one(with §lt;§gt;). It's\n   * used to parse old applets.\n   * @param {string} text - string containing safeXml characters\n   * @returns {string} a string with safeXml characters parsed.\n   * @static\n   */\n  static convertOldXmlinitialtextAttribute(text) {\n    // Used to fix a bug with Cas imported from Moodle 1.9 to Moodle 2.x.\n    // This could be removed in future.\n    const val = \"value=\";\n\n    const xitpos = text.indexOf(\"xmlinitialtext\");\n    const valpos = text.indexOf(val, xitpos);\n    const quote = text.charAt(valpos + val.length);\n    const startquote = valpos + val.length + 1;\n    const endquote = text.indexOf(quote, startquote);\n\n    const value = text.substring(startquote, endquote);\n\n    let newvalue = value.split(\"«\").join(\"§lt;\");\n    newvalue = newvalue.split(\"»\").join(\"§gt;\");\n    newvalue = newvalue.split(\"&\").join(\"§\");\n    newvalue = newvalue.split(\"¨\").join(\"§quot;\");\n\n    text = text.split(value).join(newvalue);\n    return text;\n  }\n\n  /**\n   * Convert a string representation of key-value pairs to an object.\n   * @param {string} keyValueString - String with key-value pairs in the format key1='value1', key2='value2'\n   * @returns {Object} - Object containing the key-value pairs\n   */\n  static convertStringToObject(keyValueString) {\n    if (!keyValueString || typeof keyValueString !== \"string\") {\n      return {};\n    }\n\n    return keyValueString\n      .split(\",\")\n      .map((pair) => pair.trim().split(\"=\"))\n      .reduce((resultObject, [key, value]) => {\n        if (key && value) {\n          resultObject[key] = value;\n        }\n        return resultObject;\n      }, {});\n  }\n\n  /**\n   * Cross-browser solution for creating new elements.\n   * @param {string} tagName - tag name of the wished element.\n   * @param {Object} attributes - an object where each key is a wished\n   * attribute name and each value is its value.\n   * @param {Object} [creator] - if supplied, this function will use\n   * the \"createElement\" method from this param. Otherwise\n   * document will be used as creator.\n   * @returns {Element} The DOM element with the specified attributes assigned.\n   * @static\n   */\n  static createElement(tagName, attributes, creator) {\n    if (attributes === undefined) {\n      attributes = {};\n    }\n\n    if (creator === undefined) {\n      creator = document;\n    }\n\n    let element;\n\n    /*\n     * Internet Explorer fix:\n     * If you create a new object dynamically, you can't set a non-standard attribute.\n     * For example, you can't set the \"src\" attribute on an \"applet\" object.\n     * Other browsers will throw an exception and will run the standard code.\n     */\n    try {\n      let html = `<${tagName}`;\n\n      Object.keys(attributes).forEach((attributeName) => {\n        html += ` ${attributeName}=\"${Util.htmlEntities(attributes[attributeName])}\"`;\n      });\n      html += \">\";\n      element = creator.createElement(html);\n    } catch (e) {\n      element = creator.createElement(tagName);\n      Object.keys(attributes).forEach((attributeName) => {\n        element.setAttribute(attributeName, attributes[attributeName]);\n      });\n    }\n    return element;\n  }\n\n  /**\n   * Creates new HTML from it's HTML code as string.\n   * @param {string} objectCode - html code\n   * @returns {Element} the HTML element.\n   * @static\n   */\n  static createObject(objectCode, creator) {\n    if (creator === undefined) {\n      creator = document;\n    }\n\n    // Internet Explorer can't include \"param\" tag when is setting an innerHTML property.\n    objectCode = objectCode\n      .split(\"<applet \")\n      .join('<span wirisObject=\"WirisApplet\" ')\n      .split(\"<APPLET \")\n      .join('<span wirisObject=\"WirisApplet\" '); // It is a 'span' because 'span' objects can contain 'br' nodes.\n    objectCode = objectCode.split(\"</applet>\").join(\"</span>\").split(\"</APPLET>\").join(\"</span>\");\n\n    objectCode = objectCode\n      .split(\"<param \")\n      .join('<br wirisObject=\"WirisParam\" ')\n      .split(\"<PARAM \")\n      .join('<br wirisObject=\"WirisParam\" '); // It is a 'br' because 'br' can't contain nodes.\n    objectCode = objectCode.split(\"</param>\").join(\"</br>\").split(\"</PARAM>\").join(\"</br>\");\n\n    const container = Util.createElement(\"div\", {}, creator);\n    container.innerHTML = objectCode;\n\n    function recursiveParamsFix(object) {\n      if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisParam\") {\n        const attributesParsed = {};\n\n        for (let i = 0; i < object.attributes.length; i += 1) {\n          if (object.attributes[i].nodeValue !== null) {\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\n          }\n        }\n\n        const param = Util.createElement(\"param\", attributesParsed, creator);\n\n        // IE fix.\n        if (param.NAME) {\n          param.name = param.NAME;\n          param.value = param.VALUE;\n        }\n\n        param.removeAttribute(\"wirisObject\");\n        object.parentNode.replaceChild(param, object);\n      } else if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisApplet\") {\n        const attributesParsed = {};\n\n        for (let i = 0; i < object.attributes.length; i += 1) {\n          if (object.attributes[i].nodeValue !== null) {\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\n          }\n        }\n\n        const applet = Util.createElement(\"applet\", attributesParsed, creator);\n        applet.removeAttribute(\"wirisObject\");\n\n        for (let i = 0; i < object.childNodes.length; i += 1) {\n          recursiveParamsFix(object.childNodes[i]);\n\n          if (object.childNodes[i].nodeName.toLowerCase() === \"param\") {\n            applet.appendChild(object.childNodes[i]);\n            i -= 1; // When we insert the object child into the applet, object loses one child.\n          }\n        }\n\n        object.parentNode.replaceChild(applet, object);\n      } else {\n        for (let i = 0; i < object.childNodes.length; i += 1) {\n          recursiveParamsFix(object.childNodes[i]);\n        }\n      }\n    }\n\n    recursiveParamsFix(container);\n    return container.firstChild;\n  }\n\n  /**\n   * Converts an Element to its HTML code.\n   * @param {Element} element - entry element.\n   * @return {string} the HTML code of the input element.\n   * @static\n   */\n  static createObjectCode(element) {\n    // In case that the image was not created, the object can be null or undefined.\n    if (typeof element === \"undefined\" || element === null) {\n      return null;\n    }\n\n    if (element.nodeType === 1) {\n      // ELEMENT_NODE.\n      let output = `<${element.tagName}`;\n\n      for (let i = 0; i < element.attributes.length; i += 1) {\n        if (element.attributes[i].specified) {\n          output += ` ${element.attributes[i].name}=\"${Util.htmlEntities(element.attributes[i].value)}\"`;\n        }\n      }\n\n      if (element.childNodes.length > 0) {\n        output += \">\";\n\n        for (let i = 0; i < element.childNodes.length; i += 1) {\n          output += Util.createObject(element.childNodes[i]);\n        }\n\n        output += `</${element.tagName}>`;\n      } else if (element.nodeName === \"DIV\" || element.nodeName === \"SCRIPT\") {\n        output += `></${element.tagName}>`;\n      } else {\n        output += \"/>\";\n      }\n\n      return output;\n    }\n\n    if (element.nodeType === 3) {\n      // TEXT_NODE.\n      return Util.htmlEntities(element.nodeValue);\n    }\n\n    return \"\";\n  }\n\n  /**\n   * Concatenates two URL paths.\n   * @param {string} path1 - first URL path\n   * @param {string} path2 - second URL path\n   * @returns {string} new URL.\n   */\n  static concatenateUrl(path1, path2) {\n    let separator = \"\";\n    if (path1.indexOf(\"/\") !== path1.length && path2.indexOf(\"/\") !== 0) {\n      separator = \"/\";\n    }\n    return (path1 + separator + path2).replace(/([^:]\\/)\\/+/g, \"$1\");\n  }\n\n  /**\n   * Parses a text and replaces all HTML special characters by their correspondent entities.\n   * @param {string} input - text to be parsed.\n   * @returns {string} the input text with all their special characters replaced by their entities.\n   * @static\n   */\n  static htmlEntities(input) {\n    return input.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&quot;\");\n  }\n\n  /**\n   * Sanitize HTML to prevent XSS injections.\n   * @param {string} html - html to be sanitize.\n   * @returns {string} html sanitized.\n   * @static\n   */\n  static htmlSanitize(html) {\n    let annotationRegex = /\\<annotation.+\\<\\/annotation\\>/;\n    // Get all the annotation content including the tags.\n    let annotation = html.match(annotationRegex);\n    // Sanitize html code without removing our supported MathML tags and attributes.\n    html = DOMPurify.sanitize(html, {\n      ADD_TAGS: [\"semantics\", \"annotation\", \"mstack\", \"msline\", \"msrow\", \"none\"],\n      ADD_ATTR: [\"linebreak\", \"charalign\", \"stackalign\"],\n    });\n    // Readd old annotation content.\n    return html.replace(annotationRegex, annotation);\n  }\n\n  /**\n   * Parses a text and replaces all the HTML entities by their characters.\n   * @param {string} input - text to be parsed\n   * @returns {string} the input text with all their entities replaced by characters.\n   * @static\n   */\n  static htmlEntitiesDecode(input) {\n    // Textarea element decodes when inner html is set.\n    const textarea = document.createElement(\"textarea\");\n    textarea.innerHTML = input;\n    return textarea.value;\n  }\n\n  /**\n   * Returns a cross-browser http request.\n   * @return {object} httpRequest request object.\n   * @returns {XMLHttpRequest|ActiveXObject} the proper request object.\n   */\n  static createHttpRequest() {\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n    if (currentPath.substr(0, 7) === \"file://\") {\n      throw StringManager.get(\"exception_cross_site\");\n    }\n\n    if (typeof XMLHttpRequest !== \"undefined\") {\n      return new XMLHttpRequest();\n    }\n\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP\");\n    } catch (e) {\n      try {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      } catch (oc) {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Converts a hash to a HTTP query.\n   * @param {Object[]} properties - a key/value object.\n   * @returns {string} a HTTP query containing all the key value pairs with\n   * all the special characters replaced by their entities.\n   * @static\n   */\n  static httpBuildQuery(properties) {\n    let result = \"\";\n\n    Object.keys(properties).forEach((i) => {\n      if (properties[i] != null) {\n        result += `${Util.urlEncode(i)}=${Util.urlEncode(properties[i])}&`;\n      }\n    });\n\n    // Deleting last '&' empty character.\n    if (result.substring(result.length - 1) === \"&\") {\n      result = result.substring(0, result.length - 1);\n    }\n\n    return result;\n  }\n\n  /**\n   * Convert a hash to string sorting keys to get a deterministic output\n   * @param {Object[]} hash - a key/value object.\n   * @returns {string} a string with the form key1=value1...keyn=valuen\n   * @static\n   */\n  static propertiesToString(hash) {\n    // 1. Sort keys. We sort the keys because we want a deterministic output.\n    const keys = [];\n    Object.keys(hash).forEach((key) => {\n      if (Object.prototype.hasOwnProperty.call(hash, key)) {\n        keys.push(key);\n      }\n    });\n\n    const n = keys.length;\n    for (let i = 0; i < n; i += 1) {\n      for (let j = i + 1; j < n; j += 1) {\n        const s1 = keys[i];\n        const s2 = keys[j];\n        if (Util.compareStrings(s1, s2) > 0) {\n          // Swap.\n          keys[i] = s2;\n          keys[j] = s1;\n        }\n      }\n    }\n\n    // 2. Generate output.\n    let output = \"\";\n    for (let i = 0; i < n; i += 1) {\n      const key = keys[i];\n      output += key;\n      output += \"=\";\n      let value = hash[key];\n      value = value.replace(\"\\\\\", \"\\\\\\\\\");\n      value = value.replace(\"\\n\", \"\\\\n\");\n      value = value.replace(\"\\r\", \"\\\\r\");\n      value = value.replace(\"\\t\", \"\\\\t\");\n\n      output += value;\n      output += \"\\n\";\n    }\n    return output;\n  }\n\n  /**\n   * Compare two strings using charCodeAt method\n   * @param {string} a - first string to compare.\n   * @param {string} b - second string to compare.\n   * @returns {number} the difference between a and b\n   * @static\n   */\n  static compareStrings(a, b) {\n    let i;\n    const an = a.length;\n    const bn = b.length;\n    const n = an > bn ? bn : an;\n    for (i = 0; i < n; i += 1) {\n      const c = Util.fixedCharCodeAt(a, i) - Util.fixedCharCodeAt(b, i);\n      if (c !== 0) {\n        return c;\n      }\n    }\n    return a.length - b.length;\n  }\n\n  /**\n   * Fix charCodeAt() JavaScript function to handle non-Basic-Multilingual-Plane characters.\n   * @param {string} string - input string\n   * @param {number} idx - an integer greater than or equal to 0\n   * and less than the length of the string\n   * @returns {number} an integer representing the UTF-16 code of the string at the given index.\n   * @static\n   */\n  static fixedCharCodeAt(string, idx) {\n    idx = idx || 0;\n    const code = string.charCodeAt(idx);\n    let hi;\n    let low;\n\n    /* High surrogate (could change last hex to 0xDB7F to treat high\n    private surrogates as single characters) */\n\n    if (code >= 0xd800 && code <= 0xdbff) {\n      hi = code;\n      low = string.charCodeAt(idx + 1);\n      if (Number.isNaN(low)) {\n        throw StringManager.get(\"exception_high_surrogate\");\n      }\n      return (hi - 0xd800) * 0x400 + (low - 0xdc00) + 0x10000;\n    }\n\n    if (code >= 0xdc00 && code <= 0xdfff) {\n      // Low surrogate.\n      /* We return false to allow loops to skip this iteration since should have\n      already handled high surrogate above in the previous iteration. */\n      return false;\n    }\n    return code;\n  }\n\n  /**\n   * Returns an URL with it's query params converted into array.\n   * @param {string} url - input URL.\n   * @returns {Object[]} an array containing all URL query params.\n   * @static\n   */\n  static urlToAssArray(url) {\n    let i;\n    i = url.indexOf(\"?\");\n    if (i > 0) {\n      const query = url.substring(i + 1);\n      const ss = query.split(\"&\");\n      const h = {};\n      for (i = 0; i < ss.length; i += 1) {\n        const s = ss[i];\n        const kv = s.split(\"=\");\n        if (kv.length > 1) {\n          h[kv[0]] = decodeURIComponent(kv[1].replace(/\\+/g, \" \"));\n        }\n      }\n      return h;\n    }\n    return {};\n  }\n\n  /**\n   * Returns an encoded URL by replacing each instance of certain characters by\n   * one, two, three or four escape sequences using encodeURIComponent method.\n   * !'()* . will not be encoded.\n   *\n   * @param {string} clearString - URL string to be encoded\n   * @returns {string} URL with it's special characters replaced.\n   * @static\n   */\n  static urlEncode(clearString) {\n    let output = \"\";\n    // Method encodeURIComponent doesn't encode !'()*~ .\n    output = encodeURIComponent(clearString);\n    return output;\n  }\n\n  // TODO: To parser?\n  /**\n   * Converts the HTML of a image into the output code that WIRIS must return.\n   * By default returns the MathML stored on data-mahml attribute (if imgCode is a formula)\n   * or the Wiriscas attribute of a WIRIS applet.\n   * @param {string} imgCode - the html code from a formula or a CAS image.\n   * @param {boolean} convertToXml - true if the image should be converted to XML.\n   * @param {boolean} convertToSafeXml - true if the image should be converted to safeXML.\n   * @returns {string} the XML or safeXML of a WIRIS image.\n   * @static\n   */\n  static getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml) {\n    const imgObject = Util.createObject(imgCode);\n    if (imgObject) {\n      if (\n        imgObject.className === Configuration.get(\"imageClassName\") ||\n        imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"))\n      ) {\n        if (!convertToXml) {\n          return imgCode;\n        }\n\n        const dataMathML = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\n        // To handle annotations, first we need the MathML in XML.\n        let mathML = MathML.safeXmlDecode(dataMathML);\n\n        if (!Configuration.get(\"saveHandTraces\")) {\n          mathML = MathML.removeAnnotation(mathML, \"application/json\");\n        }\n\n        if (mathML == null) {\n          mathML = imgObject.getAttribute(\"alt\");\n        }\n\n        if (convertToSafeXml) {\n          const safeMathML = MathML.safeXmlEncode(mathML);\n          return safeMathML;\n        }\n\n        return mathML;\n      }\n    }\n    return imgCode;\n  }\n\n  /**\n   * Gets the node length in characters.\n   * @param {Node} node - HTML node.\n   * @returns {number} node length.\n   * @static\n   */\n  static getNodeLength(node) {\n    const staticNodeLengths = {\n      IMG: 1,\n      BR: 1,\n    };\n\n    if (node.nodeType === 3) {\n      // TEXT_NODE.\n      return node.nodeValue.length;\n    }\n\n    if (node.nodeType === 1) {\n      // ELEMENT_NODE.\n      let length = staticNodeLengths[node.nodeName.toUpperCase()];\n\n      if (length === undefined) {\n        length = 0;\n      }\n\n      for (let i = 0; i < node.childNodes.length; i += 1) {\n        length += Util.getNodeLength(node.childNodes[i]);\n      }\n      return length;\n    }\n    return 0;\n  }\n\n  /**\n   * Gets a selected node or text from an editable HTMLElement.\n   * If the caret is on a text node, concatenates it with all the previous and next text nodes.\n   * @param {HTMLElement} target - the editable HTMLElement.\n   * @param {boolean} isIframe  - specifies if the target is an iframe or not\n   * @param {boolean} forceGetSelection - if true, ignores IE system to get\n   * the current selection and uses window.getSelection()\n   * @returns {object} an object with the 'node' key set if the item is an\n   * element or the keys 'node' and 'caretPosition' if the element is text.\n   * @static\n   */\n  static getSelectedItem(target, isIframe, forceGetSelection) {\n    let windowTarget;\n\n    if (isIframe) {\n      windowTarget = target.contentWindow;\n      windowTarget.focus();\n    } else {\n      windowTarget = window;\n      target.focus();\n    }\n\n    if (document.selection && !forceGetSelection) {\n      const range = windowTarget.document.selection.createRange();\n\n      if (range.parentElement) {\n        if (range.htmlText.length > 0) {\n          if (range.text.length === 0) {\n            return Util.getSelectedItem(target, isIframe, true);\n          }\n\n          return null;\n        }\n\n        windowTarget.document.execCommand(\"InsertImage\", false, \"#\");\n        let temporalObject = range.parentElement();\n\n        if (temporalObject.nodeName.toUpperCase() !== \"IMG\") {\n          // IE9 fix: parentElement() does not return the IMG node,\n          // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\n          range.pasteHTML('<span id=\"wrs_openEditorWindow_temporalObject\"></span>');\n          temporalObject = windowTarget.document.getElementById(\"wrs_openEditorWindow_temporalObject\");\n        }\n\n        let node;\n        let caretPosition;\n\n        if (temporalObject.nextSibling && temporalObject.nextSibling.nodeType === 3) {\n          // TEXT_NODE.\n          node = temporalObject.nextSibling;\n          caretPosition = 0;\n        } else if (temporalObject.previousSibling && temporalObject.previousSibling.nodeType === 3) {\n          node = temporalObject.previousSibling;\n          caretPosition = node.nodeValue.length;\n        } else {\n          node = windowTarget.document.createTextNode(\"\");\n          temporalObject.parentNode.insertBefore(node, temporalObject);\n          caretPosition = 0;\n        }\n\n        temporalObject.parentNode.removeChild(temporalObject);\n\n        return {\n          node,\n          caretPosition,\n        };\n      }\n\n      if (range.length > 1) {\n        return null;\n      }\n\n      return {\n        node: range.item(0),\n      };\n    }\n\n    if (windowTarget.getSelection) {\n      let range;\n      const selection = windowTarget.getSelection();\n\n      try {\n        range = selection.getRangeAt(0);\n      } catch (e) {\n        range = windowTarget.document.createRange();\n      }\n\n      const node = range.startContainer;\n\n      if (node.nodeType === 3) {\n        // TEXT_NODE.\n        return {\n          node,\n          caretPosition: range.startOffset,\n        };\n      }\n\n      if (node !== range.endContainer) {\n        return null;\n      }\n\n      if (node.nodeType === 1) {\n        // ELEMENT_NODE.\n        const position = range.startOffset;\n\n        if (node.childNodes[position]) {\n          // In case that a formula is detected but not selected,\n          // we create an empty span where we could insert the new formula.\n          if (range.startOffset === range.endOffset) {\n            if (\n              position !== 0 &&\n              node.childNodes[position - 1].localName === \"span\" &&\n              node.childNodes[position].classList?.contains(\"Wirisformula\")\n            ) {\n              node.childNodes[position - 1].remove();\n              return Util.getSelectedItem(target, isIframe, forceGetSelection);\n            } else if (node.childNodes[position].classList?.contains(\"Wirisformula\")) {\n              if (\n                (position > 0 && node.childNodes[position - 1].classList?.contains(\"Wirisformula\")) ||\n                position === 0\n              ) {\n                var emptySpan = document.createElement(\"span\");\n                node.insertBefore(emptySpan, node.childNodes[position]);\n                return {\n                  node: node.childNodes[position],\n                };\n              }\n            }\n          }\n          return {\n            node: node.childNodes[position],\n          };\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns null if there isn't any item or if it is malformed.\n   * Otherwise returns an object containing the node with the MathML image\n   * and the cursor position inside the textarea.\n   * @param {HTMLTextAreaElement} textarea - textarea element.\n   * @returns {Object} An object containing the node, the index of the\n   * beginning  of the selected text, caret position and the start and end position of the\n   * text node.\n   * @static\n   */\n  static getSelectedItemOnTextarea(textarea) {\n    const textNode = document.createTextNode(textarea.value);\n    const textNodeValues = Latex.getLatexFromTextNode(textNode, textarea.selectionStart);\n    if (textNodeValues === null) {\n      return null;\n    }\n\n    return {\n      node: textNode,\n      caretPosition: textarea.selectionStart,\n      startPosition: textNodeValues.startPosition,\n      endPosition: textNodeValues.endPosition,\n    };\n  }\n\n  /**\n   * Looks for elements that match the given name in a HTML code string.\n   * Important: this function is very concrete for WIRIS code.\n   * It takes as preconditions lots of behaviors that are not the general case.\n   * @param {string} code -  HTML code.\n   * @param {string} name - element name.\n   * @param {boolean} autoClosed - true if the elements are autoClosed.\n   * @return {Object[]} an object containing all HTML elements of code matching the name argument.\n   * @static\n   */\n  static getElementsByNameFromString(code, name, autoClosed) {\n    const elements = [];\n    code = code.toLowerCase();\n    name = name.toLowerCase();\n    let start = code.indexOf(`<${name} `);\n\n    while (start !== -1) {\n      // Look for nodes.\n      let endString;\n\n      if (autoClosed) {\n        endString = \">\";\n      } else {\n        endString = `</${name}>`;\n      }\n\n      let end = code.indexOf(endString, start);\n\n      if (end !== -1) {\n        end += endString.length;\n        elements.push({\n          start,\n          end,\n        });\n      } else {\n        end = start + 1;\n      }\n\n      start = code.indexOf(`<${name} `, end);\n    }\n\n    return elements;\n  }\n\n  /**\n   * Returns the numeric value of a base64 character.\n   * @param  {string} character - base64 character.\n   * @returns {number} base64 character numeric value.\n   * @static\n   */\n  static decode64(character) {\n    const PLUS = \"+\".charCodeAt(0);\n    const SLASH = \"/\".charCodeAt(0);\n    const NUMBER = \"0\".charCodeAt(0);\n    const LOWER = \"a\".charCodeAt(0);\n    const UPPER = \"A\".charCodeAt(0);\n    const PLUS_URL_SAFE = \"-\".charCodeAt(0);\n    const SLASH_URL_SAFE = \"_\".charCodeAt(0);\n    const code = character.charCodeAt(0);\n\n    if (code === PLUS || code === PLUS_URL_SAFE) {\n      return 62; // Char '+'.\n    }\n    if (code === SLASH || code === SLASH_URL_SAFE) {\n      return 63; // Char '/'.\n    }\n    if (code < NUMBER) {\n      return -1; // No match.\n    }\n    if (code < NUMBER + 10) {\n      return code - NUMBER + 26 + 26;\n    }\n    if (code < UPPER + 26) {\n      return code - UPPER;\n    }\n    if (code < LOWER + 26) {\n      return code - LOWER + 26;\n    }\n\n    return null;\n  }\n\n  /**\n   * Converts a base64 string to a array of bytes.\n   * @param {string} b64String - base64 string.\n   * @param {number} length - dimension of byte array (by default whole string).\n   * @return {Object[]} the resultant byte array.\n   * @static\n   */\n  static b64ToByteArray(b64String, length) {\n    let tmp;\n\n    if (b64String.length % 4 > 0) {\n      throw new Error(\"Invalid string. Length must be a multiple of 4\"); // Tipped base64. Length is fixed.\n    }\n\n    const arr = [];\n\n    let l;\n    let placeHolders;\n    if (!length) {\n      // All b64String string.\n      if (b64String.charAt(b64String.length - 2) === \"=\") {\n        placeHolders = 2;\n      } else if (b64String.charAt(b64String.length - 1) === \"=\") {\n        placeHolders = 1;\n      } else {\n        placeHolders = 0;\n      }\n      l = placeHolders > 0 ? b64String.length - 4 : b64String.length;\n    } else {\n      l = length;\n    }\n\n    let i;\n    for (i = 0; i < l; i += 4) {\n      // Ignoring code checker standards (bitewise operators).\n      // See https://tracker.moodle.org/browse/CONTRIB-5862 for further information.\n      // @codingStandardsIgnoreStart\n      // eslint-disable-next-line max-len\n      tmp =\n        (Util.decode64(b64String.charAt(i)) << 18) |\n        (Util.decode64(b64String.charAt(i + 1)) << 12) |\n        (Util.decode64(b64String.charAt(i + 2)) << 6) |\n        Util.decode64(b64String.charAt(i + 3));\n\n      arr.push((tmp >> 16) & 0xff);\n      arr.push((tmp >> 8) & 0xff);\n      arr.push(tmp & 0xff);\n      // @codingStandardsIgnoreEnd\n    }\n\n    if (placeHolders) {\n      if (placeHolders === 2) {\n        // Ignoring code checker standards (bitewise operators).\n        // @codingStandardsIgnoreStart\n        // eslint-disable-next-line max-len\n        tmp = (Util.decode64(b64String.charAt(i)) << 2) | (Util.decode64(b64String.charAt(i + 1)) >> 4);\n        arr.push(tmp & 0xff);\n      } else if (placeHolders === 1) {\n        // eslint-disable-next-line max-len\n        tmp =\n          (Util.decode64(b64String.charAt(i)) << 10) |\n          (Util.decode64(b64String.charAt(i + 1)) << 4) |\n          (Util.decode64(b64String.charAt(i + 2)) >> 2);\n        arr.push((tmp >> 8) & 0xff);\n        arr.push(tmp & 0xff);\n        // @codingStandardsIgnoreEnd\n      }\n    }\n    return arr;\n  }\n\n  /**\n   * Returns the first 32-bit signed integer from a byte array.\n   * @param {Object[]} bytes - array of bytes.\n   * @returns {number} the 32-bit signed integer.\n   * @static\n   */\n  static readInt32(bytes) {\n    if (bytes.length < 4) {\n      return false;\n    }\n    const int32 = bytes.splice(0, 4);\n    // @codingStandardsIgnoreStart¡\n    return (int32[0] << 24) | (int32[1] << 16) | (int32[2] << 8) | (int32[3] << 0);\n    // @codingStandardsIgnoreEnd\n  }\n\n  /**\n   * Read the first byte from a byte array.\n   * @param {Object} bytes - input byte array.\n   * @returns {number} first byte of the byte array.\n   * @static\n   */\n  static readByte(bytes) {\n    // @codingStandardsIgnoreStart\n    return bytes.shift() << 0;\n    // @codingStandardsIgnoreEnd\n  }\n\n  /**\n   * Read an arbitrary number of bytes, from a fixed position on a byte array.\n   * @param  {Object[]} bytes - byte array.\n   * @param  {number} pos - start position.\n   * @param  {number} len - number of bytes to read.\n   * @returns {Object[]} the byte array.\n   * @static\n   */\n  static readBytes(bytes, pos, len) {\n    return bytes.splice(pos, len);\n  }\n\n  /**\n   * Inserts or modifies formulas or CAS on a textarea.\n   * @param {HTMLTextAreaElement} textarea - textarea target.\n   * @param {string} text - text to add in the textarea. For example, to add the link to the image,\n   * call this function as (textarea, Parser.createImageSrc(mathml));\n   * @static\n   */\n  static updateTextArea(textarea, text) {\n    if (textarea && text) {\n      textarea.focus();\n\n      if (textarea.selectionStart != null) {\n        const { selectionEnd } = textarea;\n        const selectionStart = textarea.value.substring(0, textarea.selectionStart);\n        const selectionEndSub = textarea.value.substring(selectionEnd, textarea.value.length);\n        textarea.value = selectionStart + text + selectionEndSub;\n        textarea.selectionEnd = selectionEnd + text.length;\n      } else {\n        const selection = document.selection.createRange();\n        selection.text = text;\n      }\n    }\n  }\n\n  /**\n   * Modifies existing formula on a textarea.\n   * @param {HTMLTextAreaElement} textarea - text area target.\n   * @param {string} text - text to add in the textarea. For example, if you want to add the link\n   * to the image,you can call this function as\n   * Util.updateTextarea(textarea, Parser.createImageSrc(mathml));\n   * @param {number} start - beginning index from textarea where it needs to be replaced by text.\n   * @param {number} end - ending index from textarea where it needs to be replaced by text\n   * @static\n   */\n  static updateExistingTextOnTextarea(textarea, text, start, end) {\n    textarea.focus();\n    const textareaStart = textarea.value.substring(0, start);\n    textarea.value = textareaStart + text + textarea.value.substring(end, textarea.value.length);\n    textarea.selectionEnd = start + text.length;\n  }\n\n  /**\n   * Add a parameter with it's correspondent value to an URL (GET).\n   * @param {string} path - URL path\n   * @param {string} parameter - parameter\n   * @param {string} value - value\n   * @static\n   */\n  static addArgument(path, parameter, value) {\n    let sep;\n    if (path.indexOf(\"?\") > 0) {\n      sep = \"&\";\n    } else {\n      sep = \"?\";\n    }\n    return `${path + sep + parameter}=${value}`;\n  }\n}\n","import Configuration from \"./configuration\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents MathType Image class. Contains all the logic related\n * to MathType images manipulation.\n * All MathType images are generated using the appropriate MathType\n * integration service: showimage or createimage.\n *\n * There are two available image formats:\n * - svg (default)\n * - png\n *\n * There are two formats for the image src attribute:\n * - A data-uri scheme containing the URL-encoded SVG or a PNG's base64.\n * - A link to the showimage service.\n */\nexport default class Image {\n  /**\n   * Removes data attributes from an image.\n   * @param {HTMLImageElement} img - Image where remove data attributes.\n   */\n  static removeImgDataAttributes(img) {\n    const attributesToRemove = [];\n    const { attributes } = img;\n\n    Object.keys(attributes).forEach((key) => {\n      const attribute = attributes[key];\n      if (attribute !== undefined && attribute.name !== undefined && attribute.name.indexOf(\"data-\") === 0) {\n        // Is preferred keep an array and remove after the search\n        // because when attribute is removed the array of attributes\n        // is modified.\n        attributesToRemove.push(attribute.name);\n      }\n    });\n\n    attributesToRemove.forEach((attribute) => {\n      img.removeAttribute(attribute);\n    });\n  }\n\n  /**\n   * @static\n   * Clones all MathType image attributes from a HTMLImageElement to another.\n   * @param {HTMLImageElement} originImg - The original image.\n   * @param {HTMLImageElement} destImg - The destination image.\n   */\n  static clone(originImg, destImg) {\n    const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\n    if (!originImg.hasAttribute(customEditorAttributeName)) {\n      destImg.removeAttribute(customEditorAttributeName);\n    }\n\n    const mathmlAttributeName = Configuration.get(\"imageMathmlAttribute\");\n    const imgAttributes = [\n      mathmlAttributeName,\n      customEditorAttributeName,\n      \"alt\",\n      \"height\",\n      \"width\",\n      \"style\",\n      \"src\",\n      \"role\",\n    ];\n\n    imgAttributes.forEach((iterator) => {\n      const originAttribute = originImg.getAttribute(iterator);\n      if (originAttribute) {\n        destImg.setAttribute(iterator, originAttribute);\n      }\n    });\n  }\n\n  /**\n   * Determines whether an img src contains an SVG.\n   * @param {HTMLImageElement} img the img element to inspect\n   * @returns true if the img src contains an SVG, false otherwise\n   */\n  static isSvg(img) {\n    return img.src.startsWith(\"data:image/svg+xml;\");\n  }\n\n  /**\n   * Determines whether an img src is encoded in base64 or not.\n   * @param {HTMLImageElement} img the img element to inspect\n   * @returns true if the img src is encoded in base64, false otherwise\n   */\n  static isBase64(img) {\n    return img.src.startsWith(\"data:image/svg+xml;base64,\") || img.src.startsWith(\"data:image/png;base64,\");\n  }\n\n  /**\n   * Calculates the metrics of a MathType image given the the service response and the image format.\n   * @param {HTMLImageElement} img - The HTMLImageElement.\n   * @param {String} uri - The URI generated by the image service: can be a data URI scheme or a URL.\n   * @param {Boolean} jsonResponse - True the response of the image service is a\n   * JSON object. False otherwise.\n   */\n  static setImgSize(img, uri, jsonResponse) {\n    let ar;\n    let base64String;\n    let bytes;\n    let svgString;\n    if (jsonResponse) {\n      // Cleaning data:image/png;base64.\n      if (Image.isSvg(img)) {\n        // SVG format.\n        // If SVG is encoded in base64 we need to convert the base64 bytes into a SVG string.\n        if (!Image.isBase64(img)) {\n          ar = Image.getMetricsFromSvgString(uri);\n        } else {\n          base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\n          svgString = \"\";\n          bytes = Util.b64ToByteArray(base64String, base64String.length);\n          for (let i = 0; i < bytes.length; i += 1) {\n            svgString += String.fromCharCode(bytes[i]);\n          }\n          ar = Image.getMetricsFromSvgString(svgString);\n        }\n        // PNG format: we store all metrics information in the first 88 bytes.\n      } else {\n        base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\n        bytes = Util.b64ToByteArray(base64String, 88);\n        ar = Image.getMetricsFromBytes(bytes);\n      }\n      // Backwards compatibility: we store the metrics into createimage response.\n    } else {\n      ar = Util.urlToAssArray(uri);\n    }\n    let width = ar.cw;\n    if (!width) {\n      return;\n    }\n    let height = ar.ch;\n    let baseline = ar.cb;\n    const { dpi } = ar;\n    if (dpi) {\n      width = (width * 96) / dpi;\n      height = (height * 96) / dpi;\n      baseline = (baseline * 96) / dpi;\n    }\n    img.width = width;\n    img.height = height;\n    img.style.verticalAlign = `-${height - baseline}px`;\n  }\n\n  /**\n   * Calculates the metrics of an image which has been resized. Is used to restore the original\n   * metrics of a resized image.\n   * @param {HTMLImageElement } img - The resized HTMLImageElement.\n   */\n  static fixAfterResize(img) {\n    img.removeAttribute(\"style\");\n    img.removeAttribute(\"width\");\n    img.removeAttribute(\"height\");\n    // In order to avoid resize with max-width css property.\n    img.style.maxWidth = \"none\";\n\n    const processImg = (img) => {\n      if (img.src.indexOf(\"data:image\") !== -1) {\n        if (img.src.indexOf(\"data:image/svg+xml\") !== -1) {\n          // Image is in base64: decode it in order to calculate the size, and then bring it back to base64\n          // This is a bit of an ugly hack used to recycle the logic of Image.setImgSize instead of rewriting it\n          // (which would actually make more sense for readibility and efficiency).\n          if (img.src.indexOf(\"data:image/svg+xml;base64,\") !== -1) {\n            // 'data:image/svg+xml;base64,'.length === 26\n            const base64String = img.getAttribute(\"src\").substring(26);\n            const svgString = window.atob(base64String);\n            const encodedSvgString = encodeURIComponent(svgString);\n            img.setAttribute(\"src\", `data:image/svg+xml;charset=utf8,${encodedSvgString}`);\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\n            Image.setImgSize(img, svg, true);\n            // Return src to base64!\n            img.setAttribute(\"src\", `data:image/svg+xml;base64,${base64String}`);\n          } else {\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\n            Image.setImgSize(img, svg, true);\n          }\n        } else {\n          // 'data:image/png;base64,' === 22.\n          const base64 = img.src.substring(22, img.src.length);\n          Image.setImgSize(img, base64, true);\n        }\n      } else {\n        Image.setImgSize(img, img.src);\n      }\n    };\n\n    // If the image doesn't contain a blob, just process it normally\n    if (img.src.indexOf(\"blob:\") === -1) {\n      processImg(img);\n      // if it does contain a blob, then read that, replace the src with the decoded content, and process it\n    } else {\n      let reader = new FileReader();\n      reader.onload = function () {\n        img.setAttribute(\"src\", reader.result);\n        processImg(img);\n      };\n      fetch(img.src)\n        .then((r) => r.blob())\n        .then((blob) => {\n          reader.readAsDataURL(blob);\n        });\n    }\n  }\n\n  /**\n   * Returns the metrics (height, width and baseline) contained in a SVG image generated\n   * by the MathType image service. This image contains as an extra custom attribute:\n   * the baseline (wrs:baseline).\n   * @param {String} svgString - The SVG image.\n   * @return {Array} - The image metrics.\n   */\n  static getMetricsFromSvgString(svgString) {\n    let first = svgString.indexOf('height=\"');\n    let last = svgString.indexOf('\"', first + 8, svgString.length);\n    const height = svgString.substring(first + 8, last);\n\n    first = svgString.indexOf('width=\"');\n    last = svgString.indexOf('\"', first + 7, svgString.length);\n    const width = svgString.substring(first + 7, last);\n\n    first = svgString.indexOf('wrs:baseline=\"');\n    last = svgString.indexOf('\"', first + 14, svgString.length);\n    const baseline = svgString.substring(first + 14, last);\n\n    if (typeof width !== \"undefined\") {\n      const arr = [];\n      arr.cw = width;\n      arr.ch = height;\n      if (typeof baseline !== \"undefined\") {\n        arr.cb = baseline;\n      }\n      return arr;\n    }\n    return [];\n  }\n\n  /**\n   * Returns the metrics (width, height, baseline and dpi) contained in a PNG byte array.\n   * @param  {Array.<Bytes>} bytes - png byte array.\n   * @return {Array} The png metrics.\n   */\n  static getMetricsFromBytes(bytes) {\n    Util.readBytes(bytes, 0, 8);\n    let width;\n    let height;\n    let typ;\n    let baseline;\n    let dpi;\n    while (bytes.length >= 4) {\n      typ = Util.readInt32(bytes);\n      if (typ === 0x49484452) {\n        width = Util.readInt32(bytes);\n        height = Util.readInt32(bytes);\n        // Read 5 bytes.\n        Util.readInt32(bytes);\n        Util.readByte(bytes);\n      } else if (typ === 0x62615345) {\n        // Baseline: 'baSE'.\n        baseline = Util.readInt32(bytes);\n      } else if (typ === 0x70485973) {\n        // Dpis: 'pHYs'.\n        dpi = Util.readInt32(bytes);\n        dpi = Math.round(dpi / 39.37);\n        Util.readInt32(bytes);\n        Util.readByte(bytes);\n      }\n      Util.readInt32(bytes);\n    }\n\n    if (typeof width !== \"undefined\") {\n      const arr = [];\n      arr.cw = width;\n      arr.ch = height;\n      arr.dpi = dpi;\n      if (baseline) {\n        arr.cb = baseline;\n      }\n\n      return arr;\n    }\n    return [];\n  }\n}\n","import TextCache from \"./textcache\";\nimport ServiceProvider from \"./serviceprovider\";\nimport MathML from \"./mathml\";\nimport StringManager from \"./stringmanager\";\n\n/**\n * @classdesc\n * This class represents MathType accessible class. Converts MathML to accessible text and manages\n * the associated client-side cache.\n */\nexport default class Accessibility {\n  /**\n   * Static property.\n   * Accessibility cache, each entry contains a MathML and its correspondent accessibility text.\n   * @type {TextCache}\n   */\n  static get cache() {\n    return Accessibility._cache;\n  }\n\n  /**\n   * Static property setter.\n   * Set accessibility cache.\n   * @param {TextCahe} value - The property value.\n   * @ignore\n   */\n  static set cache(value) {\n    Accessibility._cache = value;\n  }\n\n  /**\n   * Converts MathML strings to its accessible text representation.\n   * @param {String} mathML - MathML to be converted to accessible text.\n   * @param {String} [language] - Language of the accessible text. 'en' by default.\n   * @param {Array.<String>} [data] - Parameters to send to mathml2accessible service.\n   * @return {String} Accessibility text.\n   */\n  static mathMLToAccessible(mathML, language, data) {\n    if (typeof language === \"undefined\") {\n      language = \"en\";\n    }\n    // Check MathML class. If the class is chemistry,\n    // we add chemistry to data to force accessibility service\n    // to load chemistry grammar.\n    if (MathML.containClass(mathML, \"wrs_chemistry\")) {\n      data.mode = \"chemistry\";\n    }\n    // Ignore accesibility styles\n    data.ignoreStyles = true;\n    let accessibleText = \"\";\n\n    if (Accessibility.cache.get(mathML)) {\n      accessibleText = Accessibility.cache.get(mathML);\n    } else {\n      data.service = \"mathml2accessible\";\n      data.lang = language;\n      const accessibleJsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n      if (accessibleJsonResponse.status !== \"error\") {\n        accessibleText = accessibleJsonResponse.result.text;\n        Accessibility.cache.populate(mathML, accessibleText);\n      } else {\n        accessibleText = StringManager.get(\"error_convert_accessibility\");\n      }\n    }\n\n    return accessibleText;\n  }\n}\n\n/**\n * Contains an instance of TextCache class to manage the JavaScript accessible cache.\n * Each entry of the cache object contains the MathML and it's correspondent accessibility text.\n * @private\n * @type {TextCache}\n */\nAccessibility._cache = new TextCache();\n","import Util from \"./util\";\nimport Latex from \"./latex\";\nimport MathML from \"./mathml\";\nimport Image from \"./image\";\nimport Accessibility from \"./accessibility\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Configuration from \"./configuration\";\nimport Constants from \"./constants\";\n// eslint-disable-next-line no-unused-vars\nimport md5 from \"./md5\";\n\n/**\n * @classdesc\n * This class represent a MahML parser. Converts MathML into formulas depending on the\n * image format (SVG, PNG, base64) and the save mode (XML, safeXML, Image) configured\n * in the backend.\n */\nexport default class Parser {\n  /**\n   * Converts a MathML string to an img element.\n   * @param {Document} creator - Document object to call createElement method.\n   * @param {string} mathml - MathML code\n   * @param {Object[]} wirisProperties - object containing WIRIS custom properties\n   * @param {language} language - custom language for accessibility.\n   * @returns {HTMLImageElement} the formula image corresponding to initial MathML string.\n   * @static\n   */\n  static mathmlToImgObject(creator, mathml, wirisProperties, language) {\n    const imgObject = creator.createElement(\"img\");\n    imgObject.align = \"middle\";\n    imgObject.style.maxWidth = \"none\";\n    let data = wirisProperties || {};\n\n    // Take into account the backend config\n    const wirisEditorProperties = Configuration.get(\"editorParameters\");\n    data = { ...wirisEditorProperties, ...data };\n\n    data.mml = mathml;\n    data.lang = language;\n    // Request metrics of the generated image.\n    data.metrics = \"true\";\n    data.centerbaseline = \"false\";\n\n    // Full base64 method (edit & save).\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\n      data.base64 = true;\n    }\n\n    // Render js params: _wrs_int_wirisProperties contains some js render params.\n    // Since MathML can support render params, js params should be send only to editor.\n\n    imgObject.className = Configuration.get(\"imageClassName\");\n\n    if (mathml.indexOf('class=\"') !== -1) {\n      // We check here if the MathML has been created from a customEditor (such chemistry)\n      // to add custom editor name attribute to img object (if necessary).\n      let mathmlSubstring = mathml.substring(mathml.indexOf('class=\"') + 'class=\"'.length, mathml.length);\n      mathmlSubstring = mathmlSubstring.substring(0, mathmlSubstring.indexOf('\"'));\n      mathmlSubstring = mathmlSubstring.substring(4, mathmlSubstring.length);\n      imgObject.setAttribute(Configuration.get(\"imageCustomEditorName\"), mathmlSubstring);\n    }\n\n    // Performance enabled.\n    if (\n      Configuration.get(\"wirisPluginPerformance\") &&\n      (Configuration.get(\"saveMode\") === \"xml\" || Configuration.get(\"saveMode\") === \"safeXml\")\n    ) {\n      let result = JSON.parse(Parser.createShowImageSrc(data, language));\n      if (result.status === \"warning\") {\n        // POST call.\n        // if the mathml is malformed, this function will throw an exception.\n        try {\n          result = JSON.parse(ServiceProvider.getService(\"showimage\", data));\n        } catch (e) {\n          return null;\n        }\n      }\n      ({ result } = result);\n      if (result.format === \"png\") {\n        imgObject.src = `data:image/png;base64,${result.content}`;\n      } else {\n        imgObject.src = `data:image/svg+xml;charset=utf8,${Util.urlEncode(result.content)}`;\n      }\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\n      Image.setImgSize(imgObject, result.content, true);\n\n      if (Configuration.get(\"enableAccessibility\")) {\n        if (typeof result.alt === \"undefined\") {\n          imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\n        } else {\n          imgObject.alt = result.alt;\n        }\n      }\n    } else {\n      const result = Parser.createImageSrc(mathml, data);\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\n      imgObject.src = result;\n      Image.setImgSize(\n        imgObject,\n        result,\n        Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\",\n      );\n      if (Configuration.get(\"enableAccessibility\")) {\n        imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\n      }\n    }\n\n    if (typeof Parser.observer !== \"undefined\") {\n      Parser.observer.observe(imgObject);\n    }\n\n    // Role math https://www.w3.org/TR/wai-aria/roles#math.\n    imgObject.setAttribute(\"role\", \"math\");\n    return imgObject;\n  }\n\n  /**\n   * Returns the source to showimage service by calling createimage service. The\n   * output of the createimage service is a URL path pointing to showimage service.\n   * This method is called when performance is disabled.\n   * @param {string} mathml - MathML code.\n   * @param {Object[]} data - data object containing service parameters.\n   * @returns {string} the showimage path.\n   */\n  static createImageSrc(mathml, data) {\n    // Full base64 method (edit & save).\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\n      data.base64 = true;\n    }\n\n    let result = ServiceProvider.getService(\"createimage\", data);\n\n    if (result.indexOf(\"@BASE@\") !== -1) {\n      // Replacing '@BASE@' with the base URL of createimage.\n      const baseParts = ServiceProvider.getServicePath(\"createimage\").split(\"/\");\n      baseParts.pop();\n      result = result.split(\"@BASE@\").join(baseParts.join(\"/\"));\n    }\n\n    return result;\n  }\n\n  /**\n   * Parses initial HTML code. If the HTML contains data generated by WIRIS,\n   * this data would be converted as following:\n   * <pre>\n   * MathML code: Image containing the corresponding MathML formulas.\n   * MathML code with LaTeX annotation : LaTeX string.\n   * </pre>\n   * @param {string} code - HTML code containing MathML data.\n   * @param {string} language - language to create image alt text.\n   * @returns {string} HTML code with the original MathML converted into LaTeX and images.\n   */\n  static initParse(code, language) {\n    /* Note: The code inside this function has been inverted.\n    If you invert again the code then you cannot use correctly LaTeX\n    in Moodle.\n    */\n    code = Parser.initParseSaveMode(code, language);\n    return Parser.initParseEditMode(code);\n  }\n\n  /**\n   * Parses initial HTML code depending on the save mode. Transforms all MathML\n   * occurrences for it's correspondent image or LaTeX.\n   * @param {string} code - HTML code to be parsed\n   * @param {string} language - language to create image alt text.\n   * @returns {string} HTML code parsed.\n   */\n  static initParseSaveMode(code, language) {\n    if (Configuration.get(\"saveMode\")) {\n      // Converting XML to tags.\n      code = Latex.parseMathmlToLatex(code, Constants.safeXmlCharacters);\n      code = Latex.parseMathmlToLatex(code, Constants.xmlCharacters);\n      code = Parser.parseMathmlToImg(code, Constants.safeXmlCharacters, language);\n      code = Parser.parseMathmlToImg(code, Constants.xmlCharacters, language);\n      if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"image\") {\n        code = Parser.codeImgTransform(code, \"base642showimage\");\n      }\n    }\n    return code;\n  }\n\n  /**\n   * Parses initial HTML code depending on the edit mode.\n   * If 'latex' parseMode is enabled all MathML containing an annotation with encoding='LaTeX' will\n   * be converted into a LaTeX string instead of an image.\n   * @param {string} code - HTML code containing MathML.\n   * @returns {string} parsed HTML code.\n   */\n  static initParseEditMode(code) {\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n      const imgList = Util.getElementsByNameFromString(code, \"img\", true);\n      const token = 'encoding=\"LaTeX\">';\n      // While replacing images with latex, the indexes of the found images changes\n      // respecting the original code, so this carry is needed.\n      let carry = 0;\n\n      for (let i = 0; i < imgList.length; i += 1) {\n        const imgCode = code.substring(imgList[i].start + carry, imgList[i].end + carry);\n\n        if (imgCode.indexOf(` class=\"${Configuration.get(\"imageClassName\")}\"`) !== -1) {\n          let mathmlStartToken = ` ${Configuration.get(\"imageMathmlAttribute\")}=\"`;\n          let mathmlStart = imgCode.indexOf(mathmlStartToken);\n\n          if (mathmlStart === -1) {\n            mathmlStartToken = ' alt=\"';\n            mathmlStart = imgCode.indexOf(mathmlStartToken);\n          }\n\n          if (mathmlStart !== -1) {\n            mathmlStart += mathmlStartToken.length;\n            const mathmlEnd = imgCode.indexOf('\"', mathmlStart);\n            const mathml = Util.htmlSanitize(MathML.safeXmlDecode(imgCode.substring(mathmlStart, mathmlEnd)));\n            let latexStartPosition = mathml.indexOf(token);\n\n            if (latexStartPosition !== -1) {\n              latexStartPosition += token.length;\n              const latexEndPosition = mathml.indexOf(\"</annotation>\", latexStartPosition);\n              const latex = mathml.substring(latexStartPosition, latexEndPosition);\n\n              const replaceText = `$$${Util.htmlEntitiesDecode(latex)}$$`;\n              const start = code.substring(0, imgList[i].start + carry);\n              const end = code.substring(imgList[i].end + carry);\n              code = start + replaceText + end;\n              carry += replaceText.length - (imgList[i].end - imgList[i].start);\n            }\n          }\n        }\n      }\n    }\n\n    return code;\n  }\n\n  /**\n   * Parses end HTML code. The end HTML code is HTML code with embedded images\n   * or LaTeX formulas created with MathType. <br>\n   * By default this method converts the formula images and LaTeX strings in MathML. <br>\n   * If image mode is enabled the images will not be converted into MathML. For further information see {@link https://docs.wiris.com/mathtype/en/mathtype-integrations/mathtype-web-interface-features/full-mathml-mode---wirisplugins-js.html}.\n   * @param {string} code - HTML to be parsed\n   * @returns {string} the HTML code parsed.\n   */\n  static endParse(code) {\n    // Transform LaTeX ocurrences to MathML elements.\n    const codeEndParsedEditMode = Parser.endParseEditMode(code);\n    // Transform img elements to MathML elements.\n    const codeEndParseSaveMode = Parser.endParseSaveMode(codeEndParsedEditMode);\n    return codeEndParseSaveMode;\n  }\n\n  /**\n   * Parses end HTML code depending on the edit mode.\n   * - LaTeX is an enabled parse mode, all LaTeX occurrences will be converted into MathML.\n   * @param {string} code - HTML code to be parsed.\n   * @returns {string} HTML code parsed.\n   */\n  static endParseEditMode(code) {\n    // Converting LaTeX to images.\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n      let output = \"\";\n      let endPosition = 0;\n      let startPosition = code.indexOf(\"$$\");\n      while (startPosition !== -1) {\n        output += code.substring(endPosition, startPosition);\n        endPosition = code.indexOf(\"$$\", startPosition + 2);\n\n        if (endPosition !== -1) {\n          // Before, it was a condition here to execute the next codelines\n          // 'latex.indexOf('<') == -1'.\n          // We don't know why it was used, but seems to have a conflict with\n          // latex formulas that contains '<'.\n          const latex = code.substring(startPosition + 2, endPosition);\n          const decodedLatex = Util.htmlEntitiesDecode(latex);\n          let mathml = Util.htmlSanitize(Latex.getMathMLFromLatex(decodedLatex, true));\n          if (!Configuration.get(\"saveHandTraces\")) {\n            // Remove hand traces.\n            mathml = MathML.removeAnnotation(mathml, \"application/json\");\n          }\n          output += mathml;\n          endPosition += 2;\n        } else {\n          output += \"$$\";\n          endPosition = startPosition + 2;\n        }\n\n        startPosition = code.indexOf(\"$$\", endPosition);\n      }\n\n      output += code.substring(endPosition, code.length);\n      code = output;\n    }\n\n    return code;\n  }\n\n  /**\n   * Parses end HTML code depending on the save mode. Converts all\n   * images into the element determined by the save mode:\n   * - xml: Parses images formulas into MathML.\n   * - safeXml: Parses images formulas into safeMAthML\n   * - base64: Parses images into base64 images.\n   * - image: Parse images into images (no parsing)\n   * @param {string} code - HTML code to be parsed\n   * @returns {string} HTML code parsed.\n   */\n  static endParseSaveMode(code) {\n    const savemode = Configuration.get(\"saveMode\");\n    const base64savemode = Configuration.get(\"base64savemode\");\n\n    if (savemode) {\n      if (savemode === \"safeXml\") {\n        code = Parser.codeImgTransform(code, \"img2mathml\");\n      } else if (savemode === \"xml\") {\n        code = Parser.codeImgTransform(code, \"img2mathml\");\n      } else if (savemode === \"base64\" && base64savemode === \"image\") {\n        code = Parser.codeImgTransform(code, \"img264\");\n      }\n    }\n\n    return code;\n  }\n\n  /**\n   * Auxiliar function that builds the data object to send to the showimage endpoint\n   * @param {Object[]} data - object containing showimage service parameters.\n   * @param {string} language - string containing the language of the formula.\n   * @returns {Object} JSON object with the data to send to showimage.\n   */\n  static createShowImageSrcData(data, language) {\n    const dataMd5 = {};\n    const renderParams = [\n      \"mml\",\n      \"color\",\n      \"centerbaseline\",\n      \"zoom\",\n      \"dpi\",\n      \"fontSize\",\n      \"fontFamily\",\n      \"defaultStretchy\",\n      \"backgroundColor\",\n      \"format\",\n    ];\n    renderParams.forEach((param) => {\n      if (typeof data[param] !== \"undefined\") {\n        dataMd5[param] = data[param];\n      }\n    });\n    // Data variables to get.\n    const dataObject = {};\n    Object.keys(data).forEach((key) => {\n      // We don't need mathml in this request we try to get cached.\n      // Only need the formula md5 calculated before.\n      if (key !== \"mml\") {\n        dataObject[key] = data[key];\n      }\n    });\n\n    dataObject.formula = com.wiris.js.JsPluginTools.md5encode(Util.propertiesToString(dataMd5));\n    dataObject.lang = typeof language === \"undefined\" ? \"en\" : language;\n    dataObject.version = Configuration.get(\"version\");\n\n    return dataObject;\n  }\n\n  /**\n   * Returns the result to call showimage service with the formula md5 as parameter.\n   *  The result could be:\n   * - {'status' : warning'} : The image associated to the MathML md5 is not in cache.\n   * - {'status' : 'ok' ...} : The image associated to the MathML md5 is in cache.\n   * @param {Object[]} data - object containing showimage service parameters.\n   * @param {string} language - string containing the language of the formula.\n   * @returns {Object} JSON object containing showimage response.\n   */\n  static createShowImageSrc(data, language) {\n    const dataObject = this.createShowImageSrcData(data, language);\n    const result = ServiceProvider.getService(\"showimage\", Util.httpBuildQuery(dataObject), true);\n    return result;\n  }\n\n  /**\n   * Transform html img tags inside a html code to mathml, base64 img tags (i.e with base64 on src)\n   * or showimage img tags (i.e with showimage.php on src)\n   * @param  {string} code - HTML code\n   * @param  {string} mode - base642showimage or img2mathml or img264 transform.\n   * @returns {string} html - code transformed.\n   */\n  static codeImgTransform(code, mode) {\n    let output = \"\";\n    let endPosition = 0;\n    const pattern = /<img/gi;\n    const patternLength = pattern.source.length;\n\n    while (pattern.test(code)) {\n      const startPosition = pattern.lastIndex - patternLength;\n      output += code.substring(endPosition, startPosition);\n\n      let i = startPosition + 1;\n\n      while (i < code.length && endPosition <= startPosition) {\n        const character = code.charAt(i);\n\n        if (character === '\"' || character === \"'\") {\n          const characterNextPosition = code.indexOf(character, i + 1);\n\n          if (characterNextPosition === -1) {\n            i = code.length; // End while.\n          } else {\n            i = characterNextPosition;\n          }\n        } else if (character === \">\") {\n          endPosition = i + 1;\n        }\n\n        i += 1;\n      }\n\n      if (endPosition < startPosition) {\n        // The img tag is stripped.\n        output += code.substring(startPosition, code.length);\n        return output;\n      }\n      let imgCode = code.substring(startPosition, endPosition);\n      const imgObject = Util.createObject(imgCode);\n      let xmlCode = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\n      let convertToXml;\n      let convertToSafeXml;\n\n      if (mode === \"base642showimage\") {\n        if (xmlCode == null) {\n          xmlCode = imgObject.getAttribute(\"alt\");\n        }\n        xmlCode = MathML.safeXmlDecode(xmlCode);\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, null, null);\n        output += Util.createObjectCode(imgCode);\n      } else if (mode === \"img2mathml\") {\n        if (Configuration.get(\"saveMode\")) {\n          if (Configuration.get(\"saveMode\") === \"safeXml\") {\n            convertToXml = true;\n            convertToSafeXml = true;\n          } else if (Configuration.get(\"saveMode\") === \"xml\") {\n            convertToXml = true;\n            convertToSafeXml = false;\n          }\n        }\n        output += Util.getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml);\n      } else if (mode === \"img264\") {\n        if (xmlCode === null) {\n          xmlCode = imgObject.getAttribute(\"alt\");\n        }\n        xmlCode = MathML.safeXmlDecode(xmlCode);\n\n        const properties = {};\n        properties.base64 = \"true\";\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, properties, null);\n        // Metrics.\n        Image.setImgSize(imgCode, imgCode.src, true);\n        output += Util.createObjectCode(imgCode);\n      }\n    }\n    output += code.substring(endPosition, code.length);\n    return output;\n  }\n\n  /**\n   * Converts all occurrences of MathML to the corresponding image.\n   * @param {string} content - string with valid MathML code.\n   * The MathML code doesn't contain semantics.\n   * @param {Constants} characters - Constant object containing xmlCharacters\n   * or safeXmlCharacters relation.\n   * @param {string} language - a valid language code\n   * in order to generate formula accessibility.\n   * @returns {string} The input string with all the MathML\n   * occurrences replaced by the corresponding image.\n   */\n  static parseMathmlToImg(content, characters, language) {\n    let output = \"\";\n    const mathTagBegin = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    let start = content.indexOf(mathTagBegin);\n    let end = 0;\n\n    while (start !== -1) {\n      output += content.substring(end, start);\n      // Avoid WIRIS images to be parsed.\n      const imageMathmlAtrribute = content.indexOf(Configuration.get(\"imageMathmlAttribute\"));\n      end = content.indexOf(mathTagEnd, start);\n\n      if (end === -1) {\n        end = content.length - 1;\n      } else if (imageMathmlAtrribute !== -1) {\n        // First close tag of img attribute\n        // If a mathmlAttribute exists should be inside a img tag.\n        end += content.indexOf(\"/>\", start);\n      } else {\n        end += mathTagEnd.length;\n      }\n\n      if (!MathML.isMathmlInAttribute(content, start) && imageMathmlAtrribute === -1) {\n        let mathml = content.substring(start, end);\n        mathml =\n          characters.id === Constants.safeXmlCharacters.id\n            ? MathML.safeXmlDecode(mathml)\n            : MathML.mathMLEntities(mathml);\n        output += Util.createObjectCode(Parser.mathmlToImgObject(document, mathml, null, language));\n      } else {\n        output += content.substring(start, end);\n      }\n\n      start = content.indexOf(mathTagBegin, end);\n    }\n\n    output += content.substring(end, content.length);\n    return output;\n  }\n}\n\n// Mutation observers to avoid wiris image formulas class be removed.\nif (typeof MutationObserver !== \"undefined\") {\n  const mutationObserver = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.oldValue === Configuration.get(\"imageClassName\") &&\n        mutation.attributeName === \"class\" &&\n        mutation.target.className.indexOf(Configuration.get(\"imageClassName\")) === -1\n      ) {\n        mutation.target.className = Configuration.get(\"imageClassName\");\n      }\n    });\n  });\n\n  Parser.observer = Object.create(mutationObserver);\n  Parser.observer.Config = { attributes: true, attributeOldValue: true };\n  // We use own default config.\n  Parser.observer.observe = function (target) {\n    Object.getPrototypeOf(this).observe(target, this.Config);\n  };\n}\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-extra-semi */\n\n// The rules above are disabled because we are implementing\n// an external interface.\n\nexport default class EditorListener {\n  /**\n   * @classdesc\n   * Determines if the content of the\n   * MathType Editor has changes.\n   * @implements {EditorListeners}\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Indicates if the content of the editor has changed.\n     * @type {Boolean}\n     */\n    this.isContentChanged = false;\n\n    /**\n     * Indicates if the listener should be waiting for changes in the editor.\n     * @type {Boolean}\n     */\n    this.waitingForChanges = false;\n  }\n\n  /**\n   * Sets {@link EditorListener.isContentChanged} property.\n   * @param {Boolean} value - The new vlue.\n   */\n  setIsContentChanged(value) {\n    this.isContentChanged = value;\n  }\n\n  /**\n   * Returns true if the content of the editor has been changed, false otherwise.\n   * @return {Boolean}\n   */\n  getIsContentChanged() {\n    return this.isContentChanged;\n  }\n\n  /**\n   * Determines if the EditorListener should wait for any changes.\n   * @param {Boolean} value - True if the editor should wait for changes, false otherwise.\n   */\n  setWaitingForChanges(value) {\n    this.waitingForChanges = value;\n  }\n\n  /**\n   * EditorListener method to overwrite.\n   * @type {JsEditor}\n   * @ignore\n   */\n  caretPositionChanged(_editor) {}\n\n  /**\n   * EditorListener method to overwrite\n   * @type {JsEditor}\n   * @ignore\n   */\n  clipboardChanged(_editor) {}\n\n  /**\n   * Determines if the content of an editor has been changed.\n   * @param {JsEditor} editor - editor object.\n   */\n  contentChanged(_editor) {\n    if (this.waitingForChanges === true && this.isContentChanged === false) {\n      this.isContentChanged = true;\n    }\n  }\n\n  /**\n   * EditorListener method to overwrite\n   * @param {JsEditor} editor - The editor instance.\n   */\n  styleChanged(_editor) {}\n\n  /**\n   * EditorListener method to overwrite\n   * @param {JsEditor} - The editor instance.\n   */\n  transformationReceived(_editor) {}\n}\n","let wasm;\n\nconst cachedTextDecoder =\n  typeof TextDecoder !== \"undefined\"\n    ? new TextDecoder(\"utf-8\", { ignoreBOM: true, fatal: true })\n    : {\n        decode: () => {\n          throw Error(\"TextDecoder not available\");\n        },\n      };\n\nif (typeof TextDecoder !== \"undefined\") {\n  cachedTextDecoder.decode();\n}\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n  if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n    cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n  }\n  return cachedUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n  ptr = ptr >>> 0;\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n  if (heap_next === heap.length) heap.push(heap.length + 1);\n  const idx = heap_next;\n  heap_next = heap[idx];\n\n  heap[idx] = obj;\n  return idx;\n}\n\nfunction getObject(idx) {\n  return heap[idx];\n}\n\nfunction dropObject(idx) {\n  if (idx < 132) return;\n  heap[idx] = heap_next;\n  heap_next = idx;\n}\n\nfunction takeObject(idx) {\n  const ret = getObject(idx);\n  dropObject(idx);\n  return ret;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder =\n  typeof TextEncoder !== \"undefined\"\n    ? new TextEncoder(\"utf-8\")\n    : {\n        encode: () => {\n          throw Error(\"TextEncoder not available\");\n        },\n      };\n\nconst encodeString =\n  typeof cachedTextEncoder.encodeInto === \"function\"\n    ? function (arg, view) {\n        return cachedTextEncoder.encodeInto(arg, view);\n      }\n    : function (arg, view) {\n        const buf = cachedTextEncoder.encode(arg);\n        view.set(buf);\n        return {\n          read: arg.length,\n          written: buf.length,\n        };\n      };\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n  if (realloc === undefined) {\n    const buf = cachedTextEncoder.encode(arg);\n    const ptr = malloc(buf.length, 1) >>> 0;\n    getUint8Memory0()\n      .subarray(ptr, ptr + buf.length)\n      .set(buf);\n    WASM_VECTOR_LEN = buf.length;\n    return ptr;\n  }\n\n  let len = arg.length;\n  let ptr = malloc(len, 1) >>> 0;\n\n  const mem = getUint8Memory0();\n\n  let offset = 0;\n\n  for (; offset < len; offset++) {\n    const code = arg.charCodeAt(offset);\n    if (code > 0x7f) break;\n    mem[ptr + offset] = code;\n  }\n\n  if (offset !== len) {\n    if (offset !== 0) {\n      arg = arg.slice(offset);\n    }\n    ptr = realloc(ptr, len, (len = offset + arg.length * 3), 1) >>> 0;\n    const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n    const ret = encodeString(arg, view);\n\n    offset += ret.written;\n  }\n\n  WASM_VECTOR_LEN = offset;\n  return ptr;\n}\n\nfunction isLikeNone(x) {\n  return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n  if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n    cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n  }\n  return cachedInt32Memory0;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n  if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n    cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n  }\n  return cachedFloat64Memory0;\n}\n\nlet cachedBigInt64Memory0 = null;\n\nfunction getBigInt64Memory0() {\n  if (cachedBigInt64Memory0 === null || cachedBigInt64Memory0.byteLength === 0) {\n    cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\n  }\n  return cachedBigInt64Memory0;\n}\n\nfunction debugString(val) {\n  // primitive types\n  const type = typeof val;\n  if (type == \"number\" || type == \"boolean\" || val == null) {\n    return `${val}`;\n  }\n  if (type == \"string\") {\n    return `\"${val}\"`;\n  }\n  if (type == \"symbol\") {\n    const description = val.description;\n    if (description == null) {\n      return \"Symbol\";\n    } else {\n      return `Symbol(${description})`;\n    }\n  }\n  if (type == \"function\") {\n    const name = val.name;\n    if (typeof name == \"string\" && name.length > 0) {\n      return `Function(${name})`;\n    } else {\n      return \"Function\";\n    }\n  }\n  // objects\n  if (Array.isArray(val)) {\n    const length = val.length;\n    let debug = \"[\";\n    if (length > 0) {\n      debug += debugString(val[0]);\n    }\n    for (let i = 1; i < length; i++) {\n      debug += \", \" + debugString(val[i]);\n    }\n    debug += \"]\";\n    return debug;\n  }\n  // Test for built-in\n  const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n  let className;\n  if (builtInMatches.length > 1) {\n    className = builtInMatches[1];\n  } else {\n    // Failed to match the standard '[object ClassName]'\n    return toString.call(val);\n  }\n  if (className == \"Object\") {\n    // we're a user defined class or Object\n    // JSON.stringify avoids problems with cycles, and is generally much\n    // easier than looping through ownProperties of `val`.\n    try {\n      return \"Object(\" + JSON.stringify(val) + \")\";\n    } catch (_) {\n      return \"Object\";\n    }\n  }\n  // errors\n  if (val instanceof Error) {\n    return `${val.name}: ${val.message}\\n${val.stack}`;\n  }\n  // TODO we could test for more things here, like `Set`s and `Map`s.\n  return className;\n}\n\nfunction makeClosure(arg0, arg1, dtor, f) {\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\n  const real = (...args) => {\n    // First up with a closure we increment the internal reference\n    // count. This ensures that the Rust closure environment won't\n    // be deallocated while we're invoking it.\n    state.cnt++;\n    try {\n      return f(state.a, state.b, ...args);\n    } finally {\n      if (--state.cnt === 0) {\n        wasm.__wbindgen_export_2.get(state.dtor)(state.a, state.b);\n        state.a = 0;\n      }\n    }\n  };\n  real.original = state;\n\n  return real;\n}\nfunction __wbg_adapter_46(arg0, arg1, arg2) {\n  wasm.__wbindgen_export_3(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\n  const real = (...args) => {\n    // First up with a closure we increment the internal reference\n    // count. This ensures that the Rust closure environment won't\n    // be deallocated while we're invoking it.\n    state.cnt++;\n    const a = state.a;\n    state.a = 0;\n    try {\n      return f(a, state.b, ...args);\n    } finally {\n      if (--state.cnt === 0) {\n        wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\n      } else {\n        state.a = a;\n      }\n    }\n  };\n  real.original = state;\n\n  return real;\n}\nfunction __wbg_adapter_49(arg0, arg1) {\n  wasm.__wbindgen_export_4(arg0, arg1);\n}\n\nfunction __wbg_adapter_52(arg0, arg1, arg2) {\n  wasm.__wbindgen_export_5(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction handleError(f, args) {\n  try {\n    return f.apply(this, args);\n  } catch (e) {\n    wasm.__wbindgen_export_6(addHeapObject(e));\n  }\n}\nfunction __wbg_adapter_103(arg0, arg1, arg2, arg3) {\n  wasm.__wbindgen_export_7(arg0, arg1, addHeapObject(arg2), addHeapObject(arg3));\n}\n\n/**\n */\nexport function main_js() {\n  wasm.main_js();\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n  ptr = ptr >>> 0;\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n */\nexport const Level = Object.freeze({\n  Err: 0,\n  0: \"Err\",\n  Warn: 1,\n  1: \"Warn\",\n  Info: 2,\n  2: \"Info\",\n  Debug: 3,\n  3: \"Debug\",\n});\n/**\n */\nexport class Telemeter {\n  __destroy_into_raw() {\n    const ptr = this.__wbg_ptr;\n    this.__wbg_ptr = 0;\n\n    return ptr;\n  }\n\n  free() {\n    const ptr = this.__destroy_into_raw();\n    wasm.__wbg_telemeter_free(ptr);\n  }\n  /**\n   * @param {any} solution\n   * @param {any} hosts\n   * @param {any} config\n   */\n  constructor(solution, hosts, config) {\n    try {\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n      wasm.telemeter_new(retptr, addHeapObject(solution), addHeapObject(hosts), addHeapObject(config));\n      var r0 = getInt32Memory0()[retptr / 4 + 0];\n      var r1 = getInt32Memory0()[retptr / 4 + 1];\n      var r2 = getInt32Memory0()[retptr / 4 + 2];\n      if (r2) {\n        throw takeObject(r1);\n      }\n      this.__wbg_ptr = r0 >>> 0;\n      return this;\n    } finally {\n      wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n  }\n  /**\n   * @param {string} sender_id\n   * @returns {Promise<any>}\n   */\n  identify(sender_id) {\n    const ptr0 = passStringToWasm0(sender_id, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_identify(this.__wbg_ptr, ptr0, len0);\n    return takeObject(ret);\n  }\n  /**\n   * @param {string} event_type\n   * @param {any} event_payload\n   * @returns {Promise<any>}\n   */\n  track(event_type, event_payload) {\n    const ptr0 = passStringToWasm0(event_type, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_track(this.__wbg_ptr, ptr0, len0, addHeapObject(event_payload));\n    return takeObject(ret);\n  }\n  /**\n   * @param {any} level\n   * @param {string} message\n   * @param {any} payload\n   * @returns {Promise<any>}\n   */\n  log(level, message, payload) {\n    const ptr0 = passStringToWasm0(message, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_log(this.__wbg_ptr, addHeapObject(level), ptr0, len0, addHeapObject(payload));\n    return takeObject(ret);\n  }\n  /**\n   * @returns {Promise<any>}\n   */\n  finish() {\n    const ptr = this.__destroy_into_raw();\n    const ret = wasm.telemeter_finish(ptr);\n    return takeObject(ret);\n  }\n  /**\n   * @param {boolean | undefined} [new_debug_status]\n   */\n  debug(new_debug_status) {\n    wasm.telemeter_debug(this.__wbg_ptr, isLikeNone(new_debug_status) ? 0xffffff : new_debug_status ? 1 : 0);\n  }\n}\n\nasync function __wbg_load(module, imports) {\n  if (typeof Response === \"function\" && module instanceof Response) {\n    if (typeof WebAssembly.instantiateStreaming === \"function\") {\n      try {\n        return await WebAssembly.instantiateStreaming(module, imports);\n      } catch (e) {\n        if (module.headers.get(\"Content-Type\") != \"application/wasm\") {\n          console.warn(\n            \"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\",\n            e,\n          );\n        } else {\n          throw e;\n        }\n      }\n    }\n\n    const bytes = await module.arrayBuffer();\n    return await WebAssembly.instantiate(bytes, imports);\n  } else {\n    const instance = await WebAssembly.instantiate(module, imports);\n\n    if (instance instanceof WebAssembly.Instance) {\n      return { instance, module };\n    } else {\n      return instance;\n    }\n  }\n}\n\nfunction __wbg_get_imports() {\n  const imports = {};\n  imports.wbg = {};\n  imports.wbg.__wbindgen_string_new = function (arg0, arg1) {\n    const ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_c728d68b8b34487e = function () {\n    const ret = new Object();\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_status_7841bb47be2a8f16 = function (arg0) {\n    const ret = getObject(arg0).status;\n    return ret;\n  };\n  imports.wbg.__wbg_headers_ea7ef583d1564b08 = function (arg0) {\n    const ret = getObject(arg0).headers;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new0_ad75dd38f92424e2 = function () {\n    const ret = new Date();\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getTime_ed6ee333b702f8fc = function (arg0) {\n    const ret = getObject(arg0).getTime();\n    return ret;\n  };\n  imports.wbg.__wbindgen_object_drop_ref = function (arg0) {\n    takeObject(arg0);\n  };\n  imports.wbg.__wbindgen_is_object = function (arg0) {\n    const val = getObject(arg0);\n    const ret = typeof val === \"object\" && val !== null;\n    return ret;\n  };\n  imports.wbg.__wbg_crypto_58f13aa23ffcb166 = function (arg0) {\n    const ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_process_5b786e71d465a513 = function (arg0) {\n    const ret = getObject(arg0).process;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_versions_c2ab80650590b6a2 = function (arg0) {\n    const ret = getObject(arg0).versions;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_node_523d7bd03ef69fba = function (arg0) {\n    const ret = getObject(arg0).node;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_is_string = function (arg0) {\n    const ret = typeof getObject(arg0) === \"string\";\n    return ret;\n  };\n  imports.wbg.__wbg_msCrypto_abcb1295e768d1f2 = function (arg0) {\n    const ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_require_2784e593a4674877 = function () {\n    return handleError(function () {\n      const ret = module.require;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_newwithlength_13b5319ab422dcf6 = function (arg0) {\n    const ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_get_4a9aa5157afeb382 = function (arg0, arg1) {\n    const ret = getObject(arg0)[arg1 >>> 0];\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_next_1989a20442400aaa = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).next();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_done_bc26bf4ada718266 = function (arg0) {\n    const ret = getObject(arg0).done;\n    return ret;\n  };\n  imports.wbg.__wbg_value_0570714ff7d75f35 = function (arg0) {\n    const ret = getObject(arg0).value;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_iterator_7ee1a391d310f8e4 = function () {\n    const ret = Symbol.iterator;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_get_2aff440840bb6202 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = Reflect.get(getObject(arg0), getObject(arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_next_15da6a3df9290720 = function (arg0) {\n    const ret = getObject(arg0).next;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_is_function = function (arg0) {\n    const ret = typeof getObject(arg0) === \"function\";\n    return ret;\n  };\n  imports.wbg.__wbg_call_669127b9d730c650 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = getObject(arg0).call(getObject(arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_object_clone_ref = function (arg0) {\n    const ret = getObject(arg0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_self_3fad056edded10bd = function () {\n    return handleError(function () {\n      const ret = self.self;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_window_a4f46c98a61d4089 = function () {\n    return handleError(function () {\n      const ret = window.window;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_globalThis_17eff828815f7d84 = function () {\n    return handleError(function () {\n      const ret = globalThis.globalThis;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_global_46f939f6541643c5 = function () {\n    return handleError(function () {\n      const ret = global.global;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_is_undefined = function (arg0) {\n    const ret = getObject(arg0) === undefined;\n    return ret;\n  };\n  imports.wbg.__wbg_newnoargs_ccdcae30fd002262 = function (arg0, arg1) {\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_isArray_38525be7442aa21e = function (arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n  };\n  imports.wbg.__wbg_call_53fc3abd42e24ec8 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_isSafeInteger_c38b0a16d0c7cef7 = function (arg0) {\n    const ret = Number.isSafeInteger(getObject(arg0));\n    return ret;\n  };\n  imports.wbg.__wbg_new_feb65b865d980ae2 = function (arg0, arg1) {\n    try {\n      var state0 = { a: arg0, b: arg1 };\n      var cb0 = (arg0, arg1) => {\n        const a = state0.a;\n        state0.a = 0;\n        try {\n          return __wbg_adapter_103(a, state0.b, arg0, arg1);\n        } finally {\n          state0.a = a;\n        }\n      };\n      const ret = new Promise(cb0);\n      return addHeapObject(ret);\n    } finally {\n      state0.a = state0.b = 0;\n    }\n  };\n  imports.wbg.__wbindgen_memory = function () {\n    const ret = wasm.memory;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_buffer_344d9b41efe96da7 = function (arg0) {\n    const ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_d8a000788389a31e = function (arg0) {\n    const ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_set_dcfd613a3420f908 = function (arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n  };\n  imports.wbg.__wbg_length_a5587d6cd79ab197 = function (arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n  };\n  imports.wbg.__wbindgen_string_get = function (arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof obj === \"string\" ? obj : undefined;\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    var len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_stringify_4039297315a25b00 = function () {\n    return handleError(function (arg0) {\n      const ret = JSON.stringify(getObject(arg0));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_set_40f7786a25a9cc7e = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n      return ret;\n    }, arguments);\n  };\n  imports.wbg.__wbg_has_cdf8b85f6e903c80 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = Reflect.has(getObject(arg0), getObject(arg1));\n      return ret;\n    }, arguments);\n  };\n  imports.wbg.__wbg_fetch_701fcd2bde06379a = function (arg0, arg1) {\n    const ret = getObject(arg0).fetch(getObject(arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_fetch_b5d6bebed1e6c2d2 = function (arg0) {\n    const ret = fetch(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3 = function (arg0, arg1, arg2) {\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_e4960143e41697a4 = function () {\n    return handleError(function () {\n      const ret = new AbortController();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_signal_1ed842bebd6ae322 = function (arg0) {\n    const ret = getObject(arg0).signal;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_abort_8355f201f30300bb = function (arg0) {\n    getObject(arg0).abort();\n  };\n  imports.wbg.__wbindgen_error_new = function (arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_jsval_loose_eq = function (arg0, arg1) {\n    const ret = getObject(arg0) == getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbindgen_boolean_get = function (arg0) {\n    const v = getObject(arg0);\n    const ret = typeof v === \"boolean\" ? (v ? 1 : 0) : 2;\n    return ret;\n  };\n  imports.wbg.__wbindgen_number_get = function (arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof obj === \"number\" ? obj : undefined;\n    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n  };\n  imports.wbg.__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Uint8Array;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof ArrayBuffer;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_entries_6d727b73ee02b7ce = function (arg0) {\n    const ret = Object.entries(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_String_917f38a1211cf44b = function (arg0, arg1) {\n    const ret = String(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_warn_ade8d3b7ecee11ff = function (arg0, arg1) {\n    console.warn(getObject(arg0), getObject(arg1));\n  };\n  imports.wbg.__wbg_readyState_13e55da5ad6d64e2 = function (arg0) {\n    const ret = getObject(arg0).readyState;\n    return ret;\n  };\n  imports.wbg.__wbg_warn_4affe1093892a4ef = function (arg0) {\n    console.warn(getObject(arg0));\n  };\n  imports.wbg.__wbg_close_f4135085ec3fc8f0 = function () {\n    return handleError(function (arg0) {\n      getObject(arg0).close();\n    }, arguments);\n  };\n  imports.wbg.__wbg_new_b9b318679315404f = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = new WebSocket(getStringFromWasm0(arg0, arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_setbinaryType_dcb62e0f2b346301 = function (arg0, arg1) {\n    getObject(arg0).binaryType = takeObject(arg1);\n  };\n  imports.wbg.__wbg_log_7811587c4c6d2844 = function (arg0) {\n    console.log(getObject(arg0));\n  };\n  imports.wbg.__wbg_error_f0a6627f4b23c19d = function (arg0) {\n    console.error(getObject(arg0));\n  };\n  imports.wbg.__wbg_info_3ca7870690403fee = function (arg0) {\n    console.info(getObject(arg0));\n  };\n  imports.wbg.__wbg_document_183cf1eecfdbffee = function (arg0) {\n    const ret = getObject(arg0).document;\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\n  };\n  imports.wbg.__wbg_visibilityState_9721703a5ef75faf = function (arg0) {\n    const ret = getObject(arg0).visibilityState;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getwithrefkey_3b3c46ba20582127 = function (arg0, arg1) {\n    const ret = getObject(arg0)[getObject(arg1)];\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_length_cace2e0b3ddc0502 = function (arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n  };\n  imports.wbg.__wbg_addEventListener_0f2891b0794e07fa = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      getObject(arg0).addEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\n    }, arguments);\n  };\n  imports.wbg.__wbg_removeEventListener_104d11302bb212d1 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      getObject(arg0).removeEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_is_bigint = function (arg0) {\n    const ret = typeof getObject(arg0) === \"bigint\";\n    return ret;\n  };\n  imports.wbg.__wbindgen_bigint_from_i64 = function (arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_in = function (arg0, arg1) {\n    const ret = getObject(arg0) in getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbindgen_bigint_from_u64 = function (arg0) {\n    const ret = BigInt.asUintN(64, arg0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_jsval_eq = function (arg0, arg1) {\n    const ret = getObject(arg0) === getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbg_localStorage_e11f72e996a4f5d9 = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).localStorage;\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_getItem_c81cd3ae30cd579a = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      const ret = getObject(arg1).getItem(getStringFromWasm0(arg2, arg3));\n      var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n      var len1 = WASM_VECTOR_LEN;\n      getInt32Memory0()[arg0 / 4 + 1] = len1;\n      getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    }, arguments);\n  };\n  imports.wbg.__wbg_navigator_7078da62d92ff5ad = function (arg0) {\n    const ret = getObject(arg0).navigator;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_mediaDevices_e00b1f64d2b9939f = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).mediaDevices;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_enumerateDevices_619d52f5eef34c2f = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).enumerateDevices();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_setItem_fe04f524052a3839 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n      getObject(arg0).setItem(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_cb_drop = function (arg0) {\n    const obj = takeObject(arg0).original;\n    if (obj.cnt-- == 1) {\n      obj.a = 0;\n      return true;\n    }\n    const ret = false;\n    return ret;\n  };\n  imports.wbg.__wbg_deviceId_58f7da2228a26c02 = function (arg0, arg1) {\n    const ret = getObject(arg1).deviceId;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_instanceof_Response_944e2745b5db71f5 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Response;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_randomFillSync_a0d98aa11c81fe89 = function () {\n    return handleError(function (arg0, arg1) {\n      getObject(arg0).randomFillSync(takeObject(arg1));\n    }, arguments);\n  };\n  imports.wbg.__wbg_subarray_6ca5cfa7fbb9abbe = function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getRandomValues_504510b5564925af = function () {\n    return handleError(function (arg0, arg1) {\n      getObject(arg0).getRandomValues(getObject(arg1));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_bigint_get_as_i64 = function (arg0, arg1) {\n    const v = getObject(arg1);\n    const ret = typeof v === \"bigint\" ? v : undefined;\n    getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? BigInt(0) : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n  };\n  imports.wbg.__wbindgen_debug_string = function (arg0, arg1) {\n    const ret = debugString(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n  };\n  imports.wbg.__wbg_then_89e1c559530b85cf = function (arg0, arg1) {\n    const ret = getObject(arg0).then(getObject(arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_queueMicrotask_e5949c35d772a669 = function (arg0) {\n    queueMicrotask(getObject(arg0));\n  };\n  imports.wbg.__wbg_then_1bbc9edafd859b06 = function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_queueMicrotask_2be8b97a81fe4d00 = function (arg0) {\n    const ret = getObject(arg0).queueMicrotask;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_resolve_a3252b2860f0a09e = function (arg0) {\n    const ret = Promise.resolve(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_url_1f609e63ff1a7983 = function (arg0, arg1) {\n    const ret = getObject(arg1).url;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_send_2860805104507701 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      getObject(arg0).send(getArrayU8FromWasm0(arg1, arg2));\n    }, arguments);\n  };\n  imports.wbg.__wbg_instanceof_Window_cde2416cf5126a72 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Window;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_new_19676474aa414d62 = function () {\n    return handleError(function () {\n      const ret = new Headers();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_append_feec4143bbf21904 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n      getObject(arg0).append(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments);\n  };\n  imports.wbg.__wbg_newwithstrandinit_29038da14d09e330 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1532 = function (arg0, arg1, arg2) {\n    const ret = makeClosure(arg0, arg1, 76, __wbg_adapter_46);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1602 = function (arg0, arg1, arg2) {\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_49);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1834 = function (arg0, arg1, arg2) {\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_52);\n    return addHeapObject(ret);\n  };\n\n  return imports;\n}\n\nfunction __wbg_init_memory(imports, maybe_memory) {}\n\nfunction __wbg_finalize_init(instance, module) {\n  wasm = instance.exports;\n  __wbg_init.__wbindgen_wasm_module = module;\n  cachedBigInt64Memory0 = null;\n  cachedFloat64Memory0 = null;\n  cachedInt32Memory0 = null;\n  cachedUint8Memory0 = null;\n\n  wasm.__wbindgen_start();\n  return wasm;\n}\n\nfunction initSync(module) {\n  if (wasm !== undefined) return wasm;\n\n  const imports = __wbg_get_imports();\n\n  __wbg_init_memory(imports);\n\n  if (!(module instanceof WebAssembly.Module)) {\n    module = new WebAssembly.Module(module);\n  }\n\n  const instance = new WebAssembly.Instance(module, imports);\n\n  return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(input) {\n  if (wasm !== undefined) return wasm;\n\n  if (typeof input === \"undefined\") {\n    input = new URL(\"telemeter_wasm_bg.wasm\", import.meta.url);\n  }\n  const imports = __wbg_get_imports();\n\n  if (\n    typeof input === \"string\" ||\n    (typeof Request === \"function\" && input instanceof Request) ||\n    (typeof URL === \"function\" && input instanceof URL)\n  ) {\n    input = fetch(input);\n  }\n\n  __wbg_init_memory(imports);\n\n  const { instance, module } = await __wbg_load(await input, imports);\n\n  return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","import init, { Telemeter as TelemeterWASM } from \"../telemeter-wasm\";\n\n/**\n * @classdesc\n * This class implements the @wiris/telemeter-wasm. A utility that helps our Solutions to send the data\n * to Telemetry in a more comfortable and homogeneous way.\n */\nexport default class Telemeter {\n  /**\n   * Inits Telemeter class.\n   * The parameters structures are defiended on {@link [Telemeter API](https://github.com/wiris/telemeter/blob/main/docs/USAGE.md#telemeter-api)}\n   * @param {Object} telemeterAttributes.solution - The product that send data to Telemetry.\n   * @param {Object} telemeterAttributes.hosts - Data about the environment where solution is integrated.\n   * @param {Object} telemeterAttributes.config - Configuration parameters.\n   */\n  static init(telemeterAttributes) {\n    if (!this.telemeter && !this.waitingForInit) {\n      this.waitingForInit = true;\n      init(telemeterAttributes.url)\n        .then(() => {\n          this.telemeter = new TelemeterWASM(\n            telemeterAttributes.solution,\n            telemeterAttributes.hosts,\n            telemeterAttributes.config,\n          );\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => (this.waitingForInit = false));\n    }\n  }\n\n  /**\n   * Closes the Telemetry Session. After calling this method no data will be added to the Telemetry Session.\n   */\n  static async finish() {\n    if (!this.telemeter) return;\n\n    try {\n      let local_telemeter = this.telemeter;\n      this.telemeter = undefined;\n      await local_telemeter.finish();\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n","import Configuration from \"./configuration\";\nimport Core from \"./core.src\";\nimport EditorListener from \"./editorlistener\";\nimport Listeners from \"./listeners\";\nimport MathML from \"./mathml\";\nimport Util from \"./util\";\nimport Telemeter from \"./telemeter\";\n\nexport default class ContentManager {\n  /**\n   * @classdesc\n   * This class represents a modal dialog, managing the following:\n   * - The insertion of content into the current instance of the {@link ModalDialog} class.\n   * - The actions to be done once the modal object has been submitted\n   *   (submitAction} method).\n   * - The update of the content when the {@link ModalDialog} class is also updated,\n   *   for example when ModalDialog is re-opened.\n   * - The communication between the {@link ModalDialog} class and itself, if the content\n   *   has been changed (hasChanges} method).\n   * @constructs\n   * @param {Object} contentManagerAttributes - Object containing all attributes needed to\n   * create a new instance.\n   */\n  constructor(contentManagerAttributes) {\n    /**\n     * An object containing MathType editor parameters. See\n     * http://docs.wiris.com/en/mathtype/mathtype_web/sdk-api/parameters for further information.\n     * @type {Object}\n     */\n    this.editorAttributes = {};\n    if (\"editorAttributes\" in contentManagerAttributes) {\n      this.editorAttributes = contentManagerAttributes.editorAttributes;\n    } else {\n      throw new Error(\"ContentManager constructor error: editorAttributes property missed.\");\n    }\n\n    /**\n     * CustomEditors instance. Contains the custom editors.\n     * @type {CustomEditors}\n     */\n    this.customEditors = null;\n    if (\"customEditors\" in contentManagerAttributes) {\n      this.customEditors = contentManagerAttributes.customEditors;\n    }\n\n    /**\n     * Environment properties. This object contains data about the integration platform.\n     * @type {Object}\n     * @property {String} editor - Editor name. Usually the HTML editor.\n     * @property {String} mode - Save mode. Xml by default.\n     * @property {String} version - Plugin version.\n     */\n    this.environment = {};\n    if (\"environment\" in contentManagerAttributes) {\n      this.environment = contentManagerAttributes.environment;\n    } else {\n      throw new Error(\"ContentManager constructor error: environment property missed\");\n    }\n\n    /**\n     * ContentManager language.\n     * @type {String}\n     */\n    this.language = \"\";\n    if (\"language\" in contentManagerAttributes) {\n      this.language = contentManagerAttributes.language;\n    } else {\n      throw new Error(\"ContentManager constructor error: language property missed\");\n    }\n\n    /**\n     * {@link EditorListener} instance. Manages the changes inside the editor.\n     * @type {EditorListener}\n     */\n    this.editorListener = new EditorListener();\n\n    /**\n     * MathType editor instance.\n     * @type {JsEditor}\n     */\n    this.editor = null;\n\n    /**\n     * Navigator user agent.\n     * @type {String}\n     */\n    this.ua = navigator.userAgent.toLowerCase();\n\n    /**\n     * Mobile device properties object\n     * @type {DeviceProperties}\n     */\n    this.deviceProperties = {};\n    this.deviceProperties.isAndroid = this.ua.indexOf(\"android\") > -1;\n    this.deviceProperties.isIOS = ContentManager.isIOS();\n\n    /**\n     * Custom editor toolbar.\n     * @type {String}\n     */\n    this.toolbar = null;\n\n    /**\n     * Custom editor toolbar.\n     * @type {String}\n     */\n    this.dbclick = null;\n\n    /**\n     * Instance of the {@link ModalDialog} class associated with the current\n     * {@link ContentManager} instance.\n     * @type {ModalDialog}\n     */\n    this.modalDialogInstance = null;\n\n    /**\n     * ContentManager listeners.\n     * @type {Listeners}\n     */\n    this.listeners = new Listeners();\n\n    /**\n     * MathML associated to the ContentManager instance.\n     * @type {String}\n     */\n    this.mathML = null;\n\n    /**\n     * Indicates if the edited element is a new one or not.\n     * @type {Boolean}\n     */\n    this.isNewElement = true;\n\n    /**\n     * {@link IntegrationModel} instance. Needed to call wrapper methods.\n     * @type {IntegrationModel}\n     */\n    this.integrationModel = null;\n  }\n\n  /**\n   * Adds a new listener to the current {@link ContentManager} instance.\n   * @param {Object} listener - The listener to be added.\n   */\n  addListener(listener) {\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Sets an instance of {@link IntegrationModel} class to the current {@link ContentManager}\n   * instance.\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} instance.\n   */\n  setIntegrationModel(integrationModel) {\n    this.integrationModel = integrationModel;\n  }\n\n  /**\n   * Sets the {@link ModalDialog} instance into the current {@link ContentManager} instance.\n   * @param {ModalDialog} modalDialogInstance - The {@link ModalDialog} instance\n   */\n  setModalDialogInstance(modalDialogInstance) {\n    this.modalDialogInstance = modalDialogInstance;\n  }\n\n  /**\n   * Inserts the content into the current {@link ModalDialog} instance updating\n   * the title and inserting the JavaScript editor.\n   */\n  insert() {\n    // Before insert the editor we update the modal object title to avoid weird render display.\n    this.updateTitle(this.modalDialogInstance);\n    this.insertEditor(this.modalDialogInstance);\n  }\n\n  /**\n   * Inserts MathType editor into the {@link ModalDialog.contentContainer}. It waits until\n   * editor's JavaScript is loaded.\n   */\n  insertEditor() {\n    if (ContentManager.isEditorLoaded()) {\n      this.editor = window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);\n      this.editor.insertInto(this.modalDialogInstance.contentContainer);\n      this.editor.focus();\n      if (this.modalDialogInstance.rtl) {\n        this.editor.action(\"rtl\");\n      }\n      // Setting div in rtl in case of it's activated.\n      if (this.editor.getEditorModel().isRTL()) {\n        this.editor.element.style.direction = \"rtl\";\n      }\n\n      // Editor listener: this object manages the changes logic of editor.\n      this.editor.getEditorModel().addEditorListener(this.editorListener);\n\n      // iOS events.\n      if (this.modalDialogInstance.deviceProperties.isIOS) {\n        setTimeout(function () {\n          // Make sure the modalDialogInstance is available when the timeout is over\n          // to avoid throw errors and stop execution.\n          if (this.hasOwnProperty(\"modalDialogInstance\")) this.modalDialogInstance.hideKeyboard(); // eslint-disable-line no-prototype-builtins\n        }, 400);\n\n        const formulaDisplayDiv = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n        Util.addEvent(formulaDisplayDiv, \"focus\", this.modalDialogInstance.handleOpenedIosSoftkeyboard);\n        Util.addEvent(formulaDisplayDiv, \"blur\", this.modalDialogInstance.handleClosedIosSoftkeyboard);\n      }\n      // Fire onLoad event. Necessary to set the MathML into the editor\n      // after is loaded.\n      this.listeners.fire(\"onLoad\", {});\n    } else {\n      setTimeout(ContentManager.prototype.insertEditor.bind(this), 100);\n    }\n  }\n\n  /**\n   * Initializes the current class by loading MathType script.\n   */\n  init() {\n    if (!ContentManager.isEditorLoaded()) {\n      this.addEditorAsExternalDependency();\n    }\n  }\n\n  /**\n   * Adds script element to the DOM to include editor externally.\n   */\n  addEditorAsExternalDependency() {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    let editorUrl = Configuration.get(\"editorUrl\");\n\n    // We create an object url for parse url string and work more efficiently.\n    const anchorElement = document.createElement(\"a\");\n\n    ContentManager.setHrefToAnchorElement(anchorElement, editorUrl);\n    ContentManager.setProtocolToAnchorElement(anchorElement);\n\n    editorUrl = ContentManager.getURLFromAnchorElement(anchorElement);\n\n    // Load editor URL. We add stats as GET params.\n    const stats = this.getEditorStats();\n    script.src = `${editorUrl}?lang=${this.language}&stats-editor=${stats.editor}&stats-mode=${stats.mode}&stats-version=${stats.version}`;\n\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n  }\n\n  /**\n   * Sets the specified url to the anchor element.\n   * @param {HTMLAnchorElement} anchorElement - Element where set 'url'.\n   * @param {String} url - URL to set.\n   */\n  static setHrefToAnchorElement(anchorElement, url) {\n    anchorElement.href = url;\n  }\n\n  /**\n   * Sets the current protocol to the anchor element.\n   * @param {HTMLAnchorElement} anchorElement - Element where set its protocol.\n   */\n  static setProtocolToAnchorElement(anchorElement) {\n    // Change to https if necessary.\n    if (window.location.href.indexOf(\"https://\") === 0) {\n      // It check if browser is https and configuration is http.\n      // If this is so, we will replace protocol.\n      if (anchorElement.protocol === \"http:\") {\n        anchorElement.protocol = \"https:\";\n      }\n    }\n  }\n\n  /**\n   * Returns the url of the anchor element adding the current port\n   * if it is needed.\n   * @param {HTMLAnchorElement} anchorElement - Element where extract the url.\n   * @returns {String}\n   */\n  static getURLFromAnchorElement(anchorElement) {\n    // Check protocol and remove port if it's standard.\n    const removePort = anchorElement.port === \"80\" || anchorElement.port === \"443\" || anchorElement.port === \"\";\n    return `${anchorElement.protocol}//${anchorElement.hostname}${removePort ? \"\" : `:${anchorElement.port}`}${anchorElement.pathname.startsWith(\"/\") ? anchorElement.pathname : `/${anchorElement.pathname}`}`; // eslint-disable-line max-len\n  }\n\n  /**\n   * Returns object with editor stats.\n   *\n   * @typedef {Object} EditorStatsObject\n   * @property {string} editor - Editor name.\n   * @property {string} mode - Current configuration for formula save mode.\n   * @property {string} version - Current plugins version.\n   * @returns {EditorStatsObject}\n   */\n  getEditorStats() {\n    // Editor stats. Use environment property to set it.\n    const stats = {};\n    if (\"editor\" in this.environment) {\n      stats.editor = this.environment.editor;\n    } else {\n      stats.editor = \"unknown\";\n    }\n\n    if (\"mode\" in this.environment) {\n      stats.mode = this.environment.mode;\n    } else {\n      stats.mode = Configuration.get(\"saveMode\");\n    }\n\n    if (\"version\" in this.environment) {\n      stats.version = this.environment.version;\n    } else {\n      stats.version = Configuration.get(\"version\");\n    }\n\n    return stats;\n  }\n\n  /**\n   * Returns true if device is iOS. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isIOS() {\n    return (\n      [\"iPad Simulator\", \"iPhone Simulator\", \"iPod Simulator\", \"iPad\", \"iPhone\", \"iPod\"].includes(navigator.platform) ||\n      // iPad on iOS 13 detection\n      (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n    );\n  }\n\n  /**\n   * Returns true if device is Mobile. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  }\n\n  /**\n   * Returns true if editor is loaded. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isEditorLoaded() {\n    // To know if editor JavaScript is loaded we need to wait until\n    // window.com.wiris.jsEditor.JsEditor.newInstance is ready.\n    return (\n      window.com &&\n      window.com.wiris &&\n      window.com.wiris.jsEditor &&\n      window.com.wiris.jsEditor.JsEditor &&\n      window.com.wiris.jsEditor.JsEditor.newInstance\n    );\n  }\n\n  /**\n   * Sets the {@link ContentManager.editor} initial content.\n   */\n  setInitialContent() {\n    if (!this.isNewElement) {\n      this.setMathML(this.mathML);\n    }\n  }\n\n  /**\n   * Sets a MathML into {@link ContentManager.editor} instance.\n   * @param {String} mathml - MathML string.\n   * @param {Boolean} focusDisabled - If true editor don't get focus after the MathML is set.\n   * False by default.\n   */\n  setMathML(mathml, focusDisabled) {\n    // By default focus is enabled.\n    if (typeof focusDisabled === \"undefined\") {\n      focusDisabled = false;\n    }\n    // Using setMathML method is not a change produced by the user but for the API\n    // so we set to false the contentChange property of editorListener.\n    this.editor.setMathMLWithCallback(mathml, () => {\n      this.editorListener.setWaitingForChanges(true);\n    });\n\n    // We need to wait a little until the callback finish.\n    setTimeout(() => {\n      this.editorListener.setIsContentChanged(false);\n    }, 500);\n\n    // In some scenarios - like closing modal object - editor mustn't be focused.\n    if (!focusDisabled) {\n      this.onFocus();\n    }\n  }\n\n  /**\n   * Sets the focus to the current instance of {@link ContentManager.editor}. Triggered by\n   * {@link ModalDialog.focus}.\n   */\n  onFocus() {\n    if (typeof this.editor !== \"undefined\" && this.editor != null) {\n      this.editor.focus();\n\n      // On WordPress integration, the focus gets lost right after setting it.\n      // To fix this, we enforce another focus some milliseconds after this behaviour.\n      setTimeout(() => {\n        this.editor.focus();\n      }, 100);\n    }\n  }\n\n  /**\n   * Updates the edition area by calling {@link IntegrationModel.updateFormula}.\n   * Triggered by {@link ModalDialog.submitAction}.\n   */\n  submitAction() {\n    if (!this.editor.isFormulaEmpty()) {\n      let mathML = this.editor.getMathMLWithSemantics();\n      // Add class for custom editors.\n      if (this.customEditors.getActiveEditor() !== null) {\n        const { toolbar } = this.customEditors.getActiveEditor();\n        mathML = MathML.addCustomEditorClassAttribute(mathML, toolbar);\n      } else {\n        // We need - if exists - the editor name from MathML\n        // class attribute.\n        Object.keys(this.customEditors.editors).forEach((key) => {\n          mathML = MathML.removeCustomEditorClassAttribute(mathML, key);\n        });\n      }\n      const mathmlEntitiesEncoded = MathML.mathMLEntities(mathML);\n      this.integrationModel.updateFormula(mathmlEntitiesEncoded);\n    } else {\n      this.integrationModel.updateFormula(null);\n    }\n\n    this.customEditors.disable();\n    this.integrationModel.notifyWindowClosed();\n\n    // Set disabled focus to prevent lost focus.\n    this.setEmptyMathML();\n    this.customEditors.disable();\n  }\n\n  /**\n   * Sets an empty MathML as {@link ContentManager.editor} content.\n   * This will open the MT/CT editor with the hand mode.\n   * It adds dir rtl in case of it's activated.\n   */\n  setEmptyMathML() {\n    const isMobile = this.deviceProperties.isAndroid || this.deviceProperties.isIOS;\n    const isRTL = this.editor.getEditorModel().isRTL();\n\n    if (isMobile || this.integrationModel.forcedHandMode) {\n      // For mobile devices or forced hand mode, set an empty annotation MATHML to maintain the editor in Hand mode.\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>`;\n      this.setMathML(mathML, true);\n    } else {\n      // For non-mobile devices or not forced hand mode, set the empty MathML without an annotation.\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}/>`;\n      this.setMathML(mathML, true);\n    }\n  }\n\n  /**\n   * Open event. Triggered by {@link ModalDialog.open}. Does the following:\n   * - Updates the {@link ContentManager.editor} content\n   *   (with an empty MathML or an existing formula),\n   * - Updates the {@link ContentManager.editor} toolbar.\n   * - Recovers the the focus.\n   */\n  onOpen() {\n    if (this.isNewElement) {\n      this.setEmptyMathML();\n    } else {\n      this.setMathML(this.mathML);\n    }\n    let toolbar = this.updateToolbar();\n    this.onFocus();\n\n    if (this.deviceProperties.isIOS) {\n      const zoom = document.documentElement.clientWidth / window.innerWidth;\n\n      if (zoom !== 1) {\n        // Open editor in Keyboard mode if user use iOS, Safari and page is zoomed.\n        this.setKeyboardMode();\n      }\n    }\n\n    let trigger = this.dbclick ? \"formula\" : \"button\";\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"OPENED_MTCT_EDITOR\", {\n        toolbar: toolbar,\n        trigger: trigger,\n      });\n    } catch (error) {\n      console.error(\"Error tracking OPENED_MTCT_EDITOR\", error);\n    }\n\n    Core.globalListeners.fire(\"onModalOpen\", {});\n\n    if (this.integrationModel.forcedHandMode) {\n      this.hideHandModeButton();\n\n      // In case we have a keyboard written formula, we still want it to be opened with handMode.\n      if (this.mathML && !this.mathML.includes('<annotation encoding=\"application/json\">') && !this.isNewElement) {\n        this.openHandOnKeyboardMathML(this.mathML, this.editor);\n      }\n    }\n  }\n\n  /**\n   * Change Editor in keyboard mode when is loaded\n   */\n  setKeyboardMode() {\n    const wrsEditor = document.getElementsByClassName(\"wrs_handOpen wrs_disablePalette\")[0];\n    if (wrsEditor) {\n      wrsEditor.classList.remove(\"wrs_handOpen\");\n      wrsEditor.classList.remove(\"wrs_disablePalette\");\n    } else {\n      setTimeout(ContentManager.prototype.setKeyboardMode.bind(this), 100);\n    }\n  }\n\n  /**\n   * Hides the hand <-> keyboard mode switch.\n   *\n   * This method relies completely on the classes used on different HTML elements within the editor itself, meaning\n   * any change on those classes will make this code stop working properly.\n   *\n   * On top of that, some of those classes are changed on runtime (for example, the one that makes some buttons change).\n   * This forces us to use some delayed code (this is, a timeout) to make sure everything exists when we need it.\n   * @param {*} forced (boolean) Forces the user to stay in Hand mode by hiding the keyboard mode button.\n   */\n  hideHandModeButton(forced = true) {\n    if (this.handSwitchHidden) {\n      return; // hand <-> keyboard button already hidden.\n    }\n\n    // \"Open hand mode\" button takes a little bit to be available.\n    // This selector gets the hand <-> keyboard mode switch\n    const handModeButtonSelector =\n      \"div.wrs_editor.wrs_flexEditor.wrs_withHand.wrs_animated .wrs_handWrapper input[type=button]\";\n\n    // If in \"forced mode\", we hide the \"keyboard button\" so the user can't can't change between hand and keyboard modes.\n    // We use an observer to ensure that the button it hidden as soon as it appears.\n    if (forced) {\n      const mutationInstance = new MutationObserver((mutations) => {\n        const handModeButton = document.querySelector(handModeButtonSelector);\n        if (handModeButton) {\n          handModeButton.hidden = true;\n          this.handSwitchHidden = true;\n          mutationInstance.disconnect();\n        }\n      });\n      mutationInstance.observe(document.body, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true,\n      });\n    }\n  }\n\n  /**\n   * It will open any formula written in Keyboard mode with the hand mode with the default hand trace.\n   *\n   * @param {String} mathml The original KeyBoard MathML\n   * @param {Object} editor The editor object.\n   */\n  async openHandOnKeyboardMathML(mathml, editor) {\n    // First, as an editor requirement, we need to update the editor object with the current MathML formula.\n    // Once the MathML formula is updated to the one we want to open with handMode, we will be able to proceed.\n    await new Promise((resolve) => {\n      editor.setMathMLWithCallback(mathml, resolve);\n    });\n\n    // We wait until the hand editor object exists.\n    await this.waitForHand(editor);\n\n    // Logic to get the hand traces and open the formula in hand mode.\n    // This logic comes from the editor.\n    const handEditor = editor.hand;\n    editor.handTemporalMathML = editor.getMathML();\n    const handCoordinates = editor.editorModel.getHandStrokes();\n    handEditor.setStrokes(handCoordinates);\n    handEditor.fitStrokes(true);\n    editor.openHand();\n  }\n\n  /**\n   * Waits until the hand editor object exists.\n   * @param {Obect} editor The editor object.\n   */\n  async waitForHand(editor) {\n    while (!editor.hand) {\n      await new Promise((resolve) => setTimeout(resolve, 100));\n    }\n  }\n\n  /**\n   * Sets the correct toolbar depending if exist other custom toolbars\n   * at the same time (e.g: Chemistry).\n   */\n  updateToolbar() {\n    this.updateTitle(this.modalDialogInstance);\n    const customEditor = this.customEditors.getActiveEditor();\n\n    let toolbar;\n    if (customEditor) {\n      toolbar = customEditor.toolbar ? customEditor.toolbar : _wrs_int_wirisProperties.toolbar;\n\n      if (this.toolbar == null || this.toolbar !== toolbar) {\n        this.setToolbar(toolbar);\n      }\n    } else {\n      toolbar = this.getToolbar();\n      if (this.toolbar == null || this.toolbar !== toolbar) {\n        this.setToolbar(toolbar);\n        this.customEditors.disable();\n      }\n    }\n\n    return toolbar;\n  }\n\n  /**\n   * Updates the current {@link ModalDialog.title}. If a {@link CustomEditors} is enabled\n   * sets the custom editor title. Otherwise sets the default title.\n   */\n  updateTitle() {\n    const customEditor = this.customEditors.getActiveEditor();\n    if (customEditor) {\n      this.modalDialogInstance.setTitle(customEditor.title);\n    } else {\n      this.modalDialogInstance.setTitle(\"MathType\");\n    }\n  }\n\n  /**\n   * Returns the editor toolbar, depending on the configuration local or server side.\n   * @returns {String} - Toolbar identifier.\n   */\n  getToolbar() {\n    let toolbar = \"general\";\n    if (\"toolbar\" in this.editorAttributes) {\n      ({ toolbar } = this.editorAttributes);\n    }\n    // TODO: Change global integration variable for integration custom toolbar.\n    if (toolbar === \"general\") {\n      // eslint-disable-next-line camelcase\n      toolbar =\n        typeof _wrs_int_wirisProperties === \"undefined\" || typeof _wrs_int_wirisProperties.toolbar === \"undefined\"\n          ? \"general\"\n          : _wrs_int_wirisProperties.toolbar;\n    }\n\n    return toolbar;\n  }\n\n  /**\n   * Sets the current {@link ContentManager.editor} instance toolbar.\n   * @param {String} toolbar - The toolbar name.\n   */\n  setToolbar(toolbar) {\n    this.toolbar = toolbar;\n    this.editor.setParams({ toolbar: this.toolbar });\n  }\n\n  /**\n   * Sets the custom headers added on editor requests.\n   * @returns {Object} headers - key value headers.\n   */\n  setCustomHeaders(headers) {\n    let headersObj = {};\n\n    // We control that we only get String or Object as the input.\n    if (typeof headers === \"object\") {\n      headersObj = headers;\n    } else if (typeof headers === \"string\") {\n      headersObj = Util.convertStringToObject(headers);\n    }\n\n    this.editor.setParams({ customHeaders: headersObj });\n    return headersObj;\n  }\n\n  /**\n   * Returns true if the content of the editor has been changed. The logic of the changes\n   * is delegated to {@link EditorListener} class.\n   * @returns {Boolean} True if the editor content has been changed. False otherwise.\n   */\n  hasChanges() {\n    return !this.editor.isFormulaEmpty() && this.editorListener.getIsContentChanged();\n  }\n\n  /**\n   * Handle keyboard events detected in modal when elements of this class intervene.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined && keyboardEvent.repeat === false) {\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n        // Code to detect Esc event.\n        // There should be only one element with class name 'wrs_pressed' at the same time.\n        let list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed\");\n        if (list.length === 0) {\n          list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed\");\n          if (list.length === 0) {\n            list = document.getElementsByClassName(\"wrs_select wrs_pressed\");\n            if (list.length === 0) {\n              this.modalDialogInstance.cancelAction();\n              keyboardEvent.stopPropagation();\n              keyboardEvent.preventDefault();\n            }\n          }\n        }\n      } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\n        // Code to detect shift Tab event.\n        if (document.activeElement === this.modalDialogInstance.submitButton) {\n          // Focus is on OK button.\n          this.editor.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else if (document.querySelector('[title=\"Manual\"]') === document.activeElement) {\n          // Focus is on minimize button (_).\n          this.modalDialogInstance.closeDiv.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else {\n          if (document.activeElement === this.modalDialogInstance.minimizeDiv) {\n            // Focus on cancel button.\n            if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\n              this.modalDialogInstance.cancelButton.focus();\n              keyboardEvent.stopPropagation();\n              keyboardEvent.preventDefault();\n            }\n          }\n        }\n      } else if (keyboardEvent.key === \"Tab\") {\n        // Code to detect Tab event.\n        if (document.activeElement === this.modalDialogInstance.cancelButton) {\n          // Focus is on X button.\n          this.modalDialogInstance.minimizeDiv.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else if (document.activeElement === this.modalDialogInstance.closeDiv) {\n          // Focus on help button.\n          if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\n            const element = document.querySelector('[title=\"Manual\"]');\n            element.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          }\n        } else {\n          // There should be only one element with class name 'wrs_formulaDisplay'.\n          const element = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n          if (element.getAttribute(\"class\") === \"wrs_formulaDisplay wrs_focused\") {\n            // Focus is on formuladisplay.\n            this.modalDialogInstance.submitButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          }\n        }\n      }\n    }\n  }\n}\n","/**\n * A custom editor is MathType editor with a different\n * @typedef {Object} CustomEditor\n * @property {String} CustomEditor.name - Custom editor name.\n * @property {String} CustomEditor.toolbar - Custom editor toolbar.\n * @property {String} CustomEditor.icon - Custom editor icon.\n * @property {String} CustomEditor.confVariable - Configuration property to manage\n * the availability of the custom editor.\n * @property {String} CustomEditor.title - Custom editor modal dialog title.\n * @property {String} CustomEditor.tooltip - Custom editor icon tooltip.\n */\n\nexport default class CustomEditors {\n  /**\n   * @classdesc\n   * This class represents the MathType custom editors manager.\n   * A custom editor is MathType editor with a custom  toolbar.\n   * This class associates a {@link CustomEditor} to:\n   * - It's own formulas\n   * - A custom toolbar\n   * - An icon to open it from a HTML editor.\n   * - A tooltip for the icon.\n   * - A global variable to enable or disable it globally.\n   * @constructs\n   */\n  constructor() {\n    /**\n     * The custom editors.\n     * @type {Array.<CustomEditor>}\n     */\n\n    this.editors = [];\n    /**\n     * The active editor name.\n     * @type {String}\n     */\n    this.activeEditor = \"default\";\n  }\n\n  /**\n   * Adds a {@link CustomEditor} to editors array.\n   * @param {String} editorName - The editor name.\n   * @param {CustomEditor} editorParams - The custom editor parameters.\n   */\n  addEditor(editorName, editorParams) {\n    const customEditor = {};\n    customEditor.name = editorParams.name;\n    customEditor.toolbar = editorParams.toolbar;\n    customEditor.icon = editorParams.icon;\n    customEditor.confVariable = editorParams.confVariable;\n    customEditor.title = editorParams.title;\n    customEditor.tooltip = editorParams.tooltip;\n    this.editors[editorName] = customEditor;\n  }\n\n  /**\n   * Enables a {@link CustomEditor}.\n   * @param {String} customEditorName - The custom editor name.\n   */\n  enable(customEditorName) {\n    this.activeEditor = customEditorName;\n  }\n\n  /**\n   * Disables a {@link CustomEditor}.\n   */\n  disable() {\n    this.activeEditor = \"default\";\n  }\n\n  /**\n   * Returns the active editor.\n   * @return {CustomEditor} - A {@link CustomEditor} if a custom editor is enabled. Null otherwise.\n   */\n  getActiveEditor() {\n    if (this.activeEditor !== \"default\") {\n      return this.editors[this.activeEditor];\n    }\n    return null;\n  }\n}\n","/**\n * Represents the configuration properties generated from the frontend (JavaScript variables).\n * @type {Object}\n * @property {string} imageClassName - Default MathType formula image class.\n * @property {string} imageClassName - Default MathType CAS image class.\n * @ignore\n */\nconst jsProperties = {\n  imageCustomEditorName: \"data-custom-editor\",\n  imageClassName: \"Wirisformula\",\n  CASClassName: \"Wiriscas\",\n};\nexport default jsProperties;\n","export default class Event {\n  /**\n   * @classdesc\n   * This class represents a custom event. Events should be fired by the {@link Listener} class.\n   *\n   * ```js\n   *  let customEvent = new Event();\n   *  customEvent.properties = {};\n   *\n   *  let listeners = new Listeners();\n   *  listeners.newListener(eventName, callback);\n   *\n   *  listeners.fire(eventName, customEvent) *\n   * ```\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Indicates if the event should be cancelled.\n     * @type {Boolean}\n     */\n\n    this.cancelled = false;\n    /**\n     * Indicates if the event should be prevented.\n     * @type {Boolean}\n     */\n    this.defaultPrevented = false;\n  }\n\n  /**\n   * Cancels the event.\n   */\n  cancel() {\n    this.cancelled = true;\n  }\n\n  /**\n   * Prevents the default action.\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n}\n","import IntegrationModel from \"./integrationmodel\";\n\n/**\n\n */\nexport default class PopUpMessage {\n  /**\n   * @classdesc\n   * This class represents a dialog message overlaying a DOM element in order to\n   * accept / cancel discard changes. The dialog can be closed i.e the overlay disappears\n   * o canceled. In this last case a callback function should be called.\n   * @constructs\n   * @param {Object} popupMessageAttributes - Object containing popup properties.\n   * @param {HTMLElement} popupMessageAttributes.overlayElement - Element to overlay.\n   * @param {Object} popupMessageAttributes.callbacks - Contains callback\n   * methods for close and cancel actions.\n   * @param {Object} popupMessageAttributes.strings - Contains all the strings needed.\n   */\n  constructor(popupMessageAttributes) {\n    /**\n     * Element to be overlaid when the popup appears.\n     */\n    this.overlayElement = popupMessageAttributes.overlayElement;\n\n    this.callbacks = popupMessageAttributes.callbacks;\n\n    /**\n     * HTMLElement element to wrap all HTML elements inside the popupMessage.\n     */\n    this.overlayWrapper = this.overlayElement.appendChild(document.createElement(\"div\"));\n    this.overlayWrapper.setAttribute(\"class\", \"wrs_popupmessage_overlay_envolture\");\n\n    /**\n     * HTMLElement to display the popup message, close button and cancel button.\n     */\n    this.message = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n    this.message.id = \"wrs_popupmessage\";\n    this.message.setAttribute(\"class\", \"wrs_popupmessage_panel\");\n    this.message.setAttribute(\"role\", \"dialog\");\n    this.message.setAttribute(\"aria-describedby\", \"description_txt\");\n    const paragraph = document.createElement(\"p\");\n    const text = document.createTextNode(popupMessageAttributes.strings.message);\n    paragraph.appendChild(text);\n    paragraph.id = \"description_txt\";\n    this.message.appendChild(paragraph);\n\n    /**\n     * HTML element overlaying the overlayElement.\n     */\n    const overlay = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n    overlay.setAttribute(\"class\", \"wrs_popupmessage_overlay\");\n    // We create a overlay that close popup message on click in there\n    overlay.addEventListener(\"click\", this.cancelAction.bind(this));\n\n    /**\n     * HTML element containing cancel and close buttons.\n     */\n    this.buttonArea = this.message.appendChild(document.createElement(\"div\"));\n    this.buttonArea.setAttribute(\"class\", \"wrs_popupmessage_button_area\");\n    this.buttonArea.id = \"wrs_popup_button_area\";\n\n    // Close button arguments.\n    const buttonSubmitArguments = {\n      class: \"wrs_button_accept\",\n      innerHTML: popupMessageAttributes.strings.submitString,\n      id: \"wrs_popup_accept_button\",\n      // To identifiy the element in automated testing\n      \"data-testid\": \"mtcteditor-cd-close-button\",\n    };\n\n    /**\n     * Close button arguments.\n     */\n    this.closeButton = this.createButton(buttonSubmitArguments, this.closeAction.bind(this));\n    this.buttonArea.appendChild(this.closeButton);\n\n    // Cancel button arguments.\n    const buttonCancelArguments = {\n      class: \"wrs_button_cancel\",\n      innerHTML: popupMessageAttributes.strings.cancelString,\n      id: \"wrs_popup_cancel_button\",\n      // To identifiy the element in automated testing\n      \"data-testid\": \"mtcteditor-cd-cancel-button\",\n    };\n\n    /**\n     * Cancel button.\n     */\n    this.cancelButton = this.createButton(buttonCancelArguments, this.cancelAction.bind(this));\n    this.buttonArea.appendChild(this.cancelButton);\n  }\n\n  /**\n   * This method create a button with arguments and return button dom object\n   * @param {Object} parameters - An object containing id, class and innerHTML button text.\n   * @param {String} parameters.id - Button id.\n   * @param {String} parameters.class - Button class name.\n   * @param {String} parameters.innerHTML - Button innerHTML text.\n   * @param {Object} callback- Callback method to call on click event.\n   * @returns {HTMLElement} HTML button.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  createButton(parameters, callback) {\n    let element = {};\n    element = document.createElement(\"button\");\n    element.setAttribute(\"id\", parameters.id);\n    element.setAttribute(\"class\", parameters.class);\n    element.innerHTML = parameters.innerHTML;\n    element.addEventListener(\"click\", callback);\n    if (parameters[\"data-testid\"]) {\n      element.setAttribute(\"data-testid\", parameters[\"data-testid\"]);\n    }\n\n    return element;\n  }\n\n  /**\n   * Shows the popupmessage containing a message, and two buttons\n   * to cancel the action or close the modal dialog.\n   */\n  show() {\n    if (this.overlayWrapper.style.display !== \"block\") {\n      // Clear focus with blur for prevent press any key.\n      document.activeElement.blur();\n      this.overlayWrapper.style.display = \"block\";\n      this.closeButton.focus();\n    } else {\n      this.overlayWrapper.style.display = \"none\";\n      // _wrs_modalWindow.focus(); This throws an error of not existing _wrs_modalWindow\n    }\n  }\n\n  /**\n   * This method cancels the popupMessage: the dialog disappears revealing the overlaid element.\n   * A callback method is called (if defined). For example a method to focus the overlaid element.\n   */\n  cancelAction() {\n    this.overlayWrapper.style.display = \"none\";\n    if (typeof this.callbacks.cancelCallback !== \"undefined\") {\n      this.callbacks.cancelCallback();\n      // Set temporal image to null to prevent loading\n      // an existent formula when starting one from scratch. Make focus come back too.\n      // IntegrationModel.setActionsOnCancelButtons();\n    }\n  }\n\n  /**\n   * This method closes the popupMessage: the dialog disappears and the close callback is called.\n   * For example to close the overlaid element.\n   */\n  closeAction() {\n    this.cancelAction();\n    if (typeof this.callbacks.closeCallback !== \"undefined\") {\n      this.callbacks.closeCallback();\n    }\n    IntegrationModel.setActionsOnCancelButtons();\n  }\n\n  /**\n   * Handle keyboard events detected in modal when elements of this class intervene.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined) {\n      // Code to detect Esc event.\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n        this.cancelAction();\n        keyboardEvent.stopPropagation();\n        keyboardEvent.preventDefault();\n      } else if (keyboardEvent.key === \"Tab\") {\n        // Code to detect Tab event.\n        if (document.activeElement === this.closeButton) {\n          this.cancelButton.focus();\n        } else {\n          this.closeButton.focus();\n        }\n        keyboardEvent.stopPropagation();\n        keyboardEvent.preventDefault();\n      }\n    }\n  }\n}\n","// eslint-disable-next-line max-classes-per-file\nimport PopUpMessage from \"./popupmessage\";\nimport Util from \"./util\";\nimport Configuration from \"./configuration\";\nimport Listeners from \"./listeners\";\nimport StringManager from \"./stringmanager\";\nimport ContentManager from \"./contentmanager\";\nimport Telemeter from \"./telemeter\";\nimport IntegrationModel from \"./integrationmodel\";\nimport Core from \"./core.src\";\n\nimport closeIcon from \"../styles/icons/general/close_icon.svg\"; //eslint-disable-line\nimport closeHoverIcon from \"../styles/icons/hover/close_icon_h.svg\"; //eslint-disable-line\nimport fullsIcon from \"../styles/icons/general/fulls_icon.svg\"; //eslint-disable-line\nimport fullsHoverIcon from \"../styles/icons/hover/fulls_icon_h.svg\"; //eslint-disable-line\nimport minIcon from \"../styles/icons/general/min_icon.svg\"; //eslint-disable-line\nimport minHoverIcon from \"../styles/icons/hover/min_icon_h.svg\"; //eslint-disable-line\nimport minsIcon from \"../styles/icons/general/mins_icon.svg\"; //eslint-disable-line\nimport minsHoverIcon from \"../styles/icons/hover/mins_icon_h.svg\"; //eslint-disable-line\nimport maxIcon from \"../styles/icons/general/max_icon.svg\"; //eslint-disable-line\nimport maxHoverIcon from \"../styles/icons/hover/max_icon_h.svg\"; //eslint-disable-line\n\n/**\n * @typedef {Object} DeviceProperties\n * @property {String} DeviceProperties.orientation - Indicates of the orientation of the device.\n * @property {Boolean} DeviceProperties.isAndroid - True if the device is Android. False otherwise.\n * @property {Boolean} DeviceProperties.isIOS - True if the device is iOS. False otherwise.\n * @property {Boolean} DeviceProperties.isMobile - True if the device is a mobile one.\n * False otherwise.\n * @property {Boolean} DeviceProperties.isDesktop - True if the device is a desktop one.\n * False otherwise.\n */\n\nexport default class ModalDialog {\n  /**\n   * @classdesc\n   * This class represents a modal dialog. The modal dialog admits\n   * a {@link ContentManager} instance to manage the content of the dialog.\n   * @constructs\n   * @param {Object} modalDialogAttributes  - An object containing all modal dialog attributes.\n   */\n  constructor(modalDialogAttributes) {\n    this.attributes = modalDialogAttributes;\n\n    // Metrics.\n    const ua = navigator.userAgent.toLowerCase();\n    const isAndroid = ua.indexOf(\"android\") > -1;\n    const isIOS = ContentManager.isIOS();\n    this.iosSoftkeyboardOpened = false;\n    this.iosMeasureUnit = ua.indexOf(\"crios\") === -1 ? \"%\" : \"vh\";\n    this.iosDivHeight = `100%${this.iosMeasureUnit}`;\n\n    const deviceWidth = window.outerWidth;\n    const deviceHeight = window.outerHeight;\n\n    const landscape = deviceWidth > deviceHeight;\n    const portrait = deviceWidth < deviceHeight;\n\n    // TODO: Detect isMobile without using editor metrics.\n    const isLandscape = landscape && this.attributes.height > deviceHeight;\n    const isPortrait = portrait && this.attributes.width > deviceWidth;\n    const isMobile = ContentManager.isMobile();\n\n    // Obtain number of current instance.\n    this.instanceId = document.getElementsByClassName(\"wrs_modal_dialogContainer\").length;\n\n    // Device object properties.\n\n    /**\n     * @type {DeviceProperties}\n     */\n    this.deviceProperties = {\n      orientation: landscape ? \"landscape\" : \"portrait\",\n      isAndroid,\n      isIOS,\n      isMobile,\n      isDesktop: !isMobile && !isIOS && !isAndroid,\n    };\n\n    this.properties = {\n      created: false,\n      state: \"\",\n      previousState: \"\",\n      position: { bottom: 0, right: 10 },\n      size: { height: 338, width: 580 },\n    };\n\n    /**\n     * Object to keep website's style before change it on lock scroll for mobile devices.\n     * @type {Object}\n     * @property {String} bodyStylePosition - Previous body style position.\n     * @property {String} bodyStyleOverflow - Previous body style overflow.\n     * @property {String} htmlStyleOverflow - Previous body style overflow.\n     * @property {String} windowScrollX - Previous window's scroll Y.\n     * @property {String} windowScrollY - Previous window's scroll X.\n     */\n    this.websiteBeforeLockParameters = null;\n\n    let attributes = {};\n    attributes.class = \"wrs_modal_overlay\";\n    attributes.id = this.getElementId(attributes.class);\n    this.overlay = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_title_bar\";\n    attributes.id = this.getElementId(attributes.class);\n    this.titleBar = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_title\";\n    attributes.id = this.getElementId(attributes.class);\n    this.title = Util.createElement(\"div\", attributes);\n    this.title.innerHTML = \"offline\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_close_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"close\");\n    attributes.style = {};\n    this.closeDiv = Util.createElement(\"a\", attributes);\n    this.closeDiv.setAttribute(\"role\", \"button\");\n    this.closeDiv.setAttribute(\"tabindex\", 3);\n    // Apply styles and events after the creation as createElement doesn't process them correctly\n    let generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeIcon)})`;\n    let hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeHoverIcon)})`;\n    this.closeDiv.setAttribute(\"style\", generalStyle);\n    this.closeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.closeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.closeDiv.setAttribute(\"data-testid\", \"mtcteditor-close-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_stack_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"exit_fullscreen\");\n    this.stackDiv = Util.createElement(\"a\", attributes);\n    this.stackDiv.setAttribute(\"role\", \"button\");\n    this.stackDiv.setAttribute(\"tabindex\", 2);\n    generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsIcon)})`;\n    hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsHoverIcon)})`;\n    this.stackDiv.setAttribute(\"style\", generalStyle);\n    this.stackDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.stackDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.stackDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-disable-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_maximize_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"fullscreen\");\n    this.maximizeDiv = Util.createElement(\"a\", attributes);\n    this.maximizeDiv.setAttribute(\"role\", \"button\");\n    this.maximizeDiv.setAttribute(\"tabindex\", 2);\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsIcon)})`;\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsHoverIcon)})`;\n    this.maximizeDiv.setAttribute(\"style\", generalStyle);\n    this.maximizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.maximizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.maximizeDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-enable-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_minimize_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"minimize\");\n    this.minimizeDiv = Util.createElement(\"a\", attributes);\n    this.minimizeDiv.setAttribute(\"role\", \"button\");\n    this.minimizeDiv.setAttribute(\"tabindex\", 1);\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identify the element in automated testing\n    this.minimizeDiv.setAttribute(\"data-testid\", \"mtcteditor-minimize-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_dialogContainer\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.role = \"dialog\";\n    this.container = Util.createElement(\"div\", attributes);\n    this.container.setAttribute(\"aria-labeledby\", \"wrs_modal_title[0]\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_wrapper\";\n    attributes.id = this.getElementId(attributes.class);\n    this.wrapper = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_content_container\";\n    attributes.id = this.getElementId(attributes.class);\n    this.contentContainer = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_controls\";\n    attributes.id = this.getElementId(attributes.class);\n    this.controls = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_buttons_container\";\n    attributes.id = this.getElementId(attributes.class);\n    this.buttonContainer = Util.createElement(\"div\", attributes);\n\n    // Buttons: all button must be created using createSubmitButton method.\n    this.submitButton = this.createSubmitButton(\n      {\n        id: this.getElementId(\"wrs_modal_button_accept\"),\n        class: \"wrs_modal_button_accept\",\n        innerHTML: StringManager.get(\"accept\"),\n        // To identifiy the element in automated testing\n        \"data-testid\": \"mtcteditor-insert-button\",\n      },\n      this.submitAction.bind(this),\n    );\n\n    this.cancelButton = this.createSubmitButton(\n      {\n        id: this.getElementId(\"wrs_modal_button_cancel\"),\n        class: \"wrs_modal_button_cancel\",\n        innerHTML: StringManager.get(\"cancel\"),\n        // To identifiy the element in automated testing\n        \"data-testid\": \"mtcteditor-cancel-button\",\n      },\n      this.cancelAction.bind(this),\n    );\n\n    this.contentManager = null;\n\n    // Overlay popup.\n    const popupStrings = {\n      cancelString: StringManager.get(\"cancel\"),\n      submitString: StringManager.get(\"close\"),\n      message: StringManager.get(\"close_modal_warning\"),\n    };\n\n    const callbacks = {\n      closeCallback: () => {\n        this.close(\"mtc_close\");\n      },\n      cancelCallback: () => {\n        this.focus();\n      },\n    };\n\n    const popupupProperties = {\n      overlayElement: this.container,\n      callbacks,\n      strings: popupStrings,\n    };\n\n    this.popup = new PopUpMessage(popupupProperties);\n\n    /**\n     * Indicates if directionality of the modal dialog is RTL. false by default.\n     * @type {Boolean}\n     */\n    this.rtl = false;\n    if (\"rtl\" in this.attributes) {\n      this.rtl = this.attributes.rtl;\n    }\n\n    // Event handlers need modal instance context.\n    this.handleOpenedIosSoftkeyboard = this.handleOpenedIosSoftkeyboard.bind(this);\n    this.handleClosedIosSoftkeyboard = this.handleClosedIosSoftkeyboard.bind(this);\n  }\n\n  /**\n   * This method sets an ContentManager instance to ModalDialog. ContentManager\n   * manages the logic of ModalDialog content: submit, update, close and changes.\n   * @param {ContentManager} contentManager - ContentManager instance.\n   */\n  setContentManager(contentManager) {\n    this.contentManager = contentManager;\n  }\n\n  /**\n   * Returns the modal contentElement object.\n   * @returns {ContentManager} the instance of the ContentManager class.\n   */\n  getContentManager() {\n    return this.contentManager;\n  }\n\n  /**\n   * This method is called when the modal object has been submitted. Calls\n   * contentElement submitAction method - if exists - and closes the modal\n   * object. No logic about the content should be placed here,\n   * contentElement.submitAction is the responsible of the content logic.\n   */\n  async submitAction() {\n    if (typeof this.contentManager.submitAction !== \"undefined\") {\n      this.contentManager.submitAction();\n    }\n\n    await this.close(\"mtc_insert\");\n  }\n\n  /**\n   * Performs the cancel action.\n   * If there are no changes in the content, it closes the modal.\n   * Otherwise, it shows a pop-up message to confirm the cancel action.\n   * @returns {Promise<void>} - A promise that resolves when the modal is closed.\n   */\n  async cancelAction() {\n    if (typeof this.contentManager.hasChanges === \"undefined\" || !this.contentManager.hasChanges()) {\n      IntegrationModel.setActionsOnCancelButtons();\n      await this.close(\"mtc_close\");\n    } else {\n      this.showPopUpMessage();\n    }\n  }\n\n  /**\n   * Returns a button element.\n   * @param {Object} properties - Input button properties.\n   * @param {String} properties.class - Input button class.\n   * @param {String} properties.innerHTML - Input button innerHTML.\n   * @param {Object} callback - Callback function associated to click event.\n   * @returns {HTMLButtonElement} The button element.\n   *\n   */\n  // eslint-disable-next-line class-methods-use-this\n  createSubmitButton(properties, callback) {\n    class SubmitButton {\n      constructor() {\n        this.element = document.createElement(\"button\");\n        this.element.id = properties.id;\n        this.element.className = properties.class;\n        this.element.innerHTML = properties.innerHTML;\n        this.element.dataset.testid = properties[\"data-testid\"];\n        Util.addEvent(this.element, \"click\", callback);\n      }\n\n      getElement() {\n        return this.element;\n      }\n    }\n    return new SubmitButton(properties, callback).getElement();\n  }\n\n  /**\n   * Creates the modal window object inserting a contentElement object.\n   */\n  create() {\n    /* Modal Window Structure\n    _____________________________________________________________________________________\n    |wrs_modal_dialog_Container                                                         |\n    | _________________________________________________________________________________ |\n    | |title_bar                          minimize_button  stack_button  close_button | |\n    | |_______________________________________________________________________________| |\n    | |wrapper                                                                        | |\n    | | _____________________________________________________________________________ | |\n    | | |content                                                                    | | |\n    | | |                                                                           | | |\n    | | |                                                                           | | |\n    | | |___________________________________________________________________________| | |\n    | | _____________________________________________________________________________ | |\n    | | |controls                                                                   | | |\n    | | | ___________________________________                                       | | |\n    | | | |buttonContainer                  |                                       | | |\n    | | | | _______________________________ |                                       | | |\n    | | | | |button_accept | button_cancel| |                                       | | |\n    | | | |_|_____________ |______________|_|                                       | | |\n    | | |___________________________________________________________________________| | |\n    | |_______________________________________________________________________________| |\n    |___________________________________________________________________________________| */\n\n    this.titleBar.appendChild(this.closeDiv);\n    this.titleBar.appendChild(this.stackDiv);\n    this.titleBar.appendChild(this.maximizeDiv);\n    this.titleBar.appendChild(this.minimizeDiv);\n    this.titleBar.appendChild(this.title);\n\n    if (this.deviceProperties.isDesktop) {\n      this.container.appendChild(this.titleBar);\n    }\n\n    this.wrapper.appendChild(this.contentContainer);\n    this.wrapper.appendChild(this.controls);\n\n    this.controls.appendChild(this.buttonContainer);\n\n    this.buttonContainer.appendChild(this.submitButton);\n    this.buttonContainer.appendChild(this.cancelButton);\n\n    this.container.appendChild(this.wrapper);\n\n    // Check if browser has scrollBar before modal has modified.\n    this.recalculateScrollBar();\n\n    document.body.appendChild(this.container);\n    document.body.appendChild(this.overlay);\n\n    if (this.deviceProperties.isDesktop) {\n      // Desktop.\n      this.createModalWindowDesktop();\n      this.createResizeButtons();\n\n      this.addListeners();\n      // Maximize window only when the configuration is set and the device is not iOS or Android.\n      if (Configuration.get(\"modalWindowFullScreen\")) {\n        this.maximize();\n      }\n    } else if (this.deviceProperties.isAndroid) {\n      this.createModalWindowAndroid();\n    } else if (this.deviceProperties.isIOS) {\n      this.createModalWindowIos();\n    }\n\n    if (this.contentManager != null) {\n      this.contentManager.insert(this);\n    }\n\n    this.properties.open = true;\n    this.properties.created = true;\n\n    // Checks language directionality.\n    if (this.isRTL()) {\n      this.container.style.right = `${window.innerWidth - this.scrollbarWidth - this.container.offsetWidth}px`;\n      this.container.className += \" wrs_modal_rtl\";\n    }\n  }\n\n  /**\n   * Creates a button in the modal object to resize it.\n   */\n  createResizeButtons() {\n    // This is a definition of Resize Button Bottom-Right.\n    this.resizerBR = document.createElement(\"div\");\n    this.resizerBR.className = \"wrs_bottom_right_resizer\";\n    this.resizerBR.innerHTML = \"◢\";\n    // To identifiy the element in automated testing\n    this.resizerBR.dataset.testid = \"mtcteditor-resize-button-right\";\n    // This is a definition of Resize Button Top-Left.\n    this.resizerTL = document.createElement(\"div\");\n    this.resizerTL.className = \"wrs_bottom_left_resizer\";\n    // To identifiy the element in automated testing\n    this.resizerTL.dataset.testid = \"mtcteditor-resize-button-left\";\n    // Append resize buttons to modal.\n    this.container.appendChild(this.resizerBR);\n    this.titleBar.appendChild(this.resizerTL);\n    // Add events to resize on click and drag.\n    Util.addEvent(this.resizerBR, \"mousedown\", this.activateResizeStateBR.bind(this));\n    Util.addEvent(this.resizerTL, \"mousedown\", this.activateResizeStateTL.bind(this));\n  }\n\n  /**\n   * Initialize variables for Bottom-Right resize button\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  activateResizeStateBR(mouseEvent) {\n    this.initializeResizeProperties(mouseEvent, false);\n  }\n\n  /**\n   * Initialize variables for Top-Left resize button\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  activateResizeStateTL(mouseEvent) {\n    this.initializeResizeProperties(mouseEvent, true);\n  }\n\n  /**\n   * Common method to initialize variables at resize.\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  initializeResizeProperties(mouseEvent, leftOption) {\n    // Apply class for disable involuntary select text when drag.\n    Util.addClass(document.body, \"wrs_noselect\");\n    Util.addClass(this.overlay, \"wrs_overlay_active\");\n    this.resizeDataObject = {\n      x: this.eventClient(mouseEvent).X,\n      y: this.eventClient(mouseEvent).Y,\n    };\n    // Save Initial state of modal to compare on drag and obtain the difference.\n    this.initialWidth = parseInt(this.container.style.width, 10);\n    this.initialHeight = parseInt(this.container.style.height, 10);\n    if (!leftOption) {\n      this.initialRight = parseInt(this.container.style.right, 10);\n      this.initialBottom = parseInt(this.container.style.bottom, 10);\n    } else {\n      this.leftScale = true;\n    }\n    if (!this.initialRight) {\n      this.initialRight = 0;\n    }\n    if (!this.initialBottom) {\n      this.initialBottom = 0;\n    }\n    // Disable mouse events on editor when we start to drag modal.\n    document.body.style[\"user-select\"] = \"none\";\n  }\n\n  /**\n   * This method opens the modal window, restoring the previous state, position and metrics,\n   * if exists. By default the modal object opens in stack mode.\n   */\n  open() {\n    // Removing close class.\n    this.removeClass(\"wrs_closed\");\n    // Hiding keyboard for mobile devices.\n    const { isIOS } = this.deviceProperties;\n    const { isAndroid } = this.deviceProperties;\n    const { isMobile } = this.deviceProperties;\n    if (isIOS || isAndroid || isMobile) {\n      // Restore scale to 1.\n      this.restoreWebsiteScale();\n      this.lockWebsiteScroll();\n      // Due to editor wait we need to wait until editor focus.\n      setTimeout(() => {\n        this.hideKeyboard();\n      }, 400);\n    }\n\n    // New modal window. He need to create the whole object.\n    if (!this.properties.created) {\n      this.create();\n    } else {\n      // Previous state closed. Open method can be called even the previous state is open,\n      // for example updating the content of the modal object.\n      if (!this.properties.open) {\n        this.properties.open = true;\n\n        // Restoring the previous open state: if the modal object has been closed\n        // re-open it should preserve the state and the metrics.\n        if (!this.deviceProperties.isAndroid && !this.deviceProperties.isIOS) {\n          this.restoreState();\n        }\n      }\n\n      // Maximize window only when the configuration is set and the device is not iOs or Android.\n      if (this.deviceProperties.isDesktop && Configuration.get(\"modalWindowFullScreen\")) {\n        this.maximize();\n      }\n\n      // In iOS we need to recalculate the size of the modal object because\n      // iOS keyboard is a float div which can overlay the modal object.\n      if (this.deviceProperties.isIOS) {\n        this.iosSoftkeyboardOpened = false;\n        this.setContainerHeight(`${100 + this.iosMeasureUnit}`);\n      }\n    }\n\n    if (!ContentManager.isEditorLoaded()) {\n      const listener = Listeners.newListener(\"onLoad\", () => {\n        this.contentManager.onOpen(this);\n      });\n      this.contentManager.addListener(listener);\n    } else {\n      this.contentManager.onOpen(this);\n    }\n  }\n\n  /**\n   * Closes the modal.\n   * Removes specific CSS classes, saves modal properties, unlocks website scroll,\n   * sets the 'open' property to false, and triggers the 'onModalClose' event.\n   * If a close trigger is defined, it tracks the telemetry event 'CLOSED_MTCT_EDITOR' with the trigger.\n   * @returns {Promise<void>} A promise that resolves when the modal is closed.\n   */\n  async close(trigger) {\n    this.removeClass(\"wrs_maximized\");\n    this.removeClass(\"wrs_minimized\");\n    this.removeClass(\"wrs_stack\");\n    this.addClass(\"wrs_closed\");\n    this.saveModalProperties();\n    this.unlockWebsiteScroll();\n    this.properties.open = false;\n\n    if (trigger) {\n      try {\n        await Telemeter.telemeter.track(\"CLOSED_MTCT_EDITOR\", {\n          toolbar: this.contentManager.toolbar,\n          trigger: trigger,\n        });\n      } catch (error) {\n        console.error(\"Error tracking CLOSED_MTCT_EDITOR\", error);\n      }\n    }\n\n    Core.globalListeners.fire(\"onModalClose\", {});\n  }\n  /**\n   * Closes modal window and destroys the object.\n   */\n  destroy() {\n    // Close modal window.\n    this.close();\n    // Remove listeners and destroy the object.\n    this.removeListeners();\n    this.overlay.remove();\n    this.container.remove();\n    // Reset properties to allow open again.\n    this.properties.created = false;\n  }\n\n  /**\n   * Sets the website scale to one.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  restoreWebsiteScale() {\n    let viewportmeta = document.querySelector(\"meta[name=viewport]\");\n    // Let the equal symbols in order to search and make meta's final content.\n    const contentAttrsToUpdate = [\"initial-scale=\", \"minimum-scale=\", \"maximum-scale=\"];\n    const contentAttrsValuesToUpdate = [\"1.0\", \"1.0\", \"1.0\"];\n    const setMetaAttrFunc = (viewportelement, contentAttrs) => {\n      const contentAttr = viewportelement.getAttribute(\"content\");\n      // If it exists, we need to maintain old values and put our values.\n      if (contentAttr) {\n        const attrArray = contentAttr.split(\",\");\n        let finalContentMeta = \"\";\n        const oldAttrs = [];\n        for (let i = 0; i < attrArray.length; i += 1) {\n          let isAttrToUpdate = false;\n          let j = 0;\n          while (!isAttrToUpdate && j < contentAttrs.length) {\n            if (attrArray[i].indexOf(contentAttrs[j])) {\n              isAttrToUpdate = true;\n            }\n            j += 1;\n          }\n\n          if (!isAttrToUpdate) {\n            oldAttrs.push(attrArray[i]);\n          }\n        }\n\n        for (let i = 0; i < contentAttrs.length; i += 1) {\n          const attr = contentAttrs[i] + contentAttrsValuesToUpdate[i];\n          finalContentMeta += i === 0 ? attr : `,${attr}`;\n        }\n\n        for (let i = 0; i < oldAttrs.length; i += 1) {\n          finalContentMeta += `,${oldAttrs[i]}`;\n        }\n        viewportelement.setAttribute(\"content\", finalContentMeta);\n        // It needs to set to empty because setAttribute refresh only when attribute is different.\n        viewportelement.setAttribute(\"content\", \"\");\n        viewportelement.setAttribute(\"content\", contentAttr);\n      } else {\n        viewportelement.setAttribute(\"content\", \"initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0\");\n        viewportelement.removeAttribute(\"content\");\n      }\n    };\n\n    if (!viewportmeta) {\n      viewportmeta = document.createElement(\"meta\");\n      document.getElementsByTagName(\"head\")[0].appendChild(viewportmeta);\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\n      viewportmeta.remove();\n    } else {\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\n    }\n  }\n\n  /**\n   * Locks website scroll for mobile devices.\n   */\n  lockWebsiteScroll() {\n    this.websiteBeforeLockParameters = {\n      bodyStylePosition: document.body.style.position ? document.body.style.position : \"\",\n      bodyStyleOverflow: document.body.style.overflow ? document.body.style.overflow : \"\",\n      htmlStyleOverflow: document.documentElement.style.overflow ? document.documentElement.style.overflow : \"\",\n      windowScrollX: window.scrollX,\n      windowScrollY: window.scrollY,\n    };\n  }\n\n  /**\n   * Unlocks website scroll for mobile devices.\n   */\n  unlockWebsiteScroll() {\n    if (this.websiteBeforeLockParameters) {\n      document.body.style.position = this.websiteBeforeLockParameters.bodyStylePosition;\n      document.body.style.overflow = this.websiteBeforeLockParameters.bodyStyleOverflow;\n      document.documentElement.style.overflow = this.websiteBeforeLockParameters.htmlStyleOverflow;\n      const { windowScrollX } = this.websiteBeforeLockParameters;\n      const { windowScrollY } = this.websiteBeforeLockParameters;\n      window.scrollTo(windowScrollX, windowScrollY);\n      this.websiteBeforeLockParameters = null;\n    }\n  }\n\n  /**\n   * Util function to known if browser is IE11.\n   * @returns {Boolean} true if the browser is IE11. false otherwise.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  isIE11() {\n    if (\n      navigator.userAgent.search(\"Msie/\") >= 0 ||\n      navigator.userAgent.search(\"Trident/\") >= 0 ||\n      navigator.userAgent.search(\"Edge/\") >= 0\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns if the current language type is RTL.\n   * @return {Boolean} true if current language is RTL. false otherwise.\n   */\n  isRTL() {\n    if (this.attributes.language === \"ar\" || this.attributes.language === \"he\") {\n      return true;\n    }\n    return this.rtl;\n  }\n\n  /**\n   * Adds a class to all modal ModalDialog DOM elements.\n   * @param {String} className - Class name.\n   */\n  addClass(className) {\n    Util.addClass(this.overlay, className);\n    Util.addClass(this.titleBar, className);\n    Util.addClass(this.overlay, className);\n    Util.addClass(this.container, className);\n    Util.addClass(this.contentContainer, className);\n    Util.addClass(this.stackDiv, className);\n    Util.addClass(this.minimizeDiv, className);\n    Util.addClass(this.maximizeDiv, className);\n    Util.addClass(this.wrapper, className);\n  }\n\n  /**\n   * Remove a class from all modal DOM elements.\n   * @param {String} className - Class name.\n   */\n  removeClass(className) {\n    Util.removeClass(this.overlay, className);\n    Util.removeClass(this.titleBar, className);\n    Util.removeClass(this.overlay, className);\n    Util.removeClass(this.container, className);\n    Util.removeClass(this.contentContainer, className);\n    Util.removeClass(this.stackDiv, className);\n    Util.removeClass(this.minimizeDiv, className);\n    Util.removeClass(this.maximizeDiv, className);\n    Util.removeClass(this.wrapper, className);\n  }\n\n  /**\n   * Create modal dialog for desktop.\n   */\n  createModalWindowDesktop() {\n    this.addClass(\"wrs_modal_desktop\");\n    this.stack();\n  }\n\n  /**\n   * Create modal dialog for non android devices.\n   */\n  createModalWindowAndroid() {\n    this.addClass(\"wrs_modal_android\");\n    window.addEventListener(\"resize\", this.orientationChangeAndroidSoftkeyboard.bind(this));\n  }\n\n  /**\n   * Create modal dialog for iOS devices.\n   */\n  createModalWindowIos() {\n    this.addClass(\"wrs_modal_ios\");\n    // Refresh the size when the orientation is changed.\n    window.addEventListener(\"resize\", this.orientationChangeIosSoftkeyboard.bind(this));\n  }\n\n  /**\n   * Restore previous state, position and size of previous stacked modal dialog.\n   */\n  restoreState() {\n    if (this.properties.state === \"maximized\") {\n      // Reset states for prevent return to stack state.\n      this.maximize();\n    } else if (this.properties.state === \"minimized\") {\n      // Reset states for prevent return to stack state.\n      this.properties.state = this.properties.previousState;\n      this.properties.previousState = \"\";\n      this.minimize();\n    } else {\n      this.stack();\n    }\n  }\n\n  /**\n   * Stacks the modal object.\n   */\n  stack() {\n    this.properties.previousState = this.properties.state;\n    this.properties.state = \"stack\";\n    this.removeClass(\"wrs_maximized\");\n    this.minimizeDiv.title = StringManager.get(\"minimize\");\n    this.removeClass(\"wrs_minimized\");\n    this.addClass(\"wrs_stack\");\n\n    // Change maximize/minimize icon to minimize icon\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n\n    this.restoreModalProperties();\n\n    if (typeof this.resizerBR !== \"undefined\" && typeof this.resizerTL !== \"undefined\") {\n      this.setResizeButtonsVisibility();\n    }\n\n    // Need recalculate position of actual modal because window can was changed in fullscreenmode.\n    this.recalculateScrollBar();\n    this.recalculatePosition();\n    this.recalculateScale();\n    this.focus();\n  }\n\n  /**\n   * Minimizes the modal object.\n   */\n  minimize() {\n    // Saving width, height, top and bottom parameters to restore when opening.\n    this.saveModalProperties();\n    this.title.style.cursor = \"pointer\";\n    if (this.properties.state === \"minimized\" && this.properties.previousState === \"stack\") {\n      this.stack();\n    } else if (this.properties.state === \"minimized\" && this.properties.previousState === \"maximized\") {\n      this.maximize();\n    } else {\n      // Setting css to prevent important tag into css style.\n      this.container.style.height = \"30px\";\n      this.container.style.width = \"250px\";\n      this.container.style.bottom = \"0px\";\n      this.container.style.right = \"10px\";\n\n      this.removeListeners();\n      this.properties.previousState = this.properties.state;\n      this.properties.state = \"minimized\";\n      this.setResizeButtonsVisibility();\n      this.minimizeDiv.title = StringManager.get(\"maximize\");\n\n      if (Util.containsClass(this.overlay, \"wrs_stack\")) {\n        this.removeClass(\"wrs_stack\");\n      } else {\n        this.removeClass(\"wrs_maximized\");\n      }\n      this.addClass(\"wrs_minimized\");\n\n      // Change minimize icon to maximize icon\n      const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxIcon)})`;\n      const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxHoverIcon)})`;\n      this.minimizeDiv.setAttribute(\"style\", generalStyle);\n      this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n      this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    }\n  }\n\n  /**\n   * Maximizes the modal object.\n   */\n  maximize() {\n    // Saving width, height, top and bottom parameters to restore when opening.\n    this.saveModalProperties();\n    if (this.properties.state !== \"maximized\") {\n      this.properties.previousState = this.properties.state;\n      this.properties.state = \"maximized\";\n    }\n    // Don't permit resize on maximize mode.\n    this.setResizeButtonsVisibility();\n\n    if (Util.containsClass(this.overlay, \"wrs_minimized\")) {\n      this.minimizeDiv.title = StringManager.get(\"minimize\");\n      this.removeClass(\"wrs_minimized\");\n    } else if (Util.containsClass(this.overlay, \"wrs_stack\")) {\n      this.container.style.left = null;\n      this.container.style.top = null;\n      this.removeClass(\"wrs_stack\");\n    }\n\n    this.addClass(\"wrs_maximized\");\n\n    // Change maximize icon to minimize icon\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n\n    // Set size to 80% screen with a max size.\n    this.setSize(parseInt(window.innerHeight * 0.8, 10), parseInt(window.innerWidth * 0.8, 10));\n    if (this.container.clientHeight > 700) {\n      this.container.style.height = \"700px\";\n    }\n    if (this.container.clientWidth > 1200) {\n      this.container.style.width = \"1200px\";\n    }\n\n    // Setting modal position in center on screen.\n    const { innerHeight } = window;\n    const { innerWidth } = window;\n    const { offsetHeight } = this.container;\n    const { offsetWidth } = this.container;\n    const bottom = innerHeight / 2 - offsetHeight / 2;\n    const right = innerWidth / 2 - offsetWidth / 2;\n\n    this.setPosition(bottom, right);\n    this.recalculateScale();\n    this.recalculatePosition();\n    this.recalculateSize();\n    this.focus();\n  }\n\n  /**\n   * Expand again the modal object from a minimized state.\n   */\n  reExpand() {\n    if (this.properties.state === \"minimized\") {\n      if (this.properties.previousState === \"maximized\") {\n        this.maximize();\n      } else {\n        this.stack();\n      }\n      this.title.style.cursor = \"\";\n    }\n  }\n\n  /**\n   * Sets modal size.\n   * @param {Number} height - Height of the ModalDialog\n   * @param {Number} width - Width of the ModalDialog.\n   */\n  setSize(height, width) {\n    this.container.style.height = `${height}px`;\n    this.container.style.width = `${width}px`;\n    this.recalculateSize();\n  }\n\n  /**\n   * Sets modal position using bottom and right style attributes.\n   * @param  {number} bottom - bottom attribute.\n   * @param  {number} right - right attribute.\n   */\n  setPosition(bottom, right) {\n    this.container.style.bottom = `${bottom}px`;\n    this.container.style.right = `${right}px`;\n  }\n\n  /**\n   * Saves position and size parameters of and open ModalDialog. This attributes\n   * are needed to restore it on re-open.\n   */\n  saveModalProperties() {\n    // Saving values of modal only when modal is in stack state.\n    if (this.properties.state === \"stack\") {\n      this.properties.position.bottom = parseInt(this.container.style.bottom, 10);\n      this.properties.position.right = parseInt(this.container.style.right, 10);\n      this.properties.size.width = parseInt(this.container.style.width, 10);\n      this.properties.size.height = parseInt(this.container.style.height, 10);\n    }\n  }\n\n  /**\n   * Restore ModalDialog position and size parameters.\n   */\n  restoreModalProperties() {\n    if (this.properties.state === \"stack\") {\n      // Restoring Bottom and Right values from last modal.\n      this.setPosition(this.properties.position.bottom, this.properties.position.right);\n      // Restoring Height and Left values from last modal.\n      this.setSize(this.properties.size.height, this.properties.size.width);\n    }\n  }\n\n  /**\n   * Sets the modal dialog initial size.\n   */\n  recalculateSize() {\n    this.wrapper.style.width = `${this.container.clientWidth - 12}px`;\n    this.wrapper.style.height = `${this.container.clientHeight - 38}px`;\n    this.contentContainer.style.height = `${parseInt(this.wrapper.offsetHeight - 50, 10)}px`;\n  }\n\n  /**\n   * Enable or disable visibility of resize buttons in modal window depend on state.\n   */\n  setResizeButtonsVisibility() {\n    if (this.properties.state === \"stack\") {\n      this.resizerTL.style.visibility = \"visible\";\n      this.resizerBR.style.visibility = \"visible\";\n    } else {\n      this.resizerTL.style.visibility = \"hidden\";\n      this.resizerBR.style.visibility = \"hidden\";\n    }\n  }\n\n  /**\n   * Makes an object draggable adding mouse and touch events.\n   */\n  addListeners() {\n    // Button events (maximize, minimize, stack and close).\n    this.maximizeDiv.addEventListener(\"click\", this.maximize.bind(this), true);\n    this.stackDiv.addEventListener(\"click\", this.stack.bind(this), true);\n    this.minimizeDiv.addEventListener(\"click\", this.minimize.bind(this), true);\n    this.closeDiv.addEventListener(\"click\", this.cancelAction.bind(this));\n    this.maximizeDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n        }\n      },\n      true,\n    );\n    this.stackDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n          e.preventDefault();\n        }\n      },\n      true,\n    );\n    this.minimizeDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n          e.preventDefault();\n        }\n      },\n      true,\n    );\n    this.closeDiv.addEventListener(\"keypress\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n        // Handle enter and space.\n        e.target.click();\n        e.preventDefault();\n      }\n    });\n    this.title.addEventListener(\"click\", this.reExpand.bind(this));\n\n    // Overlay events (close).\n    this.overlay.addEventListener(\"click\", this.cancelAction.bind(this));\n\n    // Mouse events.\n    Util.addEvent(window, \"mousedown\", this.startDrag.bind(this));\n    Util.addEvent(window, \"mouseup\", this.stopDrag.bind(this));\n    Util.addEvent(window, \"mousemove\", this.drag.bind(this));\n    Util.addEvent(window, \"resize\", this.onWindowResize.bind(this));\n    // Key events.\n    Util.addEvent(window, \"keydown\", this.onKeyDown.bind(this));\n  }\n\n  /**\n   * Removes draggable events from an object.\n   */\n  removeListeners() {\n    // Mouse events.\n    Util.removeEvent(window, \"mousedown\", this.startDrag);\n    Util.removeEvent(window, \"mouseup\", this.stopDrag);\n    Util.removeEvent(window, \"mousemove\", this.drag);\n    Util.removeEvent(window, \"resize\", this.onWindowResize);\n    // Key events.\n    Util.removeEvent(window, \"keydown\", this.onKeyDown);\n  }\n\n  /**\n   * Returns mouse or touch coordinates (on touch events ev.ClientX doesn't exists)\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   * @return {Object} With the X and Y coordinates.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  eventClient(mouseEvent) {\n    if (typeof mouseEvent.clientX === \"undefined\" && mouseEvent.changedTouches) {\n      const client = {\n        X: mouseEvent.changedTouches[0].clientX,\n        Y: mouseEvent.changedTouches[0].clientY,\n      };\n      return client;\n    }\n    const client = {\n      X: mouseEvent.clientX,\n      Y: mouseEvent.clientY,\n    };\n    return client;\n  }\n\n  /**\n   * Start drag function: set the object dragDataObject with the draggable\n   * object offsets coordinates.\n   * when drag starts (on touchstart or mousedown events).\n   * @param {MouseEvent} mouseEvent - Touchstart or mousedown event.\n   */\n  startDrag(mouseEvent) {\n    if (this.properties.state === \"minimized\") {\n      return;\n    }\n    if (mouseEvent.target === this.title) {\n      if (typeof this.dragDataObject === \"undefined\" || this.dragDataObject === null) {\n        // Save first click mouse point on screen.\n        this.dragDataObject = {\n          x: this.eventClient(mouseEvent).X,\n          y: this.eventClient(mouseEvent).Y,\n        };\n        // Reset last drag position when start drag.\n        this.lastDrag = {\n          x: \"0px\",\n          y: \"0px\",\n        };\n        // Init right and bottom values for window modal if it isn't exist.\n        if (this.container.style.right === \"\") {\n          this.container.style.right = \"0px\";\n        }\n        if (this.container.style.bottom === \"\") {\n          this.container.style.bottom = \"0px\";\n        }\n\n        // Needed for IE11 for apply disabled mouse events on editor because\n        // internet explorer needs a dynamic object to apply this property.\n        if (this.isIE11()) {\n          // this.iframe.style['position'] = 'relative';\n        }\n        // Apply class for disable involuntary select text when drag.\n        Util.addClass(document.body, \"wrs_noselect\");\n        Util.addClass(this.overlay, \"wrs_overlay_active\");\n        // Obtain screen limits for prevent overflow.\n        this.limitWindow = this.getLimitWindow();\n      }\n    }\n  }\n\n  /**\n   * Updates dragDataObject with the draggable object coordinates when\n   * the draggable object is being moved.\n   * @param {MouseEvent} mouseEvent - The mouse event.\n   */\n  drag(mouseEvent) {\n    if (this.dragDataObject) {\n      mouseEvent.preventDefault();\n      // Calculate max and min between actual mouse position and limit of screeen.\n      // It restric the movement of modal into window.\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, this.limitWindow.minPointer.y);\n      limitY = Math.max(this.limitWindow.maxPointer.y, limitY);\n      let limitX = Math.min(this.eventClient(mouseEvent).X, this.limitWindow.minPointer.x);\n      limitX = Math.max(this.limitWindow.maxPointer.x, limitX);\n      // Subtract limit with first position to obtain relative pixels increment\n      // to the anchor point.\n      const dragX = `${limitX - this.dragDataObject.x}px`;\n      const dragY = `${limitY - this.dragDataObject.y}px`;\n      // Save last valid position of modal before window overflow.\n      this.lastDrag = {\n        x: dragX,\n        y: dragY,\n      };\n      // This move modal with hardware acceleration.\n      this.container.style.transform = `translate3d(${dragX},${dragY},0)`;\n    }\n    if (this.resizeDataObject) {\n      const { innerWidth } = window;\n      const { innerHeight } = window;\n      let limitX = Math.min(this.eventClient(mouseEvent).X, innerWidth - this.scrollbarWidth - 7);\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, innerHeight - 7);\n      if (limitX < 0) {\n        limitX = 0;\n      }\n\n      if (limitY < 0) {\n        limitY = 0;\n      }\n\n      let scaleMultiplier;\n      if (this.leftScale) {\n        scaleMultiplier = -1;\n      } else {\n        scaleMultiplier = 1;\n      }\n\n      this.container.style.width = `${this.initialWidth + scaleMultiplier * (limitX - this.resizeDataObject.x)}px`;\n      this.container.style.height = `${this.initialHeight + scaleMultiplier * (limitY - this.resizeDataObject.y)}px`;\n      if (!this.leftScale) {\n        if (this.resizeDataObject.x - limitX - this.initialWidth < -580) {\n          this.container.style.right = `${this.initialRight - (limitX - this.resizeDataObject.x)}px`;\n        } else {\n          this.container.style.right = `${this.initialRight + this.initialWidth - 580}px`;\n          this.container.style.width = \"580px\";\n        }\n        if (this.resizeDataObject.y - limitY < this.initialHeight - 338) {\n          this.container.style.bottom = `${this.initialBottom - (limitY - this.resizeDataObject.y)}px`;\n        } else {\n          this.container.style.bottom = `${this.initialBottom + this.initialHeight - 338}px`;\n          this.container.style.height = \"338px\";\n        }\n      }\n      this.recalculateScale();\n      this.recalculatePosition();\n    }\n  }\n\n  /**\n   * Returns the boundaries of actual window to limit modal movement.\n   * @return {Object} Object containing mouseX and mouseY coordinates of actual mouse on screen.\n   */\n  getLimitWindow() {\n    // Obtain dimensions of window page.\n    const maxWidth = window.innerWidth;\n    const maxHeight = window.innerHeight;\n\n    // Calculate relative position of mouse point into window.\n    const { offsetHeight } = this.container;\n    const contStyleBottom = parseInt(this.container.style.bottom, 10);\n    const contStyleRight = parseInt(this.container.style.right, 10);\n\n    const { pageXOffset } = window;\n    const dragY = this.dragDataObject.y;\n    const dragX = this.dragDataObject.x;\n\n    const offSetToolbarY = offsetHeight + contStyleBottom - (maxHeight - (dragY - pageXOffset));\n    const offSetToolbarX = maxWidth - this.scrollbarWidth - (dragX - pageXOffset) - contStyleRight;\n\n    // Calculate limits with sizes of window, modal and mouse position.\n    const minPointerY = maxHeight - this.container.offsetHeight + offSetToolbarY;\n    const maxPointerY = this.title.offsetHeight - (this.title.offsetHeight - offSetToolbarY);\n    const minPointerX = maxWidth - offSetToolbarX - this.scrollbarWidth;\n    const maxPointerX = this.container.offsetWidth - offSetToolbarX;\n    const minPointer = { x: minPointerX, y: minPointerY };\n    const maxPointer = { x: maxPointerX, y: maxPointerY };\n    return { minPointer, maxPointer };\n  }\n\n  /**\n   * Returns the scrollbar width size of browser\n   * @returns {Number} The scrollbar width.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getScrollBarWidth() {\n    // Create a paragraph with full width of page.\n    const inner = document.createElement(\"p\");\n    inner.style.width = \"100%\";\n    inner.style.height = \"200px\";\n\n    // Create a hidden div to compare sizes.\n    const outer = document.createElement(\"div\");\n    outer.style.position = \"absolute\";\n    outer.style.top = \"0px\";\n    outer.style.left = \"0px\";\n    outer.style.visibility = \"hidden\";\n    outer.style.width = \"200px\";\n    outer.style.height = \"150px\";\n    outer.style.overflow = \"hidden\";\n    outer.appendChild(inner);\n\n    document.body.appendChild(outer);\n    const widthOuter = inner.offsetWidth;\n\n    // Change type overflow of paragraph for measure scrollbar.\n    outer.style.overflow = \"scroll\";\n    let widthInner = inner.offsetWidth;\n\n    // If measure is the same, we compare with internal div.\n    if (widthOuter === widthInner) {\n      widthInner = outer.clientWidth;\n    }\n    document.body.removeChild(outer);\n\n    return widthOuter - widthInner;\n  }\n\n  /**\n   * Set the dragDataObject to null.\n   */\n  stopDrag() {\n    // Due to we have multiple events that call this function, we need only to execute\n    // the next modifiers one time,\n    // when the user stops to drag and dragDataObject is not null (the object to drag is attached).\n    if (this.dragDataObject || this.resizeDataObject) {\n      // If modal doesn't change, it's not necessary to set position with interpolation.\n      this.container.style.transform = \"\";\n      if (this.dragDataObject) {\n        this.container.style.right = `${parseInt(this.container.style.right, 10) - parseInt(this.lastDrag.x, 10)}px`;\n        this.container.style.bottom = `${parseInt(this.container.style.bottom, 10) - parseInt(this.lastDrag.y, 10)}px`;\n      }\n      // We make focus on editor after drag modal windows to prevent lose focus.\n      this.focus();\n      // Restore mouse events on iframe.\n      // this.iframe.style['pointer-events'] = 'auto';\n      document.body.style[\"user-select\"] = \"\";\n      // Restore static state of iframe if we use Internet Explorer.\n      if (this.isIE11()) {\n        // this.iframe.style['position'] = null;\n      }\n      // Active text select event.\n      Util.removeClass(document.body, \"wrs_noselect\");\n      Util.removeClass(this.overlay, \"wrs_overlay_active\");\n    }\n    this.dragDataObject = null;\n    this.resizeDataObject = null;\n    this.initialWidth = null;\n    this.leftScale = null;\n  }\n\n  /**\n   * Recalculates scale for modal when resize browser window.\n   */\n  onWindowResize() {\n    this.recalculateScrollBar();\n    this.recalculatePosition();\n    this.recalculateScale();\n  }\n\n  /**\n   * Triggers keyboard events:\n   * - Tab key tab to go to submit button.\n   * - Esc key to close the modal dialog.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined) {\n      // Popupmessage is not oppened.\n      if (this.popup.overlayWrapper.style.display !== \"block\") {\n        // Code to detect Esc event\n        if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n          if (this.properties.open) {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\n          // Code to detect shift Tab event.\n          if (document.activeElement === this.cancelButton) {\n            this.submitButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          } else {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        } else if (keyboardEvent.key === \"Tab\") {\n          // Code to detect Tab event.\n          if (document.activeElement === this.submitButton) {\n            this.cancelButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          } else {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        }\n      } else {\n        // Popupmessage oppened.\n        this.popup.onKeyDown(keyboardEvent);\n      }\n    }\n  }\n\n  /**\n   * Recalculating position for modal dialog when the browser is resized.\n   */\n  recalculatePosition() {\n    this.container.style.right = `${Math.min(parseInt(this.container.style.right, 10), window.innerWidth - this.scrollbarWidth - this.container.offsetWidth)}px`;\n    if (parseInt(this.container.style.right, 10) < 0) {\n      this.container.style.right = \"0px\";\n    }\n    this.container.style.bottom = `${Math.min(parseInt(this.container.style.bottom, 10), window.innerHeight - this.container.offsetHeight)}px`;\n    if (parseInt(this.container.style.bottom, 10) < 0) {\n      this.container.style.bottom = \"0px\";\n    }\n  }\n\n  /**\n   * Recalculating scale for modal when the browser is resized.\n   */\n  recalculateScale() {\n    let sizeModified = false;\n\n    if (parseInt(this.container.style.width, 10) > 580) {\n      this.container.style.width = `${Math.min(parseInt(this.container.style.width, 10), window.innerWidth - this.scrollbarWidth)}px`;\n      sizeModified = true;\n    } else {\n      this.container.style.width = \"580px\";\n      sizeModified = true;\n    }\n\n    if (parseInt(this.container.style.height, 10) > 338) {\n      this.container.style.height = `${Math.min(parseInt(this.container.style.height, 10), window.innerHeight)}px`;\n      sizeModified = true;\n    } else {\n      this.container.style.height = \"338px\";\n      sizeModified = true;\n    }\n\n    if (sizeModified) {\n      this.recalculateSize();\n    }\n  }\n\n  /**\n   * Recalculating width of browser scroll bar.\n   */\n  recalculateScrollBar() {\n    this.hasScrollBar = window.innerWidth > document.documentElement.clientWidth;\n    if (this.hasScrollBar) {\n      this.scrollbarWidth = this.getScrollBarWidth();\n    } else {\n      this.scrollbarWidth = 0;\n    }\n  }\n\n  /**\n   * Hide soft keyboards on iOS devices.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  hideKeyboard() {\n    // iOS keyboard can't be detected or hide directly from JavaScript.\n    // So, this method simulates that user focus a text input and blur\n    // the selection.\n    const inputField = document.createElement(\"input\");\n    this.container.appendChild(inputField);\n    inputField.focus();\n    inputField.blur();\n    // Is removed to not see it.\n    inputField.remove();\n  }\n\n  /**\n   * Focus to contentManager object.\n   */\n  focus() {\n    if (this.contentManager != null && typeof this.contentManager.onFocus !== \"undefined\") {\n      this.contentManager.onFocus();\n    }\n  }\n\n  /**\n   * Returns true when the device is on portrait mode.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  portraitMode() {\n    return window.innerHeight > window.innerWidth;\n  }\n\n  /**\n   * Event handler that change container size when IOS soft keyboard is opened.\n   */\n  handleOpenedIosSoftkeyboard() {\n    if (!this.iosSoftkeyboardOpened && this.iosDivHeight != null && this.iosDivHeight === `100${this.iosMeasureUnit}`) {\n      if (this.portraitMode()) {\n        this.setContainerHeight(`63${this.iosMeasureUnit}`);\n      } else {\n        this.setContainerHeight(`40${this.iosMeasureUnit}`);\n      }\n    }\n    this.iosSoftkeyboardOpened = true;\n  }\n\n  /**\n   * Event handler that change container size when IOS soft keyboard is closed.\n   */\n  handleClosedIosSoftkeyboard() {\n    this.iosSoftkeyboardOpened = false;\n    this.setContainerHeight(`100${this.iosMeasureUnit}`);\n  }\n\n  /**\n   * Change container sizes when orientation is changed on iOS.\n   */\n  orientationChangeIosSoftkeyboard() {\n    if (this.iosSoftkeyboardOpened) {\n      if (this.portraitMode()) {\n        this.setContainerHeight(`63${this.iosMeasureUnit}`);\n      } else {\n        this.setContainerHeight(`40${this.iosMeasureUnit}`);\n      }\n    } else {\n      this.setContainerHeight(`100${this.iosMeasureUnit}`);\n    }\n  }\n\n  /**\n   * Change container sizes when orientation is changed on Android.\n   */\n  orientationChangeAndroidSoftkeyboard() {\n    this.setContainerHeight(\"100%\");\n  }\n\n  /**\n   * Set iframe container height.\n   * @param {Number} height - New height.\n   */\n  setContainerHeight(height) {\n    this.iosDivHeight = height;\n    this.wrapper.style.height = height;\n  }\n\n  /**\n   * Check content of editor before close action.\n   */\n  showPopUpMessage() {\n    if (this.properties.state === \"minimized\") {\n      this.stack();\n    }\n    this.popup.show();\n  }\n\n  /**\n   * Sets the title of the modal dialog.\n   * @param {String} title - Modal dialog title.\n   */\n  setTitle(title) {\n    this.title.innerHTML = title;\n  }\n\n  /**\n   * Returns the id of an element, adding the instance number to\n   * the element class name:\n   * className --> className[idNumber]\n   * @param {String} className - The element class name.\n   * @returns {String} A string appending the instance id to the className.\n   */\n  getElementId(className) {\n    return `${className}[${this.instanceId}]`;\n  }\n}\n","/* eslint-disable */\nvar polyfills;\nexport default polyfills;\n\n// Polyfills.\n/*! http://mths.be/codepointat v0.1.0 by @mathias */\nif (!String.prototype.codePointAt) {\n  (function () {\n    \"use strict\"; // needed to support `apply`/`call` with `undefined`/`null`\n    var codePointAt = function (position) {\n      if (this == null) {\n        throw TypeError();\n      }\n      var string = String(this);\n      var size = string.length;\n      // `ToInteger`\n      var index = position ? Number(position) : 0;\n      if (index != index) {\n        // better `isNaN`\n        index = 0;\n      }\n      // Account for out-of-bounds indices:\n      if (index < 0 || index >= size) {\n        return undefined;\n      }\n      // Get the first code unit\n      var first = string.charCodeAt(index);\n      var second;\n      if (\n        // check if it’s the start of a surrogate pair\n        first >= 0xd800 &&\n        first <= 0xdbff && // high surrogate\n        size > index + 1 // there is a next code unit\n      ) {\n        second = string.charCodeAt(index + 1);\n        if (second >= 0xdc00 && second <= 0xdfff) {\n          // low surrogate\n          // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n          return (first - 0xd800) * 0x400 + second - 0xdc00 + 0x10000;\n        }\n      }\n      return first;\n    };\n    if (Object.defineProperty) {\n      Object.defineProperty(String.prototype, \"codePointAt\", {\n        value: codePointAt,\n        configurable: true,\n        writable: true,\n      });\n    } else {\n      String.prototype.codePointAt = codePointAt;\n    }\n  })();\n}\n\n// Object.assign polyfill.\nif (typeof Object.assign != \"function\") {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target, varArgs) {\n      // .length of function is 2\n      \"use strict\";\n      if (target == null) {\n        // TypeError if undefined or null\n        throw new TypeError(\"Cannot convert undefined or null to object\");\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n          // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true,\n  });\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, \"includes\", {\n    value: function (searchElement, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" s null or is not defined');\n      }\n\n      // 1. Let O be ? ToObject(this value).\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. if len is 0, return false.\n      if (len === 0) {\n        return false;\n      }\n\n      // 4. Let n be ? ToInteger(fromIndex).\n      //    (if fromIndex is undefinedo, this step generates the value 0.)\n      var n = fromIndex | 0;\n\n      // 5. if n ≥ 0, then\n      //  a. Let k be n.\n      // 6. Else n < 0,\n      //  a. Let k be len + n.\n      //  b. if k < 0, let k be 0.\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || (typeof x === \"number\" && typeof y === \"number\" && isNaN(x) && isNaN(y));\n      }\n\n      // 7. Repeat while k < len\n      while (k < len) {\n        // a. let element k be the result of ? Get(O, ! ToString(k)).\n        // b. if SameValueZero(searchElement, elementK) is true, return true.\n        if (sameValueZero(o[k], searchElement)) {\n          return true;\n        }\n        // c. Increase k by 1.\n        k++;\n      }\n\n      // 8. Return false\n      return false;\n    },\n  });\n}\n\nif (!String.prototype.includes) {\n  String.prototype.includes = function (search, start) {\n    \"use strict\";\n\n    if (search instanceof RegExp) {\n      throw TypeError(\"first argument must not be a RegExp\");\n    }\n    if (start === undefined) {\n      start = 0;\n    }\n    return this.indexOf(search, start) !== -1;\n  };\n}\n\nif (!String.prototype.startsWith) {\n  Object.defineProperty(String.prototype, \"startsWith\", {\n    value: function (search, rawPos) {\n      var pos = rawPos > 0 ? rawPos | 0 : 0;\n      return this.substring(pos, pos + search.length) === search;\n    },\n  });\n}\n","import Parser from \"./parser\";\nimport Util from \"./util\";\nimport StringManager from \"./stringmanager\";\nimport ContentManager from \"./contentmanager\";\nimport Latex from \"./latex\";\nimport MathML from \"./mathml\";\nimport CustomEditors from \"./customeditors\";\nimport Configuration from \"./configuration\";\nimport jsProperties from \"./jsvariables\";\nimport Event from \"./event\";\nimport Listeners from \"./listeners\";\nimport Image from \"./image\";\nimport ServiceProvider from \"./serviceprovider\";\nimport ModalDialog from \"./modal\";\nimport Telemeter from \"./telemeter\";\nimport \"./polyfills\";\nimport \"../styles/styles.css\";\n\n/**\n * @typedef {Object} CoreProperties\n * @property {ServiceProviderProperties} serviceProviderProperties\n * - The ServiceProvider class properties. *\n */\nexport default class Core {\n  /**\n   * @classdesc\n   * This class represents MathType integration Core, managing the following:\n   * - Integration initialization.\n   * - Event managing.\n   * - Insertion of formulas into the edit area.\n   * ```js\n   *       let core = new Core();\n   *       core.addListener(listener);\n   *       core.language = 'en';\n   *\n   *       // Initializing Core class.\n   *       core.init(configurationService);\n   * ```\n   * @constructs\n   * Core constructor.\n   * @param {CoreProperties}\n   */\n  constructor(coreProperties) {\n    /**\n     * Language. Needed for accessibility and locales. 'en' by default.\n     * @type {String}\n     */\n    this.language = \"en\";\n\n    /**\n     * Edit mode, 'images' by default. Admits the following values:\n     * - images\n     * - latex\n     * @type {String}\n     */\n    this.editMode = \"images\";\n\n    /**\n     * Modal dialog instance.\n     * @type {ModalDialog}\n     */\n    this.modalDialog = null;\n\n    /**\n     * The instance of {@link CustomEditors}. By default\n     * the only custom editor is the Chemistry editor.\n     * @type {CustomEditors}\n     */\n    this.customEditors = new CustomEditors();\n\n    /**\n     * Chemistry editor.\n     * @type {CustomEditor}\n     */\n    const chemEditorParams = {\n      name: \"Chemistry\",\n      toolbar: \"chemistry\",\n      icon: \"chem.png\",\n      confVariable: \"chemEnabled\",\n      title: \"ChemType\",\n      tooltip: \"Insert a chemistry formula - ChemType\", // TODO: Localize tooltip.\n    };\n\n    this.customEditors.addEditor(\"chemistry\", chemEditorParams);\n\n    /**\n     * Environment properties. This object contains data about the integration platform.\n     * @typedef IntegrationEnvironment\n     * @property {String} IntegrationEnvironment.editor - Editor name. For example the HTML editor.\n     * @property {String} IntegrationEnvironment.mode - Integration save mode.\n     * @property {String} IntegrationEnvironment.version - Integration version.\n     *\n     */\n\n    /**\n     * The environment properties object.\n     * @type {IntegrationEnvironment}\n     */\n    this.environment = {};\n\n    /**\n     * @typedef EditionProperties\n     * @property {Boolean} editionProperties.isNewElement - True if the formula is a new one.\n     * False otherwise.\n     * @property {HTMLImageElement} editionProperties.temporalImage- The image element.\n     * Null if the formula is new.\n     * @property {Range} editionProperties.latexRange - Tha range that contains the LaTeX formula.\n     * @property {Range} editionProperties.range - The range that contains the image element.\n     * @property {String} editionProperties.editMode - The edition mode. 'images' by default.\n     */\n\n    /**\n     * The properties of the current edition process.\n     * @type {EditionProperties}\n     */\n    this.editionProperties = {};\n\n    this.editionProperties.isNewElement = true;\n    this.editionProperties.temporalImage = null;\n    this.editionProperties.latexRange = null;\n    this.editionProperties.range = null;\n    this.editionProperties.editionStartTime = null;\n\n    /**\n     * The {@link IntegrationModel} instance.\n     * @type {IntegrationModel}\n     */\n    this.integrationModel = null;\n\n    /**\n     * The {@link ContentManager} instance.\n     * @type {ContentManager}\n     */\n    this.contentManager = null;\n\n    /**\n     * The current browser.\n     * @type {String}\n     */\n    this.browser = (() => {\n      const ua = navigator.userAgent;\n      let browser = \"none\";\n      if (ua.search(\"Edge/\") >= 0) {\n        browser = \"EDGE\";\n      } else if (ua.search(\"Chrome/\") >= 0) {\n        browser = \"CHROME\";\n      } else if (ua.search(\"Trident/\") >= 0) {\n        browser = \"IE\";\n      } else if (ua.search(\"Firefox/\") >= 0) {\n        browser = \"FIREFOX\";\n      } else if (ua.search(\"Safari/\") >= 0) {\n        browser = \"SAFARI\";\n      }\n      return browser;\n    })();\n\n    /**\n     * Plugin listeners.\n     * @type {Array.<Object>}\n     */\n    this.listeners = new Listeners();\n\n    /**\n     * Service provider properties.\n     * @type {ServiceProviderProperties}\n     */\n    this.serviceProviderProperties = {};\n    if (\"serviceProviderProperties\" in coreProperties) {\n      this.serviceProviderProperties = coreProperties.serviceProviderProperties;\n    } else {\n      throw new Error(\"serviceProviderProperties property missing.\");\n    }\n  }\n\n  /**\n   * Static property.\n   * Core listeners.\n   * @private\n   * @type {Listeners}\n   */\n  static get globalListeners() {\n    return Core._globalListeners;\n  }\n\n  /**\n   * Static property setter.\n   * Set core listeners.\n   * @param {Listeners} value - The property value.\n   * @ignore\n   */\n  static set globalListeners(value) {\n    Core._globalListeners = value;\n  }\n\n  /**\n   * Core state. Says if it was loaded previously.\n   * True when Core.init was called. Otherwise, false.\n   * @private\n   * @type {Boolean}\n   */\n  static get initialized() {\n    return Core._initialized;\n  }\n\n  /**\n   * Core state. Says if it was loaded previously.\n   * @param {Boolean} value - True to say that Core.init was called. Otherwise, false.\n   * @ignore\n   */\n  static set initialized(value) {\n    Core._initialized = value;\n  }\n\n  /**\n   * Sets the {@link Core.integrationModel} property.\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} property.\n   */\n  setIntegrationModel(integrationModel) {\n    this.integrationModel = integrationModel;\n  }\n\n  /**\n   * Sets the {@link Core.environment} property.\n   * @param {IntegrationEnvironment} integrationEnvironment -\n   * The {@link IntegrationEnvironment} object.\n   */\n  setEnvironment(integrationEnvironment) {\n    if (\"editor\" in integrationEnvironment) {\n      this.environment.editor = integrationEnvironment.editor;\n    }\n    if (\"mode\" in integrationEnvironment) {\n      this.environment.mode = integrationEnvironment.mode;\n    }\n    if (\"version\" in integrationEnvironment) {\n      this.environment.version = integrationEnvironment.version;\n    }\n  }\n\n  /**\n   * Sets the custom headers added on editor requests if contentManager isn't undefined.\n   * @returns {Object} headers - key value headers.\n   */\n  setHeaders(headers) {\n    const headerObject = this?.contentManager?.setCustomHeaders(headers) || headers;\n    Configuration.set(\"customHeaders\", headerObject);\n  }\n\n  /**\n   * Returns the current {@link ModalDialog} instance.\n   * @returns {ModalDialog} The current {@link ModalDialog} instance.\n   */\n  getModalDialog() {\n    return this.modalDialog;\n  }\n\n  /**\n   * Inits the {@link Core} class, doing the following:\n   * - Calls asynchronously configuration service, retrieving the backend configuration in a JSON.\n   * - Updates {@link Configuration} class with the previous configuration properties.\n   * - Updates the {@link ServiceProvider} class using the configuration service path as reference.\n   * - Loads language strings.\n   * - Fires onLoad event.\n   * @param {Object} serviceParameters - Service parameters.\n   */\n  init() {\n    if (!Core.initialized) {\n      const serviceProviderListener = Listeners.newListener(\"onInit\", () => {\n        const jsConfiguration = ServiceProvider.getService(\"configurationjs\", \"\", \"get\");\n        const jsonConfiguration = JSON.parse(jsConfiguration);\n        Configuration.addConfiguration(jsonConfiguration);\n        // Adding JavaScript (not backend) configuration variables.\n        Configuration.addConfiguration(jsProperties);\n        // Fire 'onLoad' event:\n        // All integration must listen this event in order to know if the plugin\n        // has been properly loaded.\n        StringManager.language = this.language;\n        this.listeners.fire(\"onLoad\", {});\n      });\n\n      ServiceProvider.addListener(serviceProviderListener);\n      ServiceProvider.init(this.serviceProviderProperties);\n\n      Core.initialized = true;\n    } else {\n      // Case when there are more than two editor instances.\n      // After the first editor all the other editors don't need to load any file or service.\n      this.listeners.fire(\"onLoad\", {});\n    }\n  }\n\n  /**\n   * Adds a {@link Listener} to the current instance of the {@link Core} class.\n   * @param {Listener} listener - The listener object.\n   */\n  addListener(listener) {\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Adds the global {@link Listener} instance to {@link Core} class.\n   * @param {Listener} listener - The event listener to be added.\n   * @static\n   */\n  static addGlobalListener(listener) {\n    Core.globalListeners.add(listener);\n  }\n\n  beforeUpdateFormula(mathml, wirisProperties) {\n    /**\n     * This event is fired before updating the formula.\n     * @type {Object}\n     * @property {String} mathml - MathML to be transformed.\n     * @property {String} editMode - Edit mode.\n     * @property {Object} wirisProperties - Extra attributes for the formula.\n     * @property {String} language - Formula language.\n     */\n    const beforeUpdateEvent = new Event();\n\n    beforeUpdateEvent.mathml = mathml;\n\n    // Cloning wirisProperties object\n    // We don't want wirisProperties object modified.\n    beforeUpdateEvent.wirisProperties = {};\n\n    if (wirisProperties != null) {\n      Object.keys(wirisProperties).forEach((attr) => {\n        beforeUpdateEvent.wirisProperties[attr] = wirisProperties[attr];\n      });\n    }\n\n    // Read only.\n    beforeUpdateEvent.language = this.language;\n    beforeUpdateEvent.editMode = this.editMode;\n\n    if (this.listeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\n      return {};\n    }\n\n    if (Core.globalListeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\n      return {};\n    }\n\n    return {\n      mathml: beforeUpdateEvent.mathml,\n      wirisProperties: beforeUpdateEvent.wirisProperties,\n    };\n  }\n\n  /**\n   * Converts a MathML into it's correspondent image and inserts the image is\n   * inserted in a HTMLElement target by creating\n   * a new image or updating an existing one.\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the insertion.\n   * @param {Window} windowTarget - The window element where the editable content is.\n   * @param {String} mathml - The MathML.\n   * @param {Array.<Object>} wirisProperties - The extra attributes for the formula.\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\n   */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    /**\n     * It is the object with the information of the node or latex to insert.\n     * @typedef ReturnObject\n     * @property {Node} [node] - The DOM node to insert.\n     * @property {String} [latex] - The latex to insert.\n     */\n    const returnObject = {};\n\n    if (!mathml) {\n      this.insertElementOnSelection(null, focusElement, windowTarget);\n    } else if (this.editMode === \"latex\") {\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\n      // this.integrationModel.getNonLatexNode is an integration wrapper\n      // to have special behaviours for nonLatex.\n      // Not all the integrations have special behaviours for nonLatex.\n      if (!!this.integrationModel.fillNonLatexNode && !returnObject.latex) {\n        const afterUpdateEvent = new Event();\n        afterUpdateEvent.editMode = this.editMode;\n        afterUpdateEvent.windowTarget = windowTarget;\n        afterUpdateEvent.focusElement = focusElement;\n        afterUpdateEvent.latex = returnObject.latex;\n        this.integrationModel.fillNonLatexNode(afterUpdateEvent, windowTarget, mathml);\n      } else {\n        returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\n      }\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\n    } else {\n      returnObject.node = Parser.mathmlToImgObject(windowTarget.document, mathml, wirisProperties, this.language);\n\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\n    }\n\n    return returnObject;\n  }\n\n  afterUpdateFormula(focusElement, windowTarget, node, latex) {\n    /**\n     * This event is fired after update the formula.\n     * @type {Event}\n     * @param {String} editMode - edit mode.\n     * @param {Object} windowTarget - target window.\n     * @param {Object} focusElement - target element to be focused after update.\n     * @param {String} latex - LaTeX generated by the formula (editMode=latex).\n     * @param {Object} node - node generated after update the formula (text if LaTeX img otherwise).\n     */\n    const afterUpdateEvent = new Event();\n    afterUpdateEvent.editMode = this.editMode;\n    afterUpdateEvent.windowTarget = windowTarget;\n    afterUpdateEvent.focusElement = focusElement;\n    afterUpdateEvent.node = node;\n    afterUpdateEvent.latex = latex;\n\n    if (this.listeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\n      return {};\n    }\n\n    if (Core.globalListeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\n      return {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Sets the caret after a given Node and set the focus to the owner document.\n   * @param {Node} node - The Node element.\n   */\n  placeCaretAfterNode(node) {\n    if (node === null) return;\n\n    this.integrationModel.getSelection();\n    const nodeDocument = node.ownerDocument;\n    if (typeof nodeDocument.getSelection !== \"undefined\" && !!node.parentElement) {\n      const range = nodeDocument.createRange();\n      range.setStartAfter(node);\n      range.collapse(true);\n      const selection = nodeDocument.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(range);\n      nodeDocument.body.focus();\n    }\n  }\n\n  /**\n   * Replaces a Selection object with an HTMLElement.\n   * @param {HTMLElement} element - The HTMLElement to replace the selection.\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the replace.\n   * @param {Window} windowTarget - The window target.\n   */\n  insertElementOnSelection(element, focusElement, windowTarget) {\n    let mathmlOrigin = null;\n    if (this.editionProperties.isNewElement) {\n      if (element) {\n        if (focusElement.type === \"textarea\") {\n          Util.updateTextArea(focusElement, element.textContent);\n        } else if (document.selection && document.getSelection === 0) {\n          let range = windowTarget.document.selection.createRange();\n          windowTarget.document.execCommand(\"InsertImage\", false, element.src);\n\n          if (!(\"parentElement\" in range)) {\n            windowTarget.document.execCommand(\"delete\", false);\n            range = windowTarget.document.selection.createRange();\n            windowTarget.document.execCommand(\"InsertImage\", false, element.src);\n          }\n\n          if (\"parentElement\" in range) {\n            const temporalObject = range.parentElement();\n\n            if (temporalObject.nodeName.toUpperCase() === \"IMG\") {\n              temporalObject.parentNode.replaceChild(element, temporalObject);\n            } else {\n              // IE9 fix: parentNode() does not return the IMG node,\n              // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\n              range.pasteHTML(Util.createObjectCode(element));\n            }\n          }\n        } else {\n          let range = null;\n          // In IE is needed keep the range due to after focus the modal window\n          // it can't be retrieved the last selection.\n          if (this.editionProperties.range) {\n            ({ range } = this.editionProperties);\n            this.editionProperties.range = null;\n          } else {\n            const editorSelection = this.integrationModel.getSelection();\n            range = editorSelection.getRangeAt(0);\n          }\n\n          // Delete if something was surrounded.\n          range.deleteContents();\n\n          let node = range.startContainer;\n          const position = range.startOffset;\n\n          if (node.nodeType === 3) {\n            // TEXT_NODE.\n            node = node.splitText(position);\n            node.parentNode.insertBefore(element, node);\n          } else if (node.nodeType === 1) {\n            // ELEMENT_NODE.\n            node.insertBefore(element, node.childNodes[position]);\n          }\n\n          this.placeCaretAfterNode(element);\n        }\n      } else if (focusElement.type === \"textarea\") {\n        focusElement.focus();\n      } else {\n        const editorSelection = this.integrationModel.getSelection();\n        editorSelection.removeAllRanges();\n\n        if (this.editionProperties.range) {\n          const { range } = this.editionProperties;\n          this.editionProperties.range = null;\n          editorSelection.addRange(range);\n        }\n      }\n    } else if (this.editionProperties.latexRange) {\n      if (document.selection && document.getSelection === 0) {\n        this.editionProperties.isNewElement = true;\n        this.editionProperties.latexRange.select();\n        this.insertElementOnSelection(element, focusElement, windowTarget);\n      } else {\n        this.editionProperties.latexRange.deleteContents();\n        this.editionProperties.latexRange.insertNode(element);\n        this.placeCaretAfterNode(element);\n      }\n    } else if (focusElement.type === \"textarea\") {\n      let item;\n      // Wrapper for some integrations that can have special behaviours to show latex.\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n        item = this.integrationModel.getSelectedItem(focusElement, false);\n      } else {\n        item = Util.getSelectedItemOnTextarea(focusElement);\n      }\n      Util.updateExistingTextOnTextarea(focusElement, element.textContent, item.startPosition, item.endPosition);\n    } else {\n      mathmlOrigin = this.editionProperties.temporalImage?.dataset.mathml;\n      if (element && element.nodeName.toLowerCase() === \"img\") {\n        // Editor empty, formula has been erased on edit.\n        // There are editors (e.g: CKEditor) that put attributes in images.\n        // We don't allow that behaviour in our images.\n        Image.removeImgDataAttributes(this.editionProperties.temporalImage);\n        // Clone is needed to maintain event references to temporalImage.\n        Image.clone(element, this.editionProperties.temporalImage);\n      } else {\n        this.editionProperties.temporalImage.remove();\n      }\n      this.placeCaretAfterNode(this.editionProperties.temporalImage);\n    }\n\n    // Build the telemeter payload separated to delete null/undefined entries.\n    const mathml = element?.dataset?.mathml;\n    let payload = {\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\n      elapsed_time: Date.now() - this.editionProperties.editionStartTime,\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\n      toolbar: this.modalDialog.contentManager.toolbar,\n      size: mathml?.length,\n    };\n\n    // Remove the desired null keys.\n    Object.keys(payload).forEach((key) => {\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\n    });\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\n        ...payload,\n      });\n    } catch (error) {\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\n    }\n  }\n\n  /**\n   * Opens a modal dialog containing MathType editor..\n   * @param {HTMLElement} target - The target HTMLElement where formulas should be inserted.\n   * @param {Boolean} isIframe - True if the target HTMLElement is an iframe. False otherwise.\n   */\n  openModalDialog(target, isIframe) {\n    // Count the time since the editor is open\n    this.editionProperties.editionStartTime = Date.now();\n\n    // Textarea elements don't have normal document ranges. It only accepts latex edit.\n    this.editMode = \"images\";\n\n    // In IE is needed keep the range due to after focus the modal window\n    // it can't be retrieved the last selection.\n    try {\n      if (isIframe) {\n        // Is needed focus the target first.\n        target.contentWindow.focus();\n        const selection = target.contentWindow.getSelection();\n        this.editionProperties.range = selection.getRangeAt(0);\n      } else {\n        // Is needed focus the target first.\n        target.focus();\n        const selection = getSelection();\n        this.editionProperties.range = selection.getRangeAt(0);\n      }\n    } catch (e) {\n      this.editionProperties.range = null;\n    }\n\n    if (isIframe === undefined) {\n      isIframe = true;\n    }\n\n    this.editionProperties.latexRange = null;\n\n    if (target) {\n      let selectedItem;\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n        selectedItem = this.integrationModel.getSelectedItem(target, isIframe);\n      } else {\n        selectedItem = Util.getSelectedItem(target, isIframe);\n      }\n\n      // Check LaTeX if and only if the node is a text node (nodeType==3).\n      if (selectedItem) {\n        // Case when image was selected and button pressed.\n        if (!selectedItem.caretPosition && Util.containsClass(selectedItem.node, Configuration.get(\"imageClassName\"))) {\n          this.editionProperties.temporalImage = selectedItem.node;\n          this.editionProperties.isNewElement = false;\n        } else if (selectedItem.node.nodeType === 3) {\n          // If it's a text node means that editor is working with LaTeX.\n          if (this.integrationModel.getMathmlFromTextNode) {\n            // If integration has this function it isn't set range due to we don't\n            // know if it will be put into a textarea as a text or image.\n            const mathml = this.integrationModel.getMathmlFromTextNode(selectedItem.node, selectedItem.caretPosition);\n            if (mathml) {\n              this.editMode = \"latex\";\n              this.editionProperties.isNewElement = false;\n              this.editionProperties.temporalImage = document.createElement(\"img\");\n              this.editionProperties.temporalImage.setAttribute(\n                Configuration.get(\"imageMathmlAttribute\"),\n                MathML.safeXmlEncode(mathml),\n              );\n            }\n          } else {\n            const latexResult = Latex.getLatexFromTextNode(selectedItem.node, selectedItem.caretPosition);\n            if (latexResult) {\n              const mathml = Latex.getMathMLFromLatex(latexResult.latex);\n              this.editMode = \"latex\";\n              this.editionProperties.isNewElement = false;\n              this.editionProperties.temporalImage = document.createElement(\"img\");\n              this.editionProperties.temporalImage.setAttribute(\n                Configuration.get(\"imageMathmlAttribute\"),\n                MathML.safeXmlEncode(mathml),\n              );\n              const windowTarget = isIframe ? target.contentWindow : window;\n\n              if (target.tagName.toLowerCase() !== \"textarea\") {\n                if (document.selection) {\n                  let leftOffset = 0;\n                  let previousNode = latexResult.startNode.previousSibling;\n\n                  while (previousNode) {\n                    leftOffset += Util.getNodeLength(previousNode);\n                    previousNode = previousNode.previousSibling;\n                  }\n\n                  this.editionProperties.latexRange = windowTarget.document.selection.createRange();\n                  this.editionProperties.latexRange.moveToElementText(latexResult.startNode.parentNode);\n                  this.editionProperties.latexRange.move(\"character\", leftOffset + latexResult.startPosition);\n                  this.editionProperties.latexRange.moveEnd(\"character\", latexResult.latex.length + 4); // Plus 4 for the '$$' characters.\n                } else {\n                  this.editionProperties.latexRange = windowTarget.document.createRange();\n                  this.editionProperties.latexRange.setStart(latexResult.startNode, latexResult.startPosition);\n                  this.editionProperties.latexRange.setEnd(latexResult.endNode, latexResult.endPosition);\n                }\n              }\n            }\n          }\n        }\n      } else if (target.tagName.toLowerCase() === \"textarea\") {\n        // By default editMode is 'images', but when target is a textarea it needs to be 'latex'.\n        this.editMode = \"latex\";\n      }\n    }\n\n    // Setting an object with the editor parameters.\n    // Editor parameters can be customized in several ways:\n    // 1 - editorAttributes: Contains the default editor attributes,\n    //  usually the metrics in a comma separated string. Always exists.\n    // 2 - editorParameters: Object containing custom editor parameters.\n    // These parameters are defined in the backend. So they affects all integration instances.\n\n    // The backend send the default editor attributes in a coma separated\n    // with the following structure: key1=value1,key2=value2...\n    const defaultEditorAttributesArray = Configuration.get(\"editorAttributes\").split(\", \");\n    const defaultEditorAttributes = {};\n    for (let i = 0, len = defaultEditorAttributesArray.length; i < len; i += 1) {\n      const tempAttribute = defaultEditorAttributesArray[i].split(\"=\");\n      const key = tempAttribute[0];\n      const value = tempAttribute[1];\n      defaultEditorAttributes[key] = value;\n    }\n    // Custom editor parameters.\n    const editorAttributes = {\n      language: this.language, // Default language value\n    };\n    // Editor parameters in backend, usually configuration.ini.\n    const serverEditorParameters = Configuration.get(\"editorParameters\");\n    // Editor parameters through JavaScript configuration.\n    const clientEditorParameters = this.integrationModel.editorParameters;\n    Object.assign(editorAttributes, defaultEditorAttributes, serverEditorParameters);\n    Object.assign(editorAttributes, defaultEditorAttributes, clientEditorParameters);\n\n    // Now, update backwards: if user has set a custom language, pass that back to core properties\n    this.language = editorAttributes.language;\n    StringManager.language = this.language;\n\n    editorAttributes.rtl = this.integrationModel.rtl;\n\n    const customHeaders = Configuration.get(\"customHeaders\");\n    // This is not being used in the code, we are keeping it just in case it's needed.\n    // We check if it is a string since we have a setter that will make the customHeaders an object. And we do the conversion for the case when we get the headers from the backend.\n    editorAttributes.customHeaders =\n      typeof customHeaders === \"string\" ? Util.convertStringToObject(customHeaders) : customHeaders;\n\n    const contentManagerAttributes = {};\n    contentManagerAttributes.editorAttributes = editorAttributes;\n    contentManagerAttributes.language = this.language;\n    contentManagerAttributes.customEditors = this.customEditors;\n    contentManagerAttributes.environment = this.environment;\n\n    if (this.modalDialog == null) {\n      this.modalDialog = new ModalDialog(editorAttributes);\n      this.contentManager = new ContentManager(contentManagerAttributes);\n      // When an instance of ContentManager is created we need to wait until\n      // the ContentManager is ready by listening 'onLoad' event.\n      const listener = Listeners.newListener(\"onLoad\", () => {\n        this.contentManager.dbclick = this.editionProperties.dbclick;\n        this.contentManager.isNewElement = this.editionProperties.isNewElement;\n        if (this.editionProperties.temporalImage != null) {\n          const mathML = MathML.safeXmlDecode(\n            this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\n          );\n          this.contentManager.mathML = mathML;\n        }\n      });\n      this.contentManager.addListener(listener);\n      this.contentManager.init();\n      this.modalDialog.setContentManager(this.contentManager);\n      this.contentManager.setModalDialogInstance(this.modalDialog);\n    } else {\n      this.contentManager.dbclick = this.editionProperties.dbclick;\n      this.contentManager.isNewElement = this.editionProperties.isNewElement;\n      if (this.editionProperties.temporalImage != null) {\n        const mathML = MathML.safeXmlDecode(\n          this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\n        );\n        this.contentManager.mathML = mathML;\n      }\n    }\n    this.contentManager.setIntegrationModel(this.integrationModel);\n    this.modalDialog.open();\n  }\n\n  /**\n   * Returns the {@link CustomEditors} instance.\n   * @return {CustomEditors} The current {@link CustomEditors} instance.\n   */\n  getCustomEditors() {\n    return this.customEditors;\n  }\n}\n\n/**\n * Core static listeners.\n * @type {Listeners}\n * @private\n */\nCore._globalListeners = new Listeners();\n\n/**\n * Resources state. Says if they were loaded or not.\n * @type {Boolean}\n * @private\n */\nCore._initialized = false;\n","// eslint-disable-next-line no-unused-vars, import/named\nimport Core from \"./core.src\";\nimport Image from \"./image\";\nimport Listeners from \"./listeners\";\nimport Util from \"./util\";\nimport Configuration from \"./configuration\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Telemeter from \"./telemeter\";\nimport warnIcon from \"../styles/icons/general/warn_icon.svg\"; //eslint-disable-line\n\n/**\n * @typedef {Object} IntegrationModelProperties\n * @property {string} configurationService - Configuration service path.\n * This parameter is needed to determine all services paths.\n * @property {HTMLElement} integrationModelProperties.target - HTML target.\n * @property {string} integrationModelProperties.scriptName - Integration script name.\n * Usually the name of the integration script.\n * @property {Object} integrationModelProperties.environment - integration environment properties.\n * @property {Object} [integrationModelProperties.callbackMethodArguments] - object containing\n * callback method arguments.\n * @property {string} [integrationModelProperties.version] - integration version number.\n * @property {Object} [integrationModelProperties.editorObject] - object containing\n * the integration editor instance.\n * @property {boolean} [integrationModelProperties.rtl] - true if the editor is in RTL mode.\n * false otherwise.\n * @property {ServiceProviderProperties} [integrationModelProperties.serviceProviderProperties]\n * - The service parameters.\n * @property {Object} [integrationModelProperties.integrationParameters]\n * - Overwritten integration parameters.\n */\n\nexport default class IntegrationModel {\n  /**\n   * @classdesc\n   * This class represents an integration model, allowing the integration script to\n   * communicate with Core class. Each integration must extend this class.\n   * @constructs\n   * @param {IntegrationModelProperties} integrationModelProperties\n   */\n  constructor(integrationModelProperties) {\n    /**\n     * Language. Needed for accessibility and locales. English by default.\n     */\n    this.language = \"en\";\n\n    /**\n     * Service parameters\n     * @type {ServiceProviderProperties}\n     */\n    this.serviceProviderProperties = integrationModelProperties.serviceProviderProperties ?? {};\n\n    /**\n     * Configuration service path. The integration service is needed by Core class to\n     * load all the backend configuration into the frontend and also to create the paths\n     * of all services (all services lives in the same route). Mandatory property.\n     */\n    this.configurationService = \"\";\n    if (\"configurationService\" in integrationModelProperties) {\n      this.serviceProviderProperties.URI = integrationModelProperties.configurationService;\n      console.warn(\"Deprecated property configurationService. Use serviceParameters on instead.\", [\n        integrationModelProperties.configurationService,\n      ]);\n    }\n\n    /**\n     * Plugin version. Needed to stats and caching.\n     * @type {string}\n     */\n    this.version = \"version\" in integrationModelProperties ? integrationModelProperties.version : \"\";\n\n    /**\n     * DOM target in which the plugin works. Needed to associate events, insert formulas, etc.\n     * Mandatory property.\n     */\n    this.target = null;\n    if (\"target\" in integrationModelProperties) {\n      this.target = integrationModelProperties.target;\n    } else {\n      throw new Error(\"IntegrationModel constructor error: target property missed.\");\n    }\n\n    /**\n     * Integration script name. Needed to know the plugin path.\n     */\n    if (\"scriptName\" in integrationModelProperties) {\n      this.scriptName = integrationModelProperties.scriptName;\n    }\n\n    /**\n     * Object containing the arguments needed by the callback function.\n     */\n    this.callbackMethodArguments = integrationModelProperties.callbackMethodArguments ?? {};\n\n    /**\n     * Contains information about the integration environment:\n     * like the name of the editor, the version, etc.\n     */\n    this.environment = integrationModelProperties.environment ?? {};\n\n    /**\n     * Indicates if the DOM target is - or not - and iframe.\n     */\n    this.isIframe = false;\n    if (this.target != null) {\n      this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n    }\n\n    /**\n     * Instance of the integration editor object. Usually the entry point to access the API\n     * of a HTML editor.\n     */\n    this.editorObject = integrationModelProperties.editorObject ?? null;\n\n    /**\n     * Specifies if the direction of the text is RTL. false by default.\n     */\n    this.rtl = integrationModelProperties.rtl ?? false;\n\n    /**\n     * Specifies if the integration model exposes the locale strings. false by default.\n     */\n    this.managesLanguage = integrationModelProperties.managesLanguage ?? false;\n\n    /**\n     * Specify if editor will open in hand mode only\n     */\n    this.forcedHandMode = integrationModelProperties?.integrationParameters?.forcedHandMode ?? false;\n\n    /**\n     * Indicates if an image is selected. Needed to resize the image to the original size in case\n     * the image is resized.\n     * @type {boolean}\n     */\n    this.temporalImageResizing = false;\n\n    /**\n     * The Core class instance associated to the integration model.\n     * @type {Core}\n     */\n    this.core = null;\n\n    /**\n     * Integration model listeners.\n     * @type {Listeners}\n     */\n    this.listeners = new Listeners();\n\n    // Parameters overwrite.\n    if (\"integrationParameters\" in integrationModelProperties) {\n      IntegrationModel.integrationParameters.forEach((parameter) => {\n        if (parameter in integrationModelProperties.integrationParameters) {\n          // Don't add empty parameters.\n          const value = integrationModelProperties.integrationParameters[parameter];\n          if (Object.keys(value).length !== 0) {\n            this[parameter] = value;\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Init function. Usually called from the integration side once the core.js file is loaded.\n   */\n  init() {\n    // Check if language is an object and select the property necessary\n    this.language = this.getLanguage();\n\n    // We need to wait until Core class is loaded ('onLoad' event) before\n    // call the callback method.\n    const listener = Listeners.newListener(\"onLoad\", () => {\n      this.callbackFunction(this.callbackMethodArguments);\n    });\n\n    // Backwards compatibility.\n    if (this.serviceProviderProperties.URI.indexOf(\"configuration\") !== -1) {\n      const uri = this.serviceProviderProperties.URI;\n      const server = ServiceProvider.getServerLanguageFromService(uri);\n      this.serviceProviderProperties.server = server;\n      const configurationIndex = this.serviceProviderProperties.URI.indexOf(\"configuration\");\n      const subsTring = this.serviceProviderProperties.URI.substring(0, configurationIndex);\n      this.serviceProviderProperties.URI = subsTring;\n    }\n\n    let serviceParametersURI = this.serviceProviderProperties.URI;\n    serviceParametersURI =\n      serviceParametersURI.indexOf(\"/\") === 0 || serviceParametersURI.indexOf(\"http\") === 0\n        ? serviceParametersURI\n        : Util.concatenateUrl(this.getPath(), serviceParametersURI);\n\n    this.serviceProviderProperties.URI = serviceParametersURI;\n\n    const coreProperties = {};\n    coreProperties.serviceProviderProperties = this.serviceProviderProperties;\n\n    this.setCore(new Core(coreProperties));\n    this.core.addListener(listener);\n    this.core.language = this.language;\n\n    // Initializing Core class.\n    this.core.init();\n    // TODO: Move to Core constructor.\n    this.core.setEnvironment(this.environment);\n\n    // No internet connection modal.\n    let attributes = {};\n    attributes.class = attributes.id = \"wrs_modal_offline\";\n    this.offlineModal = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_content_offline\";\n    this.offlineModalContent = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_close\";\n    this.offlineModalClose = Util.createElement(\"span\", attributes);\n    this.offlineModalClose.innerHTML = \"&times;\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_warn\";\n    this.offlineModalWarn = Util.createElement(\"span\", attributes);\n    let generalStyle = `background-image: url(data:image/svg+xml;base64,${window.btoa(warnIcon)})`;\n    this.offlineModalWarn.setAttribute(\"style\", generalStyle);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text_container\";\n    this.offlineModalMessage = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text_warn\";\n    this.offlineModalMessage1 = Util.createElement(\"p\", attributes);\n    this.offlineModalMessage1.innerHTML = \"You are not online!\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text\";\n    this.offlineModalMessage2 = Util.createElement(\"p\", attributes);\n    this.offlineModalMessage2.innerHTML = `Thank you for using MathType. We have detected you are disconnected from the network. We remind you that you'll need to be connected to use MathType. <br /><br />Please refresh the page if this message continues appearing.`;\n\n    //Append offline modal elements\n    this.offlineModalContent.appendChild(this.offlineModalClose);\n    this.offlineModalMessage.appendChild(this.offlineModalMessage1);\n    this.offlineModalMessage.appendChild(this.offlineModalMessage2);\n    this.offlineModalContent.appendChild(this.offlineModalMessage);\n    this.offlineModalContent.appendChild(this.offlineModalWarn);\n    this.offlineModal.appendChild(this.offlineModalContent);\n    document.body.appendChild(this.offlineModal);\n\n    let modal = document.getElementById(\"wrs_modal_offline\");\n    this.offlineModalClose.addEventListener(\"click\", function () {\n      modal.style.display = \"none\";\n    });\n\n    // Store editor name for telemetry purposes.\n    let editorName = this.environment.editor;\n    editorName = editorName.slice(0, -1); // Remove version number from editors\n    if (editorName.includes(\"TinyMCE\")) editorName = \"TinyMCE\"; // Remove version from Tinymce editor.\n    if (editorName.includes(\"Generic\")) editorName = \"Generic\"; // Remove version from Generic editor.\n    let solutionTelemeter = editorName;\n\n    // If moodle, add information to hosts and solution.\n    let isMoodle = !!(typeof M === \"object\" && M !== null),\n      lms;\n\n    if (isMoodle) {\n      solutionTelemeter = \"Moodle\";\n      lms = {\n        nam: \"moodle\",\n        fam: \"lms\",\n        ver: this.environment.moodleVersion,\n        category: this.environment.moodleCourseCategory,\n        course: this.environment.moodleCourseName,\n      };\n      if (!editorName.includes(\"TinyMCE\")) {\n        editorName = \"Atto\";\n      }\n    }\n\n    // Get the OS and its version.\n    let OSData = this.getOS();\n\n    // Get the broswer and its version.\n    let broswerData = this.getBrowser();\n\n    // Create list of hosts to send to telemetry.\n    let hosts = [\n      {\n        nam: broswerData.detectedBrowser,\n        fam: \"browser\",\n        ver: broswerData.versionBrowser,\n      },\n      {\n        nam: editorName.toLowerCase(),\n        fam: \"html-editor\",\n        ver: this.environment.editorVersion,\n      },\n      {\n        nam: OSData.detectedOS,\n        fam: \"os\",\n        ver: OSData.versionOS,\n      },\n      {\n        nam: window.location.hostname,\n        fam: \"domain\",\n      },\n      lms,\n    ];\n\n    // Filter hosts to remove empty objects and empty keys.\n    hosts = hosts.filter(function (element) {\n      if (element) Object.keys(element).forEach((key) => (element[key] === \"unknown\" ? delete element[key] : {}));\n      return element !== undefined;\n    });\n\n    // Initialize telemeter\n    Telemeter.init({\n      solution: {\n        name: \"MathType for \" + solutionTelemeter,\n        version: this.version,\n      },\n      hosts: hosts,\n      config: {\n        test: false, // True to use the staging Telemetry endpoint instead of the production one.\n        debug: false, // True to show more information about Telemeter's execution and use dev-tools.\n        dry_run: false, // True to skip sending data to the Telemetry endpoint (for example for unit tests).\n        api_key: \"eda2ce9b-0e8a-46f2-acdd-c228a615314e\", // to auth against Telemetry. Data team is the responsible of providing it.\n      },\n      url: undefined,\n    });\n  }\n\n  /**\n   * Returns the Browser name and its version.\n   * @return {array} - detectedBrowser = Operating System name.\n   *                   versionBrowser = Operating System version.\n   */\n  getBrowser() {\n    // default value for OS just in case nothing is detected\n    let detectedBrowser = \"unknown\",\n      versionBrowser = \"unknown\";\n\n    let userAgent = window.navigator.userAgent;\n\n    if (/Brave/.test(userAgent)) {\n      detectedBrowser = \"brave\";\n      if (userAgent.indexOf(\"Brave/\")) {\n        let start = userAgent.indexOf(\"Brave\") + 6;\n        let end = userAgent.substring(start).indexOf(\" \");\n        end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n        versionBrowser = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (userAgent.indexOf(\"Edg/\") !== -1) {\n      detectedBrowser = \"edge_chromium\";\n      let start = userAgent.indexOf(\"Edg/\") + 4;\n      versionBrowser = userAgent\n        .substring(start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Edg/.test(userAgent)) {\n      detectedBrowser = \"edge\";\n      let start = userAgent.indexOf(\"Edg\") + 3;\n      start = start + userAgent.substring(start).indexOf(\"/\");\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Firefox/.test(userAgent) || /FxiOS/.test(userAgent)) {\n      detectedBrowser = \"firefox\";\n      let start = userAgent.indexOf(\"Firefox\");\n      start = start === -1 ? userAgent.indexOf(\"FxiOS\") : start;\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    } else if (/OPR/.test(userAgent)) {\n      detectedBrowser = \"opera\";\n      let start = userAgent.indexOf(\"OPR/\") + 4;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Chrome/.test(userAgent) || /CriOS/.test(userAgent)) {\n      detectedBrowser = \"chrome\";\n      let start = userAgent.indexOf(\"Chrome\");\n      start = start === -1 ? userAgent.indexOf(\"CriOS\") : start;\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    } else if (/Safari/.test(userAgent)) {\n      detectedBrowser = \"safari\";\n      let start = userAgent.indexOf(\"Version/\");\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    }\n\n    return { detectedBrowser, versionBrowser };\n  }\n\n  /**\n   * Returns the operating system and its version.\n   * @return {array} - detectedOS = Operating System name.\n   *                   versionOS = Operating System version.\n   */\n  getOS() {\n    // default value for OS just in case nothing is detected\n    let detectedOS = \"unknown\",\n      versionOS = \"unknown\";\n\n    // Retrieve properties to easily detect the OS\n    let userAgent = window.navigator.userAgent,\n      platform = window.navigator.platform,\n      macosPlatforms = [\"Macintosh\", \"MacIntel\", \"MacPPC\", \"Mac68K\"],\n      windowsPlatforms = [\"Win32\", \"Win64\", \"Windows\", \"WinCE\"],\n      iosPlatforms = [\"iPhone\", \"iPad\", \"iPod\"];\n\n    // Find OS and their respective versions\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"macos\";\n      if (userAgent.indexOf(\"OS X\") !== -1) {\n        let start = userAgent.indexOf(\"OS X\") + 5;\n        let end = userAgent.substring(start).indexOf(\" \");\n        versionOS = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"ios\";\n      if (userAgent.indexOf(\"OS \") !== -1) {\n        let start = userAgent.indexOf(\"OS \") + 3;\n        let end = userAgent.substring(start).indexOf(\")\");\n        versionOS = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"windows\";\n      let start = userAgent.indexOf(\"Windows\");\n      let end = userAgent.substring(start).indexOf(\";\");\n      if (end === -1) {\n        end = userAgent.substring(start).indexOf(\")\");\n      }\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Android/.test(userAgent)) {\n      detectedOS = \"android\";\n      let start = userAgent.indexOf(\"Android\");\n      let end = userAgent.substring(start).indexOf(\";\");\n      if (end === -1) {\n        end = userAgent.substring(start).indexOf(\")\");\n      }\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/CrOS/.test(userAgent)) {\n      detectedOS = \"chromeos\";\n      let start = userAgent.indexOf(\"CrOS \") + 5;\n      start = start + userAgent.substring(start).indexOf(\" \");\n      let end = userAgent.substring(start).indexOf(\")\");\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (detectedOS === \"unknown\" && /Linux/.test(platform)) {\n      detectedOS = \"linux\";\n    }\n\n    return { detectedOS, versionOS };\n  }\n\n  /**\n   * Returns the absolute path of the integration script.\n   * @return {string} - Absolute path for the integration script.\n   */\n  getPath() {\n    if (typeof this.scriptName === \"undefined\") {\n      throw new Error(\"scriptName property needed for getPath.\");\n    }\n    const col = document.getElementsByTagName(\"script\");\n    let path = \"\";\n    for (let i = 0; i < col.length; i += 1) {\n      const j = col[i].src.lastIndexOf(this.scriptName);\n      if (j >= 0) {\n        path = col[i].src.substr(0, j - 1);\n      }\n    }\n    return path;\n  }\n\n  /**\n   * Returns integration model plugin version\n   * @param {string} - Plugin version\n   */\n  getVersion() {\n    return this.version;\n  }\n\n  /**\n   * Sets the language property.\n   * @param {string} language - language code.\n   */\n  setLanguage(language) {\n    this.language = language;\n  }\n\n  /**\n   * Sets a Core instance.\n   * @param {Core} core - instance of Core class.\n   */\n  setCore(core) {\n    this.core = core;\n    core.setIntegrationModel(this);\n  }\n\n  /**\n   * Returns the Core instance.\n   * @returns {Core} instance of Core class.\n   */\n  getCore() {\n    return this.core;\n  }\n\n  /**\n   * Sets the object target and updates the iframe property.\n   * @param {HTMLElement} target - target object.\n   */\n  setTarget(target) {\n    this.target = target;\n    this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n  }\n\n  /**\n   * Sets the editor object.\n   * @param {Object} editorObject - The editor object.\n   */\n  setEditorObject(editorObject) {\n    this.editorObject = editorObject;\n  }\n\n  /**\n   * Opens formula editor to editing a new formula. Can be overwritten in order to make some\n   * actions from integration part before the formula is edited.\n   */\n  openNewFormulaEditor() {\n    if (window.navigator.onLine) {\n      this.core.editionProperties.dbclick = false;\n      this.core.editionProperties.isNewElement = true;\n      this.core.openModalDialog(this.target, this.isIframe);\n    } else {\n      let modal = document.getElementById(\"wrs_modal_offline\");\n      modal.style.display = \"block\";\n    }\n  }\n\n  /**\n   * Opens formula editor to editing an existing formula. Can be overwritten in order to make some\n   * actions from integration part before the formula is edited.\n   */\n  openExistingFormulaEditor() {\n    if (window.navigator.onLine) {\n      this.core.editionProperties.isNewElement = false;\n      this.core.openModalDialog(this.target, this.isIframe);\n    } else {\n      let modal = document.getElementById(\"wrs_modal_offline\");\n      modal.style.display = \"block\";\n    }\n  }\n\n  /**\n   * Wrapper to Core.updateFormula method.\n   * Transform a MathML into a image formula.\n   * Then the image formula is inserted in the specified target, creating a new image (new formula)\n   * or updating an existing one.\n   * @param {string} mathml - MathML to generate the formula.\n   * @param {string} editMode - Edit Mode (LaTeX or images).\n   */\n  updateFormula(mathml) {\n    if (this.editorParameters) {\n      mathml = com.wiris.editor.util.EditorUtils.addAnnotation(\n        mathml,\n        \"application/vnd.wiris.mtweb-params+json\",\n        JSON.stringify(this.editorParameters),\n      );\n    }\n    let focusElement;\n    let windowTarget;\n    const wirisProperties = null;\n\n    if (this.isIframe) {\n      focusElement = this.target.contentWindow;\n      windowTarget = this.target.contentWindow;\n    } else {\n      focusElement = this.target;\n      windowTarget = window;\n    }\n\n    let obj = this.core.beforeUpdateFormula(mathml, wirisProperties);\n\n    if (!obj) {\n      return \"\";\n    }\n\n    obj = this.insertFormula(focusElement, windowTarget, obj.mathml, obj.wirisProperties);\n\n    if (!obj) {\n      return \"\";\n    }\n\n    return this.core.afterUpdateFormula(obj.focusElement, obj.windowTarget, obj.node, obj.latex);\n  }\n\n  /**\n   * Wrapper to Core.insertFormula method.\n   * Inserts the formula in the specified target, creating\n   * a new image (new formula) or updating an existing one.\n   * @param {string} mathml - MathML to generate the formula.\n   * @param {string} editMode - Edit Mode (LaTeX or images).\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\n   */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    const obj = this.core.insertFormula(focusElement, windowTarget, mathml, wirisProperties);\n\n    // Delete temporal image when inserted\n    this.core.editionProperties.temporalImage = null;\n\n    return obj;\n  }\n\n  /**\n   * Returns the target selection.\n   * @returns {Selection} target selection.\n   */\n  getSelection() {\n    if (this.isIframe) {\n      this.target.contentWindow.focus();\n      return this.target.contentWindow.getSelection();\n    }\n    this.target.focus();\n    return window.getSelection();\n  }\n\n  /**\n   * Add events to formulas in the DOM target. The events added are the following:\n   * - doubleClickHandler: handles Double-click event on formulas by opening an editor\n   * to edit them.\n   * - mouseDownHandler: handles mouse down event on formulas by saving the size of the formula\n   * in case the the formula is resized.\n   * - mouseUpHandler: handles mouse up event on formulas by restoring the saved formula size\n   * in case the formula is resized.\n   */\n  addEvents() {\n    const eventTarget = this.isIframe ? this.target.contentWindow.document : this.target;\n    Util.addElementEvents(\n      eventTarget,\n      (element, event) => {\n        this.doubleClickHandler(element, event);\n        // Avoid creating the double click listener more than once for each element.\n        event.stopImmediatePropagation();\n      },\n      (element, event) => {\n        this.mousedownHandler(element, event);\n      },\n      (element, event) => {\n        this.mouseupHandler(element, event);\n      },\n    );\n  }\n\n  /**\n   * Remove events to formulas in the DOM target.\n   */\n  removeEvents() {\n    const eventTarget =\n      this.isIframe && this.target.contentWindow?.document ? this.target.contentWindow.document : this.target;\n\n    if (!eventTarget) {\n      return;\n    }\n\n    Util.removeElementEvents(eventTarget);\n  }\n\n  /**\n   * Remove events, modals and set this.editorObject to null in order to prevent memory leaks.\n   */\n  destroy() {\n    this.removeEvents();\n    // Destroy modal dialog if exists.\n    if (this.core.modalDialog) {\n      this.core.modalDialog.destroy();\n    }\n\n    // Remove offline modal dialog if exists.\n    if (this.offlineModal) {\n      this.offlineModal.remove();\n    }\n\n    this.editorObject = null;\n  }\n\n  /**\n   * Handles a Double-click on the target element. Opens an editor\n   * to re-edit the double-clicked formula.\n   * @param {HTMLElement} element - DOM object target.\n   */\n  doubleClickHandler(element) {\n    this.core.editionProperties.dbclick = true;\n    if (element.nodeName.toLowerCase() === \"img\") {\n      this.core.getCustomEditors().disable();\n      const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\n      if (element.hasAttribute(customEditorAttributeName)) {\n        const customEditor = element.getAttribute(customEditorAttributeName);\n        this.core.getCustomEditors().enable(customEditor);\n      }\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n        this.core.editionProperties.temporalImage = element;\n        this.core.editionProperties.isNewElement = true;\n        this.openExistingFormulaEditor();\n      }\n    }\n  }\n\n  /**\n   * Handles a mouse up event on the target element. Restores the image size to avoid\n   * resizing formulas.\n   */\n  mouseupHandler() {\n    if (this.temporalImageResizing) {\n      setTimeout(() => {\n        Image.fixAfterResize(this.temporalImageResizing);\n      }, 10);\n    }\n  }\n\n  /**\n   * Handles a mouse down event on the target element. Saves the formula size to avoid\n   * resizing formulas.\n   * @param {HTMLElement} element - target element.\n   */\n  mousedownHandler(element) {\n    if (element.nodeName.toLowerCase() === \"img\") {\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n        this.temporalImageResizing = element;\n      }\n    }\n  }\n\n  /**\n   * Returns the integration language. By default the browser agent. This method\n   * should be overwritten to obtain the integration language, for example using the\n   * plugin API of an HTML editor.\n   * @returns {string} integration language.\n   */\n  getLanguage() {\n    return this.getBrowserLanguage();\n  }\n\n  /**\n   * Returns the browser language.\n   * @returns {string} the browser language.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getBrowserLanguage() {\n    let language = \"en\";\n    if (navigator.userLanguage) {\n      language = navigator.userLanguage.substring(0, 2);\n    } else if (navigator.language) {\n      language = navigator.language.substring(0, 2);\n    } else {\n      language = \"en\";\n    }\n    return language;\n  }\n\n  /**\n   * This function is called once the {@link Core} is loaded. IntegrationModel class\n   * will fire this method when {@link Core} 'onLoad' event is fired.\n   * This method should content all the logic to init\n   * the integration.\n   */\n  callbackFunction() {\n    // It's needed to wait until the integration target is ready. The event is fired\n    // from the integration side.\n    const listener = Listeners.newListener(\"onTargetReady\", () => {\n      this.addEvents(this.target);\n    });\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Function called when the content submits an action.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  notifyWindowClosed() {\n    // Nothing.\n  }\n\n  /**\n   * Wrapper.\n   * Extracts mathml of a determined text node. This function is used as a wrapper inside core.js\n   * in order to get mathml from a text node that can contain normal LaTeX or other chosen text.\n   * @param {string} textNode - text node to extract the MathML.\n   * @param {int} caretPosition - caret position inside the text node.\n   * @returns {string} MathML inside the text node.\n   */\n\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  getMathmlFromTextNode(textNode, caretPosition) {}\n\n  /**\n   * Wrapper\n   * It fills wrs event object of nonLatex with the desired data.\n   * @param {Object} event - event object.\n   * @param {Object} window dom window object.\n   * @param {string} mathml valid mathml.\n   */\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  fillNonLatexNode(event, window, mathml) {}\n\n  /**\n    Wrapper.\n   * Returns selected item from the target.\n   * @param {HTMLElement} target - target element\n   * @param {boolean} iframe\n   */\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  getSelectedItem(target, isIframe) {}\n\n  // Set temporal image to null and make focus come back.\n  static setActionsOnCancelButtons() {\n    // Make focus come back on the previous place it was when click cancel button\n    const currentInstance = WirisPlugin.currentInstance;\n    const editorSelection = currentInstance.getSelection();\n    editorSelection.removeAllRanges();\n\n    if (currentInstance.core.editionProperties.range) {\n      const { range } = currentInstance.core.editionProperties;\n      currentInstance.core.editionProperties.range = null;\n      editorSelection.addRange(range);\n      if (range.startOffset !== range.endOffset) {\n        currentInstance.core.placeCaretAfterNode(currentInstance.core.editionProperties.temporalImage);\n      }\n    }\n\n    // eslint-disable-next-line no-undef\n    if (WirisPlugin.currentInstance) {\n      WirisPlugin.currentInstance.core.editionProperties.temporalImage = null; // eslint-disable-line\n    }\n  }\n}\n\n// To know if the integration that extends this class implements\n// wrapper methods, they are set as undefined.\nIntegrationModel.prototype.getMathmlFromTextNode = undefined;\nIntegrationModel.prototype.fillNonLatexNode = undefined;\nIntegrationModel.prototype.getSelectedItem = undefined;\n\n/**\n * An object containing a list with the overwritable class constructor properties.\n * @type {Object}\n */\nIntegrationModel.integrationParameters = [\"serviceProviderProperties\", \"editorParameters\"];\n","import IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\nimport Telemeter from \"@wiris/mathtype-html-integration-devkit/src/telemeter.js\";\n\n/**\n * This class represents the MathType integration for CKEditor5.\n * @extends {IntegrationModel}\n */\nexport default class CKEditor5Integration extends IntegrationModel {\n  constructor(ckeditorIntegrationModelProperties) {\n    const editor = ckeditorIntegrationModelProperties.editorObject;\n\n    if (typeof editor.config !== \"undefined\" && typeof editor.config.get(\"mathTypeParameters\") !== \"undefined\") {\n      ckeditorIntegrationModelProperties.integrationParameters = editor.config.get(\"mathTypeParameters\");\n    }\n    /**\n     * CKEditor5 Integration.\n     *\n     * @param {integrationModelProperties} integrationModelAttributes\n     */\n    super(ckeditorIntegrationModelProperties);\n\n    /**\n     * Folder name used for the integration inside CKEditor plugins folder.\n     */\n    this.integrationFolderName = \"ckeditor_wiris\";\n  }\n\n  /**\n   * @inheritdoc\n   * @returns {string} - The CKEditor instance language.\n   * @override\n   */\n  getLanguage() {\n    // Returns the CKEDitor instance language taking into account that the language can be an object.\n    // Try to get editorParameters.language, fail silently otherwise\n    try {\n      return this.editorParameters.language;\n    } catch (e) {}\n    const languageObject = this.editorObject.config.get(\"language\");\n    if (languageObject != null) {\n      if (typeof languageObject === \"object\") {\n        // eslint-disable-next-line no-prototype-builtins\n        if (languageObject.hasOwnProperty(\"ui\")) {\n          return languageObject.ui;\n        }\n        return languageObject;\n      }\n      return languageObject;\n    }\n    return super.getLanguage();\n  }\n\n  /**\n   * Adds callbacks to the following CKEditor listeners:\n   * - 'focus' - updates the current instance.\n   * - 'contentDom' - adds 'doubleclick' callback.\n   * - 'doubleclick' - sets to null data.dialog property to avoid modifications for MathType formulas.\n   * - 'setData' - parses the data converting MathML into images.\n   * - 'afterSetData' - adds an observer to MathType formulas to avoid modifications.\n   * - 'getData' - parses the data converting images into selected save mode (MathML by default).\n   * - 'mode' - recalculates the active element.\n   */\n  addEditorListeners() {\n    const editor = this.editorObject;\n\n    if (typeof editor.config.wirislistenersdisabled === \"undefined\" || !editor.config.wirislistenersdisabled) {\n      this.checkElement();\n    }\n  }\n\n  /**\n   * Checks the current container and assign events in case that it doesn't have them.\n   * CKEditor replaces several times the element element during its execution,\n   * so we must assign the events again to editor element.\n   */\n  checkElement() {\n    const editor = this.editorObject;\n    const newElement = editor.sourceElement;\n\n    // If the element wasn't treated, add the events.\n    if (!newElement.wirisActive) {\n      this.setTarget(newElement);\n      this.addEvents();\n      // Set the element as treated\n      newElement.wirisActive = true;\n    }\n  }\n\n  /**\n   * @inheritdoc\n   * @param {HTMLElement} element - HTMLElement target.\n   * @param {MouseEvent} event - event which trigger the handler.\n   */\n  doubleClickHandler(element, event) {\n    this.core.editionProperties.dbclick = true;\n    if (this.editorObject.isReadOnly === false) {\n      if (element.nodeName.toLowerCase() === \"img\") {\n        if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n          // Some plugins (image2, image) open a dialog on Double-click. On formulas\n          // doubleclick event ends here.\n          if (typeof event.stopPropagation !== \"undefined\") {\n            // old I.E compatibility.\n            event.stopPropagation();\n          } else {\n            event.returnValue = false;\n          }\n          this.core.getCustomEditors().disable();\n          const customEditorAttr = element.getAttribute(Configuration.get(\"imageCustomEditorName\"));\n          if (customEditorAttr) {\n            this.core.getCustomEditors().enable(customEditorAttr);\n          }\n          this.core.editionProperties.temporalImage = element;\n          this.openExistingFormulaEditor();\n        }\n      }\n    }\n  }\n\n  /** @inheritdoc */\n  static getCorePath() {\n    return null; // TODO\n  }\n\n  /** @inheritdoc */\n  callbackFunction() {\n    super.callbackFunction();\n    this.addEditorListeners();\n  }\n\n  openNewFormulaEditor() {\n    // Store the editor selection as it will be lost upon opening the modal\n    this.core.editionProperties.selection = this.editorObject.editing.view.document.selection;\n\n    // Focus on the selected editor when multiple editor instances are present\n    WirisPlugin.currentInstance = this;\n\n    return super.openNewFormulaEditor();\n  }\n\n  /**\n   * Replaces old formula with new MathML or inserts it in caret position if new\n   * @param {String} mathml MathML to update old one or insert\n   * @returns {module:engine/model/element~Element} The model element corresponding to the inserted image\n   */\n  insertMathml(mathml) {\n    // This returns the value returned by the callback function (writer => {...})\n    return this.editorObject.model.change((writer) => {\n      const core = this.getCore();\n      const selection = this.editorObject.model.document.selection;\n\n      const modelElementNew = writer.createElement(\"mathml\", {\n        formula: mathml,\n        ...Object.fromEntries(selection.getAttributes()), // To keep the format, such as style and font\n      });\n\n      // Obtain the DOM <span><img ... /></span> object corresponding to the formula\n      if (core.editionProperties.isNewElement) {\n        // Don't bother inserting anything at all if the MathML is empty.\n        if (!mathml) return;\n\n        const viewSelection =\n          this.core.editionProperties.selection || this.editorObject.editing.view.document.selection;\n        const modelPosition = this.editorObject.editing.mapper.toModelPosition(viewSelection.getLastPosition());\n\n        this.editorObject.model.insertObject(modelElementNew, modelPosition);\n\n        // Remove selection\n        if (!viewSelection.isCollapsed) {\n          for (const range of viewSelection.getRanges()) {\n            writer.remove(this.editorObject.editing.mapper.toModelRange(range));\n          }\n        }\n\n        // Set carret after the formula\n        const position = this.editorObject.model.createPositionAfter(modelElementNew);\n        writer.setSelection(position);\n      } else {\n        const img = core.editionProperties.temporalImage;\n        const viewElement = this.editorObject.editing.view.domConverter.domToView(img).parent;\n        const modelElementOld = this.editorObject.editing.mapper.toModelElement(viewElement);\n\n        // Insert the new <mathml> and remove the old one\n        const position = this.editorObject.model.createPositionBefore(modelElementOld);\n\n        // If the given MathML is empty, don't insert a new formula.\n        if (mathml) {\n          this.editorObject.model.insertObject(modelElementNew, position);\n        }\n        writer.remove(modelElementOld);\n      }\n\n      // eslint-disable-next-line consistent-return\n      return modelElementNew;\n    });\n  }\n\n  /**\n   * Finds the text node corresponding to given DOM text element.\n   * @param {element} viewElement Element to find corresponding text node of.\n   * @returns {module:engine/model/text~Text|undefined} Text node corresponding to the given element or undefined if it doesn't exist.\n   */\n  findText(viewElement) {\n    // eslint-disable-line consistent-return\n    // mapper always converts text nodes to *new* model elements so we need to convert the text's parents and then come back down\n    let pivot = viewElement;\n    let element;\n    while (!element) {\n      element = this.editorObject.editing.mapper.toModelElement(\n        this.editorObject.editing.view.domConverter.domToView(pivot),\n      );\n      pivot = pivot.parentElement;\n    }\n\n    // Navigate through all the subtree under `pivot` in order to find the correct text node\n    const range = this.editorObject.model.createRangeIn(element);\n    const descendants = Array.from(range.getItems());\n    for (const node of descendants) {\n      let viewElementData = viewElement.data;\n      if (viewElement.nodeType === 3) {\n        // Remove invisible white spaces\n        viewElementData = viewElementData.replaceAll(String.fromCharCode(8288), \"\");\n      }\n      if (node.is(\"textProxy\") && node.data === viewElementData.replace(String.fromCharCode(160), \" \")) {\n        return node.textNode;\n      }\n    }\n  }\n\n  /** @inheritdoc */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    // eslint-disable-line no-unused-vars\n    const returnObject = {};\n\n    let mathmlOrigin;\n    if (!mathml) {\n      this.insertMathml(\"\");\n    } else if (this.core.editMode === \"latex\") {\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\n      returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\n\n      this.editorObject.model.change((writer) => {\n        const { latexRange } = this.core.editionProperties;\n\n        const startNode = this.findText(latexRange.startContainer);\n        const endNode = this.findText(latexRange.endContainer);\n\n        let startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + latexRange.startOffset);\n        let endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + latexRange.endOffset);\n\n        let range = writer.createRange(startPosition, endPosition);\n\n        // When Latex is next to image/formula.\n        if (latexRange.startContainer.nodeType === 3 && latexRange.startContainer.previousSibling?.nodeType === 1) {\n          // Get the position of the latex to be replaced.\n          let latexEdited =\n            \"$$\" +\n            Latex.getLatexFromMathML(MathML.safeXmlDecode(this.core.editionProperties.temporalImage.dataset.mathml)) +\n            \"$$\";\n          let data = latexRange.startContainer.data;\n\n          // Remove invisible characters.\n          data = data.replaceAll(String.fromCharCode(8288), \"\");\n\n          // Get to the start of the latex we are editing.\n          let offset = data.indexOf(latexEdited);\n          let dataOffset = data.substring(offset);\n          let second$ = dataOffset.substring(2).indexOf(\"$$\") + 4;\n          let substring = dataOffset.substr(0, second$);\n          data = data.replace(substring, \"\");\n\n          if (!data) {\n            startPosition = writer.createPositionBefore(startNode);\n            range = startNode;\n          } else {\n            startPosition = startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + offset);\n            endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + second$ + offset);\n            range = writer.createRange(startPosition, endPosition);\n          }\n        }\n\n        writer.remove(range);\n        writer.insertText(`$$${returnObject.latex}$$`, startNode.getAttributes(), startPosition);\n      });\n    } else {\n      mathmlOrigin = this.core.editionProperties.temporalImage?.dataset.mathml;\n      try {\n        returnObject.node = this.editorObject.editing.view.domConverter.viewToDom(\n          this.editorObject.editing.mapper.toViewElement(this.insertMathml(mathml)),\n          windowTarget.document,\n        );\n      } catch (e) {\n        const x = e.toString();\n        if (x.includes(\"CKEditorError: Cannot read property 'parent' of undefined\")) {\n          this.core.modalDialog.cancelAction();\n        }\n      }\n    }\n\n    // Build the telemeter payload separated to delete null/undefined entries.\n    let payload = {\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\n      elapsed_time: Date.now() - this.core.editionProperties.editionStartTime,\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\n      toolbar: this.core.modalDialog.contentManager.toolbar,\n      size: mathml?.length,\n    };\n\n    // Remove desired null keys.\n    Object.keys(payload).forEach((key) => {\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\n    });\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\n        ...payload,\n      });\n    } catch (error) {\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\n    }\n\n    /* Due to PLUGINS-1329, we add the onChange event to the CK4 insertFormula.\n        We probably should add it here as well, but we should look further into how */\n    // this.editorObject.fire('change');\n\n    // Remove temporal image of inserted formula\n    this.core.editionProperties.temporalImage = null;\n\n    return returnObject;\n  }\n\n  /**\n   * Function called when the content submits an action.\n   */\n  notifyWindowClosed() {\n    this.editorObject.editing.view.focus();\n  }\n}\n","/* eslint-disable max-classes-per-file */\nimport { Command } from \"ckeditor5/src/core.js\";\nimport CKEditor5Integration from \"./integration.js\";\n\n/**\n * Command for opening the MathType editor\n */\nexport class MathTypeCommand extends Command {\n  execute(options = {}) {\n    // Check we get a valid integration\n    // eslint-disable-next-line no-prototype-builtins\n    if (!options.hasOwnProperty(\"integration\") || !(options.integration instanceof CKEditor5Integration)) {\n      throw 'Must pass a valid CKEditor5Integration instance as attribute \"integration\" of options';\n    }\n\n    // Save the integration instance as a property of the command.\n    this.integration = options.integration;\n\n    // Set custom editor or disable it\n    this.setEditor();\n\n    // Open the editor\n    this.openEditor();\n  }\n\n  /**\n   * Sets the appropriate custom editor, if any, or disables them.\n   */\n  setEditor() {\n    // It's possible that a custom editor was last used.\n    // We need to disable it to avoid wrong behaviors.\n    this.integration.core.getCustomEditors().disable();\n  }\n\n  /**\n   * Checks whether we are editing an existing formula or a new one and opens the editor.\n   */\n  openEditor() {\n    this.integration.core.editionProperties.dbclick = false;\n    const image = this._getSelectedImage();\n    if (\n      typeof image !== \"undefined\" &&\n      image !== null &&\n      image.classList.contains(WirisPlugin.Configuration.get(\"imageClassName\"))\n    ) {\n      this.integration.core.editionProperties.temporalImage = image;\n      this.integration.openExistingFormulaEditor();\n    } else {\n      this.integration.openNewFormulaEditor();\n    }\n  }\n\n  /**\n   * Gets the currently selected formula image\n   * @returns {Element} selected image, if any, undefined otherwise\n   */\n  _getSelectedImage() {\n    const { selection } = this.editor.editing.view.document;\n\n    // If we can not extract the formula, fall back to default behavior.\n    if (selection.isCollapsed || selection.rangeCount !== 1) {\n      return;\n    }\n\n    // Look for the <span> wrapping the formula and then for the <img/> inside\n\n    const range = selection.getFirstRange();\n\n    let image;\n\n    for (const span of range) {\n      if (span.item.name !== \"span\") {\n        return;\n      }\n      image = span.item.getChild(0);\n      break;\n    }\n\n    if (!image) {\n      return;\n    }\n\n    // eslint-disable-next-line consistent-return\n    return this.editor.editing.view.domConverter.mapViewToDom(image);\n  }\n}\n\n/**\n * Command for opening the ChemType editor\n */\nexport class ChemTypeCommand extends MathTypeCommand {\n  setEditor() {\n    this.integration.core.getCustomEditors().enable(\"chemistry\");\n  }\n}\n","// CKEditor imports\nimport { Plugin } from \"ckeditor5/src/core.js\";\nimport { ButtonView } from \"ckeditor5/src/ui.js\";\nimport { ClickObserver, HtmlDataProcessor, XmlDataProcessor, UpcastWriter } from \"ckeditor5/src/engine.js\";\nimport { Widget, toWidget, viewToModelPositionOutsideModelElement } from \"ckeditor5/src/widget.js\";\n\n// MathType API imports\nimport IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\nimport Core from \"@wiris/mathtype-html-integration-devkit/src/core.src.js\";\nimport Parser from \"@wiris/mathtype-html-integration-devkit/src/parser.js\";\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\nimport Image from \"@wiris/mathtype-html-integration-devkit/src/image.js\";\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\nimport Listeners from \"@wiris/mathtype-html-integration-devkit/src/listeners.js\";\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\nimport StringManager from \"@wiris/mathtype-html-integration-devkit/src/stringmanager.js\";\n\n// Local imports\nimport { MathTypeCommand, ChemTypeCommand } from \"./commands.js\";\nimport CKEditor5Integration from \"./integration.js\";\n\nimport mathIcon from \"../theme/icons/ckeditor5-formula.svg\";\nimport chemIcon from \"../theme/icons/ckeditor5-chem.svg\";\n\nimport packageInfo from \"../package.json\";\n\nexport let currentInstance = null; // eslint-disable-line import/no-mutable-exports\n\nexport default class MathType extends Plugin {\n  static get requires() {\n    return [Widget];\n  }\n\n  static get pluginName() {\n    return \"MathType\";\n  }\n\n  init() {\n    // Create the MathType API Integration object\n    const integration = this._addIntegration();\n    currentInstance = integration;\n\n    // Add the MathType and ChemType commands to the editor\n    this._addCommands();\n\n    // Add the buttons for MathType and ChemType\n    this._addViews(integration);\n\n    // Registers the <mathml> element in the schema\n    this._addSchema();\n\n    // Add the downcast and upcast converters\n    this._addConverters(integration);\n\n    // Expose the WirisPlugin variable to the window\n    this._exposeWiris();\n  }\n\n  /**\n   * Inherited from Plugin class: Executed when CKEditor5 is destroyed\n   */\n  destroy() {\n    // eslint-disable-line class-methods-use-this\n    currentInstance.destroy();\n  }\n\n  /**\n   * Create the MathType API Integration object\n   * @returns {CKEditor5Integration} the integration object\n   */\n  _addIntegration() {\n    const { editor } = this;\n\n    /**\n     * Integration model constructor attributes.\n     * @type {integrationModelProperties}\n     */\n    const integrationProperties = {};\n    integrationProperties.environment = {};\n    integrationProperties.environment.editor = \"CKEditor5\";\n    integrationProperties.environment.editorVersion = \"5.x\";\n    integrationProperties.version = packageInfo.version;\n    integrationProperties.editorObject = editor;\n    integrationProperties.serviceProviderProperties = {};\n    integrationProperties.serviceProviderProperties.URI = \"https://www.wiris.net/demo/plugins/app\";\n    integrationProperties.serviceProviderProperties.server = \"java\";\n    integrationProperties.target = editor.sourceElement;\n    integrationProperties.scriptName = \"bundle.js\";\n    integrationProperties.managesLanguage = true;\n    // etc\n\n    // There are platforms like Drupal that initialize CKEditor but they hide or remove the container element.\n    // To avoid a wrong behaviour, this integration only starts if the workspace container exists.\n    let integration;\n    if (integrationProperties.target) {\n      // Instance of the integration associated to this editor instance\n      integration = new CKEditor5Integration(integrationProperties);\n      integration.init();\n      integration.listeners.fire(\"onTargetReady\", {});\n\n      integration.checkElement();\n\n      this.listenTo(\n        editor.editing.view.document,\n        \"click\",\n        (evt, data) => {\n          // Is Double-click\n          if (data.domEvent.detail === 2) {\n            integration.doubleClickHandler(data.domTarget, data.domEvent);\n            evt.stop();\n          }\n        },\n        { priority: \"highest\" },\n      );\n    }\n\n    return integration;\n  }\n\n  /**\n   * Add the MathType and ChemType commands to the editor\n   */\n  _addCommands() {\n    const { editor } = this;\n\n    // Add command to open the formula editor\n    editor.commands.add(\"MathType\", new MathTypeCommand(editor));\n\n    // Add command to open the chemistry formula editor\n    editor.commands.add(\"ChemType\", new ChemTypeCommand(editor));\n  }\n\n  /**\n   * Add the buttons for MathType and ChemType\n   * @param {CKEditor5Integration} integration the integration object\n   */\n  _addViews(integration) {\n    const { editor } = this;\n\n    // Check if MathType editor is enabled\n    if (Configuration.get(\"editorEnabled\")) {\n      // Add button for the formula editor\n      editor.ui.componentFactory.add(\"MathType\", (locale) => {\n        const view = new ButtonView(locale);\n\n        // View is enabled iff command is enabled\n        view.bind(\"isEnabled\").to(editor.commands.get(\"MathType\"), \"isEnabled\");\n        view.set({\n          label: StringManager.get(\"insert_math\", integration.getLanguage()),\n          icon: mathIcon,\n          tooltip: true,\n        });\n\n        // Callback executed once the image is clicked.\n        view.on(\"execute\", () => {\n          editor.execute(\"MathType\", {\n            integration, // Pass integration as parameter\n          });\n        });\n\n        return view;\n      });\n    }\n\n    // Check if ChemType editor is enabled\n    if (Configuration.get(\"chemEnabled\")) {\n      // Add button for the chemistry formula editor\n      editor.ui.componentFactory.add(\"ChemType\", (locale) => {\n        const view = new ButtonView(locale);\n\n        // View is enabled iff command is enabled\n        view.bind(\"isEnabled\").to(editor.commands.get(\"ChemType\"), \"isEnabled\");\n\n        view.set({\n          label: StringManager.get(\"insert_chem\", integration.getLanguage()),\n          icon: chemIcon,\n          tooltip: true,\n        });\n\n        // Callback executed once the image is clicked.\n        view.on(\"execute\", () => {\n          editor.execute(\"ChemType\", {\n            integration, // Pass integration as parameter\n          });\n        });\n\n        return view;\n      });\n    }\n\n    // Observer for the Double-click event\n    editor.editing.view.addObserver(ClickObserver);\n  }\n\n  /**\n   * Registers the <mathml> element in the schema\n   */\n  _addSchema() {\n    const { schema } = this.editor.model;\n\n    schema.register(\"mathml\", {\n      inheritAllFrom: \"$inlineObject\",\n      allowAttributes: [\"formula\", \"htmlContent\"],\n    });\n  }\n\n  /**\n   * Add the downcast and upcast converters\n   */\n  _addConverters(integration) {\n    const { editor } = this;\n\n    // Editing view -> Model\n    editor.conversion.for(\"upcast\").elementToElement({\n      view: {\n        name: \"span\",\n        classes: \"ck-math-widget\",\n      },\n      model: (viewElement, { writer: modelWriter }) => {\n        const formula = MathML.safeXmlDecode(viewElement.getChild(0).getAttribute(\"data-mathml\"));\n        return modelWriter.createElement(\"mathml\", {\n          formula,\n        });\n      },\n    });\n\n    // Data view -> Model\n    editor.data.upcastDispatcher.on(\"element:math\", (evt, data, conversionApi) => {\n      const { consumable, writer } = conversionApi;\n      const { viewItem } = data;\n\n      // When element was already consumed then skip it.\n      if (!consumable.test(viewItem, { name: true })) {\n        return;\n      }\n\n      // If we encounter any <math> with a LaTeX annotation inside,\n      // convert it into a \"$$...$$\" string.\n      const isLatex = mathIsLatex(viewItem); // eslint-disable-line no-use-before-define\n\n      // Get the formula of the <math> (which is all its children).\n      const processor = new XmlDataProcessor(editor.editing.view.document);\n\n      // Only god knows why the following line makes viewItem lose all of its children,\n      // so we obtain isLatex before doing this because we need viewItem's children for that.\n      const upcastWriter = new UpcastWriter(editor.editing.view.document);\n      const viewDocumentFragment = upcastWriter.createDocumentFragment(viewItem.getChildren());\n\n      // and obtain the attributes of <math> too!\n      const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\n\n      // We process the document fragment\n      let formula = processor.toData(viewDocumentFragment) || \"\";\n\n      // And obtain the complete formula\n      formula = Util.htmlSanitize(`<math${mathAttributes}>${formula}</math>`);\n\n      // Replaces the < & > characters to its HTMLEntity to avoid render issues.\n      formula = formula.replaceAll('\"<\"', '\"&lt;\"').replaceAll('\">\"', '\"&gt;\"').replaceAll(\"><<\", \">&lt;<\");\n\n      /* Model node that contains what's going to actually be inserted. This can be either:\n            - A <mathml> element with a formula attribute set to the given formula, or\n            - If the original <math> had a LaTeX annotation, then the annotation surrounded by \"$$...$$\" */\n      const modelNode = isLatex\n        ? writer.createText(Parser.initParse(formula, integration.getLanguage()))\n        : writer.createElement(\"mathml\", { formula });\n\n      // Find allowed parent for element that we are going to insert.\n      // If current parent does not allow to insert element but one of the ancestors does\n      // then split nodes to allowed parent.\n      const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\n\n      // When there is no split result it means that we can't insert element to model tree, so let's skip it.\n      if (!splitResult) {\n        return;\n      }\n\n      // Insert element on allowed position.\n      conversionApi.writer.insert(modelNode, splitResult.position);\n\n      // Consume appropriate value from consumable values list.\n      consumable.consume(viewItem, { name: true });\n\n      const parts = conversionApi.getSplitParts(modelNode);\n\n      // Set conversion result range.\n      data.modelRange = writer.createRange(\n        conversionApi.writer.createPositionBefore(modelNode),\n        conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\n      );\n\n      // Now we need to check where the `modelCursor` should be.\n      if (splitResult.cursorParent) {\n        // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n        //\n        // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n        // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\n        data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\n      } else {\n        // Otherwise just continue after inserted element.\n        data.modelCursor = data.modelRange.end;\n      }\n    });\n\n    // Data view -> Model\n    editor.data.upcastDispatcher.on(\"element:img\", (evt, data, conversionApi) => {\n      const { consumable, writer } = conversionApi;\n      const { viewItem } = data;\n\n      // Only upcast when is wiris formula\n      if (viewItem.getClassNames().next().value !== \"Wirisformula\") {\n        return;\n      }\n\n      const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\n      let htmlContent = Util.htmlSanitize(`<img${mathAttributes}>`);\n\n      const modelNode = writer.createElement(\"mathml\", { htmlContent });\n\n      // Find allowed parent for element that we are going to insert.\n      // If current parent does not allow to insert element but one of the ancestors does\n      // then split nodes to allowed parent.\n      const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\n\n      // When there is no split result it means that we can't insert element to model tree, so let's skip it.\n      if (!splitResult) {\n        return;\n      }\n\n      // Insert element on allowed position.\n      conversionApi.writer.insert(modelNode, splitResult.position);\n\n      // Consume appropriate value from consumable values list.\n      consumable.consume(viewItem, { name: true });\n\n      const parts = conversionApi.getSplitParts(modelNode);\n\n      // Set conversion result range.\n      data.modelRange = writer.createRange(\n        conversionApi.writer.createPositionBefore(modelNode),\n        conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\n      );\n\n      // Now we need to check where the `modelCursor` should be.\n      if (splitResult.cursorParent) {\n        // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n        //\n        // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n        // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\n        data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\n      } else {\n        // Otherwise just continue after inserted element.\n        data.modelCursor = data.modelRange.end;\n      }\n    });\n\n    /**\n     * Whether the given view <math> element has a LaTeX annotation element.\n     * @param {*} math\n     * @returns {bool}\n     */\n    function mathIsLatex(math) {\n      const semantics = math.getChild(0);\n      if (!semantics || semantics.name !== \"semantics\") return false;\n      for (const child of semantics.getChildren()) {\n        if (child.name === \"annotation\" && child.getAttribute(\"encoding\") === \"LaTeX\") {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    function createViewWidget(modelItem, { writer: viewWriter }) {\n      const widgetElement = viewWriter.createContainerElement(\"span\", {\n        class: \"ck-math-widget\",\n      });\n\n      const mathUIElement = createViewImage(modelItem, { writer: viewWriter }); // eslint-disable-line no-use-before-define\n\n      if (mathUIElement) {\n        viewWriter.insert(viewWriter.createPositionAt(widgetElement, 0), mathUIElement);\n      }\n\n      return toWidget(widgetElement, viewWriter);\n    }\n\n    function createViewImage(modelItem, { writer: viewWriter }) {\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\n\n      const formula = modelItem.getAttribute(\"formula\");\n      const htmlContent = modelItem.getAttribute(\"htmlContent\");\n\n      if(!formula && !htmlContent){\n        return null;\n      }\n\n      let imgElement = null;\n\n      if (htmlContent) {\n        imgElement = htmlDataProcessor.toView(htmlContent).getChild(0);\n      } else if(formula) {\n        const mathString = formula.replaceAll('ref=\"<\"', 'ref=\"&lt;\"');\n\n        const imgHtml = Parser.initParse(mathString, integration.getLanguage());\n        imgElement = htmlDataProcessor.toView(imgHtml).getChild(0);\n\n        // Add HTML element (<img>) to model\n        viewWriter.setAttribute(\"htmlContent\", imgHtml, modelItem);\n      }\n\n      /* Although we use the HtmlDataProcessor to obtain the attributes,\n        *  we must create a new EmptyElement which is independent of the\n        *  DataProcessor being used by this editor instance\n        */\n      if (imgElement) {\n        return viewWriter.createEmptyElement(\"img\", imgElement.getAttributes(), {\n          renderUnsafeAttributes: [\"src\"],\n        });\n      }\n\n      return null;\n    }\n\n    // Model -> Editing view\n    editor.conversion.for(\"editingDowncast\").elementToElement({\n      model: \"mathml\",\n      view: createViewWidget,\n    });\n\n    // Model -> Data view\n    editor.conversion.for(\"dataDowncast\").elementToElement({\n      model: \"mathml\",\n      view: createDataString, // eslint-disable-line no-use-before-define\n    });\n\n    /**\n     * Makes a copy of the given view node.\n     * @param {module:engine/view/node~Node} sourceNode Node to copy.\n     * @returns {module:engine/view/node~Node} Copy of the node.\n     */\n    function clone(viewWriter, sourceNode) {\n      if (sourceNode.is(\"text\")) {\n        return viewWriter.createText(sourceNode.data);\n      }\n      if (sourceNode.is(\"element\")) {\n        if (sourceNode.is(\"emptyElement\")) {\n          return viewWriter.createEmptyElement(sourceNode.name, sourceNode.getAttributes());\n        }\n        const element = viewWriter.createContainerElement(sourceNode.name, sourceNode.getAttributes());\n        for (const child of sourceNode.getChildren()) {\n          viewWriter.insert(viewWriter.createPositionAt(element, \"end\"), clone(viewWriter, child));\n        }\n        return element;\n      }\n\n      throw new Exception(\"Given node has unsupported type.\"); // eslint-disable-line no-undef\n    }\n\n    function createDataString(modelItem, { writer: viewWriter }) {\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\n\n      // Load img element\n      let mathString = modelItem.getAttribute(\"htmlContent\");\n\n      const sourceMathElement = htmlDataProcessor.toView(mathString).getChild(0);\n\n      return clone(viewWriter, sourceMathElement);\n    }\n\n    // This stops the view selection getting into the <span>s and messing up caret movement\n    editor.editing.mapper.on(\n      \"viewToModelPosition\",\n      viewToModelPositionOutsideModelElement(editor.model, (viewElement) => viewElement.hasClass(\"ck-math-widget\")),\n    );\n\n    // Keep a reference to the original get and set function.\n    const { get, set } = editor.data;\n\n    /**\n     * Hack to transform $$latex$$ into <math> in editor.getData()'s output.\n     */\n    editor.data.on(\n      \"get\",\n      (e) => {\n        let output = e.return;\n        const parsedResult = Parser.endParse(output);\n\n        // Cleans all the semantics tag for safexml\n        // including the handwritten data points\n        e.return = MathML.removeSafeXMLSemantics(parsedResult);\n      },\n      { priority: \"low\" },\n    );\n\n    /**\n     * Hack to transform <math> with LaTeX into $$LaTeX$$ and formula images in editor.setData().\n     */\n    editor.data.on(\n      \"set\",\n      (e, args) => {\n        // Retrieve the data to be set on the CKEditor.\n        let modifiedData = args[0];\n        // Regex to find all mathml formulas.\n        const regexp = /(<img\\b[^>]*>)|(<math(.*?)<\\/math>)/gm;\n        const formulas = [];\n        let formula;\n\n        // Both data.set from the source plugin and console command are taken into account as the data received is MathML or an image containing the MathML.\n        while ((formula = regexp.exec(modifiedData)) !== null) {\n          formulas.push(formula[0]);\n        }\n\n        // Loop to find LaTeX and formula images and replace the MathML for the both.\n        formulas.forEach((formula) => {\n          if (formula.includes('encoding=\"LaTeX\"')) {\n            // LaTeX found.\n            let latex = \"$$$\" + Latex.getLatexFromMathML(formula) + \"$$$\"; // We add $$$ instead of $$ because the replace function ignores one $.\n            modifiedData = modifiedData.replace(formula, latex);\n          } else if (formula.includes(\"<img\")) {\n            // If we found a formula image, we should find MathML data, and then substitute the entire image.\n            const regexp = /«math\\b[^»]*»(.*?)«\\/math»/g;\n            const safexml = formula.match(regexp);\n            if(safexml !== null) {\n              let decodeXML = MathML.safeXmlDecode(safexml[0]);\n              modifiedData = modifiedData.replace(formula, decodeXML);\n            }\n          }\n        });\n\n        args[0] = modifiedData;\n      },\n      { priority: \"high\" },\n    );\n  }\n\n  /**\n   * Expose the WirisPlugin variable to the window\n   */\n  // eslint-disable-next-line class-methods-use-this\n  _exposeWiris() {\n    window.WirisPlugin = {\n      Core,\n      Parser,\n      Image,\n      MathML,\n      Util,\n      Configuration,\n      Listeners,\n      IntegrationModel,\n      currentInstance,\n      Latex,\n    };\n  }\n}\n"],"names":["global","factory","module","exports","this","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","Object","freeze","seal","create","apply","construct","Reflect","x","fun","thisValue","args","Func","arrayForEach","unapply","Array","prototype","forEach","arrayPop","pop","arrayPush","push","stringToLowerCase","String","toLowerCase","stringToString","toString","stringMatch","match","stringReplace","replace","stringIndexOf","indexOf","stringTrim","trim","objectHasOwnProperty","hasOwnProperty","regExpTest","RegExp","test","typeErrorCreate","unconstruct","TypeError","func","thisArg","_len","arguments","length","_key","_len2","_key2","addToSet","set","array","transformCaseFunc","undefined","l","element","lcElement","cleanArray","index","isPropertyExist","clone","object","newObject","property","value","isArray","constructor","lookupGetter","prop","desc","get","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","__proto__","NODE_TYPE","attribute","cdataSection","entityReference","entityNode","progressingInstruction","comment","document","documentType","documentFragment","notation","getGlobal","window","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","getAttribute","policyName","createHTML","createScriptURL","scriptUrl","_","console","warn","createDOMPurify","DOMPurify","root","version","removed","nodeType","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","remove","getNextSibling","getChildNodes","getParentNode","template","createElement","content","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","Function","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","TRUSTED_TYPES_POLICY","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","tagName","namespaceURI","parentTagName","Boolean","_forceRemove","node","removeChild","_removeAttribute","name","getAttributeNode","from","removeAttribute","setAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","createDocument","innerHTML","body","insertBefore","createTextNode","childNodes","call","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","elm","nodeName","textContent","attributes","hasChildNodes","_isNode","_executeHook","entryPoint","currentNode","data","hook","_sanitizeElements","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","childCount","i","childClone","__removalCount","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","attr","forceKeepAttr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","appendChild","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","purify","Constants","safeXmlCharactersEntities","tagOpener","tagCloser","doubleQuote","realDoubleQuote","safeBadBlackboardCharacters","ltElement","gtElement","ampElement","safeGoodBlackboardCharacters","xmlCharacters","id","ampersand","quote","safeXmlCharacters","MathML","isMathmlInAttribute","mathAtt","attContent","att","atts","regex","expression","actualContent","substring","reversed","split","reverse","join","exists","safeXmlDecode","input","_wrs_blackboard","returnValue","currentEntity","character","charAt","safeXmlEncode","mathMLEntities","mathml","toReturn","codePointAt","end","container","Util","fixedCharCodeAt","innerText","addCustomEditorClassAttribute","customEditor","start","substr","removeCustomEditorClassAttribute","addAnnotation","annotationEncoding","containsAnnotation","mathmlWithAnnotation","closeSemanticsIndex","isEmpty","endIndexInline","endIndexNonInline","endIndex","beginMathMLContent","endMathmlContent","lastIndexOf","mathmlContent","removeAnnotation","mathmlWithoutAnnotation","openAnnotationTag","closeAnnotationTag","startAnnotationIndex","differentAnnotationFound","differentAnnotationIndex","closeIndex","endAnnotationIndex","startIndex","removeSemantics","semanticsStartingTagRegex","semanticsEndingTagRegex","removeSafeXMLSemantics","semanticsSafeStartingTagRegex","semanticsSafeEndingTagRegex","removeSemanticsOcurrences","characters","mathTagStart","mathTagEnd","mathTagEndline","semanticsTagStart","annotationTagStart","output","mathTagEndIndex","mathTagEndlineIndex","firstTagCloser","semanticsIndex","mmlTagStart","annotationIndex","mmlContent","containClass","mathML","className","classIndex","classTagEndIndex","classTag","closeTag","closeTagInline","firstCloseTagIndex","firstCloseTagInlineIndex","empty","mathTagEndRegex","mathTagEndArray","exec","encodeProperties","replacer","quoteIndex","propertyValue","propertyValueEncoded","htmlEntities","matchEncoded","mathmlEncoded","Configuration","addConfiguration","properties","assign","_properties","key","update","updateProperty","TextCache","cache","populate","Listeners","listeners","add","listener","fire","eventName","event","cancelled","callback","defaultPrevented","newListener","ServiceProvider","_listeners","addListener","fireEvent","parameters","_parameters","servicePaths","_servicePaths","setServicePath","service","path","getServicePath","serviceName","integrationPath","_integrationPath","getServerURL","url","location","href","arr","result","init","configurationURI","createServiceURI","createImageURI","showImageURI","getMathMLURI","serviceURI","URI","serverPath","getUrl","postVariables","currentPath","httpRequest","createHttpRequest","open","header","convertStringToObject","val","setRequestHeader","send","httpBuildQuery","responseText","getService","response","getVariables","serviceUrl","getServerLanguageFromService","extension","serverExtension","concatenateUrl","server","Latex","_cache","getLatexFromMathML","mathmlWithoutSemantics","mml","jsonResponse","JSON","parse","latex","status","latexHtmlEntitiesEncoded","mathmlWithSemantics","getMathMLFromLatex","includeLatexOnSemantics","latexCache","saveLatex","parseMathmlToLatex","mathTagBegin","openTarget","closeTarget","startAnnotation","closeAnnotation","getLatexFromTextNode","textNode","caretPosition","latexTags","defaultLatexTags","close","startNode","previousSibling","getNextLatexPosition","currentPosition","position","nodeValue","nextSibling","isPrevious","endNode","endPosition","tagLength","startPosition","StringManager","Error","lang","language","slice","strings","translations","eventTarget","createEvent","eventObject","initEvent","dispatchEvent","createEventObject","addEvent","callBackFunction","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","addElementEvents","doubleClickHandler","mousedownHandler","mouseupHandler","callbackDblclick","realEvent","srcElement","target","callbackMousedown","callbackMouseup","removeElementEvents","addClass","containsClass","currentClasses","removeClass","newClassName","classes","convertOldXmlinitialtextAttribute","xitpos","valpos","startquote","endquote","newvalue","keyValueString","map","pair","reduce","resultObject","creator","keys","attributeName","e","createObject","objectCode","recursiveParamsFix","attributesParsed","param","NAME","VALUE","replaceChild","applet","createObjectCode","specified","path1","path2","separator","htmlSanitize","annotationRegex","annotation","htmlEntitiesDecode","textarea","XMLHttpRequest","ActiveXObject","oc","urlEncode","propertiesToString","hash","n","j","s1","s2","compareStrings","a","b","an","bn","c","string","idx","code","charCodeAt","hi","low","Number","isNaN","urlToAssArray","query","ss","h","s","kv","decodeURIComponent","clearString","encodeURIComponent","getWIRISImageOutput","imgCode","convertToXml","convertToSafeXml","imgObject","dataMathML","safeMathML","getNodeLength","staticNodeLengths","IMG","BR","toUpperCase","getSelectedItem","isIframe","forceGetSelection","windowTarget","contentWindow","focus","selection","range","createRange","parentElement","htmlText","execCommand","temporalObject","pasteHTML","getElementById","item","getSelection","getRangeAt","startContainer","startOffset","endContainer","endOffset","localName","classList","contains","emptySpan","getSelectedItemOnTextarea","textNodeValues","selectionStart","getElementsByNameFromString","autoClosed","elements","endString","decode64","PLUS","SLASH","NUMBER","LOWER","UPPER","PLUS_URL_SAFE","SLASH_URL_SAFE","b64ToByteArray","b64String","tmp","placeHolders","readInt32","bytes","int32","splice","readByte","shift","readBytes","pos","len","updateTextArea","selectionEnd","selectionEndSub","updateExistingTextOnTextarea","textareaStart","addArgument","parameter","sep","Image","removeImgDataAttributes","img","attributesToRemove","originImg","destImg","customEditorAttributeName","mathmlAttributeName","imgAttributes","iterator","originAttribute","isSvg","src","startsWith","isBase64","setImgSize","uri","ar","base64String","svgString","getMetricsFromSvgString","fromCharCode","getMetricsFromBytes","width","cw","height","ch","baseline","cb","dpi","style","verticalAlign","fixAfterResize","maxWidth","processImg","atob","encodedSvgString","base64","reader","FileReader","onload","fetch","then","r","blob","readAsDataURL","first","last","typ","Math","round","Accessibility","mathMLToAccessible","mode","ignoreStyles","accessibleText","accessibleJsonResponse","Parser","mathmlToImgObject","wirisProperties","align","wirisEditorProperties","metrics","centerbaseline","mathmlSubstring","createShowImageSrc","format","alt","createImageSrc","observer","observe","baseParts","initParse","initParseSaveMode","initParseEditMode","parseMathmlToImg","codeImgTransform","imgList","token","carry","mathmlStartToken","mathmlStart","mathmlEnd","latexStartPosition","latexEndPosition","replaceText","endParse","codeEndParsedEditMode","endParseEditMode","codeEndParseSaveMode","endParseSaveMode","decodedLatex","savemode","base64savemode","createShowImageSrcData","dataMd5","renderParams","dataObject","formula","com","wiris","js","JsPluginTools","md5encode","pattern","patternLength","source","lastIndex","characterNextPosition","xmlCode","imageMathmlAtrribute","MutationObserver","mutationObserver","mutations","mutation","oldValue","Config","attributeOldValue","EditorListener","isContentChanged","waitingForChanges","setIsContentChanged","getIsContentChanged","setWaitingForChanges","caretPositionChanged","_editor","clipboardChanged","contentChanged","styleChanged","transformationReceived","wasm","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachedUint8Memory0","getUint8Memory0","byteLength","Uint8Array","memory","buffer","getStringFromWasm0","ptr","subarray","heap","fill","heap_next","addHeapObject","obj","getObject","dropObject","takeObject","ret","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encode","encodeString","encodeInto","arg","view","buf","read","written","passStringToWasm0","malloc","realloc","mem","offset","isLikeNone","cachedInt32Memory0","getInt32Memory0","Int32Array","cachedFloat64Memory0","getFloat64Memory0","Float64Array","cachedBigInt64Memory0","getBigInt64Memory0","BigInt64Array","debugString","type","description","debug","builtInMatches","stringify","message","stack","makeClosure","arg0","arg1","dtor","f","state","cnt","real","__wbindgen_export_2","original","__wbg_adapter_46","arg2","__wbindgen_export_3","makeMutClosure","__wbg_adapter_49","__wbindgen_export_4","__wbg_adapter_52","__wbindgen_export_5","handleError","__wbindgen_export_6","__wbg_adapter_103","arg3","__wbindgen_export_7","getArrayU8FromWasm0","Telemeter","__destroy_into_raw","__wbg_ptr","free","__wbg_telemeter_free","solution","hosts","config","retptr","__wbindgen_add_to_stack_pointer","telemeter_new","r0","r1","r2","identify","sender_id","ptr0","__wbindgen_export_0","__wbindgen_export_1","len0","telemeter_identify","track","event_type","event_payload","telemeter_track","log","level","payload","telemeter_log","finish","telemeter_finish","new_debug_status","telemeter_debug","__wbg_load","imports","Response","WebAssembly","instantiateStreaming","headers","arrayBuffer","instantiate","instance","Instance","__wbg_get_imports","wbg","__wbindgen_string_new","__wbg_new_c728d68b8b34487e","__wbg_status_7841bb47be2a8f16","__wbg_headers_ea7ef583d1564b08","__wbg_new0_ad75dd38f92424e2","Date","__wbg_getTime_ed6ee333b702f8fc","getTime","__wbindgen_object_drop_ref","__wbindgen_is_object","__wbg_crypto_58f13aa23ffcb166","crypto","__wbg_process_5b786e71d465a513","process","__wbg_versions_c2ab80650590b6a2","versions","__wbg_node_523d7bd03ef69fba","__wbindgen_is_string","__wbg_msCrypto_abcb1295e768d1f2","msCrypto","__wbg_require_2784e593a4674877","require","__wbg_newwithlength_13b5319ab422dcf6","__wbg_get_4a9aa5157afeb382","__wbg_next_1989a20442400aaa","next","__wbg_done_bc26bf4ada718266","done","__wbg_value_0570714ff7d75f35","__wbg_iterator_7ee1a391d310f8e4","Symbol","__wbg_get_2aff440840bb6202","__wbg_next_15da6a3df9290720","__wbindgen_is_function","__wbg_call_669127b9d730c650","__wbindgen_object_clone_ref","__wbg_self_3fad056edded10bd","self","__wbg_window_a4f46c98a61d4089","__wbg_globalThis_17eff828815f7d84","globalThis","__wbg_global_46f939f6541643c5","__wbindgen_is_undefined","__wbg_newnoargs_ccdcae30fd002262","__wbg_isArray_38525be7442aa21e","__wbg_call_53fc3abd42e24ec8","__wbg_isSafeInteger_c38b0a16d0c7cef7","isSafeInteger","__wbg_new_feb65b865d980ae2","state0","cb0","Promise","__wbindgen_memory","__wbg_buffer_344d9b41efe96da7","__wbg_new_d8a000788389a31e","__wbg_set_dcfd613a3420f908","__wbg_length_a5587d6cd79ab197","__wbindgen_string_get","ptr1","len1","__wbg_stringify_4039297315a25b00","__wbg_set_40f7786a25a9cc7e","__wbg_has_cdf8b85f6e903c80","has","__wbg_fetch_701fcd2bde06379a","__wbg_fetch_b5d6bebed1e6c2d2","__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3","__wbg_new_e4960143e41697a4","AbortController","__wbg_signal_1ed842bebd6ae322","signal","__wbg_abort_8355f201f30300bb","abort","__wbindgen_error_new","__wbindgen_jsval_loose_eq","__wbindgen_boolean_get","v","__wbindgen_number_get","__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1","__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d","ArrayBuffer","__wbg_entries_6d727b73ee02b7ce","__wbg_String_917f38a1211cf44b","__wbg_warn_ade8d3b7ecee11ff","__wbg_readyState_13e55da5ad6d64e2","readyState","__wbg_warn_4affe1093892a4ef","__wbg_close_f4135085ec3fc8f0","__wbg_new_b9b318679315404f","WebSocket","__wbg_setbinaryType_dcb62e0f2b346301","binaryType","__wbg_log_7811587c4c6d2844","__wbg_error_f0a6627f4b23c19d","error","__wbg_info_3ca7870690403fee","info","__wbg_document_183cf1eecfdbffee","__wbg_visibilityState_9721703a5ef75faf","visibilityState","__wbg_getwithrefkey_3b3c46ba20582127","__wbg_length_cace2e0b3ddc0502","__wbg_addEventListener_0f2891b0794e07fa","__wbg_removeEventListener_104d11302bb212d1","__wbindgen_is_bigint","__wbindgen_bigint_from_i64","__wbindgen_in","__wbindgen_bigint_from_u64","BigInt","asUintN","__wbindgen_jsval_eq","__wbg_localStorage_e11f72e996a4f5d9","localStorage","__wbg_getItem_c81cd3ae30cd579a","getItem","__wbg_navigator_7078da62d92ff5ad","navigator","__wbg_mediaDevices_e00b1f64d2b9939f","mediaDevices","__wbg_enumerateDevices_619d52f5eef34c2f","enumerateDevices","__wbg_setItem_fe04f524052a3839","arg4","setItem","__wbindgen_cb_drop","__wbg_deviceId_58f7da2228a26c02","deviceId","__wbg_instanceof_Response_944e2745b5db71f5","__wbg_randomFillSync_a0d98aa11c81fe89","randomFillSync","__wbg_subarray_6ca5cfa7fbb9abbe","__wbg_getRandomValues_504510b5564925af","getRandomValues","__wbindgen_bigint_get_as_i64","__wbindgen_debug_string","__wbindgen_throw","__wbg_then_89e1c559530b85cf","__wbg_queueMicrotask_e5949c35d772a669","queueMicrotask","__wbg_then_1bbc9edafd859b06","__wbg_queueMicrotask_2be8b97a81fe4d00","__wbg_resolve_a3252b2860f0a09e","resolve","__wbg_url_1f609e63ff1a7983","__wbg_send_2860805104507701","__wbg_instanceof_Window_cde2416cf5126a72","Window","__wbg_new_19676474aa414d62","Headers","__wbg_append_feec4143bbf21904","append","__wbg_newwithstrandinit_29038da14d09e330","Request","__wbindgen_closure_wrapper1532","__wbindgen_closure_wrapper1602","__wbindgen_closure_wrapper1834","__wbg_finalize_init","__wbg_init","__wbindgen_wasm_module","__wbindgen_start","URL","telemeterAttributes","telemeter","waitingForInit","TelemeterWASM","catch","finally","local_telemeter","ContentManager","contentManagerAttributes","editorAttributes","customEditors","environment","editorListener","editor","ua","userAgent","deviceProperties","isAndroid","isIOS","toolbar","dbclick","modalDialogInstance","isNewElement","integrationModel","setIntegrationModel","setModalDialogInstance","insert","updateTitle","insertEditor","isEditorLoaded","jsEditor","JsEditor","newInstance","insertInto","contentContainer","rtl","action","getEditorModel","isRTL","direction","addEditorListener","setTimeout","hideKeyboard","formulaDisplayDiv","getElementsByClassName","handleOpenedIosSoftkeyboard","handleClosedIosSoftkeyboard","bind","addEditorAsExternalDependency","script","editorUrl","anchorElement","setHrefToAnchorElement","setProtocolToAnchorElement","getURLFromAnchorElement","stats","getEditorStats","protocol","removePort","port","hostname","pathname","includes","platform","isMobile","setInitialContent","setMathML","focusDisabled","setMathMLWithCallback","onFocus","submitAction","isFormulaEmpty","getMathMLWithSemantics","getActiveEditor","editors","mathmlEntitiesEncoded","updateFormula","disable","notifyWindowClosed","setEmptyMathML","forcedHandMode","onOpen","updateToolbar","zoom","clientWidth","innerWidth","setKeyboardMode","trigger","Core","globalListeners","hideHandModeButton","openHandOnKeyboardMathML","wrsEditor","forced","handSwitchHidden","handModeButtonSelector","mutationInstance","handModeButton","querySelector","hidden","disconnect","childList","characterData","subtree","waitForHand","handEditor","hand","handTemporalMathML","getMathML","handCoordinates","editorModel","getHandStrokes","setStrokes","fitStrokes","openHand","_wrs_int_wirisProperties","setToolbar","getToolbar","setTitle","title","setParams","setCustomHeaders","headersObj","customHeaders","hasChanges","onKeyDown","keyboardEvent","repeat","list","cancelAction","stopPropagation","preventDefault","shiftKey","activeElement","submitButton","closeDiv","minimizeDiv","cancelButton","CustomEditors","activeEditor","addEditor","editorName","editorParams","icon","confVariable","tooltip","enable","customEditorName","jsProperties","imageCustomEditorName","imageClassName","CASClassName","Event","cancel","PopUpMessage","popupMessageAttributes","overlayElement","callbacks","overlayWrapper","paragraph","overlay","buttonArea","buttonSubmitArguments","class","submitString","closeButton","createButton","closeAction","buttonCancelArguments","cancelString","show","display","blur","cancelCallback","closeCallback","IntegrationModel","setActionsOnCancelButtons","ModalDialog","modalDialogAttributes","iosSoftkeyboardOpened","iosMeasureUnit","iosDivHeight","deviceWidth","outerWidth","deviceHeight","outerHeight","landscape","portrait","instanceId","orientation","isDesktop","created","previousState","bottom","right","size","websiteBeforeLockParameters","getElementId","titleBar","generalStyle","btoa","closeIcon","hoverStyle","closeHoverIcon","stackDiv","minsIcon","minsHoverIcon","maximizeDiv","fullsIcon","fullsHoverIcon","minIcon","minHoverIcon","role","wrapper","controls","buttonContainer","createSubmitButton","contentManager","popupStrings","popupupProperties","popup","setContentManager","getContentManager","showPopUpMessage","SubmitButton","dataset","testid","getElement","recalculateScrollBar","createModalWindowDesktop","createResizeButtons","addListeners","maximize","createModalWindowAndroid","createModalWindowIos","scrollbarWidth","offsetWidth","resizerBR","resizerTL","activateResizeStateBR","activateResizeStateTL","mouseEvent","initializeResizeProperties","leftOption","resizeDataObject","eventClient","X","y","Y","initialWidth","parseInt","initialHeight","initialRight","initialBottom","leftScale","restoreWebsiteScale","lockWebsiteScroll","restoreState","setContainerHeight","saveModalProperties","unlockWebsiteScroll","destroy","removeListeners","viewportmeta","contentAttrsToUpdate","contentAttrsValuesToUpdate","setMetaAttrFunc","viewportelement","contentAttrs","contentAttr","attrArray","finalContentMeta","oldAttrs","isAttrToUpdate","bodyStylePosition","bodyStyleOverflow","overflow","htmlStyleOverflow","windowScrollX","scrollX","windowScrollY","scrollY","scrollTo","isIE11","search","orientationChangeAndroidSoftkeyboard","orientationChangeIosSoftkeyboard","minimize","restoreModalProperties","setResizeButtonsVisibility","recalculatePosition","recalculateScale","cursor","maxIcon","maxHoverIcon","left","top","setSize","innerHeight","clientHeight","offsetHeight","setPosition","recalculateSize","reExpand","visibility","keyCode","click","startDrag","stopDrag","drag","onWindowResize","clientX","changedTouches","client","clientY","dragDataObject","lastDrag","limitWindow","getLimitWindow","limitY","min","minPointer","max","maxPointer","limitX","dragX","dragY","transform","scaleMultiplier","maxHeight","contStyleBottom","contStyleRight","pageXOffset","offSetToolbarY","offSetToolbarX","minPointerY","maxPointerY","minPointerX","maxPointerX","getScrollBarWidth","inner","outer","widthOuter","widthInner","sizeModified","hasScrollBar","inputField","portraitMode","second","defineProperty","varArgs","to","nextSource","nextKey","searchElement","fromIndex","o","k","abs","sameValueZero","rawPos","coreProperties","editMode","modalDialog","chemEditorParams","editionProperties","temporalImage","latexRange","editionStartTime","browser","serviceProviderProperties","_globalListeners","initialized","_initialized","setEnvironment","integrationEnvironment","setHeaders","headerObject","getModalDialog","serviceProviderListener","jsConfiguration","jsonConfiguration","addGlobalListener","beforeUpdateFormula","beforeUpdateEvent","insertFormula","focusElement","returnObject","insertElementOnSelection","fillNonLatexNode","afterUpdateEvent","afterUpdateFormula","placeCaretAfterNode","nodeDocument","setStartAfter","collapse","removeAllRanges","addRange","mathmlOrigin","editorSelection","deleteContents","splitText","select","insertNode","mathml_origin","elapsed_time","now","editor_origin","openModalDialog","selectedItem","getMathmlFromTextNode","latexResult","leftOffset","previousNode","moveToElementText","move","moveEnd","setStart","setEnd","defaultEditorAttributesArray","defaultEditorAttributes","tempAttribute","serverEditorParameters","clientEditorParameters","editorParameters","getCustomEditors","integrationModelProperties","configurationService","scriptName","callbackMethodArguments","editorObject","managesLanguage","integrationParameters","temporalImageResizing","core","getLanguage","callbackFunction","configurationIndex","subsTring","serviceParametersURI","getPath","setCore","offlineModal","offlineModalContent","offlineModalClose","offlineModalWarn","warnIcon","offlineModalMessage","offlineModalMessage1","offlineModalMessage2","modal","solutionTelemeter","isMoodle","M","lms","nam","fam","ver","moodleVersion","category","moodleCourseCategory","course","moodleCourseName","OSData","getOS","broswerData","getBrowser","detectedBrowser","versionBrowser","editorVersion","detectedOS","versionOS","filter","dry_run","api_key","macosPlatforms","windowsPlatforms","iosPlatforms","col","getVersion","setLanguage","getCore","setTarget","setEditorObject","openNewFormulaEditor","onLine","openExistingFormulaEditor","util","EditorUtils","addEvents","stopImmediatePropagation","removeEvents","getBrowserLanguage","userLanguage","currentInstance","WirisPlugin","CKEditor5Integration","ckeditorIntegrationModelProperties","integrationFolderName","languageObject","ui","addEditorListeners","wirislistenersdisabled","checkElement","newElement","sourceElement","wirisActive","isReadOnly","customEditorAttr","getCorePath","editing","insertMathml","model","change","writer","modelElementNew","fromEntries","getAttributes","viewSelection","modelPosition","mapper","toModelPosition","getLastPosition","insertObject","isCollapsed","getRanges","toModelRange","createPositionAfter","setSelection","viewElement","domConverter","domToView","modelElementOld","toModelElement","createPositionBefore","findText","pivot","createRangeIn","descendants","getItems","viewElementData","replaceAll","is","createPositionAt","latexEdited","dataOffset","second$","insertText","viewToDom","toViewElement","MathTypeCommand","Command","execute","options","integration","setEditor","openEditor","image","_getSelectedImage","rangeCount","getFirstRange","span","getChild","mapViewToDom","ChemTypeCommand","MathType","Plugin","requires","Widget","pluginName","_addIntegration","_addCommands","_addViews","_addSchema","_addConverters","_exposeWiris","integrationProperties","packageInfo","listenTo","evt","domEvent","detail","domTarget","stop","priority","commands","componentFactory","locale","ButtonView","label","mathIcon","on","chemIcon","addObserver","ClickObserver","schema","register","inheritAllFrom","allowAttributes","conversion","for","elementToElement","modelWriter","upcastDispatcher","conversionApi","consumable","viewItem","isLatex","mathIsLatex","processor","XmlDataProcessor","upcastWriter","UpcastWriter","viewDocumentFragment","getChildren","mathAttributes","toData","modelNode","createText","splitResult","splitToAllowedParent","modelCursor","consume","parts","getSplitParts","modelRange","cursorParent","getClassNames","htmlContent","math","semantics","child","createViewWidget","modelItem","viewWriter","widgetElement","createContainerElement","mathUIElement","createViewImage","toWidget","htmlDataProcessor","HtmlDataProcessor","imgElement","toView","mathString","imgHtml","createEmptyElement","renderUnsafeAttributes","createDataString","sourceNode","Exception","sourceMathElement","viewToModelPositionOutsideModelElement","hasClass","return","parsedResult","modifiedData","regexp","formulas","safexml","decodeXML"],"mappings":"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","x_google_ignoreList":[0]}