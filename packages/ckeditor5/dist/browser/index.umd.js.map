{"version":3,"file":"index.umd.js","sources":["../../../../node_modules/dompurify/dist/purify.es.mjs","../../../devkit/src/constants.js","../../../devkit/src/mathml.js","../../../devkit/src/configuration.js","../../../devkit/src/textcache.js","../../../devkit/src/listeners.js","../../../devkit/src/serviceprovider.js","../../../devkit/src/latex.js","../../../devkit/src/stringmanager.js","../../../devkit/src/util.js","../../../devkit/src/image.js","../../../devkit/src/accessibility.js","../../../devkit/src/parser.js","../../../devkit/src/editorlistener.js","../../../devkit/telemeter-wasm/telemeter_wasm.js","../../../devkit/src/telemeter.js","../../../devkit/src/contentmanager.js","../../../devkit/src/customeditors.js","../../../devkit/src/jsvariables.js","../../../devkit/src/event.js","../../../devkit/src/popupmessage.js","../../../devkit/src/focusprotection.js","../../../devkit/src/modal.js","../../../devkit/src/polyfills.js","../../../devkit/src/core.src.js","../../../devkit/src/integrationmodel.js","../../../devkit/src/md5.js","../../src/integration.js","../../src/commands.js","../../src/plugin.js"],"sourcesContent":["/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(func, thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    return func.apply(thisArg, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(Func) {\n  return function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return construct(Func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'search', 'section', 'select', 'shadow', 'slot', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'enterkeyhint', 'exportparts', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'inputmode', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'part', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'exportparts', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inert', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'part', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'slot', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'mask-type', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.3.0';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    }\n  }));\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!(EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function && EXTRA_ELEMENT_HANDLING.tagCheck(tagName)) && (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function && EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","/**\r\n * This class represents all the constants needed in a MathType integration among different classes.\r\n * If a constant should be used across different classes should be defined using attribute\r\n * accessors.\r\n */\r\nexport default class Constants {\r\n  /**\r\n   * Safe XML entities.\r\n   * @type {Object}\r\n   */\r\n  static get safeXmlCharactersEntities() {\r\n    return {\r\n      tagOpener: \"&laquo;\",\r\n      tagCloser: \"&raquo;\",\r\n      doubleQuote: \"&uml;\",\r\n      realDoubleQuote: \"&quot;\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Blackboard invalid safe characters.\r\n   * @type {Object}\r\n   */\r\n  static get safeBadBlackboardCharacters() {\r\n    return {\r\n      ltElement: \"«mo»<«/mo»\",\r\n      gtElement: \"«mo»>«/mo»\",\r\n      ampElement: \"«mo»&«/mo»\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Blackboard valid safe characters.\r\n   * @type{Object}\r\n   */\r\n  static get safeGoodBlackboardCharacters() {\r\n    return {\r\n      ltElement: \"«mo»§lt;«/mo»\",\r\n      gtElement: \"«mo»§gt;«/mo»\",\r\n      ampElement: \"«mo»§amp;«/mo»\",\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Standard XML special characters.\r\n   * @type {Object}\r\n   */\r\n  static get xmlCharacters() {\r\n    return {\r\n      id: \"xmlCharacters\",\r\n      tagOpener: \"<\", // Hex: \\x3C.\r\n      tagCloser: \">\", // Hex: \\x3E.\r\n      doubleQuote: '\"', // Hex: \\x22.\r\n      ampersand: \"&\", // Hex: \\x26.\r\n      quote: \"'\", // Hex: \\x27.\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Safe XML special characters. This characters are used instead the standard\r\n   * the standard to parse the  MathML if safeXML save mode is enable. Each XML\r\n   * special character have a UTF-8 representation.\r\n   * @type {Object}\r\n   */\r\n  static get safeXmlCharacters() {\r\n    return {\r\n      id: \"safeXmlCharacters\",\r\n      tagOpener: \"«\", // Hex: \\xAB.\r\n      tagCloser: \"»\", // Hex: \\xBB.\r\n      doubleQuote: \"¨\", // Hex: \\xA8.\r\n      ampersand: \"§\", // Hex: \\xA7.\r\n      quote: \"`\", // Hex: \\x60.\r\n      realDoubleQuote: \"¨\",\r\n    };\r\n  }\r\n}\r\n","import Constants from \"./constants\";\r\nimport Util from \"./util\";\r\n\r\n/**\r\n * @classdesc\r\n * This class represents a class to manage MathML objects.\r\n */\r\nexport default class MathML {\r\n  /**\r\n   * Checks if the mathml at position i is inside an HTML attribute or not.\r\n   * @param {string} content - a string containing MathML code.\r\n   * @param {number} i -  search index.\r\n   * @return {boolean} true if is inside an HTML attribute. false otherwise.\r\n   */\r\n  static isMathmlInAttribute(content, i) {\r\n    // Regex =\r\n    // '^[\\'\"][\\\\s]*=[\\\\s]*[\\\\w-]+([\\\\s]*(\"[^\"]*\"|\\'[^\\']*\\')[\\\\s]*\r\n    // =[\\\\s]*[\\\\w-]+[\\\\s]*)*[\\\\s]+gmi<';\r\n    const mathAtt = \"['\\\"][\\\\s]*=[\\\\s]*[\\\\w-]+\"; // \"=att OR '=att\r\n    const attContent = \"\\\"[^\\\"]*\\\"|'[^']*'\"; // \"blabla\" OR 'blabla'\r\n    const att = `[\\\\s]*(${attContent})[\\\\s]*=[\\\\s]*[\\\\w-]+[\\\\s]*`; // \"blabla\"=att OR 'blabla'=att\r\n    const atts = `('${att}')*`; // \"blabla\"=att1 \"blabla\"=att2\r\n    const regex = `^${mathAtt}${atts}[\\\\s]+gmi<`; // \"=att \"blabla\"=att1 \"blabla\"=att2 gmi< .\r\n    const expression = new RegExp(regex);\r\n\r\n    const actualContent = content.substring(0, i);\r\n    const reversed = actualContent.split(\"\").reverse().join(\"\");\r\n    const exists = expression.test(reversed);\r\n\r\n    return exists;\r\n  }\r\n\r\n  /**\r\n   * Decodes an encoded MathML with standard XML tags.\r\n   * We use these entities because IE doesn't support html entities\r\n   * on its attributes sometimes. Yes, sometimes.\r\n   * @param {string} input - string to be decoded.\r\n   * @return {string} decoded string.\r\n   */\r\n  static safeXmlDecode(input) {\r\n    let { tagOpener } = Constants.safeXmlCharactersEntities;\r\n    let { tagCloser } = Constants.safeXmlCharactersEntities;\r\n    let { doubleQuote } = Constants.safeXmlCharactersEntities;\r\n    let { realDoubleQuote } = Constants.safeXmlCharactersEntities;\r\n    // Decoding entities.\r\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\r\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\r\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\r\n    // Added to fix problem due to import from 1.9.x.\r\n    input = input.split(realDoubleQuote).join(Constants.safeXmlCharacters.realDoubleQuote);\r\n\r\n    // Blackboard.\r\n    const { ltElement } = Constants.safeBadBlackboardCharacters;\r\n    const { gtElement } = Constants.safeBadBlackboardCharacters;\r\n    const { ampElement } = Constants.safeBadBlackboardCharacters;\r\n    if (\"_wrs_blackboard\" in window && window._wrs_blackboard) {\r\n      input = input.split(ltElement).join(Constants.safeGoodBlackboardCharacters.ltElement);\r\n      input = input.split(gtElement).join(Constants.safeGoodBlackboardCharacters.gtElement);\r\n      input = input.split(ampElement).join(Constants.safeGoodBlackboardCharacters.ampElement);\r\n    }\r\n\r\n    ({ tagOpener } = Constants.safeXmlCharacters);\r\n    ({ tagCloser } = Constants.safeXmlCharacters);\r\n    ({ doubleQuote } = Constants.safeXmlCharacters);\r\n    ({ realDoubleQuote } = Constants.safeXmlCharacters);\r\n    const { ampersand } = Constants.safeXmlCharacters;\r\n    const { quote } = Constants.safeXmlCharacters;\r\n\r\n    // Decoding characters.\r\n    input = input.split(tagOpener).join(Constants.xmlCharacters.tagOpener);\r\n    input = input.split(tagCloser).join(Constants.xmlCharacters.tagCloser);\r\n    input = input.split(doubleQuote).join(Constants.xmlCharacters.doubleQuote);\r\n    input = input.split(ampersand).join(Constants.xmlCharacters.ampersand);\r\n    input = input.split(quote).join(Constants.xmlCharacters.quote);\r\n\r\n    // We are replacing $ by & when its part of an entity for retro-compatibility.\r\n    // Now, the standard is replace § by &.\r\n    let returnValue = \"\";\r\n    let currentEntity = null;\r\n\r\n    for (let i = 0; i < input.length; i += 1) {\r\n      const character = input.charAt(i);\r\n      if (currentEntity == null) {\r\n        if (character === \"$\") {\r\n          currentEntity = \"\";\r\n        } else {\r\n          returnValue += character;\r\n        }\r\n      } else if (character === \";\") {\r\n        returnValue += `&${currentEntity}`;\r\n        currentEntity = null;\r\n      } else if (character.match(/([a-zA-Z0-9#._-] | '-')/)) {\r\n        // Character is part of an entity.\r\n        currentEntity += character;\r\n      } else {\r\n        returnValue += `$${currentEntity}`; // Is not an entity.\r\n        currentEntity = null;\r\n        i -= 1; // Parse again the current character.\r\n      }\r\n    }\r\n\r\n    return returnValue;\r\n  }\r\n\r\n  /**\r\n   * Encodes a MathML with standard XML tags to a MMathML encoded with safe XML tags.\r\n   * We use these entities because IE doesn't support html entities on its attributes sometimes.\r\n   * @param {string} input - input string to be encoded\r\n   * @returns {string} encoded string.\r\n   */\r\n  static safeXmlEncode(input) {\r\n    const { tagOpener } = Constants.xmlCharacters;\r\n    const { tagCloser } = Constants.xmlCharacters;\r\n    const { doubleQuote } = Constants.xmlCharacters;\r\n    const { ampersand } = Constants.xmlCharacters;\r\n    const { quote } = Constants.xmlCharacters;\r\n\r\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\r\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\r\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\r\n    input = input.split(ampersand).join(Constants.safeXmlCharacters.ampersand);\r\n    input = input.split(quote).join(Constants.safeXmlCharacters.quote);\r\n\r\n    return input;\r\n  }\r\n\r\n  /**\r\n   * Converts special symbols (> 128) to entities and replaces all textual\r\n   * entities by its number entities.\r\n   * @param {string} mathml - MathML string containing - or not - special symbols\r\n   * @returns {string} MathML with all textual entities replaced.\r\n   */\r\n  static mathMLEntities(mathml) {\r\n    let toReturn = \"\";\r\n\r\n    for (let i = 0; i < mathml.length; i += 1) {\r\n      const character = mathml.charAt(i);\r\n\r\n      // Parsing > 128 characters.\r\n      if (mathml.codePointAt(i) > 128) {\r\n        toReturn += `&#${mathml.codePointAt(i)};`;\r\n        // For UTF-32 characters we need to move the index one position.\r\n        if (mathml.codePointAt(i) > 0xffff) {\r\n          i += 1;\r\n        }\r\n      } else if (character === \"&\") {\r\n        const end = mathml.indexOf(\";\", i + 1);\r\n        if (end >= 0) {\r\n          const container = document.createElement(\"span\");\r\n          container.innerHTML = mathml.substring(i, end + 1);\r\n          toReturn += `&#${Util.fixedCharCodeAt(container.textContent || container.innerText, 0)};`;\r\n          i = end;\r\n        } else {\r\n          toReturn += character;\r\n        }\r\n      } else {\r\n        toReturn += character;\r\n      }\r\n    }\r\n\r\n    return toReturn;\r\n  }\r\n\r\n  /**\r\n   * Add a custom editor name with the prefix wrs_ to a MathML class attribute.\r\n   * @param {string} mathml - a MathML string created with a custom editor, like chemistry.\r\n   * @param {string} customEditor - custom editor name.\r\n   * @returns {string} MathML string with his class containing the editor toolbar string.\r\n   */\r\n  static addCustomEditorClassAttribute(mathml, customEditor) {\r\n    let toReturn = \"\";\r\n\r\n    const start = mathml.indexOf(\"<math\");\r\n    if (start === 0) {\r\n      const end = mathml.indexOf(\">\");\r\n      if (mathml.indexOf(\"class\") === -1) {\r\n        // Adding custom editor type.\r\n        toReturn = `${mathml.substr(start, end)} class=\"wrs_${customEditor}\">`;\r\n        toReturn += mathml.substr(end + 1, mathml.length);\r\n        return toReturn;\r\n      }\r\n    }\r\n    return mathml;\r\n  }\r\n\r\n  /**\r\n   * Remove a custom editor name from the MathML class attribute.\r\n   * @param {string} mathml - a MathML string.\r\n   * @param {string} customEditor - custom editor name.\r\n   * @returns {string} The input MathML without customEditor name in his class.\r\n   */\r\n  static removeCustomEditorClassAttribute(mathml, customEditor) {\r\n    // Discard MathML without the specified class.\r\n    if (mathml.indexOf(\"class\") === -1 || mathml.indexOf(`wrs_${customEditor}`) === -1) {\r\n      return mathml;\r\n    }\r\n\r\n    // Trivial case: class attribute value equal to editor name. Then\r\n    // class attribute is removed.\r\n    // First try to remove it with a space before if there is one\r\n    // Otherwise without the space\r\n    if (mathml.indexOf(` class=\"wrs_${customEditor}\"`) !== -1) {\r\n      return mathml.replace(` class=\"wrs_${customEditor}\"`, \"\");\r\n    }\r\n    if (mathml.indexOf(`class=\"wrs_${customEditor}\"`) !== -1) {\r\n      return mathml.replace(`class=\"wrs_${customEditor}\"`, \"\");\r\n    }\r\n\r\n    // Non Trivial case: class attribute contains editor name.\r\n    return mathml.replace(`wrs_${customEditor}`, \"\");\r\n  }\r\n\r\n  /**\r\n   * Adds annotation tag in MathML element.\r\n   * @param {String} mathml - valid MathML.\r\n   * @param {String} content - value to put inside annotation tag.\r\n   * @param {String} annotationEncoding - annotation encoding.\r\n   * @returns {String} - 'mathml' with an annotation that contains\r\n   * 'content' and encoding 'encoding'.\r\n   */\r\n  static addAnnotation(mathml, content, annotationEncoding) {\r\n    // If contains annotation, also contains semantics tag.\r\n    const containsAnnotation = mathml.indexOf(\"<annotation\");\r\n\r\n    let mathmlWithAnnotation = \"\";\r\n    if (containsAnnotation !== -1) {\r\n      const closeSemanticsIndex = mathml.indexOf(\"</semantics>\");\r\n      mathmlWithAnnotation = `${mathml.substring(0, closeSemanticsIndex)}<annotation encoding=\"${annotationEncoding}\">${content}</annotation>${mathml.substring(closeSemanticsIndex)}`;\r\n    } else if (MathML.isEmpty(mathml)) {\r\n      const endIndexInline = mathml.indexOf(\"/>\");\r\n      const endIndexNonInline = mathml.indexOf(\">\");\r\n      const endIndex = endIndexNonInline === endIndexInline ? endIndexInline : endIndexNonInline;\r\n      mathmlWithAnnotation = `${mathml.substring(0, endIndex)}><semantics><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`;\r\n    } else {\r\n      const beginMathMLContent = mathml.indexOf(\">\") + 1;\r\n      const endMathmlContent = mathml.lastIndexOf(\"</math>\");\r\n      const mathmlContent = mathml.substring(beginMathMLContent, endMathmlContent);\r\n      mathmlWithAnnotation = `${mathml.substring(0, beginMathMLContent)}<semantics><mrow>${mathmlContent}</mrow><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`; // eslint-disable-line max-len\r\n    }\r\n\r\n    return mathmlWithAnnotation;\r\n  }\r\n\r\n  /**\r\n   * Removes specific annotation tag in MathML element.\r\n   * In case of remove the unique annotation, also is removed semantics tag.\r\n   * @param {String} mathml - valid MathML.\r\n   * @param {String} annotationEncoding - annotation encoding to remove.\r\n   * @returns {String} - 'mathml' without the annotation encoding specified.\r\n   */\r\n  static removeAnnotation(mathml, annotationEncoding) {\r\n    let mathmlWithoutAnnotation = mathml;\r\n    const openAnnotationTag = `<annotation encoding=\"${annotationEncoding}\">`;\r\n    const closeAnnotationTag = \"</annotation>\";\r\n    const startAnnotationIndex = mathml.indexOf(openAnnotationTag);\r\n    if (startAnnotationIndex !== -1) {\r\n      let differentAnnotationFound = false;\r\n      let differentAnnotationIndex = mathml.indexOf(\"<annotation\");\r\n      while (differentAnnotationIndex !== -1) {\r\n        if (differentAnnotationIndex !== startAnnotationIndex) {\r\n          differentAnnotationFound = true;\r\n        }\r\n        differentAnnotationIndex = mathml.indexOf(\"<annotation\", differentAnnotationIndex + 1);\r\n      }\r\n\r\n      if (differentAnnotationFound) {\r\n        const closeIndex = mathml.indexOf(closeAnnotationTag, startAnnotationIndex);\r\n        const endAnnotationIndex = closeIndex + closeAnnotationTag.length;\r\n        const startIndex = mathml.substring(0, startAnnotationIndex);\r\n        mathmlWithoutAnnotation = startIndex + mathml.substring(endAnnotationIndex);\r\n      } else {\r\n        mathmlWithoutAnnotation = MathML.removeSemantics(mathml);\r\n      }\r\n    }\r\n\r\n    return mathmlWithoutAnnotation;\r\n  }\r\n\r\n  /**\r\n   * Removes semantics tag to mathml.\r\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\r\n   * @param {string} mathml - MathML string.\r\n   * @returns {string} - 'mathml' without semantics tag.\r\n   */\r\n  static removeSemantics(mathml) {\r\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\r\n    const semanticsStartingTagRegex = /<semantics>\\s*?(<mrow>)?/gm;\r\n\r\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\r\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\r\n    const semanticsEndingTagRegex = /(<\\/mrow>)?\\s*<annotation[\\W\\w]*?<\\/semantics>/gm;\r\n\r\n    return mathml.replace(semanticsStartingTagRegex, \"\").replace(semanticsEndingTagRegex, \"\");\r\n  }\r\n\r\n  /**\r\n   * Removes semantics tag to element that contains mathml.\r\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\r\n   * @param {string} element - Inner HTML text string.\r\n   * @returns {string} - 'mathml' without semantics tag.\r\n   */\r\n  static removeSafeXMLSemantics(element) {\r\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\r\n    const semanticsSafeStartingTagRegex = /«semantics»\\s*?(«mrow»)?/gm;\r\n\r\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\r\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\r\n    const semanticsSafeEndingTagRegex = /(«\\/mrow»)?\\s*«annotation[\\W\\w]*?«\\/semantics»/gm;\r\n\r\n    return element.replace(semanticsSafeStartingTagRegex, \"\").replace(semanticsSafeEndingTagRegex, \"\");\r\n  }\r\n\r\n  /**\r\n   * Transforms all xml mathml occurrences that contain semantics to the same\r\n   * xml mathml occurrences without semantics.\r\n   * @param {string} text - string that can contain xml mathml occurrences.\r\n   * @param {Constants} [characters] - Constant object containing xmlCharacters\r\n   * or safeXmlCharacters relation.\r\n   * xmlCharacters by default.\r\n   * @returns {string} - 'text' with all xml mathml occurrences without annotation tag.\r\n   */\r\n  static removeSemanticsOcurrences(text, characters = Constants.xmlCharacters) {\r\n    const mathTagStart = `${characters.tagOpener}math`;\r\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\r\n    const mathTagEndline = `/${characters.tagCloser}`;\r\n    const { tagCloser } = characters;\r\n    const semanticsTagStart = `${characters.tagOpener}semantics${characters.tagCloser}`;\r\n    const annotationTagStart = `${characters.tagOpener}annotation encoding=`;\r\n\r\n    let output = \"\";\r\n    let start = text.indexOf(mathTagStart);\r\n    let end = 0;\r\n    while (start !== -1) {\r\n      output += text.substring(end, start);\r\n\r\n      // MathML can be written as '<math></math>' or '<math />'.\r\n      const mathTagEndIndex = text.indexOf(mathTagEnd, start);\r\n      const mathTagEndlineIndex = text.indexOf(mathTagEndline, start);\r\n      const firstTagCloser = text.indexOf(tagCloser, start);\r\n      if (mathTagEndIndex !== -1) {\r\n        end = mathTagEndIndex;\r\n      } else if (mathTagEndlineIndex === firstTagCloser - 1) {\r\n        end = mathTagEndlineIndex;\r\n      }\r\n\r\n      const semanticsIndex = text.indexOf(semanticsTagStart, start);\r\n      if (semanticsIndex !== -1) {\r\n        const mmlTagStart = text.substring(start, semanticsIndex);\r\n        const annotationIndex = text.indexOf(annotationTagStart, start);\r\n        if (annotationIndex !== -1) {\r\n          const startIndex = semanticsIndex + semanticsTagStart.length;\r\n          const mmlContent = text.substring(startIndex, annotationIndex);\r\n          output += mmlTagStart + mmlContent + mathTagEnd;\r\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\r\n          end += mathTagEnd.length;\r\n        } else {\r\n          end = start;\r\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\r\n        }\r\n      } else {\r\n        end = start;\r\n        start = text.indexOf(mathTagStart, start + mathTagStart.length);\r\n      }\r\n    }\r\n\r\n    output += text.substring(end, text.length);\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Returns true if a MathML contains a certain class.\r\n   * @param {string} mathML - input MathML.\r\n   * @param {string} className - className.\r\n   * @returns {boolean} true if the input MathML contains the input class.\r\n   * false otherwise.\r\n   * @static\r\n   */\r\n  static containClass(mathML, className) {\r\n    const classIndex = mathML.indexOf(\"class\");\r\n    if (classIndex === -1) {\r\n      return false;\r\n    }\r\n    const classTagEndIndex = mathML.indexOf(\">\", classIndex);\r\n    const classTag = mathML.substring(classIndex, classTagEndIndex);\r\n    if (classTag.indexOf(className) !== -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Returns true if mathml is empty. Otherwise, false.\r\n   * @param {string} mathml - valid MathML with standard XML tags.\r\n   * @returns {boolean} - true if mathml is empty. Otherwise, false.\r\n   */\r\n  static isEmpty(mathml) {\r\n    // MathML can have the shape <math></math> or '<math />'.\r\n    const closeTag = \">\";\r\n    const closeTagInline = \"/>\";\r\n    const firstCloseTagIndex = mathml.indexOf(closeTag);\r\n    const firstCloseTagInlineIndex = mathml.indexOf(closeTagInline);\r\n    let empty = false;\r\n    // MathML is always empty in the second shape.\r\n    if (firstCloseTagInlineIndex !== -1) {\r\n      if (firstCloseTagInlineIndex === firstCloseTagIndex - 1) {\r\n        empty = true;\r\n      }\r\n    }\r\n\r\n    // MathML is always empty in the first shape when there aren't elements\r\n    // between math tags.\r\n    if (!empty) {\r\n      const mathTagEndRegex = new RegExp(\"</(.+:)?math>\");\r\n      const mathTagEndArray = mathTagEndRegex.exec(mathml);\r\n      if (mathTagEndArray) {\r\n        empty = firstCloseTagIndex + 1 === mathTagEndArray.index;\r\n      }\r\n    }\r\n\r\n    return empty;\r\n  }\r\n\r\n  /**\r\n   * Encodes html entities inside properties.\r\n   * @param {String} mathml - valid MathML with standard XML tags.\r\n   * @returns {String} - 'mathml' with property entities encoded.\r\n   */\r\n  static encodeProperties(mathml) {\r\n    // Search all the properties.\r\n    const regex = /\\w+=\".*?\"/g;\r\n    // Encode html entities.\r\n    const replacer = (match) => {\r\n      // It has the shape:\r\n      // <math propertyOne=\"somethingOne\"><children propertyTwo=\"somethingTwo\"></children></math>.\r\n      const quoteIndex = match.indexOf('\"');\r\n      const propertyValue = match.substring(quoteIndex + 1, match.length - 1);\r\n      const propertyValueEncoded = Util.htmlEntities(propertyValue);\r\n      const matchEncoded = `${match.substring(0, quoteIndex + 1)}${propertyValueEncoded}\"`;\r\n      return matchEncoded;\r\n    };\r\n\r\n    const mathmlEncoded = mathml.replace(regex, replacer);\r\n    return mathmlEncoded;\r\n  }\r\n}\r\n","/**\r\n * This class represents the configuration class.\r\n * Usually used to retrieve configuration properties generated in the backend into the frontend.\r\n */\r\nexport default class Configuration {\r\n  /**\r\n   * Adds a properties object to {@link Configuration.properties}.\r\n   * @param {Object} properties - properties to append to current properties.\r\n   */\r\n  static addConfiguration(properties) {\r\n    Object.assign(Configuration.properties, properties);\r\n  }\r\n\r\n  /**\r\n   * Static property.\r\n   * The configuration properties object.\r\n   * @private\r\n   * @type {Object}\r\n   */\r\n  static get properties() {\r\n    return Configuration._properties;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set configuration properties.\r\n   * @param {Object} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set properties(value) {\r\n    Configuration._properties = value;\r\n  }\r\n\r\n  /**\r\n   * Returns the value of a property key.\r\n   * @param {String} key - Property key\r\n   * @returns {String} Property value\r\n   */\r\n  static get(key) {\r\n    if (!Object.prototype.hasOwnProperty.call(Configuration.properties, key)) {\r\n      // Backwards compatibility.\r\n      if (Object.prototype.hasOwnProperty.call(Configuration.properties, \"_wrs_conf_\")) {\r\n        return Configuration.properties[`_wrs_conf_${key}`];\r\n      }\r\n      return false;\r\n    }\r\n    return Configuration.properties[key];\r\n  }\r\n\r\n  /**\r\n   * Adds a new property to Configuration class.\r\n   * @param {String} key - Property key.\r\n   * @param {Object} value - Property value.\r\n   */\r\n  static set(key, value) {\r\n    Configuration.properties[key] = value;\r\n  }\r\n\r\n  /**\r\n   * Updates a property object value with new values.\r\n   * @param {String} key - The property key to be updated.\r\n   * @param {Object} propertyValue - Object containing the new values.\r\n   */\r\n  static update(key, propertyValue) {\r\n    if (!Configuration.get(key)) {\r\n      Configuration.set(key, propertyValue);\r\n    } else {\r\n      const updateProperty = Object.assign(Configuration.get(key), propertyValue);\r\n      Configuration.set(key, updateProperty);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Static properties object. Stores all configuration properties.\r\n * Needed to attribute accessors.\r\n * @private\r\n * @type {Object}\r\n */\r\nConfiguration._properties = {};\r\n","export default class TextCache {\r\n  /**\r\n   * @classdesc\r\n   * This class represent a client-side text cache class. Contains pairs of\r\n   * strings (key/value) which can be retrieved in any moment. Usually used\r\n   * to store AJAX responses for text services like mathml2latex\r\n   * (c.f {@link Latex} class) or mathml2accessible (c.f {@link Accessibility} class).\r\n   * @constructs\r\n   */\r\n  constructor() {\r\n    /**\r\n     * Cache array property storing the cache entries.\r\n     * @type {Array.<String>}\r\n     */\r\n    this.cache = [];\r\n  }\r\n\r\n  /**\r\n   * This method populates a key/value pair into the {@link this.cache} property.\r\n   * @param {String} key - Cache key, usually the service string parameter.\r\n   * @param {String} value - Cache value, usually the service response.\r\n   */\r\n  populate(key, value) {\r\n    this.cache[key] = value;\r\n  }\r\n\r\n  /**\r\n   * Returns the cache value associated to certain cache key.\r\n   * @param {String} key - Cache key, usually the service string parameter.\r\n   * @return {String} value - Cache value, if exists. False otherwise.\r\n   */\r\n  get(key) {\r\n    if (Object.prototype.hasOwnProperty.call(this.cache, key)) {\r\n      return this.cache[key];\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","/**\r\n * This object represents a custom listener.\r\n * @typedef {Object} Listener\r\n * @property {String} Listener.eventName - The listener name.\r\n * @property {Function} Listener.callback - The listener callback function.\r\n */\r\n\r\nexport default class Listeners {\r\n  /**\r\n   * @classdesc\r\n   * This class represents a custom listeners manager.\r\n   * @constructs\r\n   */\r\n  constructor() {\r\n    /**\r\n     * Array containing all custom listeners.\r\n     * @type {Object[]}\r\n     */\r\n    this.listeners = [];\r\n  }\r\n\r\n  /**\r\n   * Add a listener to Listener class.\r\n   * @param {Object} listener - A listener object.\r\n   */\r\n  add(listener) {\r\n    this.listeners.push(listener);\r\n  }\r\n\r\n  /**\r\n   * Fires MathType event listeners\r\n   * @param {String} eventName - event name\r\n   * @param {Event} event - event object.\r\n   * @return {boolean} false if event has been prevented. true otherwise.\r\n   */\r\n  fire(eventName, event) {\r\n    for (let i = 0; i < this.listeners.length && !event.cancelled; i += 1) {\r\n      if (this.listeners[i].eventName === eventName) {\r\n        // Calling listener.\r\n        this.listeners[i].callback(event);\r\n      }\r\n    }\r\n    return event.defaultPrevented;\r\n  }\r\n\r\n  /**\r\n   * Creates a new listener object.\r\n   * @param {string} eventName - Event name.\r\n   * @param {Object} callback - Callback function.\r\n   * @returns {object} the listener object.\r\n   */\r\n  static newListener(eventName, callback) {\r\n    const listener = {};\r\n    listener.eventName = eventName;\r\n    listener.callback = callback;\r\n    return listener;\r\n  }\r\n}\r\n","import Util from \"./util\";\r\nimport Listeners from \"./listeners\";\r\nimport Configuration from \"./configuration\";\r\n\r\n/**\r\n * @typedef {Object} ServiceProviderProperties\r\n * @property {String} URI - Service URI.\r\n * @property {String} server - Service server language.\r\n */\r\n\r\n/**\r\n * @classdesc\r\n * Class representing a serviceProvider. A serviceProvider is a class containing\r\n * an arbitrary number of services with the correspondent path.\r\n */\r\nexport default class ServiceProvider {\r\n  /**\r\n   * Returns Service Provider listeners.\r\n   * @type {Listeners}\r\n   */\r\n  static get listeners() {\r\n    return ServiceProvider._listeners;\r\n  }\r\n\r\n  /**\r\n   * Adds a {@link Listener} instance to {@link ServiceProvider} class.\r\n   * @param {Listener} listener - Instance of {@link Listener}.\r\n   */\r\n  static addListener(listener) {\r\n    ServiceProvider.listeners.add(listener);\r\n  }\r\n\r\n  /**\r\n   * Fires events in Service Provider.\r\n   * @param {String} eventName - Event name.\r\n   * @param {Event} event - Event object.\r\n   */\r\n  static fireEvent(eventName, event) {\r\n    ServiceProvider.listeners.fire(eventName, event);\r\n  }\r\n\r\n  /**\r\n   * Service parameters.\r\n   * @type {ServiceProviderProperties}\r\n   *\r\n   */\r\n  static get parameters() {\r\n    return ServiceProvider._parameters;\r\n  }\r\n\r\n  /**\r\n   * Service parameters.\r\n   * @private\r\n   * @type {ServiceProviderProperties}\r\n   */\r\n  static set parameters(parameters) {\r\n    ServiceProvider._parameters = parameters;\r\n  }\r\n\r\n  /**\r\n   * Static property.\r\n   * Return service provider paths.\r\n   * @private\r\n   * @type {String}\r\n   */\r\n  static get servicePaths() {\r\n    return ServiceProvider._servicePaths;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set service paths.\r\n   * @param {String} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set servicePaths(value) {\r\n    ServiceProvider._servicePaths = value;\r\n  }\r\n\r\n  /**\r\n   * Adds a new service to the ServiceProvider.\r\n   * @param {String} service - Service name.\r\n   * @param {String} path - Service path.\r\n   * @static\r\n   */\r\n  static setServicePath(service, path) {\r\n    ServiceProvider.servicePaths[service] = path;\r\n  }\r\n\r\n  /**\r\n   * Returns the service path for a certain service.\r\n   * @param {String} serviceName - Service name.\r\n   * @returns {String} The service path.\r\n   * @static\r\n   */\r\n  static getServicePath(serviceName) {\r\n    return ServiceProvider.servicePaths[serviceName];\r\n  }\r\n\r\n  /**\r\n   * Static property.\r\n   * Service provider integration path.\r\n   * @type {String}\r\n   */\r\n  static get integrationPath() {\r\n    return ServiceProvider._integrationPath;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set service provider integration path.\r\n   * @param {String} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set integrationPath(value) {\r\n    ServiceProvider._integrationPath = value;\r\n  }\r\n\r\n  /**\r\n   * Returns the server URL in the form protocol://serverName:serverPort.\r\n   * @return {String} The client side server path.\r\n   */\r\n  static getServerURL() {\r\n    const url = window.location.href;\r\n    const arr = url.split(\"/\");\r\n    const result = `${arr[0]}//${arr[2]}`;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Inits {@link this} class. Uses {@link this.integrationPath} as\r\n   * base path to generate all backend services paths.\r\n   * @param {Object} parameters - Function parameters.\r\n   * @param {String} parameters.integrationPath - Service path.\r\n   */\r\n  static init(parameters) {\r\n    ServiceProvider.parameters = parameters;\r\n    // Services path (tech dependant).\r\n    let configurationURI = ServiceProvider.createServiceURI(\"configurationjs\");\r\n    let createImageURI = ServiceProvider.createServiceURI(\"createimage\");\r\n    let showImageURI = ServiceProvider.createServiceURI(\"showimage\");\r\n    let getMathMLURI = ServiceProvider.createServiceURI(\"getmathml\");\r\n    let serviceURI = ServiceProvider.createServiceURI(\"service\");\r\n\r\n    // Some backend integrations (like Java o Ruby) have an absolute backend path,\r\n    // for example: /app/service. For them we calculate the absolute URL path, i.e\r\n    // protocol://domain:port/app/service\r\n    if (ServiceProvider.parameters.URI.indexOf(\"/\") === 0) {\r\n      const serverPath = ServiceProvider.getServerURL();\r\n      configurationURI = serverPath + configurationURI;\r\n      showImageURI = serverPath + showImageURI;\r\n      createImageURI = serverPath + createImageURI;\r\n      getMathMLURI = serverPath + getMathMLURI;\r\n      serviceURI = serverPath + serviceURI;\r\n    }\r\n\r\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\r\n    ServiceProvider.setServicePath(\"showimage\", showImageURI);\r\n    ServiceProvider.setServicePath(\"createimage\", createImageURI);\r\n    ServiceProvider.setServicePath(\"service\", serviceURI);\r\n    ServiceProvider.setServicePath(\"getmathml\", getMathMLURI);\r\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\r\n\r\n    ServiceProvider.listeners.fire(\"onInit\", {});\r\n  }\r\n\r\n  /**\r\n   * Gets the content from an URL.\r\n   * @param {String} url - Target URL.\r\n   * @param {Object} [postVariables] - Object containing post variables.\r\n   * null if a GET query should be done.\r\n   * @returns {String} Content of the target URL.\r\n   * @private\r\n   * @static\r\n   */\r\n  static getUrl(url, postVariables) {\r\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\r\n    const httpRequest = Util.createHttpRequest();\r\n\r\n    if (httpRequest) {\r\n      if (typeof postVariables === \"undefined\" || typeof postVariables === \"undefined\") {\r\n        httpRequest.open(\"GET\", url, false);\r\n      } else if (url.substr(0, 1) === \"/\" || url.substr(0, 7) === \"http://\" || url.substr(0, 8) === \"https://\") {\r\n        httpRequest.open(\"POST\", url, false);\r\n      } else {\r\n        httpRequest.open(\"POST\", currentPath + url, false);\r\n      }\r\n\r\n      let header = Configuration.get(\"customHeaders\");\r\n      if (header) {\r\n        if (typeof header === \"string\") {\r\n          header = Util.convertStringToObject(header);\r\n        }\r\n        Object.entries(header).forEach(([key, val]) => httpRequest.setRequestHeader(key, val));\r\n      }\r\n\r\n      if (typeof postVariables !== \"undefined\" && postVariables) {\r\n        httpRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\r\n        httpRequest.send(Util.httpBuildQuery(postVariables));\r\n      } else {\r\n        httpRequest.send(null);\r\n      }\r\n\r\n      return httpRequest.responseText;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Returns the response text of a certain service.\r\n   * @param {String} service - Service name.\r\n   * @param {String} postVariables - Post variables.\r\n   * @param {Boolean} get - True if the request is GET instead of POST. false otherwise.\r\n   * @returns {String} Service response text.\r\n   */\r\n  static getService(service, postVariables, get) {\r\n    let response;\r\n    if (get === true) {\r\n      const getVariables = postVariables ? `?${postVariables}` : \"\";\r\n      const serviceUrl = `${ServiceProvider.getServicePath(service)}${getVariables}`;\r\n      response = ServiceProvider.getUrl(serviceUrl);\r\n    } else {\r\n      const serviceUrl = ServiceProvider.getServicePath(service);\r\n      response = ServiceProvider.getUrl(serviceUrl, postVariables);\r\n    }\r\n    return response;\r\n  }\r\n\r\n  /**\r\n   * Returns the server language of a certain service. The possible values\r\n   * are: php, aspx, java and ruby.\r\n   * This method has backward compatibility purposes.\r\n   * @param {String} service - The configuration service.\r\n   * @returns {String} - The server technology associated with the configuration service.\r\n   */\r\n  static getServerLanguageFromService(service) {\r\n    if (service.indexOf(\".php\") !== -1) {\r\n      return \"php\";\r\n    }\r\n    if (service.indexOf(\".aspx\") !== -1) {\r\n      return \"aspx\";\r\n    }\r\n    if (service.indexOf(\"wirispluginengine\") !== -1) {\r\n      return \"ruby\";\r\n    }\r\n    return \"java\";\r\n  }\r\n\r\n  /**\r\n   * Returns the URI associated with a certain service.\r\n   * @param {String} service - The service name.\r\n   * @return {String} The service path.\r\n   */\r\n  static createServiceURI(service) {\r\n    const extension = ServiceProvider.serverExtension();\r\n    return Util.concatenateUrl(ServiceProvider.parameters.URI, service) + extension;\r\n  }\r\n\r\n  static serverExtension() {\r\n    if (ServiceProvider.parameters.server.indexOf(\"php\") !== -1) {\r\n      return \".php\";\r\n    }\r\n    if (ServiceProvider.parameters.server.indexOf(\"aspx\") !== -1) {\r\n      return \".aspx\";\r\n    }\r\n    return \"\";\r\n  }\r\n}\r\n\r\n/**\r\n * @property {String} service - The service name.\r\n * @property {String} path - The service path.\r\n * @static\r\n */\r\nServiceProvider._servicePaths = {};\r\n\r\n/**\r\n * The integration path. Contains the path of the configuration service.\r\n * Used to define the path for all services.\r\n * @type {String}\r\n * @private\r\n */\r\nServiceProvider._integrationPath = \"\";\r\n\r\n/**\r\n * ServiceProvider static listeners.\r\n * @type {Listeners}\r\n * @private\r\n */\r\nServiceProvider._listeners = new Listeners();\r\n\r\n/**\r\n * Service provider parameters.\r\n * @type {ServiceProviderParameters}\r\n */\r\nServiceProvider._parameters = {};\r\n","import TextCache from \"./textcache\";\r\nimport MathML from \"./mathml\";\r\nimport ServiceProvider from \"./serviceprovider\";\r\nimport Constants from \"./constants\";\r\nimport Util from \"./util\";\r\n\r\n/**\r\n * @classdesc\r\n * This class represents a LaTeX parser. Manages the services which allows to convert\r\n * LaTeX into MathML and MathML into LaTeX.\r\n */\r\nexport default class Latex {\r\n  /**\r\n   * Static property.\r\n   * Return latex cache.\r\n   * @private\r\n   * @type {Cache}\r\n   */\r\n  static get cache() {\r\n    return Latex._cache;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set latex cache.\r\n   * @param {Cache} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set cache(value) {\r\n    Latex._cache = value;\r\n  }\r\n\r\n  /**\r\n   * Converts MathML to LaTeX by calling mathml2latex service. For text services\r\n   * we call a text service with the param mathml2latex.\r\n   * @param {String} mathml - MathML String.\r\n   * @return {String} LaTeX string generated by the MathML argument.\r\n   */\r\n  static getLatexFromMathML(mathml) {\r\n    const mathmlWithoutSemantics = MathML.removeSemantics(mathml);\r\n    /**\r\n     * @type {TextCache}\r\n     */\r\n    const { cache } = Latex;\r\n\r\n    const data = {\r\n      service: \"mathml2latex\",\r\n      mml: mathmlWithoutSemantics,\r\n    };\r\n\r\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\r\n\r\n    // TODO: Error handling.\r\n    let latex = \"\";\r\n\r\n    if (jsonResponse.status === \"ok\") {\r\n      latex = jsonResponse.result.text;\r\n      const latexHtmlEntitiesEncoded = Util.htmlEntities(latex);\r\n      // Inserting LaTeX semantics.\r\n      const mathmlWithSemantics = MathML.addAnnotation(mathml, latexHtmlEntitiesEncoded, \"LaTeX\");\r\n      cache.populate(latex, mathmlWithSemantics);\r\n    }\r\n\r\n    return latex;\r\n  }\r\n\r\n  /**\r\n   * Converts LaTeX to MathML by calling latex2mathml service. For text services\r\n   * we call a text service with the param latex2mathml.\r\n   * @param {String} latex - String containing a LaTeX formula.\r\n   * @param {Boolean} includeLatexOnSemantics\r\n   * - If true LaTeX would me included into MathML semantics.\r\n   * @return {String} MathML string generated by the LaTeX argument.\r\n   */\r\n  static getMathMLFromLatex(latex, includeLatexOnSemantics) {\r\n    /**\r\n     * @type {TextCache}\r\n     */\r\n    const latexCache = Latex.cache;\r\n\r\n    if (Latex.cache.get(latex)) {\r\n      return Latex.cache.get(latex);\r\n    }\r\n    const data = {\r\n      service: \"latex2mathml\",\r\n      latex,\r\n    };\r\n\r\n    if (includeLatexOnSemantics) {\r\n      data.saveLatex = \"\";\r\n    }\r\n\r\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\r\n\r\n    let output;\r\n    if (jsonResponse.status === \"ok\") {\r\n      let mathml = jsonResponse.result.text;\r\n      mathml = mathml.split(\"\\r\").join(\"\").split(\"\\n\").join(\" \");\r\n\r\n      // Populate LatexCache.\r\n      if (mathml.indexOf(\"semantics\") === -1 && mathml.indexOf(\"annotation\") === -1) {\r\n        const content = Util.htmlEntities(latex);\r\n        mathml = MathML.addAnnotation(mathml, content, \"LaTeX\");\r\n        output = mathml;\r\n      } else {\r\n        output = mathml;\r\n      }\r\n      if (!latexCache.get(latex)) {\r\n        latexCache.populate(latex, mathml);\r\n      }\r\n    } else {\r\n      output = `$$${latex}$$`;\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Converts all occurrences of MathML code to LaTeX.\r\n   * The MathML code should containing <annotation encoding=\"LaTeX\"/> to be converted.\r\n   * @param {String} content - A string containing MathML valid code.\r\n   * @param {Object} characters - An object containing special characters.\r\n   * @return {String} A string containing all MathML annotated occurrences\r\n   * replaced by the corresponding LaTeX code.\r\n   */\r\n  static parseMathmlToLatex(content, characters) {\r\n    let output = \"\";\r\n    const mathTagBegin = `${characters.tagOpener}math`;\r\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\r\n    const openTarget = `${characters.tagOpener}annotation encoding=${characters.doubleQuote}LaTeX${characters.doubleQuote}${characters.tagCloser}`;\r\n    const closeTarget = `${characters.tagOpener}/annotation${characters.tagCloser}`;\r\n    let start = content.indexOf(mathTagBegin);\r\n    let end = 0;\r\n    let mathml;\r\n    let startAnnotation;\r\n    let closeAnnotation;\r\n\r\n    while (start !== -1) {\r\n      output += content.substring(end, start);\r\n      end = content.indexOf(mathTagEnd, start);\r\n\r\n      if (end === -1) {\r\n        end = content.length - 1;\r\n      } else {\r\n        end += mathTagEnd.length;\r\n      }\r\n\r\n      mathml = content.substring(start, end);\r\n\r\n      startAnnotation = mathml.indexOf(openTarget);\r\n      if (startAnnotation !== -1) {\r\n        startAnnotation += openTarget.length;\r\n        closeAnnotation = mathml.indexOf(closeTarget);\r\n        let latex = mathml.substring(startAnnotation, closeAnnotation);\r\n        if (characters === Constants.safeXmlCharacters) {\r\n          latex = MathML.safeXmlDecode(latex);\r\n        }\r\n        output += `$$${latex}$$`;\r\n        // Populate latex into cache.\r\n\r\n        Latex.cache.populate(latex, mathml);\r\n      } else {\r\n        output += mathml;\r\n      }\r\n      start = content.indexOf(mathTagBegin, end);\r\n    }\r\n\r\n    output += content.substring(end, content.length);\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Extracts the latex of a determined position in a text.\r\n   * @param {Node} textNode - textNode to extract the LaTeX\r\n   * @param {Number} caretPosition - Starting position to find LaTeX.\r\n   * @param {Object} latexTags - Optional parameter representing tags between latex is inserted.\r\n   * It has the 'open' attribute for the open tag and the 'close' attribute for the close tag.\r\n   * \"$$\" by default.\r\n   * @return {Object} An object with 3 keys: 'latex', 'start' and 'end'. Null if latex is not found.\r\n   * @static\r\n   */\r\n  static getLatexFromTextNode(textNode, caretPosition, latexTags) {\r\n    // TODO: Set LaTeX Tags as Core variable. Fix the call to this function (third argument).\r\n    // Tags used for LaTeX formulas.\r\n    const defaultLatexTags = {\r\n      open: \"$$\",\r\n      close: \"$$\",\r\n    };\r\n    // latexTags is an optional parameter. If is not set, use default latexTags.\r\n    if (typeof latexTags === \"undefined\" || latexTags == null) {\r\n      latexTags = defaultLatexTags;\r\n    }\r\n    // Looking for the first textNode.\r\n    let startNode = textNode;\r\n\r\n    while (startNode.previousSibling && startNode.previousSibling.nodeType === 3) {\r\n      // TEXT_NODE.\r\n      startNode = startNode.previousSibling;\r\n    }\r\n\r\n    /**\r\n     * Returns the next latex position and node from a specific node and position.\r\n     * @param {Node} currentNode - Node where searching latex.\r\n     * @param {Number} currentPosition - Current position inside the currentNode.\r\n     * @param {Object} latexTagsToUse - Tags used at latex beginning and latex final.\r\n     * \"$$\" by default.\r\n     * @param {Boolean} tag - Tag containing the current search.\r\n     * @returns {Object} Object containing the current node and the position.\r\n     */\r\n    function getNextLatexPosition(currentNode, currentPosition, tag) {\r\n      let position = currentNode.nodeValue.indexOf(tag, currentPosition);\r\n\r\n      while (position === -1) {\r\n        currentNode = currentNode.nextSibling;\r\n\r\n        if (!currentNode) {\r\n          // TEXT_NODE.\r\n          return null; // Not found.\r\n        }\r\n\r\n        position = currentNode.nodeValue ? currentNode.nodeValue.indexOf(latexTags.close) : -1;\r\n      }\r\n\r\n      return {\r\n        node: currentNode,\r\n        position,\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Determines if a node is previous, or not, to a second one.\r\n     * @param {Node} node - Start node.\r\n     * @param {Number} position - Start node position.\r\n     * @param {Node} endNode - End node.\r\n     * @param {Number} endPosition - End node position.\r\n     * @returns {Boolean} True if the starting node is previous thant the en node. false otherwise.\r\n     */\r\n    function isPrevious(node, position, endNode, endPosition) {\r\n      if (node === endNode) {\r\n        return position <= endPosition;\r\n      }\r\n      while (node && node !== endNode) {\r\n        node = node.nextSibling;\r\n      }\r\n\r\n      return node === endNode;\r\n    }\r\n\r\n    let start;\r\n    let end = {\r\n      node: startNode,\r\n      position: 0,\r\n    };\r\n    // Is supposed that open and close tags has the same length.\r\n    const tagLength = latexTags.open.length;\r\n    do {\r\n      start = getNextLatexPosition(end.node, end.position, latexTags.open);\r\n\r\n      if (start == null || isPrevious(textNode, caretPosition, start.node, start.position)) {\r\n        return null;\r\n      }\r\n\r\n      end = getNextLatexPosition(start.node, start.position + tagLength, latexTags.close);\r\n\r\n      if (end == null) {\r\n        return null;\r\n      }\r\n\r\n      end.position += tagLength;\r\n    } while (isPrevious(end.node, end.position, textNode, caretPosition));\r\n\r\n    // Isolating latex.\r\n    let latex;\r\n\r\n    if (start.node === end.node) {\r\n      latex = start.node.nodeValue.substring(start.position + tagLength, end.position - tagLength);\r\n    } else {\r\n      const index = start.position + tagLength;\r\n      latex = start.node.nodeValue.substring(index, start.node.nodeValue.length);\r\n      let currentNode = start.node;\r\n\r\n      do {\r\n        currentNode = currentNode.nextSibling;\r\n        if (currentNode === end.node) {\r\n          latex += end.node.nodeValue.substring(0, end.position - tagLength);\r\n        } else {\r\n          latex += currentNode.nodeValue ? currentNode.nodeValue : \"\";\r\n        }\r\n      } while (currentNode !== end.node);\r\n    }\r\n\r\n    return {\r\n      latex,\r\n      startNode: start.node,\r\n      startPosition: start.position,\r\n      endNode: end.node,\r\n      endPosition: end.position,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Text cache. Stores all processed LaTeX strings and it's correspondent MathML string.\r\n * @type {Cache}\r\n * @static\r\n */\r\nLatex._cache = new TextCache();\r\n","import translations from \"../lang/strings.json\";\r\n/**\r\n * This class represents a string manager. It's used to load localized strings.\r\n */\r\nexport default class StringManager {\r\n  constructor() {\r\n    throw new Error(\"Static class StringManager can not be instantiated.\");\r\n  }\r\n\r\n  /**\r\n   * Returns the associated value of certain string key. If the associated value\r\n   * doesn't exits returns the original key.\r\n   * @param {string} key - string key\r\n   * @param {string} lang - DEFAULT = null. Specify the language to translate the string\r\n   * @returns {string} correspondent value. If doesn't exists original key.\r\n   */\r\n  static get(key, lang) {\r\n    // Default language definition\r\n    let { language } = this;\r\n\r\n    // If parameter language, use it\r\n    if (lang) {\r\n      language = lang;\r\n    }\r\n\r\n    // Cut down on strings. e.g. en_US -> en\r\n    if (language && language.length > 2) {\r\n      language = language.slice(0, 2);\r\n    }\r\n\r\n    // Check if we support the language\r\n    if (!this.strings.hasOwnProperty(language)) {\r\n      // eslint-disable-line no-prototype-builtins\r\n      console.warn(`Unknown language ${language} set in StringManager.`);\r\n      language = \"en\";\r\n    }\r\n\r\n    // Check if the key is supported in the given language\r\n    if (!this.strings[language].hasOwnProperty(key)) {\r\n      // eslint-disable-line no-prototype-builtins\r\n      console.warn(`Unknown key ${key} for language ${language} in StringManager.`);\r\n      return key;\r\n    }\r\n\r\n    return this.strings[language][key];\r\n  }\r\n}\r\n\r\n/**\r\n * Dictionary of dictionaries:\r\n * Key: language code\r\n * Value: Key: id of the string\r\n *        Value: translation of the string\r\n */\r\nStringManager.strings = translations;\r\n\r\n/**\r\n * Language of the translations; English by default\r\n */\r\nStringManager.language = \"en\";\r\n","/* eslint-disable no-bitwise */\r\nimport DOMPurify from \"dompurify\";\r\nimport MathML from \"./mathml\";\r\nimport Configuration from \"./configuration\";\r\nimport Latex from \"./latex\";\r\nimport StringManager from \"./stringmanager\";\r\n\r\n/**\r\n * This class represents an utility class.\r\n */\r\nexport default class Util {\r\n  /**\r\n   * Fires an event in a target.\r\n   * @param {EventTarget} eventTarget - target where event should be fired.\r\n   * @param {string} eventName event to fire.\r\n   * @static\r\n   */\r\n  static fireEvent(eventTarget, eventName) {\r\n    if (document.createEvent) {\r\n      const eventObject = document.createEvent(\"HTMLEvents\");\r\n      eventObject.initEvent(eventName, true, true);\r\n      return !eventTarget.dispatchEvent(eventObject);\r\n    }\r\n\r\n    const eventObject = document.createEventObject();\r\n    return eventTarget.fireEvent(`on${eventName}`, eventObject);\r\n  }\r\n\r\n  /**\r\n   * Cross-browser addEventListener/attachEvent function.\r\n   * @param {EventTarget} eventTarget - target to add the event.\r\n   * @param {string} eventName - specifies the type of event.\r\n   * @param {Function} callBackFunction - callback function.\r\n   * @static\r\n   */\r\n  static addEvent(eventTarget, eventName, callBackFunction) {\r\n    if (eventTarget.addEventListener) {\r\n      eventTarget.addEventListener(eventName, callBackFunction, true);\r\n    } else if (eventTarget.attachEvent) {\r\n      // Backwards compatibility.\r\n      eventTarget.attachEvent(`on${eventName}`, callBackFunction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cross-browser removeEventListener/detachEvent function.\r\n   * @param {EventTarget} eventTarget - target to add the event.\r\n   * @param {string} eventName - specifies the type of event.\r\n   * @param {Function} callBackFunction - function to remove from the event target.\r\n   * @static\r\n   */\r\n  static removeEvent(eventTarget, eventName, callBackFunction) {\r\n    if (eventTarget.removeEventListener) {\r\n      eventTarget.removeEventListener(eventName, callBackFunction, true);\r\n    } else if (eventTarget.detachEvent) {\r\n      eventTarget.detachEvent(`on${eventName}`, callBackFunction);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A map from event target to event handlers so we can remove the event\r\n   * listeners in removeElementEvents\r\n   *\r\n   * @type {Map<EventTarget, Object>}\r\n   * @static\r\n   */\r\n  static elementEventsMap = new Map();\r\n\r\n  /**\r\n   * Adds the a callback function, for a certain event target, to the following event types:\r\n   * - dblclick\r\n   * - mousedown\r\n   * - mouseup\r\n   * @param {EventTarget} eventTarget - event target.\r\n   * @param {Function} doubleClickHandler - function to run when on dblclick event.\r\n   * @param {Function} mousedownHandler - function to run when on mousedown event.\r\n   * @param {Function} mouseupHandler - function to run when on mouseup event.\r\n   * @static\r\n   */\r\n  static addElementEvents(eventTarget, doubleClickHandler, mousedownHandler, mouseupHandler) {\r\n    // Make sure not to leak event listeners if we've already added events to\r\n    // this element\r\n    Util.removeElementEvents(eventTarget);\r\n\r\n    let entry = {};\r\n    Util.elementEventsMap.set(eventTarget, entry);\r\n\r\n    if (doubleClickHandler) {\r\n      entry.callbackDblclick = (event) => {\r\n        const realEvent = event || window.event;\r\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\r\n        doubleClickHandler(element, realEvent);\r\n      };\r\n\r\n      Util.addEvent(eventTarget, \"dblclick\", entry.callbackDblclick);\r\n    }\r\n\r\n    if (mousedownHandler) {\r\n      entry.callbackMousedown = (event) => {\r\n        const realEvent = event || window.event;\r\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\r\n        mousedownHandler(element, realEvent);\r\n      };\r\n\r\n      Util.addEvent(eventTarget, \"mousedown\", entry.callbackMousedown);\r\n    }\r\n\r\n    if (mouseupHandler) {\r\n      entry.callbackMouseup = (event) => {\r\n        const realEvent = event || window.event;\r\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\r\n        mouseupHandler(element, realEvent);\r\n      };\r\n      // Chrome doesn't trigger this event for eventTarget if we release the mouse button\r\n      // while the mouse is outside the editor text field.\r\n      // This is a workaround: we trigger the event independently of where the mouse\r\n      // is when we release its button.\r\n      Util.addEvent(document, \"mouseup\", entry.callbackMouseup);\r\n      Util.addEvent(eventTarget, \"mouseup\", entry.callbackMouseup);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove all callback function, for a certain event target, to the following event types:\r\n   * - dblclick\r\n   * - mousedown\r\n   * - mouseup\r\n   * @param {EventTarget} eventTarget - event target.\r\n   * @static\r\n   */\r\n  static removeElementEvents(eventTarget) {\r\n    let entry = Util.elementEventsMap.get(eventTarget);\r\n    if (!entry) {\r\n      return;\r\n    }\r\n\r\n    Util.elementEventsMap.delete(eventTarget);\r\n\r\n    Util.removeEvent(eventTarget, \"dblclick\", entry.callbackDblclick);\r\n    Util.removeEvent(eventTarget, \"mousedown\", entry.callbackMousedown);\r\n    Util.removeEvent(document, \"mouseup\", entry.callbackMouseup);\r\n    Util.removeEvent(eventTarget, \"mouseup\", entry.callbackMouseup);\r\n  }\r\n\r\n  /**\r\n   * Adds a class name to a HTMLElement.\r\n   * @param {HTMLElement} element - the HTML element.\r\n   * @param {string} className - the class name.\r\n   * @static\r\n   */\r\n  static addClass(element, className) {\r\n    if (!Util.containsClass(element, className)) {\r\n      element.className += ` ${className}`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks if a HTMLElement contains a certain class.\r\n   * @param {HTMLElement} element - the HTML element.\r\n   * @param {string} className - the className.\r\n   * @returns {boolean} true if the HTMLElement contains the class name. false otherwise.\r\n   * @static\r\n   */\r\n  static containsClass(element, className) {\r\n    if (element == null || !(\"className\" in element)) {\r\n      return false;\r\n    }\r\n\r\n    const currentClasses = element.className.split(\" \");\r\n\r\n    for (let i = currentClasses.length - 1; i >= 0; i -= 1) {\r\n      if (currentClasses[i] === className) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove a certain class for a HTMLElement.\r\n   * @param {HTMLElement} element - the HTML element.\r\n   * @param {string} className - the class name.\r\n   * @static\r\n   */\r\n  static removeClass(element, className) {\r\n    let newClassName = \"\";\r\n    const classes = element.className.split(\" \");\r\n\r\n    for (let i = 0; i < classes.length; i += 1) {\r\n      if (classes[i] !== className) {\r\n        newClassName += `${classes[i]} `;\r\n      }\r\n    }\r\n    element.className = newClassName.trim();\r\n  }\r\n\r\n  /**\r\n   * Converts old xml initial text attribute (with «») to the correct one(with §lt;§gt;). It's\r\n   * used to parse old applets.\r\n   * @param {string} text - string containing safeXml characters\r\n   * @returns {string} a string with safeXml characters parsed.\r\n   * @static\r\n   */\r\n  static convertOldXmlinitialtextAttribute(text) {\r\n    // Used to fix a bug with Cas imported from Moodle 1.9 to Moodle 2.x.\r\n    // This could be removed in future.\r\n    const val = \"value=\";\r\n\r\n    const xitpos = text.indexOf(\"xmlinitialtext\");\r\n    const valpos = text.indexOf(val, xitpos);\r\n    const quote = text.charAt(valpos + val.length);\r\n    const startquote = valpos + val.length + 1;\r\n    const endquote = text.indexOf(quote, startquote);\r\n\r\n    const value = text.substring(startquote, endquote);\r\n\r\n    let newvalue = value.split(\"«\").join(\"§lt;\");\r\n    newvalue = newvalue.split(\"»\").join(\"§gt;\");\r\n    newvalue = newvalue.split(\"&\").join(\"§\");\r\n    newvalue = newvalue.split(\"¨\").join(\"§quot;\");\r\n\r\n    text = text.split(value).join(newvalue);\r\n    return text;\r\n  }\r\n\r\n  /**\r\n   * Convert a string representation of key-value pairs to an object.\r\n   * @param {string} keyValueString - String with key-value pairs in the format key1='value1', key2='value2'\r\n   * @returns {Object} - Object containing the key-value pairs\r\n   */\r\n  static convertStringToObject(keyValueString) {\r\n    if (!keyValueString || typeof keyValueString !== \"string\") {\r\n      return {};\r\n    }\r\n\r\n    return keyValueString\r\n      .split(\",\")\r\n      .map((pair) => pair.trim().split(\"=\"))\r\n      .reduce((resultObject, [key, value]) => {\r\n        if (key && value) {\r\n          resultObject[key] = value;\r\n        }\r\n        return resultObject;\r\n      }, {});\r\n  }\r\n\r\n  /**\r\n   * Cross-browser solution for creating new elements.\r\n   * @param {string} tagName - tag name of the wished element.\r\n   * @param {Object} attributes - an object where each key is a wished\r\n   * attribute name and each value is its value.\r\n   * @param {Object} [creator] - if supplied, this function will use\r\n   * the \"createElement\" method from this param. Otherwise\r\n   * document will be used as creator.\r\n   * @returns {Element} The DOM element with the specified attributes assigned.\r\n   * @static\r\n   */\r\n  static createElement(tagName, attributes, creator) {\r\n    if (attributes === undefined) {\r\n      attributes = {};\r\n    }\r\n\r\n    if (creator === undefined) {\r\n      creator = document;\r\n    }\r\n\r\n    let element;\r\n\r\n    /*\r\n     * Internet Explorer fix:\r\n     * If you create a new object dynamically, you can't set a non-standard attribute.\r\n     * For example, you can't set the \"src\" attribute on an \"applet\" object.\r\n     * Other browsers will throw an exception and will run the standard code.\r\n     */\r\n    try {\r\n      let html = `<${tagName}`;\r\n\r\n      Object.keys(attributes).forEach((attributeName) => {\r\n        html += ` ${attributeName}=\"${Util.htmlEntities(attributes[attributeName])}\"`;\r\n      });\r\n      html += \">\";\r\n      element = creator.createElement(html);\r\n    } catch (e) {\r\n      element = creator.createElement(tagName);\r\n      Object.keys(attributes).forEach((attributeName) => {\r\n        element.setAttribute(attributeName, attributes[attributeName]);\r\n      });\r\n    }\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * Creates new HTML from it's HTML code as string.\r\n   * @param {string} objectCode - html code\r\n   * @returns {Element} the HTML element.\r\n   * @static\r\n   */\r\n  static createObject(objectCode, creator) {\r\n    if (creator === undefined) {\r\n      creator = document;\r\n    }\r\n\r\n    // Internet Explorer can't include \"param\" tag when is setting an innerHTML property.\r\n    objectCode = objectCode\r\n      .split(\"<applet \")\r\n      .join('<span wirisObject=\"WirisApplet\" ')\r\n      .split(\"<APPLET \")\r\n      .join('<span wirisObject=\"WirisApplet\" '); // It is a 'span' because 'span' objects can contain 'br' nodes.\r\n    objectCode = objectCode.split(\"</applet>\").join(\"</span>\").split(\"</APPLET>\").join(\"</span>\");\r\n\r\n    objectCode = objectCode\r\n      .split(\"<param \")\r\n      .join('<br wirisObject=\"WirisParam\" ')\r\n      .split(\"<PARAM \")\r\n      .join('<br wirisObject=\"WirisParam\" '); // It is a 'br' because 'br' can't contain nodes.\r\n    objectCode = objectCode.split(\"</param>\").join(\"</br>\").split(\"</PARAM>\").join(\"</br>\");\r\n\r\n    const container = Util.createElement(\"div\", {}, creator);\r\n    container.innerHTML = objectCode;\r\n\r\n    function recursiveParamsFix(object) {\r\n      if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisParam\") {\r\n        const attributesParsed = {};\r\n\r\n        for (let i = 0; i < object.attributes.length; i += 1) {\r\n          if (object.attributes[i].nodeValue !== null) {\r\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\r\n          }\r\n        }\r\n\r\n        const param = Util.createElement(\"param\", attributesParsed, creator);\r\n\r\n        // IE fix.\r\n        if (param.NAME) {\r\n          param.name = param.NAME;\r\n          param.value = param.VALUE;\r\n        }\r\n\r\n        param.removeAttribute(\"wirisObject\");\r\n        object.parentNode.replaceChild(param, object);\r\n      } else if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisApplet\") {\r\n        const attributesParsed = {};\r\n\r\n        for (let i = 0; i < object.attributes.length; i += 1) {\r\n          if (object.attributes[i].nodeValue !== null) {\r\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\r\n          }\r\n        }\r\n\r\n        const applet = Util.createElement(\"applet\", attributesParsed, creator);\r\n        applet.removeAttribute(\"wirisObject\");\r\n\r\n        for (let i = 0; i < object.childNodes.length; i += 1) {\r\n          recursiveParamsFix(object.childNodes[i]);\r\n\r\n          if (object.childNodes[i].nodeName.toLowerCase() === \"param\") {\r\n            applet.appendChild(object.childNodes[i]);\r\n            i -= 1; // When we insert the object child into the applet, object loses one child.\r\n          }\r\n        }\r\n\r\n        object.parentNode.replaceChild(applet, object);\r\n      } else {\r\n        for (let i = 0; i < object.childNodes.length; i += 1) {\r\n          recursiveParamsFix(object.childNodes[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    recursiveParamsFix(container);\r\n    return container.firstChild;\r\n  }\r\n\r\n  /**\r\n   * Converts an Element to its HTML code.\r\n   * @param {Element} element - entry element.\r\n   * @return {string} the HTML code of the input element.\r\n   * @static\r\n   */\r\n  static createObjectCode(element) {\r\n    // In case that the image was not created, the object can be null or undefined.\r\n    if (typeof element === \"undefined\" || element === null) {\r\n      return null;\r\n    }\r\n\r\n    if (element.nodeType === 1) {\r\n      // ELEMENT_NODE.\r\n      let output = `<${element.tagName}`;\r\n\r\n      for (let i = 0; i < element.attributes.length; i += 1) {\r\n        if (element.attributes[i].specified) {\r\n          output += ` ${element.attributes[i].name}=\"${Util.htmlEntities(element.attributes[i].value)}\"`;\r\n        }\r\n      }\r\n\r\n      if (element.childNodes.length > 0) {\r\n        output += \">\";\r\n\r\n        for (let i = 0; i < element.childNodes.length; i += 1) {\r\n          output += Util.createObject(element.childNodes[i]);\r\n        }\r\n\r\n        output += `</${element.tagName}>`;\r\n      } else if (element.nodeName === \"DIV\" || element.nodeName === \"SCRIPT\") {\r\n        output += `></${element.tagName}>`;\r\n      } else {\r\n        output += \"/>\";\r\n      }\r\n\r\n      return output;\r\n    }\r\n\r\n    if (element.nodeType === 3) {\r\n      // TEXT_NODE.\r\n      return Util.htmlEntities(element.nodeValue);\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Concatenates two URL paths.\r\n   * @param {string} path1 - first URL path\r\n   * @param {string} path2 - second URL path\r\n   * @returns {string} new URL.\r\n   */\r\n  static concatenateUrl(path1, path2) {\r\n    let separator = \"\";\r\n    if (path1.indexOf(\"/\") !== path1.length && path2.indexOf(\"/\") !== 0) {\r\n      separator = \"/\";\r\n    }\r\n    return (path1 + separator + path2).replace(/([^:]\\/)\\/+/g, \"$1\");\r\n  }\r\n\r\n  /**\r\n   * Parses a text and replaces all HTML special characters by their correspondent entities.\r\n   * @param {string} input - text to be parsed.\r\n   * @returns {string} the input text with all their special characters replaced by their entities.\r\n   * @static\r\n   */\r\n  static htmlEntities(input) {\r\n    return input.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&quot;\");\r\n  }\r\n\r\n  /**\r\n   * Sanitize HTML to prevent XSS injections.\r\n   * @param {string} html - html to be sanitize.\r\n   * @returns {string} html sanitized.\r\n   * @static\r\n   */\r\n  static htmlSanitize(html) {\r\n    const annotationRegex = /\\<annotation.+\\<\\/annotation\\>/;\r\n    // Get all the annotation content including the tags.\r\n    const annotation = html.match(annotationRegex);\r\n    // Sanitize html code without removing our supported MathML tags and attributes.\r\n    html = DOMPurify.sanitize(html, {\r\n      ADD_TAGS: [\"semantics\", \"annotation\", \"mstack\", \"msline\", \"msrow\", \"none\"],\r\n      ADD_ATTR: [\"linebreak\", \"charalign\", \"stackalign\"],\r\n    });\r\n    // Readd old annotation content.\r\n    return html.replace(annotationRegex, annotation);\r\n  }\r\n\r\n  /**\r\n   * Parses a text and replaces all the HTML entities by their characters.\r\n   * @param {string} input - text to be parsed\r\n   * @returns {string} the input text with all their entities replaced by characters.\r\n   * @static\r\n   */\r\n  static htmlEntitiesDecode(input) {\r\n    // Textarea element decodes when inner html is set.\r\n    const textarea = document.createElement(\"textarea\");\r\n    textarea.innerHTML = input;\r\n    return textarea.value;\r\n  }\r\n\r\n  /**\r\n   * Returns a cross-browser http request.\r\n   * @return {object} httpRequest request object.\r\n   * @returns {XMLHttpRequest|ActiveXObject} the proper request object.\r\n   */\r\n  static createHttpRequest() {\r\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\r\n    if (currentPath.substr(0, 7) === \"file://\") {\r\n      throw StringManager.get(\"exception_cross_site\");\r\n    }\r\n\r\n    if (typeof XMLHttpRequest !== \"undefined\") {\r\n      return new XMLHttpRequest();\r\n    }\r\n\r\n    try {\r\n      return new ActiveXObject(\"Msxml2.XMLHTTP\");\r\n    } catch (e) {\r\n      try {\r\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n      } catch (oc) {\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Converts a hash to a HTTP query.\r\n   * @param {Object[]} properties - a key/value object.\r\n   * @returns {string} a HTTP query containing all the key value pairs with\r\n   * all the special characters replaced by their entities.\r\n   * @static\r\n   */\r\n  static httpBuildQuery(properties) {\r\n    let result = \"\";\r\n\r\n    Object.keys(properties).forEach((i) => {\r\n      if (properties[i] != null) {\r\n        result += `${Util.urlEncode(i)}=${Util.urlEncode(properties[i])}&`;\r\n      }\r\n    });\r\n\r\n    // Deleting last '&' empty character.\r\n    if (result.substring(result.length - 1) === \"&\") {\r\n      result = result.substring(0, result.length - 1);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Convert a hash to string sorting keys to get a deterministic output\r\n   * @param {Object[]} hash - a key/value object.\r\n   * @returns {string} a string with the form key1=value1...keyn=valuen\r\n   * @static\r\n   */\r\n  static propertiesToString(hash) {\r\n    // 1. Sort keys. We sort the keys because we want a deterministic output.\r\n    const keys = [];\r\n    Object.keys(hash).forEach((key) => {\r\n      if (Object.prototype.hasOwnProperty.call(hash, key)) {\r\n        keys.push(key);\r\n      }\r\n    });\r\n\r\n    const n = keys.length;\r\n    for (let i = 0; i < n; i += 1) {\r\n      for (let j = i + 1; j < n; j += 1) {\r\n        const s1 = keys[i];\r\n        const s2 = keys[j];\r\n        if (Util.compareStrings(s1, s2) > 0) {\r\n          // Swap.\r\n          keys[i] = s2;\r\n          keys[j] = s1;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 2. Generate output.\r\n    let output = \"\";\r\n    for (let i = 0; i < n; i += 1) {\r\n      const key = keys[i];\r\n      output += key;\r\n      output += \"=\";\r\n      let value = hash[key];\r\n      value = value.replace(\"\\\\\", \"\\\\\\\\\");\r\n      value = value.replace(\"\\n\", \"\\\\n\");\r\n      value = value.replace(\"\\r\", \"\\\\r\");\r\n      value = value.replace(\"\\t\", \"\\\\t\");\r\n\r\n      output += value;\r\n      output += \"\\n\";\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Compare two strings using charCodeAt method\r\n   * @param {string} a - first string to compare.\r\n   * @param {string} b - second string to compare.\r\n   * @returns {number} the difference between a and b\r\n   * @static\r\n   */\r\n  static compareStrings(a, b) {\r\n    let i;\r\n    const an = a.length;\r\n    const bn = b.length;\r\n    const n = an > bn ? bn : an;\r\n    for (i = 0; i < n; i += 1) {\r\n      const c = Util.fixedCharCodeAt(a, i) - Util.fixedCharCodeAt(b, i);\r\n      if (c !== 0) {\r\n        return c;\r\n      }\r\n    }\r\n    return a.length - b.length;\r\n  }\r\n\r\n  /**\r\n   * Fix charCodeAt() JavaScript function to handle non-Basic-Multilingual-Plane characters.\r\n   * @param {string} string - input string\r\n   * @param {number} idx - an integer greater than or equal to 0\r\n   * and less than the length of the string\r\n   * @returns {number} an integer representing the UTF-16 code of the string at the given index.\r\n   * @static\r\n   */\r\n  static fixedCharCodeAt(string, idx) {\r\n    idx = idx || 0;\r\n    const code = string.charCodeAt(idx);\r\n    let hi;\r\n    let low;\r\n\r\n    /* High surrogate (could change last hex to 0xDB7F to treat high\r\n    private surrogates as single characters) */\r\n\r\n    if (code >= 0xd800 && code <= 0xdbff) {\r\n      hi = code;\r\n      low = string.charCodeAt(idx + 1);\r\n      if (Number.isNaN(low)) {\r\n        throw StringManager.get(\"exception_high_surrogate\");\r\n      }\r\n      return (hi - 0xd800) * 0x400 + (low - 0xdc00) + 0x10000;\r\n    }\r\n\r\n    if (code >= 0xdc00 && code <= 0xdfff) {\r\n      // Low surrogate.\r\n      /* We return false to allow loops to skip this iteration since should have\r\n      already handled high surrogate above in the previous iteration. */\r\n      return false;\r\n    }\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * Returns an URL with it's query params converted into array.\r\n   * @param {string} url - input URL.\r\n   * @returns {Object[]} an array containing all URL query params.\r\n   * @static\r\n   */\r\n  static urlToAssArray(url) {\r\n    let i;\r\n    i = url.indexOf(\"?\");\r\n    if (i > 0) {\r\n      const query = url.substring(i + 1);\r\n      const ss = query.split(\"&\");\r\n      const h = {};\r\n      for (i = 0; i < ss.length; i += 1) {\r\n        const s = ss[i];\r\n        const kv = s.split(\"=\");\r\n        if (kv.length > 1) {\r\n          h[kv[0]] = decodeURIComponent(kv[1].replace(/\\+/g, \" \"));\r\n        }\r\n      }\r\n      return h;\r\n    }\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Returns an encoded URL by replacing each instance of certain characters by\r\n   * one, two, three or four escape sequences using encodeURIComponent method.\r\n   * !'()* . will not be encoded.\r\n   *\r\n   * @param {string} clearString - URL string to be encoded\r\n   * @returns {string} URL with it's special characters replaced.\r\n   * @static\r\n   */\r\n  static urlEncode(clearString) {\r\n    let output = \"\";\r\n    // Method encodeURIComponent doesn't encode !'()*~ .\r\n    output = encodeURIComponent(clearString);\r\n    return output;\r\n  }\r\n\r\n  // TODO: To parser?\r\n  /**\r\n   * Converts the HTML of a image into the output code that WIRIS must return.\r\n   * By default returns the MathML stored on data-mahml attribute (if imgCode is a formula)\r\n   * or the Wiriscas attribute of a WIRIS applet.\r\n   * @param {string} imgCode - the html code from a formula or a CAS image.\r\n   * @param {boolean} convertToXml - true if the image should be converted to XML.\r\n   * @param {boolean} convertToSafeXml - true if the image should be converted to safeXML.\r\n   * @returns {string} the XML or safeXML of a WIRIS image.\r\n   * @static\r\n   */\r\n  static getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml) {\r\n    const imgObject = Util.createObject(imgCode);\r\n    if (imgObject) {\r\n      if (\r\n        imgObject.className === Configuration.get(\"imageClassName\") ||\r\n        imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"))\r\n      ) {\r\n        if (!convertToXml) {\r\n          return imgCode;\r\n        }\r\n\r\n        const dataMathML = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\r\n        // To handle annotations, first we need the MathML in XML.\r\n        let mathML = MathML.safeXmlDecode(dataMathML);\r\n\r\n        if (!Configuration.get(\"saveHandTraces\")) {\r\n          mathML = MathML.removeAnnotation(mathML, \"application/json\");\r\n        }\r\n\r\n        if (mathML == null) {\r\n          mathML = imgObject.getAttribute(\"alt\");\r\n        }\r\n\r\n        if (convertToSafeXml) {\r\n          const safeMathML = MathML.safeXmlEncode(mathML);\r\n          return safeMathML;\r\n        }\r\n\r\n        return mathML;\r\n      }\r\n    }\r\n    return imgCode;\r\n  }\r\n\r\n  /**\r\n   * Gets the node length in characters.\r\n   * @param {Node} node - HTML node.\r\n   * @returns {number} node length.\r\n   * @static\r\n   */\r\n  static getNodeLength(node) {\r\n    const staticNodeLengths = {\r\n      IMG: 1,\r\n      BR: 1,\r\n    };\r\n\r\n    if (node.nodeType === 3) {\r\n      // TEXT_NODE.\r\n      return node.nodeValue.length;\r\n    }\r\n\r\n    if (node.nodeType === 1) {\r\n      // ELEMENT_NODE.\r\n      let length = staticNodeLengths[node.nodeName.toUpperCase()];\r\n\r\n      if (length === undefined) {\r\n        length = 0;\r\n      }\r\n\r\n      for (let i = 0; i < node.childNodes.length; i += 1) {\r\n        length += Util.getNodeLength(node.childNodes[i]);\r\n      }\r\n      return length;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Gets a selected node or text from an editable HTMLElement.\r\n   * If the caret is on a text node, concatenates it with all the previous and next text nodes.\r\n   * @param {HTMLElement} target - the editable HTMLElement.\r\n   * @param {boolean} isIframe  - specifies if the target is an iframe or not\r\n   * @param {boolean} forceGetSelection - if true, ignores IE system to get\r\n   * the current selection and uses window.getSelection()\r\n   * @returns {object} an object with the 'node' key set if the item is an\r\n   * element or the keys 'node' and 'caretPosition' if the element is text.\r\n   * @static\r\n   */\r\n  static getSelectedItem(target, isIframe, forceGetSelection) {\r\n    let windowTarget;\r\n\r\n    if (isIframe) {\r\n      windowTarget = target.contentWindow;\r\n      windowTarget.focus();\r\n    } else {\r\n      windowTarget = window;\r\n      target.focus();\r\n    }\r\n\r\n    if (document.selection && !forceGetSelection) {\r\n      const range = windowTarget.document.selection.createRange();\r\n\r\n      if (range.parentElement) {\r\n        if (range.htmlText.length > 0) {\r\n          if (range.text.length === 0) {\r\n            return Util.getSelectedItem(target, isIframe, true);\r\n          }\r\n\r\n          return null;\r\n        }\r\n\r\n        windowTarget.document.execCommand(\"InsertImage\", false, \"#\");\r\n        let temporalObject = range.parentElement();\r\n\r\n        if (temporalObject.nodeName.toUpperCase() !== \"IMG\") {\r\n          // IE9 fix: parentElement() does not return the IMG node,\r\n          // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\r\n          range.pasteHTML('<span id=\"wrs_openEditorWindow_temporalObject\"></span>');\r\n          temporalObject = windowTarget.document.getElementById(\"wrs_openEditorWindow_temporalObject\");\r\n        }\r\n\r\n        let node;\r\n        let caretPosition;\r\n\r\n        if (temporalObject.nextSibling && temporalObject.nextSibling.nodeType === 3) {\r\n          // TEXT_NODE.\r\n          node = temporalObject.nextSibling;\r\n          caretPosition = 0;\r\n        } else if (temporalObject.previousSibling && temporalObject.previousSibling.nodeType === 3) {\r\n          node = temporalObject.previousSibling;\r\n          caretPosition = node.nodeValue.length;\r\n        } else {\r\n          node = windowTarget.document.createTextNode(\"\");\r\n          temporalObject.parentNode.insertBefore(node, temporalObject);\r\n          caretPosition = 0;\r\n        }\r\n\r\n        temporalObject.parentNode.removeChild(temporalObject);\r\n\r\n        return {\r\n          node,\r\n          caretPosition,\r\n        };\r\n      }\r\n\r\n      if (range.length > 1) {\r\n        return null;\r\n      }\r\n\r\n      return {\r\n        node: range.item(0),\r\n      };\r\n    }\r\n\r\n    if (windowTarget.getSelection) {\r\n      let range;\r\n      const selection = windowTarget.getSelection();\r\n\r\n      try {\r\n        range = selection.getRangeAt(0);\r\n      } catch (e) {\r\n        range = windowTarget.document.createRange();\r\n      }\r\n\r\n      const node = range.startContainer;\r\n\r\n      if (node.nodeType === 3) {\r\n        // TEXT_NODE.\r\n        return {\r\n          node,\r\n          caretPosition: range.startOffset,\r\n        };\r\n      }\r\n\r\n      if (node !== range.endContainer) {\r\n        return null;\r\n      }\r\n\r\n      if (node.nodeType === 1) {\r\n        // ELEMENT_NODE.\r\n        const position = range.startOffset;\r\n\r\n        if (node.childNodes[position]) {\r\n          // In case that a formula is detected but not selected,\r\n          // we create an empty span where we could insert the new formula.\r\n          if (range.startOffset === range.endOffset) {\r\n            if (\r\n              position !== 0 &&\r\n              node.childNodes[position - 1].localName === \"span\" &&\r\n              node.childNodes[position].classList?.contains(\"Wirisformula\")\r\n            ) {\r\n              node.childNodes[position - 1].remove();\r\n              return Util.getSelectedItem(target, isIframe, forceGetSelection);\r\n            }\r\n            if (node.childNodes[position].classList?.contains(\"Wirisformula\")) {\r\n              if (\r\n                (position > 0 && node.childNodes[position - 1].classList?.contains(\"Wirisformula\")) ||\r\n                position === 0\r\n              ) {\r\n                const emptySpan = document.createElement(\"span\");\r\n                node.insertBefore(emptySpan, node.childNodes[position]);\r\n                return {\r\n                  node: node.childNodes[position],\r\n                };\r\n              }\r\n            }\r\n          }\r\n          return {\r\n            node: node.childNodes[position],\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Returns null if there isn't any item or if it is malformed.\r\n   * Otherwise returns an object containing the node with the MathML image\r\n   * and the cursor position inside the textarea.\r\n   * @param {HTMLTextAreaElement} textarea - textarea element.\r\n   * @returns {Object} An object containing the node, the index of the\r\n   * beginning  of the selected text, caret position and the start and end position of the\r\n   * text node.\r\n   * @static\r\n   */\r\n  static getSelectedItemOnTextarea(textarea) {\r\n    const textNode = document.createTextNode(textarea.value);\r\n    const textNodeValues = Latex.getLatexFromTextNode(textNode, textarea.selectionStart);\r\n    if (textNodeValues === null) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      node: textNode,\r\n      caretPosition: textarea.selectionStart,\r\n      startPosition: textNodeValues.startPosition,\r\n      endPosition: textNodeValues.endPosition,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Looks for elements that match the given name in a HTML code string.\r\n   * Important: this function is very concrete for WIRIS code.\r\n   * It takes as preconditions lots of behaviors that are not the general case.\r\n   * @param {string} code -  HTML code.\r\n   * @param {string} name - element name.\r\n   * @param {boolean} autoClosed - true if the elements are autoClosed.\r\n   * @return {Object[]} an object containing all HTML elements of code matching the name argument.\r\n   * @static\r\n   */\r\n  static getElementsByNameFromString(code, name, autoClosed) {\r\n    const elements = [];\r\n    code = code.toLowerCase();\r\n    name = name.toLowerCase();\r\n    let start = code.indexOf(`<${name} `);\r\n\r\n    while (start !== -1) {\r\n      // Look for nodes.\r\n      let endString;\r\n\r\n      if (autoClosed) {\r\n        endString = \">\";\r\n      } else {\r\n        endString = `</${name}>`;\r\n      }\r\n\r\n      let end = code.indexOf(endString, start);\r\n\r\n      if (end !== -1) {\r\n        end += endString.length;\r\n        elements.push({\r\n          start,\r\n          end,\r\n        });\r\n      } else {\r\n        end = start + 1;\r\n      }\r\n\r\n      start = code.indexOf(`<${name} `, end);\r\n    }\r\n\r\n    return elements;\r\n  }\r\n\r\n  /**\r\n   * Returns the numeric value of a base64 character.\r\n   * @param  {string} character - base64 character.\r\n   * @returns {number} base64 character numeric value.\r\n   * @static\r\n   */\r\n  static decode64(character) {\r\n    const PLUS = \"+\".charCodeAt(0);\r\n    const SLASH = \"/\".charCodeAt(0);\r\n    const NUMBER = \"0\".charCodeAt(0);\r\n    const LOWER = \"a\".charCodeAt(0);\r\n    const UPPER = \"A\".charCodeAt(0);\r\n    const PLUS_URL_SAFE = \"-\".charCodeAt(0);\r\n    const SLASH_URL_SAFE = \"_\".charCodeAt(0);\r\n    const code = character.charCodeAt(0);\r\n\r\n    if (code === PLUS || code === PLUS_URL_SAFE) {\r\n      return 62; // Char '+'.\r\n    }\r\n    if (code === SLASH || code === SLASH_URL_SAFE) {\r\n      return 63; // Char '/'.\r\n    }\r\n    if (code < NUMBER) {\r\n      return -1; // No match.\r\n    }\r\n    if (code < NUMBER + 10) {\r\n      return code - NUMBER + 26 + 26;\r\n    }\r\n    if (code < UPPER + 26) {\r\n      return code - UPPER;\r\n    }\r\n    if (code < LOWER + 26) {\r\n      return code - LOWER + 26;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Converts a base64 string to a array of bytes.\r\n   * @param {string} b64String - base64 string.\r\n   * @param {number} length - dimension of byte array (by default whole string).\r\n   * @return {Object[]} the resultant byte array.\r\n   * @static\r\n   */\r\n  static b64ToByteArray(b64String, length) {\r\n    let tmp;\r\n\r\n    if (b64String.length % 4 > 0) {\r\n      throw new Error(\"Invalid string. Length must be a multiple of 4\"); // Tipped base64. Length is fixed.\r\n    }\r\n\r\n    const arr = [];\r\n\r\n    let l;\r\n    let placeHolders;\r\n    if (!length) {\r\n      // All b64String string.\r\n      if (b64String.charAt(b64String.length - 2) === \"=\") {\r\n        placeHolders = 2;\r\n      } else if (b64String.charAt(b64String.length - 1) === \"=\") {\r\n        placeHolders = 1;\r\n      } else {\r\n        placeHolders = 0;\r\n      }\r\n      l = placeHolders > 0 ? b64String.length - 4 : b64String.length;\r\n    } else {\r\n      l = length;\r\n    }\r\n\r\n    let i;\r\n    for (i = 0; i < l; i += 4) {\r\n      // Ignoring code checker standards (bitewise operators).\r\n      // See https://tracker.moodle.org/browse/CONTRIB-5862 for further information.\r\n      // @codingStandardsIgnoreStart\r\n      // eslint-disable-next-line max-len\r\n      tmp =\r\n        (Util.decode64(b64String.charAt(i)) << 18) |\r\n        (Util.decode64(b64String.charAt(i + 1)) << 12) |\r\n        (Util.decode64(b64String.charAt(i + 2)) << 6) |\r\n        Util.decode64(b64String.charAt(i + 3));\r\n\r\n      arr.push((tmp >> 16) & 0xff);\r\n      arr.push((tmp >> 8) & 0xff);\r\n      arr.push(tmp & 0xff);\r\n      // @codingStandardsIgnoreEnd\r\n    }\r\n\r\n    if (placeHolders) {\r\n      if (placeHolders === 2) {\r\n        // Ignoring code checker standards (bitewise operators).\r\n        // @codingStandardsIgnoreStart\r\n        // eslint-disable-next-line max-len\r\n        tmp = (Util.decode64(b64String.charAt(i)) << 2) | (Util.decode64(b64String.charAt(i + 1)) >> 4);\r\n        arr.push(tmp & 0xff);\r\n      } else if (placeHolders === 1) {\r\n        // eslint-disable-next-line max-len\r\n        tmp =\r\n          (Util.decode64(b64String.charAt(i)) << 10) |\r\n          (Util.decode64(b64String.charAt(i + 1)) << 4) |\r\n          (Util.decode64(b64String.charAt(i + 2)) >> 2);\r\n        arr.push((tmp >> 8) & 0xff);\r\n        arr.push(tmp & 0xff);\r\n        // @codingStandardsIgnoreEnd\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  /**\r\n   * Returns the first 32-bit signed integer from a byte array.\r\n   * @param {Object[]} bytes - array of bytes.\r\n   * @returns {number} the 32-bit signed integer.\r\n   * @static\r\n   */\r\n  static readInt32(bytes) {\r\n    if (bytes.length < 4) {\r\n      return false;\r\n    }\r\n    const int32 = bytes.splice(0, 4);\r\n    // @codingStandardsIgnoreStart¡\r\n    return (int32[0] << 24) | (int32[1] << 16) | (int32[2] << 8) | (int32[3] << 0);\r\n    // @codingStandardsIgnoreEnd\r\n  }\r\n\r\n  /**\r\n   * Read the first byte from a byte array.\r\n   * @param {Object} bytes - input byte array.\r\n   * @returns {number} first byte of the byte array.\r\n   * @static\r\n   */\r\n  static readByte(bytes) {\r\n    // @codingStandardsIgnoreStart\r\n    return bytes.shift() << 0;\r\n    // @codingStandardsIgnoreEnd\r\n  }\r\n\r\n  /**\r\n   * Read an arbitrary number of bytes, from a fixed position on a byte array.\r\n   * @param  {Object[]} bytes - byte array.\r\n   * @param  {number} pos - start position.\r\n   * @param  {number} len - number of bytes to read.\r\n   * @returns {Object[]} the byte array.\r\n   * @static\r\n   */\r\n  static readBytes(bytes, pos, len) {\r\n    return bytes.splice(pos, len);\r\n  }\r\n\r\n  /**\r\n   * Inserts or modifies formulas or CAS on a textarea.\r\n   * @param {HTMLTextAreaElement} textarea - textarea target.\r\n   * @param {string} text - text to add in the textarea. For example, to add the link to the image,\r\n   * call this function as (textarea, Parser.createImageSrc(mathml));\r\n   * @static\r\n   */\r\n  static updateTextArea(textarea, text) {\r\n    if (textarea && text) {\r\n      textarea.focus();\r\n\r\n      if (textarea.selectionStart != null) {\r\n        const { selectionEnd } = textarea;\r\n        const selectionStart = textarea.value.substring(0, textarea.selectionStart);\r\n        const selectionEndSub = textarea.value.substring(selectionEnd, textarea.value.length);\r\n        textarea.value = selectionStart + text + selectionEndSub;\r\n        textarea.selectionEnd = selectionEnd + text.length;\r\n      } else {\r\n        const selection = document.selection.createRange();\r\n        selection.text = text;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Modifies existing formula on a textarea.\r\n   * @param {HTMLTextAreaElement} textarea - text area target.\r\n   * @param {string} text - text to add in the textarea. For example, if you want to add the link\r\n   * to the image,you can call this function as\r\n   * Util.updateTextarea(textarea, Parser.createImageSrc(mathml));\r\n   * @param {number} start - beginning index from textarea where it needs to be replaced by text.\r\n   * @param {number} end - ending index from textarea where it needs to be replaced by text\r\n   * @static\r\n   */\r\n  static updateExistingTextOnTextarea(textarea, text, start, end) {\r\n    textarea.focus();\r\n    const textareaStart = textarea.value.substring(0, start);\r\n    textarea.value = textareaStart + text + textarea.value.substring(end, textarea.value.length);\r\n    textarea.selectionEnd = start + text.length;\r\n  }\r\n\r\n  /**\r\n   * Add a parameter with it's correspondent value to an URL (GET).\r\n   * @param {string} path - URL path\r\n   * @param {string} parameter - parameter\r\n   * @param {string} value - value\r\n   * @static\r\n   */\r\n  static addArgument(path, parameter, value) {\r\n    let sep;\r\n    if (path.indexOf(\"?\") > 0) {\r\n      sep = \"&\";\r\n    } else {\r\n      sep = \"?\";\r\n    }\r\n    return `${path + sep + parameter}=${value}`;\r\n  }\r\n}\r\n","import Configuration from \"./configuration\";\r\nimport Util from \"./util\";\r\n\r\n/**\r\n * @classdesc\r\n * This class represents MathType Image class. Contains all the logic related\r\n * to MathType images manipulation.\r\n * All MathType images are generated using the appropriate MathType\r\n * integration service: showimage or createimage.\r\n *\r\n * There are two available image formats:\r\n * - svg (default)\r\n * - png\r\n *\r\n * There are two formats for the image src attribute:\r\n * - A data-uri scheme containing the URL-encoded SVG or a PNG's base64.\r\n * - A link to the showimage service.\r\n */\r\nexport default class Image {\r\n  /**\r\n   * Removes data attributes from an image.\r\n   * @param {HTMLImageElement} img - Image where remove data attributes.\r\n   */\r\n  static removeImgDataAttributes(img) {\r\n    const attributesToRemove = [];\r\n    const { attributes } = img;\r\n\r\n    Object.keys(attributes).forEach((key) => {\r\n      const attribute = attributes[key];\r\n      if (attribute !== undefined && attribute.name !== undefined && attribute.name.indexOf(\"data-\") === 0) {\r\n        // Is preferred keep an array and remove after the search\r\n        // because when attribute is removed the array of attributes\r\n        // is modified.\r\n        attributesToRemove.push(attribute.name);\r\n      }\r\n    });\r\n\r\n    attributesToRemove.forEach((attribute) => {\r\n      img.removeAttribute(attribute);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @static\r\n   * Clones all MathType image attributes from a HTMLImageElement to another.\r\n   * @param {HTMLImageElement} originImg - The original image.\r\n   * @param {HTMLImageElement} destImg - The destination image.\r\n   */\r\n  static clone(originImg, destImg) {\r\n    const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\r\n    if (!originImg.hasAttribute(customEditorAttributeName)) {\r\n      destImg.removeAttribute(customEditorAttributeName);\r\n    }\r\n\r\n    const mathmlAttributeName = Configuration.get(\"imageMathmlAttribute\");\r\n    const imgAttributes = [\r\n      mathmlAttributeName,\r\n      customEditorAttributeName,\r\n      \"alt\",\r\n      \"height\",\r\n      \"width\",\r\n      \"style\",\r\n      \"src\",\r\n      \"role\",\r\n    ];\r\n\r\n    imgAttributes.forEach((iterator) => {\r\n      const originAttribute = originImg.getAttribute(iterator);\r\n      if (originAttribute) {\r\n        destImg.setAttribute(iterator, originAttribute);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Determines whether an img src contains an SVG.\r\n   * @param {HTMLImageElement} img the img element to inspect\r\n   * @returns true if the img src contains an SVG, false otherwise\r\n   */\r\n  static isSvg(img) {\r\n    return img.src.startsWith(\"data:image/svg+xml;\");\r\n  }\r\n\r\n  /**\r\n   * Determines whether an img src is encoded in base64 or not.\r\n   * @param {HTMLImageElement} img the img element to inspect\r\n   * @returns true if the img src is encoded in base64, false otherwise\r\n   */\r\n  static isBase64(img) {\r\n    return img.src.startsWith(\"data:image/svg+xml;base64,\") || img.src.startsWith(\"data:image/png;base64,\");\r\n  }\r\n\r\n  /**\r\n   * Calculates the metrics of a MathType image given the the service response and the image format.\r\n   * @param {HTMLImageElement} img - The HTMLImageElement.\r\n   * @param {String} uri - The URI generated by the image service: can be a data URI scheme or a URL.\r\n   * @param {Boolean} jsonResponse - True the response of the image service is a\r\n   * JSON object. False otherwise.\r\n   */\r\n  static setImgSize(img, uri, jsonResponse) {\r\n    let ar;\r\n    let base64String;\r\n    let bytes;\r\n    let svgString;\r\n    if (jsonResponse) {\r\n      // Cleaning data:image/png;base64.\r\n      if (Image.isSvg(img)) {\r\n        // SVG format.\r\n        // If SVG is encoded in base64 we need to convert the base64 bytes into a SVG string.\r\n        if (!Image.isBase64(img)) {\r\n          ar = Image.getMetricsFromSvgString(uri);\r\n        } else {\r\n          base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\r\n          svgString = \"\";\r\n          bytes = Util.b64ToByteArray(base64String, base64String.length);\r\n          for (let i = 0; i < bytes.length; i += 1) {\r\n            svgString += String.fromCharCode(bytes[i]);\r\n          }\r\n          ar = Image.getMetricsFromSvgString(svgString);\r\n        }\r\n        // PNG format: we store all metrics information in the first 88 bytes.\r\n      } else {\r\n        base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\r\n        bytes = Util.b64ToByteArray(base64String, 88);\r\n        ar = Image.getMetricsFromBytes(bytes);\r\n      }\r\n      // Backwards compatibility: we store the metrics into createimage response.\r\n    } else {\r\n      ar = Util.urlToAssArray(uri);\r\n    }\r\n    let width = ar.cw;\r\n    if (!width) {\r\n      return;\r\n    }\r\n    let height = ar.ch;\r\n    let baseline = ar.cb;\r\n    const { dpi } = ar;\r\n    if (dpi) {\r\n      width = (width * 96) / dpi;\r\n      height = (height * 96) / dpi;\r\n      baseline = (baseline * 96) / dpi;\r\n    }\r\n    img.width = width;\r\n    img.height = height;\r\n    img.style.verticalAlign = `-${height - baseline}px`;\r\n  }\r\n\r\n  /**\r\n   * Calculates the metrics of an image which has been resized. Is used to restore the original\r\n   * metrics of a resized image.\r\n   * @param {HTMLImageElement } img - The resized HTMLImageElement.\r\n   */\r\n  static fixAfterResize(img) {\r\n    img.removeAttribute(\"style\");\r\n    img.removeAttribute(\"width\");\r\n    img.removeAttribute(\"height\");\r\n    // In order to avoid resize with max-width css property.\r\n    img.style.maxWidth = \"none\";\r\n\r\n    const processImg = (img) => {\r\n      if (img.src.indexOf(\"data:image\") !== -1) {\r\n        if (img.src.indexOf(\"data:image/svg+xml\") !== -1) {\r\n          // Image is in base64: decode it in order to calculate the size, and then bring it back to base64\r\n          // This is a bit of an ugly hack used to recycle the logic of Image.setImgSize instead of rewriting it\r\n          // (which would actually make more sense for readibility and efficiency).\r\n          if (img.src.indexOf(\"data:image/svg+xml;base64,\") !== -1) {\r\n            // 'data:image/svg+xml;base64,'.length === 26\r\n            const base64String = img.getAttribute(\"src\").substring(26);\r\n            const svgString = window.atob(base64String);\r\n            const encodedSvgString = encodeURIComponent(svgString);\r\n            img.setAttribute(\"src\", `data:image/svg+xml;charset=utf8,${encodedSvgString}`);\r\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\r\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\r\n            Image.setImgSize(img, svg, true);\r\n            // Return src to base64!\r\n            img.setAttribute(\"src\", `data:image/svg+xml;base64,${base64String}`);\r\n          } else {\r\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\r\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\r\n            Image.setImgSize(img, svg, true);\r\n          }\r\n        } else {\r\n          // 'data:image/png;base64,' === 22.\r\n          const base64 = img.src.substring(22, img.src.length);\r\n          Image.setImgSize(img, base64, true);\r\n        }\r\n      } else {\r\n        Image.setImgSize(img, img.src);\r\n      }\r\n    };\r\n\r\n    // If the image doesn't contain a blob, just process it normally\r\n    if (img.src.indexOf(\"blob:\") === -1) {\r\n      processImg(img);\r\n      // if it does contain a blob, then read that, replace the src with the decoded content, and process it\r\n    } else {\r\n      const reader = new FileReader();\r\n      reader.onload = function () {\r\n        img.setAttribute(\"src\", reader.result);\r\n        processImg(img);\r\n      };\r\n      fetch(img.src)\r\n        .then((r) => r.blob())\r\n        .then((blob) => {\r\n          reader.readAsDataURL(blob);\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the metrics (height, width and baseline) contained in a SVG image generated\r\n   * by the MathType image service. This image contains as an extra custom attribute:\r\n   * the baseline (wrs:baseline).\r\n   * @param {String} svgString - The SVG image.\r\n   * @return {Array} - The image metrics.\r\n   */\r\n  static getMetricsFromSvgString(svgString) {\r\n    let first = svgString.indexOf('height=\"');\r\n    let last = svgString.indexOf('\"', first + 8, svgString.length);\r\n    const height = svgString.substring(first + 8, last);\r\n\r\n    first = svgString.indexOf('width=\"');\r\n    last = svgString.indexOf('\"', first + 7, svgString.length);\r\n    const width = svgString.substring(first + 7, last);\r\n\r\n    first = svgString.indexOf('wrs:baseline=\"');\r\n    last = svgString.indexOf('\"', first + 14, svgString.length);\r\n    const baseline = svgString.substring(first + 14, last);\r\n\r\n    if (typeof width !== \"undefined\") {\r\n      const arr = [];\r\n      arr.cw = width;\r\n      arr.ch = height;\r\n      if (typeof baseline !== \"undefined\") {\r\n        arr.cb = baseline;\r\n      }\r\n      return arr;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Returns the metrics (width, height, baseline and dpi) contained in a PNG byte array.\r\n   * @param  {Array.<Bytes>} bytes - png byte array.\r\n   * @return {Array} The png metrics.\r\n   */\r\n  static getMetricsFromBytes(bytes) {\r\n    Util.readBytes(bytes, 0, 8);\r\n    let width;\r\n    let height;\r\n    let typ;\r\n    let baseline;\r\n    let dpi;\r\n    while (bytes.length >= 4) {\r\n      typ = Util.readInt32(bytes);\r\n      if (typ === 0x49484452) {\r\n        width = Util.readInt32(bytes);\r\n        height = Util.readInt32(bytes);\r\n        // Read 5 bytes.\r\n        Util.readInt32(bytes);\r\n        Util.readByte(bytes);\r\n      } else if (typ === 0x62615345) {\r\n        // Baseline: 'baSE'.\r\n        baseline = Util.readInt32(bytes);\r\n      } else if (typ === 0x70485973) {\r\n        // Dpis: 'pHYs'.\r\n        dpi = Util.readInt32(bytes);\r\n        dpi = Math.round(dpi / 39.37);\r\n        Util.readInt32(bytes);\r\n        Util.readByte(bytes);\r\n      }\r\n      Util.readInt32(bytes);\r\n    }\r\n\r\n    if (typeof width !== \"undefined\") {\r\n      const arr = [];\r\n      arr.cw = width;\r\n      arr.ch = height;\r\n      arr.dpi = dpi;\r\n      if (baseline) {\r\n        arr.cb = baseline;\r\n      }\r\n\r\n      return arr;\r\n    }\r\n    return [];\r\n  }\r\n}\r\n","import TextCache from \"./textcache\";\r\nimport ServiceProvider from \"./serviceprovider\";\r\nimport MathML from \"./mathml\";\r\nimport StringManager from \"./stringmanager\";\r\n\r\n/**\r\n * @classdesc\r\n * This class represents MathType accessible class. Converts MathML to accessible text and manages\r\n * the associated client-side cache.\r\n */\r\nexport default class Accessibility {\r\n  /**\r\n   * Static property.\r\n   * Accessibility cache, each entry contains a MathML and its correspondent accessibility text.\r\n   * @type {TextCache}\r\n   */\r\n  static get cache() {\r\n    return Accessibility._cache;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set accessibility cache.\r\n   * @param {TextCahe} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set cache(value) {\r\n    Accessibility._cache = value;\r\n  }\r\n\r\n  /**\r\n   * Converts MathML strings to its accessible text representation.\r\n   * @param {String} mathML - MathML to be converted to accessible text.\r\n   * @param {String} [language] - Language of the accessible text. 'en' by default.\r\n   * @param {Array.<String>} [data] - Parameters to send to mathml2accessible service.\r\n   * @return {String} Accessibility text.\r\n   */\r\n  static mathMLToAccessible(mathML, language, data) {\r\n    if (typeof language === \"undefined\") {\r\n      language = \"en\";\r\n    }\r\n    // Check MathML class. If the class is chemistry,\r\n    // we add chemistry to data to force accessibility service\r\n    // to load chemistry grammar.\r\n    if (MathML.containClass(mathML, \"wrs_chemistry\")) {\r\n      data.mode = \"chemistry\";\r\n    }\r\n    // Ignore accesibility styles\r\n    data.ignoreStyles = true;\r\n    let accessibleText = \"\";\r\n\r\n    if (Accessibility.cache.get(mathML)) {\r\n      accessibleText = Accessibility.cache.get(mathML);\r\n    } else {\r\n      data.service = \"mathml2accessible\";\r\n      data.lang = language;\r\n      const accessibleJsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\r\n      if (accessibleJsonResponse.status !== \"error\") {\r\n        accessibleText = accessibleJsonResponse.result.text;\r\n        Accessibility.cache.populate(mathML, accessibleText);\r\n      } else {\r\n        accessibleText = StringManager.get(\"error_convert_accessibility\");\r\n      }\r\n    }\r\n\r\n    return accessibleText;\r\n  }\r\n}\r\n\r\n/**\r\n * Contains an instance of TextCache class to manage the JavaScript accessible cache.\r\n * Each entry of the cache object contains the MathML and it's correspondent accessibility text.\r\n * @private\r\n * @type {TextCache}\r\n */\r\nAccessibility._cache = new TextCache();\r\n","import Util from \"./util\";\r\nimport Latex from \"./latex\";\r\nimport MathML from \"./mathml\";\r\nimport Image from \"./image\";\r\nimport Accessibility from \"./accessibility\";\r\nimport ServiceProvider from \"./serviceprovider\";\r\nimport Configuration from \"./configuration\";\r\nimport Constants from \"./constants\";\r\n// eslint-disable-next-line no-unused-vars\r\nimport md5 from \"./md5\";\r\n\r\n/**\r\n * @classdesc\r\n * This class represent a MahML parser. Converts MathML into formulas depending on the\r\n * image format (SVG, PNG, base64) and the save mode (XML, safeXML, Image) configured\r\n * in the backend.\r\n */\r\nexport default class Parser {\r\n  /**\r\n   * Converts a MathML string to an img element.\r\n   * @param {Document} creator - Document object to call createElement method.\r\n   * @param {string} mathml - MathML code\r\n   * @param {Object[]} wirisProperties - object containing WIRIS custom properties\r\n   * @param {language} language - custom language for accessibility.\r\n   * @returns {HTMLImageElement} the formula image corresponding to initial MathML string.\r\n   * @static\r\n   */\r\n  static mathmlToImgObject(creator, mathml, wirisProperties, language) {\r\n    const imgObject = creator.createElement(\"img\");\r\n    imgObject.align = \"middle\";\r\n    imgObject.style.maxWidth = \"none\";\r\n    let data = wirisProperties || {};\r\n\r\n    // Take into account the backend config\r\n    const wirisEditorProperties = Configuration.get(\"editorParameters\");\r\n    data = { ...wirisEditorProperties, ...data };\r\n\r\n    data.mml = mathml;\r\n    data.lang = language;\r\n    // Request metrics of the generated image.\r\n    data.metrics = \"true\";\r\n    data.centerbaseline = \"false\";\r\n\r\n    // Full base64 method (edit & save).\r\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\r\n      data.base64 = true;\r\n    }\r\n\r\n    // Render js params: _wrs_int_wirisProperties contains some js render params.\r\n    // Since MathML can support render params, js params should be send only to editor.\r\n\r\n    imgObject.className = Configuration.get(\"imageClassName\");\r\n\r\n    if (mathml.indexOf('class=\"') !== -1) {\r\n      // We check here if the MathML has been created from a customEditor (such chemistry)\r\n      // to add custom editor name attribute to img object (if necessary).\r\n      let mathmlSubstring = mathml.substring(mathml.indexOf('class=\"') + 'class=\"'.length, mathml.length);\r\n      mathmlSubstring = mathmlSubstring.substring(0, mathmlSubstring.indexOf('\"'));\r\n      mathmlSubstring = mathmlSubstring.substring(4, mathmlSubstring.length);\r\n      imgObject.setAttribute(Configuration.get(\"imageCustomEditorName\"), mathmlSubstring);\r\n    }\r\n\r\n    // Performance enabled.\r\n    if (\r\n      Configuration.get(\"wirisPluginPerformance\") &&\r\n      (Configuration.get(\"saveMode\") === \"xml\" || Configuration.get(\"saveMode\") === \"safeXml\")\r\n    ) {\r\n      let result = JSON.parse(Parser.createShowImageSrc(data, language));\r\n      if (result.status === \"warning\") {\r\n        // POST call.\r\n        // if the mathml is malformed, this function will throw an exception.\r\n        try {\r\n          result = JSON.parse(ServiceProvider.getService(\"showimage\", data));\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n      }\r\n      ({ result } = result);\r\n      if (result.format === \"png\") {\r\n        imgObject.src = `data:image/png;base64,${result.content}`;\r\n      } else {\r\n        imgObject.src = `data:image/svg+xml;charset=utf8,${Util.urlEncode(result.content)}`;\r\n      }\r\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\r\n      Image.setImgSize(imgObject, result.content, true);\r\n\r\n      if (Configuration.get(\"enableAccessibility\")) {\r\n        if (typeof result.alt === \"undefined\") {\r\n          imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\r\n        } else {\r\n          imgObject.alt = result.alt;\r\n        }\r\n      }\r\n    } else {\r\n      const result = Parser.createImageSrc(mathml, data);\r\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\r\n      imgObject.src = result;\r\n      Image.setImgSize(\r\n        imgObject,\r\n        result,\r\n        Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\",\r\n      );\r\n      if (Configuration.get(\"enableAccessibility\")) {\r\n        imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\r\n      }\r\n    }\r\n\r\n    if (typeof Parser.observer !== \"undefined\") {\r\n      Parser.observer.observe(imgObject);\r\n    }\r\n\r\n    // Role math https://www.w3.org/TR/wai-aria/roles#math.\r\n    imgObject.setAttribute(\"role\", \"math\");\r\n    return imgObject;\r\n  }\r\n\r\n  /**\r\n   * Returns the source to showimage service by calling createimage service. The\r\n   * output of the createimage service is a URL path pointing to showimage service.\r\n   * This method is called when performance is disabled.\r\n   * @param {string} mathml - MathML code.\r\n   * @param {Object[]} data - data object containing service parameters.\r\n   * @returns {string} the showimage path.\r\n   */\r\n  static createImageSrc(mathml, data) {\r\n    // Full base64 method (edit & save).\r\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\r\n      data.base64 = true;\r\n    }\r\n\r\n    let result = ServiceProvider.getService(\"createimage\", data);\r\n\r\n    if (result.indexOf(\"@BASE@\") !== -1) {\r\n      // Replacing '@BASE@' with the base URL of createimage.\r\n      const baseParts = ServiceProvider.getServicePath(\"createimage\").split(\"/\");\r\n      baseParts.pop();\r\n      result = result.split(\"@BASE@\").join(baseParts.join(\"/\"));\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Parses initial HTML code. If the HTML contains data generated by WIRIS,\r\n   * this data would be converted as following:\r\n   * <pre>\r\n   * MathML code: Image containing the corresponding MathML formulas.\r\n   * MathML code with LaTeX annotation : LaTeX string.\r\n   * </pre>\r\n   * @param {string} code - HTML code containing MathML data.\r\n   * @param {string} language - language to create image alt text.\r\n   * @returns {string} HTML code with the original MathML converted into LaTeX and images.\r\n   */\r\n  static initParse(code, language) {\r\n    /* Note: The code inside this function has been inverted.\r\n    If you invert again the code then you cannot use correctly LaTeX\r\n    in Moodle.\r\n    */\r\n    code = Parser.initParseSaveMode(code, language);\r\n    return Parser.initParseEditMode(code);\r\n  }\r\n\r\n  /**\r\n   * Parses initial HTML code depending on the save mode. Transforms all MathML\r\n   * occurrences for it's correspondent image or LaTeX.\r\n   * @param {string} code - HTML code to be parsed\r\n   * @param {string} language - language to create image alt text.\r\n   * @returns {string} HTML code parsed.\r\n   */\r\n  static initParseSaveMode(code, language) {\r\n    if (Configuration.get(\"saveMode\")) {\r\n      // Converting XML to tags.\r\n      code = Latex.parseMathmlToLatex(code, Constants.safeXmlCharacters);\r\n      code = Latex.parseMathmlToLatex(code, Constants.xmlCharacters);\r\n      code = Parser.parseMathmlToImg(code, Constants.safeXmlCharacters, language);\r\n      code = Parser.parseMathmlToImg(code, Constants.xmlCharacters, language);\r\n      if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"image\") {\r\n        code = Parser.codeImgTransform(code, \"base642showimage\");\r\n      }\r\n    }\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * Parses initial HTML code depending on the edit mode.\r\n   * If 'latex' parseMode is enabled all MathML containing an annotation with encoding='LaTeX' will\r\n   * be converted into a LaTeX string instead of an image.\r\n   * @param {string} code - HTML code containing MathML.\r\n   * @returns {string} parsed HTML code.\r\n   */\r\n  static initParseEditMode(code) {\r\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\r\n      const imgList = Util.getElementsByNameFromString(code, \"img\", true);\r\n      const token = 'encoding=\"LaTeX\">';\r\n      // While replacing images with latex, the indexes of the found images changes\r\n      // respecting the original code, so this carry is needed.\r\n      let carry = 0;\r\n\r\n      for (let i = 0; i < imgList.length; i += 1) {\r\n        const imgCode = code.substring(imgList[i].start + carry, imgList[i].end + carry);\r\n\r\n        if (imgCode.indexOf(` class=\"${Configuration.get(\"imageClassName\")}\"`) !== -1) {\r\n          let mathmlStartToken = ` ${Configuration.get(\"imageMathmlAttribute\")}=\"`;\r\n          let mathmlStart = imgCode.indexOf(mathmlStartToken);\r\n\r\n          if (mathmlStart === -1) {\r\n            mathmlStartToken = ' alt=\"';\r\n            mathmlStart = imgCode.indexOf(mathmlStartToken);\r\n          }\r\n\r\n          if (mathmlStart !== -1) {\r\n            mathmlStart += mathmlStartToken.length;\r\n            const mathmlEnd = imgCode.indexOf('\"', mathmlStart);\r\n            const mathml = Util.htmlSanitize(MathML.safeXmlDecode(imgCode.substring(mathmlStart, mathmlEnd)));\r\n            let latexStartPosition = mathml.indexOf(token);\r\n\r\n            if (latexStartPosition !== -1) {\r\n              latexStartPosition += token.length;\r\n              const latexEndPosition = mathml.indexOf(\"</annotation>\", latexStartPosition);\r\n              const latex = mathml.substring(latexStartPosition, latexEndPosition);\r\n\r\n              const replaceText = `$$${Util.htmlEntitiesDecode(latex)}$$`;\r\n              const start = code.substring(0, imgList[i].start + carry);\r\n              const end = code.substring(imgList[i].end + carry);\r\n              code = start + replaceText + end;\r\n              carry += replaceText.length - (imgList[i].end - imgList[i].start);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * Parses end HTML code. The end HTML code is HTML code with embedded images\r\n   * or LaTeX formulas created with MathType. <br>\r\n   * By default this method converts the formula images and LaTeX strings in MathML. <br>\r\n   * If image mode is enabled the images will not be converted into MathML. For further information see {@link https://docs.wiris.com/mathtype/en/mathtype-integrations/mathtype-web-interface-features/full-mathml-mode---wirisplugins-js.html}.\r\n   * @param {string} code - HTML to be parsed\r\n   * @returns {string} the HTML code parsed.\r\n   */\r\n  static endParse(code) {\r\n    // Transform LaTeX ocurrences to MathML elements.\r\n    const codeEndParsedEditMode = Parser.endParseEditMode(code);\r\n    // Transform img elements to MathML elements.\r\n    const codeEndParseSaveMode = Parser.endParseSaveMode(codeEndParsedEditMode);\r\n    return codeEndParseSaveMode;\r\n  }\r\n\r\n  /**\r\n   * Parses end HTML code depending on the edit mode.\r\n   * - LaTeX is an enabled parse mode, all LaTeX occurrences will be converted into MathML.\r\n   * @param {string} code - HTML code to be parsed.\r\n   * @returns {string} HTML code parsed.\r\n   */\r\n  static endParseEditMode(code) {\r\n    // Converting LaTeX to images.\r\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\r\n      let output = \"\";\r\n      let endPosition = 0;\r\n      let startPosition = code.indexOf(\"$$\");\r\n      while (startPosition !== -1) {\r\n        output += code.substring(endPosition, startPosition);\r\n        endPosition = code.indexOf(\"$$\", startPosition + 2);\r\n\r\n        if (endPosition !== -1) {\r\n          // Before, it was a condition here to execute the next codelines\r\n          // 'latex.indexOf('<') == -1'.\r\n          // We don't know why it was used, but seems to have a conflict with\r\n          // latex formulas that contains '<'.\r\n          const latex = code.substring(startPosition + 2, endPosition);\r\n          const decodedLatex = Util.htmlEntitiesDecode(latex);\r\n          let mathml = Util.htmlSanitize(Latex.getMathMLFromLatex(decodedLatex, true));\r\n          if (!Configuration.get(\"saveHandTraces\")) {\r\n            // Remove hand traces.\r\n            mathml = MathML.removeAnnotation(mathml, \"application/json\");\r\n          }\r\n          output += mathml;\r\n          endPosition += 2;\r\n        } else {\r\n          output += \"$$\";\r\n          endPosition = startPosition + 2;\r\n        }\r\n\r\n        startPosition = code.indexOf(\"$$\", endPosition);\r\n      }\r\n\r\n      output += code.substring(endPosition, code.length);\r\n      code = output;\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * Parses end HTML code depending on the save mode. Converts all\r\n   * images into the element determined by the save mode:\r\n   * - xml: Parses images formulas into MathML.\r\n   * - safeXml: Parses images formulas into safeMAthML\r\n   * - base64: Parses images into base64 images.\r\n   * - image: Parse images into images (no parsing)\r\n   * @param {string} code - HTML code to be parsed\r\n   * @returns {string} HTML code parsed.\r\n   */\r\n  static endParseSaveMode(code) {\r\n    const savemode = Configuration.get(\"saveMode\");\r\n    const base64savemode = Configuration.get(\"base64savemode\");\r\n\r\n    if (savemode) {\r\n      if (savemode === \"safeXml\") {\r\n        code = Parser.codeImgTransform(code, \"img2mathml\");\r\n      } else if (savemode === \"xml\") {\r\n        code = Parser.codeImgTransform(code, \"img2mathml\");\r\n      } else if (savemode === \"base64\" && base64savemode === \"image\") {\r\n        code = Parser.codeImgTransform(code, \"img264\");\r\n      }\r\n    }\r\n\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * Auxiliar function that builds the data object to send to the showimage endpoint\r\n   * @param {Object[]} data - object containing showimage service parameters.\r\n   * @param {string} language - string containing the language of the formula.\r\n   * @returns {Object} JSON object with the data to send to showimage.\r\n   */\r\n  static createShowImageSrcData(data, language) {\r\n    const dataMd5 = {};\r\n    const renderParams = [\r\n      \"mml\",\r\n      \"color\",\r\n      \"centerbaseline\",\r\n      \"zoom\",\r\n      \"dpi\",\r\n      \"fontSize\",\r\n      \"fontFamily\",\r\n      \"defaultStretchy\",\r\n      \"backgroundColor\",\r\n      \"format\",\r\n    ];\r\n    renderParams.forEach((param) => {\r\n      if (typeof data[param] !== \"undefined\") {\r\n        dataMd5[param] = data[param];\r\n      }\r\n    });\r\n    // Data variables to get.\r\n    const dataObject = {};\r\n    Object.keys(data).forEach((key) => {\r\n      // We don't need mathml in this request we try to get cached.\r\n      // Only need the formula md5 calculated before.\r\n      if (key !== \"mml\") {\r\n        dataObject[key] = data[key];\r\n      }\r\n    });\r\n\r\n    dataObject.formula = com.wiris.js.JsPluginTools.md5encode(Util.propertiesToString(dataMd5));\r\n    dataObject.lang = typeof language === \"undefined\" ? \"en\" : language;\r\n    dataObject.version = Configuration.get(\"version\");\r\n\r\n    return dataObject;\r\n  }\r\n\r\n  /**\r\n   * Returns the result to call showimage service with the formula md5 as parameter.\r\n   *  The result could be:\r\n   * - {'status' : warning'} : The image associated to the MathML md5 is not in cache.\r\n   * - {'status' : 'ok' ...} : The image associated to the MathML md5 is in cache.\r\n   * @param {Object[]} data - object containing showimage service parameters.\r\n   * @param {string} language - string containing the language of the formula.\r\n   * @returns {Object} JSON object containing showimage response.\r\n   */\r\n  static createShowImageSrc(data, language) {\r\n    const dataObject = this.createShowImageSrcData(data, language);\r\n    const result = ServiceProvider.getService(\"showimage\", Util.httpBuildQuery(dataObject), true);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Transform html img tags inside a html code to mathml, base64 img tags (i.e with base64 on src)\r\n   * or showimage img tags (i.e with showimage.php on src)\r\n   * @param  {string} code - HTML code\r\n   * @param  {string} mode - base642showimage or img2mathml or img264 transform.\r\n   * @returns {string} html - code transformed.\r\n   */\r\n  static codeImgTransform(code, mode) {\r\n    let output = \"\";\r\n    let endPosition = 0;\r\n    const pattern = /<img/gi;\r\n    const patternLength = pattern.source.length;\r\n\r\n    while (pattern.test(code)) {\r\n      const startPosition = pattern.lastIndex - patternLength;\r\n      output += code.substring(endPosition, startPosition);\r\n\r\n      let i = startPosition + 1;\r\n\r\n      while (i < code.length && endPosition <= startPosition) {\r\n        const character = code.charAt(i);\r\n\r\n        if (character === '\"' || character === \"'\") {\r\n          const characterNextPosition = code.indexOf(character, i + 1);\r\n\r\n          if (characterNextPosition === -1) {\r\n            i = code.length; // End while.\r\n          } else {\r\n            i = characterNextPosition;\r\n          }\r\n        } else if (character === \">\") {\r\n          endPosition = i + 1;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if (endPosition < startPosition) {\r\n        // The img tag is stripped.\r\n        output += code.substring(startPosition, code.length);\r\n        return output;\r\n      }\r\n      let imgCode = code.substring(startPosition, endPosition);\r\n      const imgObject = Util.createObject(imgCode);\r\n      let xmlCode = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\r\n      let convertToXml;\r\n      let convertToSafeXml;\r\n\r\n      if (mode === \"base642showimage\") {\r\n        if (xmlCode == null) {\r\n          xmlCode = imgObject.getAttribute(\"alt\");\r\n        }\r\n        xmlCode = MathML.safeXmlDecode(xmlCode);\r\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, null, null);\r\n        output += Util.createObjectCode(imgCode);\r\n      } else if (mode === \"img2mathml\") {\r\n        if (Configuration.get(\"saveMode\")) {\r\n          if (Configuration.get(\"saveMode\") === \"safeXml\") {\r\n            convertToXml = true;\r\n            convertToSafeXml = true;\r\n          } else if (Configuration.get(\"saveMode\") === \"xml\") {\r\n            convertToXml = true;\r\n            convertToSafeXml = false;\r\n          }\r\n        }\r\n        output += Util.getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml);\r\n      } else if (mode === \"img264\") {\r\n        if (xmlCode === null) {\r\n          xmlCode = imgObject.getAttribute(\"alt\");\r\n        }\r\n        xmlCode = MathML.safeXmlDecode(xmlCode);\r\n\r\n        const properties = {};\r\n        properties.base64 = \"true\";\r\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, properties, null);\r\n        // Metrics.\r\n        Image.setImgSize(imgCode, imgCode.src, true);\r\n        output += Util.createObjectCode(imgCode);\r\n      }\r\n    }\r\n    output += code.substring(endPosition, code.length);\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Converts all occurrences of MathML to the corresponding image.\r\n   * @param {string} content - string with valid MathML code.\r\n   * The MathML code doesn't contain semantics.\r\n   * @param {Constants} characters - Constant object containing xmlCharacters\r\n   * or safeXmlCharacters relation.\r\n   * @param {string} language - a valid language code\r\n   * in order to generate formula accessibility.\r\n   * @returns {string} The input string with all the MathML\r\n   * occurrences replaced by the corresponding image.\r\n   */\r\n  static parseMathmlToImg(content, characters, language) {\r\n    let output = \"\";\r\n    const mathTagBegin = `${characters.tagOpener}math`;\r\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\r\n    let start = content.indexOf(mathTagBegin);\r\n    let end = 0;\r\n\r\n    while (start !== -1) {\r\n      output += content.substring(end, start);\r\n      // Avoid WIRIS images to be parsed.\r\n      const imageMathmlAtrribute = content.indexOf(Configuration.get(\"imageMathmlAttribute\"));\r\n      end = content.indexOf(mathTagEnd, start);\r\n\r\n      if (end === -1) {\r\n        end = content.length - 1;\r\n      } else if (imageMathmlAtrribute !== -1) {\r\n        // First close tag of img attribute\r\n        // If a mathmlAttribute exists should be inside a img tag.\r\n        end += content.indexOf(\"/>\", start);\r\n      } else {\r\n        end += mathTagEnd.length;\r\n      }\r\n\r\n      if (!MathML.isMathmlInAttribute(content, start) && imageMathmlAtrribute === -1) {\r\n        let mathml = content.substring(start, end);\r\n        mathml =\r\n          characters.id === Constants.safeXmlCharacters.id\r\n            ? MathML.safeXmlDecode(mathml)\r\n            : MathML.mathMLEntities(mathml);\r\n        output += Util.createObjectCode(Parser.mathmlToImgObject(document, mathml, null, language));\r\n      } else {\r\n        output += content.substring(start, end);\r\n      }\r\n\r\n      start = content.indexOf(mathTagBegin, end);\r\n    }\r\n\r\n    output += content.substring(end, content.length);\r\n    return output;\r\n  }\r\n}\r\n\r\n// Mutation observers to avoid wiris image formulas class be removed.\r\nif (typeof MutationObserver !== \"undefined\") {\r\n  const mutationObserver = new MutationObserver((mutations) => {\r\n    mutations.forEach((mutation) => {\r\n      if (\r\n        mutation.oldValue === Configuration.get(\"imageClassName\") &&\r\n        mutation.attributeName === \"class\" &&\r\n        mutation.target.className.indexOf(Configuration.get(\"imageClassName\")) === -1\r\n      ) {\r\n        mutation.target.className = Configuration.get(\"imageClassName\");\r\n      }\r\n    });\r\n  });\r\n\r\n  Parser.observer = Object.create(mutationObserver);\r\n  Parser.observer.Config = { attributes: true, attributeOldValue: true };\r\n  // We use own default config.\r\n  Parser.observer.observe = function (target) {\r\n    Object.getPrototypeOf(this).observe(target, this.Config);\r\n  };\r\n}\r\n","/* eslint-disable class-methods-use-this */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-extra-semi */\r\n\r\n// The rules above are disabled because we are implementing\r\n// an external interface.\r\n\r\nexport default class EditorListener {\r\n  /**\r\n   * @classdesc\r\n   * Determines if the content of the\r\n   * MathType Editor has changes.\r\n   * @implements {EditorListeners}\r\n   * @constructs\r\n   */\r\n  constructor() {\r\n    /**\r\n     * Indicates if the content of the editor has changed.\r\n     * @type {Boolean}\r\n     */\r\n    this.isContentChanged = false;\r\n\r\n    /**\r\n     * Indicates if the listener should be waiting for changes in the editor.\r\n     * @type {Boolean}\r\n     */\r\n    this.waitingForChanges = false;\r\n  }\r\n\r\n  /**\r\n   * Sets {@link EditorListener.isContentChanged} property.\r\n   * @param {Boolean} value - The new vlue.\r\n   */\r\n  setIsContentChanged(value) {\r\n    this.isContentChanged = value;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the content of the editor has been changed, false otherwise.\r\n   * @return {Boolean}\r\n   */\r\n  getIsContentChanged() {\r\n    return this.isContentChanged;\r\n  }\r\n\r\n  /**\r\n   * Determines if the EditorListener should wait for any changes.\r\n   * @param {Boolean} value - True if the editor should wait for changes, false otherwise.\r\n   */\r\n  setWaitingForChanges(value) {\r\n    this.waitingForChanges = value;\r\n  }\r\n\r\n  /**\r\n   * EditorListener method to overwrite.\r\n   * @type {JsEditor}\r\n   * @ignore\r\n   */\r\n  caretPositionChanged(_editor) {}\r\n\r\n  /**\r\n   * EditorListener method to overwrite\r\n   * @type {JsEditor}\r\n   * @ignore\r\n   */\r\n  clipboardChanged(_editor) {}\r\n\r\n  /**\r\n   * Determines if the content of an editor has been changed.\r\n   * @param {JsEditor} editor - editor object.\r\n   */\r\n  contentChanged(_editor) {\r\n    if (this.waitingForChanges === true && this.isContentChanged === false) {\r\n      this.isContentChanged = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * EditorListener method to overwrite\r\n   * @param {JsEditor} editor - The editor instance.\r\n   */\r\n  styleChanged(_editor) {}\r\n\r\n  /**\r\n   * EditorListener method to overwrite\r\n   * @param {JsEditor} - The editor instance.\r\n   */\r\n  transformationReceived(_editor) {}\r\n}\r\n","let wasm;\r\n\r\nconst cachedTextDecoder =\r\n  typeof TextDecoder !== \"undefined\"\r\n    ? new TextDecoder(\"utf-8\", { ignoreBOM: true, fatal: true })\r\n    : {\r\n        decode: () => {\r\n          throw Error(\"TextDecoder not available\");\r\n        },\r\n      };\r\n\r\nif (typeof TextDecoder !== \"undefined\") {\r\n  cachedTextDecoder.decode();\r\n}\r\n\r\nlet cachedUint8Memory0 = null;\r\n\r\nfunction getUint8Memory0() {\r\n  if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\r\n    cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\r\n  }\r\n  return cachedUint8Memory0;\r\n}\r\n\r\nfunction getStringFromWasm0(ptr, len) {\r\n  ptr = ptr >>> 0;\r\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\r\n}\r\n\r\nconst heap = new Array(128).fill(undefined);\r\n\r\nheap.push(undefined, null, true, false);\r\n\r\nlet heap_next = heap.length;\r\n\r\nfunction addHeapObject(obj) {\r\n  if (heap_next === heap.length) heap.push(heap.length + 1);\r\n  const idx = heap_next;\r\n  heap_next = heap[idx];\r\n\r\n  heap[idx] = obj;\r\n  return idx;\r\n}\r\n\r\nfunction getObject(idx) {\r\n  return heap[idx];\r\n}\r\n\r\nfunction dropObject(idx) {\r\n  if (idx < 132) return;\r\n  heap[idx] = heap_next;\r\n  heap_next = idx;\r\n}\r\n\r\nfunction takeObject(idx) {\r\n  const ret = getObject(idx);\r\n  dropObject(idx);\r\n  return ret;\r\n}\r\n\r\nlet WASM_VECTOR_LEN = 0;\r\n\r\nconst cachedTextEncoder =\r\n  typeof TextEncoder !== \"undefined\"\r\n    ? new TextEncoder(\"utf-8\")\r\n    : {\r\n        encode: () => {\r\n          throw Error(\"TextEncoder not available\");\r\n        },\r\n      };\r\n\r\nconst encodeString =\r\n  typeof cachedTextEncoder.encodeInto === \"function\"\r\n    ? function (arg, view) {\r\n        return cachedTextEncoder.encodeInto(arg, view);\r\n      }\r\n    : function (arg, view) {\r\n        const buf = cachedTextEncoder.encode(arg);\r\n        view.set(buf);\r\n        return {\r\n          read: arg.length,\r\n          written: buf.length,\r\n        };\r\n      };\r\n\r\nfunction passStringToWasm0(arg, malloc, realloc) {\r\n  if (realloc === undefined) {\r\n    const buf = cachedTextEncoder.encode(arg);\r\n    const ptr = malloc(buf.length, 1) >>> 0;\r\n    getUint8Memory0()\r\n      .subarray(ptr, ptr + buf.length)\r\n      .set(buf);\r\n    WASM_VECTOR_LEN = buf.length;\r\n    return ptr;\r\n  }\r\n\r\n  let len = arg.length;\r\n  let ptr = malloc(len, 1) >>> 0;\r\n\r\n  const mem = getUint8Memory0();\r\n\r\n  let offset = 0;\r\n\r\n  for (; offset < len; offset++) {\r\n    const code = arg.charCodeAt(offset);\r\n    if (code > 0x7f) break;\r\n    mem[ptr + offset] = code;\r\n  }\r\n\r\n  if (offset !== len) {\r\n    if (offset !== 0) {\r\n      arg = arg.slice(offset);\r\n    }\r\n    ptr = realloc(ptr, len, (len = offset + arg.length * 3), 1) >>> 0;\r\n    const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\r\n    const ret = encodeString(arg, view);\r\n\r\n    offset += ret.written;\r\n  }\r\n\r\n  WASM_VECTOR_LEN = offset;\r\n  return ptr;\r\n}\r\n\r\nfunction isLikeNone(x) {\r\n  return x === undefined || x === null;\r\n}\r\n\r\nlet cachedInt32Memory0 = null;\r\n\r\nfunction getInt32Memory0() {\r\n  if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\r\n    cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\r\n  }\r\n  return cachedInt32Memory0;\r\n}\r\n\r\nlet cachedFloat64Memory0 = null;\r\n\r\nfunction getFloat64Memory0() {\r\n  if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\r\n    cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\r\n  }\r\n  return cachedFloat64Memory0;\r\n}\r\n\r\nlet cachedBigInt64Memory0 = null;\r\n\r\nfunction getBigInt64Memory0() {\r\n  if (cachedBigInt64Memory0 === null || cachedBigInt64Memory0.byteLength === 0) {\r\n    cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\r\n  }\r\n  return cachedBigInt64Memory0;\r\n}\r\n\r\nfunction debugString(val) {\r\n  // primitive types\r\n  const type = typeof val;\r\n  if (type == \"number\" || type == \"boolean\" || val == null) {\r\n    return `${val}`;\r\n  }\r\n  if (type == \"string\") {\r\n    return `\"${val}\"`;\r\n  }\r\n  if (type == \"symbol\") {\r\n    const description = val.description;\r\n    if (description == null) {\r\n      return \"Symbol\";\r\n    } else {\r\n      return `Symbol(${description})`;\r\n    }\r\n  }\r\n  if (type == \"function\") {\r\n    const name = val.name;\r\n    if (typeof name == \"string\" && name.length > 0) {\r\n      return `Function(${name})`;\r\n    } else {\r\n      return \"Function\";\r\n    }\r\n  }\r\n  // objects\r\n  if (Array.isArray(val)) {\r\n    const length = val.length;\r\n    let debug = \"[\";\r\n    if (length > 0) {\r\n      debug += debugString(val[0]);\r\n    }\r\n    for (let i = 1; i < length; i++) {\r\n      debug += \", \" + debugString(val[i]);\r\n    }\r\n    debug += \"]\";\r\n    return debug;\r\n  }\r\n  // Test for built-in\r\n  const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\r\n  let className;\r\n  if (builtInMatches.length > 1) {\r\n    className = builtInMatches[1];\r\n  } else {\r\n    // Failed to match the standard '[object ClassName]'\r\n    return toString.call(val);\r\n  }\r\n  if (className == \"Object\") {\r\n    // we're a user defined class or Object\r\n    // JSON.stringify avoids problems with cycles, and is generally much\r\n    // easier than looping through ownProperties of `val`.\r\n    try {\r\n      return \"Object(\" + JSON.stringify(val) + \")\";\r\n    } catch (_) {\r\n      return \"Object\";\r\n    }\r\n  }\r\n  // errors\r\n  if (val instanceof Error) {\r\n    return `${val.name}: ${val.message}\\n${val.stack}`;\r\n  }\r\n  // TODO we could test for more things here, like `Set`s and `Map`s.\r\n  return className;\r\n}\r\n\r\nfunction makeClosure(arg0, arg1, dtor, f) {\r\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\r\n  const real = (...args) => {\r\n    // First up with a closure we increment the internal reference\r\n    // count. This ensures that the Rust closure environment won't\r\n    // be deallocated while we're invoking it.\r\n    state.cnt++;\r\n    try {\r\n      return f(state.a, state.b, ...args);\r\n    } finally {\r\n      if (--state.cnt === 0) {\r\n        wasm.__wbindgen_export_2.get(state.dtor)(state.a, state.b);\r\n        state.a = 0;\r\n      }\r\n    }\r\n  };\r\n  real.original = state;\r\n\r\n  return real;\r\n}\r\nfunction __wbg_adapter_46(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_3(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction makeMutClosure(arg0, arg1, dtor, f) {\r\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\r\n  const real = (...args) => {\r\n    // First up with a closure we increment the internal reference\r\n    // count. This ensures that the Rust closure environment won't\r\n    // be deallocated while we're invoking it.\r\n    state.cnt++;\r\n    const a = state.a;\r\n    state.a = 0;\r\n    try {\r\n      return f(a, state.b, ...args);\r\n    } finally {\r\n      if (--state.cnt === 0) {\r\n        wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\r\n      } else {\r\n        state.a = a;\r\n      }\r\n    }\r\n  };\r\n  real.original = state;\r\n\r\n  return real;\r\n}\r\nfunction __wbg_adapter_49(arg0, arg1) {\r\n  wasm.__wbindgen_export_4(arg0, arg1);\r\n}\r\n\r\nfunction __wbg_adapter_52(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_5(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction handleError(f, args) {\r\n  try {\r\n    return f.apply(this, args);\r\n  } catch (e) {\r\n    wasm.__wbindgen_export_6(addHeapObject(e));\r\n  }\r\n}\r\nfunction __wbg_adapter_103(arg0, arg1, arg2, arg3) {\r\n  wasm.__wbindgen_export_7(arg0, arg1, addHeapObject(arg2), addHeapObject(arg3));\r\n}\r\n\r\n/**\r\n */\r\nexport function main_js() {\r\n  wasm.main_js();\r\n}\r\n\r\nfunction getArrayU8FromWasm0(ptr, len) {\r\n  ptr = ptr >>> 0;\r\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\r\n}\r\n/**\r\n */\r\nexport const Level = Object.freeze({\r\n  Err: 0,\r\n  0: \"Err\",\r\n  Warn: 1,\r\n  1: \"Warn\",\r\n  Info: 2,\r\n  2: \"Info\",\r\n  Debug: 3,\r\n  3: \"Debug\",\r\n});\r\n/**\r\n */\r\nexport class Telemeter {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_telemeter_free(ptr);\r\n  }\r\n  /**\r\n   * @param {any} solution\r\n   * @param {any} hosts\r\n   * @param {any} config\r\n   */\r\n  constructor(solution, hosts, config) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.telemeter_new(retptr, addHeapObject(solution), addHeapObject(hosts), addHeapObject(config));\r\n      var r0 = getInt32Memory0()[retptr / 4 + 0];\r\n      var r1 = getInt32Memory0()[retptr / 4 + 1];\r\n      var r2 = getInt32Memory0()[retptr / 4 + 2];\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} sender_id\r\n   * @returns {Promise<any>}\r\n   */\r\n  identify(sender_id) {\r\n    const ptr0 = passStringToWasm0(sender_id, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.telemeter_identify(this.__wbg_ptr, ptr0, len0);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string} event_type\r\n   * @param {any} event_payload\r\n   * @returns {Promise<any>}\r\n   */\r\n  track(event_type, event_payload) {\r\n    const ptr0 = passStringToWasm0(event_type, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.telemeter_track(this.__wbg_ptr, ptr0, len0, addHeapObject(event_payload));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} level\r\n   * @param {string} message\r\n   * @param {any} payload\r\n   * @returns {Promise<any>}\r\n   */\r\n  log(level, message, payload) {\r\n    const ptr0 = passStringToWasm0(message, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.telemeter_log(this.__wbg_ptr, addHeapObject(level), ptr0, len0, addHeapObject(payload));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<any>}\r\n   */\r\n  finish() {\r\n    const ptr = this.__destroy_into_raw();\r\n    const ret = wasm.telemeter_finish(ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {boolean | undefined} [new_debug_status]\r\n   */\r\n  debug(new_debug_status) {\r\n    wasm.telemeter_debug(this.__wbg_ptr, isLikeNone(new_debug_status) ? 0xffffff : new_debug_status ? 1 : 0);\r\n  }\r\n}\r\n\r\nasync function __wbg_load(module, imports) {\r\n  if (typeof Response === \"function\" && module instanceof Response) {\r\n    if (typeof WebAssembly.instantiateStreaming === \"function\") {\r\n      try {\r\n        return await WebAssembly.instantiateStreaming(module, imports);\r\n      } catch (e) {\r\n        if (module.headers.get(\"Content-Type\") != \"application/wasm\") {\r\n          console.warn(\r\n            \"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\",\r\n            e,\r\n          );\r\n        } else {\r\n          throw e;\r\n        }\r\n      }\r\n    }\r\n\r\n    const bytes = await module.arrayBuffer();\r\n    return await WebAssembly.instantiate(bytes, imports);\r\n  } else {\r\n    const instance = await WebAssembly.instantiate(module, imports);\r\n\r\n    if (instance instanceof WebAssembly.Instance) {\r\n      return { instance, module };\r\n    } else {\r\n      return instance;\r\n    }\r\n  }\r\n}\r\n\r\nfunction __wbg_get_imports() {\r\n  const imports = {};\r\n  imports.wbg = {};\r\n  imports.wbg.__wbindgen_string_new = function (arg0, arg1) {\r\n    const ret = getStringFromWasm0(arg0, arg1);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_c728d68b8b34487e = function () {\r\n    const ret = new Object();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_status_7841bb47be2a8f16 = function (arg0) {\r\n    const ret = getObject(arg0).status;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_headers_ea7ef583d1564b08 = function (arg0) {\r\n    const ret = getObject(arg0).headers;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new0_ad75dd38f92424e2 = function () {\r\n    const ret = new Date();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_getTime_ed6ee333b702f8fc = function (arg0) {\r\n    const ret = getObject(arg0).getTime();\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_object_drop_ref = function (arg0) {\r\n    takeObject(arg0);\r\n  };\r\n  imports.wbg.__wbindgen_is_object = function (arg0) {\r\n    const val = getObject(arg0);\r\n    const ret = typeof val === \"object\" && val !== null;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_crypto_58f13aa23ffcb166 = function (arg0) {\r\n    const ret = getObject(arg0).crypto;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_process_5b786e71d465a513 = function (arg0) {\r\n    const ret = getObject(arg0).process;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_versions_c2ab80650590b6a2 = function (arg0) {\r\n    const ret = getObject(arg0).versions;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_node_523d7bd03ef69fba = function (arg0) {\r\n    const ret = getObject(arg0).node;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_is_string = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"string\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_msCrypto_abcb1295e768d1f2 = function (arg0) {\r\n    const ret = getObject(arg0).msCrypto;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_require_2784e593a4674877 = function () {\r\n    return handleError(function () {\r\n      const ret = module.require;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_newwithlength_13b5319ab422dcf6 = function (arg0) {\r\n    const ret = new Uint8Array(arg0 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_get_4a9aa5157afeb382 = function (arg0, arg1) {\r\n    const ret = getObject(arg0)[arg1 >>> 0];\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_next_1989a20442400aaa = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).next();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_done_bc26bf4ada718266 = function (arg0) {\r\n    const ret = getObject(arg0).done;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_value_0570714ff7d75f35 = function (arg0) {\r\n    const ret = getObject(arg0).value;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_iterator_7ee1a391d310f8e4 = function () {\r\n    const ret = Symbol.iterator;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_get_2aff440840bb6202 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = Reflect.get(getObject(arg0), getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_next_15da6a3df9290720 = function (arg0) {\r\n    const ret = getObject(arg0).next;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_is_function = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"function\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_call_669127b9d730c650 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).call(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_object_clone_ref = function (arg0) {\r\n    const ret = getObject(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_self_3fad056edded10bd = function () {\r\n    return handleError(function () {\r\n      const ret = self.self;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_window_a4f46c98a61d4089 = function () {\r\n    return handleError(function () {\r\n      const ret = window.window;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_globalThis_17eff828815f7d84 = function () {\r\n    return handleError(function () {\r\n      const ret = globalThis.globalThis;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_global_46f939f6541643c5 = function () {\r\n    return handleError(function () {\r\n      const ret = global.global;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_is_undefined = function (arg0) {\r\n    const ret = getObject(arg0) === undefined;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_newnoargs_ccdcae30fd002262 = function (arg0, arg1) {\r\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_isArray_38525be7442aa21e = function (arg0) {\r\n    const ret = Array.isArray(getObject(arg0));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_call_53fc3abd42e24ec8 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_isSafeInteger_c38b0a16d0c7cef7 = function (arg0) {\r\n    const ret = Number.isSafeInteger(getObject(arg0));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_new_feb65b865d980ae2 = function (arg0, arg1) {\r\n    try {\r\n      var state0 = { a: arg0, b: arg1 };\r\n      var cb0 = (arg0, arg1) => {\r\n        const a = state0.a;\r\n        state0.a = 0;\r\n        try {\r\n          return __wbg_adapter_103(a, state0.b, arg0, arg1);\r\n        } finally {\r\n          state0.a = a;\r\n        }\r\n      };\r\n      const ret = new Promise(cb0);\r\n      return addHeapObject(ret);\r\n    } finally {\r\n      state0.a = state0.b = 0;\r\n    }\r\n  };\r\n  imports.wbg.__wbindgen_memory = function () {\r\n    const ret = wasm.memory;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_buffer_344d9b41efe96da7 = function (arg0) {\r\n    const ret = getObject(arg0).buffer;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_d8a000788389a31e = function (arg0) {\r\n    const ret = new Uint8Array(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_set_dcfd613a3420f908 = function (arg0, arg1, arg2) {\r\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\r\n  };\r\n  imports.wbg.__wbg_length_a5587d6cd79ab197 = function (arg0) {\r\n    const ret = getObject(arg0).length;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_string_get = function (arg0, arg1) {\r\n    const obj = getObject(arg1);\r\n    const ret = typeof obj === \"string\" ? obj : undefined;\r\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    var len1 = WASM_VECTOR_LEN;\r\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n  };\r\n  imports.wbg.__wbg_stringify_4039297315a25b00 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = JSON.stringify(getObject(arg0));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_set_40f7786a25a9cc7e = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_has_cdf8b85f6e903c80 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = Reflect.has(getObject(arg0), getObject(arg1));\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_fetch_701fcd2bde06379a = function (arg0, arg1) {\r\n    const ret = getObject(arg0).fetch(getObject(arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_fetch_b5d6bebed1e6c2d2 = function (arg0) {\r\n    const ret = fetch(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3 = function (arg0, arg1, arg2) {\r\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_e4960143e41697a4 = function () {\r\n    return handleError(function () {\r\n      const ret = new AbortController();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_signal_1ed842bebd6ae322 = function (arg0) {\r\n    const ret = getObject(arg0).signal;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_abort_8355f201f30300bb = function (arg0) {\r\n    getObject(arg0).abort();\r\n  };\r\n  imports.wbg.__wbindgen_error_new = function (arg0, arg1) {\r\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_jsval_loose_eq = function (arg0, arg1) {\r\n    const ret = getObject(arg0) == getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_boolean_get = function (arg0) {\r\n    const v = getObject(arg0);\r\n    const ret = typeof v === \"boolean\" ? (v ? 1 : 0) : 2;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_number_get = function (arg0, arg1) {\r\n    const obj = getObject(arg1);\r\n    const ret = typeof obj === \"number\" ? obj : undefined;\r\n    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\r\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\r\n  };\r\n  imports.wbg.__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Uint8Array;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof ArrayBuffer;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_entries_6d727b73ee02b7ce = function (arg0) {\r\n    const ret = Object.entries(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_String_917f38a1211cf44b = function (arg0, arg1) {\r\n    const ret = String(getObject(arg1));\r\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n  };\r\n  imports.wbg.__wbg_warn_ade8d3b7ecee11ff = function (arg0, arg1) {\r\n    console.warn(getObject(arg0), getObject(arg1));\r\n  };\r\n  imports.wbg.__wbg_readyState_13e55da5ad6d64e2 = function (arg0) {\r\n    const ret = getObject(arg0).readyState;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_warn_4affe1093892a4ef = function (arg0) {\r\n    console.warn(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_close_f4135085ec3fc8f0 = function () {\r\n    return handleError(function (arg0) {\r\n      getObject(arg0).close();\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_new_b9b318679315404f = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = new WebSocket(getStringFromWasm0(arg0, arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setbinaryType_dcb62e0f2b346301 = function (arg0, arg1) {\r\n    getObject(arg0).binaryType = takeObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_log_7811587c4c6d2844 = function (arg0) {\r\n    console.log(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_error_f0a6627f4b23c19d = function (arg0) {\r\n    console.error(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_info_3ca7870690403fee = function (arg0) {\r\n    console.info(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_document_183cf1eecfdbffee = function (arg0) {\r\n    const ret = getObject(arg0).document;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_visibilityState_9721703a5ef75faf = function (arg0) {\r\n    const ret = getObject(arg0).visibilityState;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_getwithrefkey_3b3c46ba20582127 = function (arg0, arg1) {\r\n    const ret = getObject(arg0)[getObject(arg1)];\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_length_cace2e0b3ddc0502 = function (arg0) {\r\n    const ret = getObject(arg0).length;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_addEventListener_0f2891b0794e07fa = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      getObject(arg0).addEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_removeEventListener_104d11302bb212d1 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      getObject(arg0).removeEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_is_bigint = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"bigint\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_bigint_from_i64 = function (arg0) {\r\n    const ret = arg0;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_in = function (arg0, arg1) {\r\n    const ret = getObject(arg0) in getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_bigint_from_u64 = function (arg0) {\r\n    const ret = BigInt.asUintN(64, arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_jsval_eq = function (arg0, arg1) {\r\n    const ret = getObject(arg0) === getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_localStorage_e11f72e996a4f5d9 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).localStorage;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_getItem_c81cd3ae30cd579a = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      const ret = getObject(arg1).getItem(getStringFromWasm0(arg2, arg3));\r\n      var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n      var len1 = WASM_VECTOR_LEN;\r\n      getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n      getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_navigator_7078da62d92ff5ad = function (arg0) {\r\n    const ret = getObject(arg0).navigator;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_mediaDevices_e00b1f64d2b9939f = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).mediaDevices;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_enumerateDevices_619d52f5eef34c2f = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).enumerateDevices();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setItem_fe04f524052a3839 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).setItem(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_cb_drop = function (arg0) {\r\n    const obj = takeObject(arg0).original;\r\n    if (obj.cnt-- == 1) {\r\n      obj.a = 0;\r\n      return true;\r\n    }\r\n    const ret = false;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_deviceId_58f7da2228a26c02 = function (arg0, arg1) {\r\n    const ret = getObject(arg1).deviceId;\r\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Response_944e2745b5db71f5 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Response;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_randomFillSync_a0d98aa11c81fe89 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).randomFillSync(takeObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_subarray_6ca5cfa7fbb9abbe = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_getRandomValues_504510b5564925af = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).getRandomValues(getObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_bigint_get_as_i64 = function (arg0, arg1) {\r\n    const v = getObject(arg1);\r\n    const ret = typeof v === \"bigint\" ? v : undefined;\r\n    getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? BigInt(0) : ret;\r\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\r\n  };\r\n  imports.wbg.__wbindgen_debug_string = function (arg0, arg1) {\r\n    const ret = debugString(getObject(arg1));\r\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n  };\r\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\r\n    throw new Error(getStringFromWasm0(arg0, arg1));\r\n  };\r\n  imports.wbg.__wbg_then_89e1c559530b85cf = function (arg0, arg1) {\r\n    const ret = getObject(arg0).then(getObject(arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_queueMicrotask_e5949c35d772a669 = function (arg0) {\r\n    queueMicrotask(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_then_1bbc9edafd859b06 = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_queueMicrotask_2be8b97a81fe4d00 = function (arg0) {\r\n    const ret = getObject(arg0).queueMicrotask;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_resolve_a3252b2860f0a09e = function (arg0) {\r\n    const ret = Promise.resolve(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_url_1f609e63ff1a7983 = function (arg0, arg1) {\r\n    const ret = getObject(arg1).url;\r\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\r\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\r\n  };\r\n  imports.wbg.__wbg_send_2860805104507701 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).send(getArrayU8FromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_instanceof_Window_cde2416cf5126a72 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Window;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_new_19676474aa414d62 = function () {\r\n    return handleError(function () {\r\n      const ret = new Headers();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_append_feec4143bbf21904 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).append(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_newwithstrandinit_29038da14d09e330 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper1532 = function (arg0, arg1, arg2) {\r\n    const ret = makeClosure(arg0, arg1, 76, __wbg_adapter_46);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper1602 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_49);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper1834 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_52);\r\n    return addHeapObject(ret);\r\n  };\r\n\r\n  return imports;\r\n}\r\n\r\nfunction __wbg_init_memory(imports, maybe_memory) {}\r\n\r\nfunction __wbg_finalize_init(instance, module) {\r\n  wasm = instance.exports;\r\n  __wbg_init.__wbindgen_wasm_module = module;\r\n  cachedBigInt64Memory0 = null;\r\n  cachedFloat64Memory0 = null;\r\n  cachedInt32Memory0 = null;\r\n  cachedUint8Memory0 = null;\r\n\r\n  wasm.__wbindgen_start();\r\n  return wasm;\r\n}\r\n\r\nfunction initSync(module) {\r\n  if (wasm !== undefined) return wasm;\r\n\r\n  const imports = __wbg_get_imports();\r\n\r\n  __wbg_init_memory(imports);\r\n\r\n  if (!(module instanceof WebAssembly.Module)) {\r\n    module = new WebAssembly.Module(module);\r\n  }\r\n\r\n  const instance = new WebAssembly.Instance(module, imports);\r\n\r\n  return __wbg_finalize_init(instance, module);\r\n}\r\n\r\nasync function __wbg_init(input) {\r\n  if (wasm !== undefined) return wasm;\r\n\r\n  if (typeof input === \"undefined\") {\r\n    input = new URL(\"telemeter_wasm_bg.wasm\", import.meta.url);\r\n  }\r\n  const imports = __wbg_get_imports();\r\n\r\n  if (\r\n    typeof input === \"string\" ||\r\n    (typeof Request === \"function\" && input instanceof Request) ||\r\n    (typeof URL === \"function\" && input instanceof URL)\r\n  ) {\r\n    input = fetch(input);\r\n  }\r\n\r\n  __wbg_init_memory(imports);\r\n\r\n  const { instance, module } = await __wbg_load(await input, imports);\r\n\r\n  return __wbg_finalize_init(instance, module);\r\n}\r\n\r\nexport { initSync };\r\nexport default __wbg_init;\r\n","/* eslint-disable-next-line */\r\nimport init, { Telemeter as TelemeterWASM } from \"../telemeter-wasm\";\r\n\r\n/**\r\n * @classdesc\r\n * This class implements the @wiris/telemeter-wasm. A utility that helps our Solutions to send the data\r\n * to Telemetry in a more comfortable and homogeneous way.\r\n */\r\nexport default class Telemeter {\r\n  /**\r\n   * Inits Telemeter class.\r\n   * The parameters structures are defiended on {@link [Telemeter API](https://github.com/wiris/telemeter/blob/main/docs/USAGE.md#telemeter-api)}\r\n   * @param {Object} telemeterAttributes.solution - The product that send data to Telemetry.\r\n   * @param {Object} telemeterAttributes.hosts - Data about the environment where solution is integrated.\r\n   * @param {Object} telemeterAttributes.config - Configuration parameters.\r\n   */\r\n  static init(telemeterAttributes) {\r\n    if (!this.telemeter && !this.waitingForInit) {\r\n      this.waitingForInit = true;\r\n      init(telemeterAttributes.url)\r\n        .then(() => {\r\n          this.telemeter = new TelemeterWASM(\r\n            telemeterAttributes.solution,\r\n            telemeterAttributes.hosts,\r\n            telemeterAttributes.config,\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        })\r\n        .finally(() => (this.waitingForInit = false));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes the Telemetry Session. After calling this method no data will be added to the Telemetry Session.\r\n   */\r\n  static async finish() {\r\n    if (!this.telemeter) return;\r\n\r\n    try {\r\n      const local_telemeter = this.telemeter;\r\n      this.telemeter = undefined;\r\n      await local_telemeter.finish();\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n}\r\n","import Configuration from \"./configuration\";\r\nimport Core from \"./core.src\";\r\nimport EditorListener from \"./editorlistener\";\r\nimport Listeners from \"./listeners\";\r\nimport MathML from \"./mathml\";\r\nimport Util from \"./util\";\r\nimport Telemeter from \"./telemeter\";\r\n\r\nexport default class ContentManager {\r\n  /**\r\n   * @classdesc\r\n   * This class represents a modal dialog, managing the following:\r\n   * - The insertion of content into the current instance of the {@link ModalDialog} class.\r\n   * - The actions to be done once the modal object has been submitted\r\n   *   (submitAction} method).\r\n   * - The update of the content when the {@link ModalDialog} class is also updated,\r\n   *   for example when ModalDialog is re-opened.\r\n   * - The communication between the {@link ModalDialog} class and itself, if the content\r\n   *   has been changed (hasChanges} method).\r\n   * @constructs\r\n   * @param {Object} contentManagerAttributes - Object containing all attributes needed to\r\n   * create a new instance.\r\n   */\r\n  constructor(contentManagerAttributes) {\r\n    /**\r\n     * An object containing MathType editor parameters. See\r\n     * http://docs.wiris.com/en/mathtype/mathtype_web/sdk-api/parameters for further information.\r\n     * @type {Object}\r\n     */\r\n    this.editorAttributes = {};\r\n    if (\"editorAttributes\" in contentManagerAttributes) {\r\n      this.editorAttributes = contentManagerAttributes.editorAttributes;\r\n    } else {\r\n      throw new Error(\"ContentManager constructor error: editorAttributes property missed.\");\r\n    }\r\n\r\n    /**\r\n     * CustomEditors instance. Contains the custom editors.\r\n     * @type {CustomEditors}\r\n     */\r\n    this.customEditors = null;\r\n    if (\"customEditors\" in contentManagerAttributes) {\r\n      this.customEditors = contentManagerAttributes.customEditors;\r\n    }\r\n\r\n    /**\r\n     * Environment properties. This object contains data about the integration platform.\r\n     * @type {Object}\r\n     * @property {String} editor - Editor name. Usually the HTML editor.\r\n     * @property {String} mode - Save mode. Xml by default.\r\n     * @property {String} version - Plugin version.\r\n     */\r\n    this.environment = {};\r\n    if (\"environment\" in contentManagerAttributes) {\r\n      this.environment = contentManagerAttributes.environment;\r\n    } else {\r\n      throw new Error(\"ContentManager constructor error: environment property missed\");\r\n    }\r\n\r\n    /**\r\n     * ContentManager language.\r\n     * @type {String}\r\n     */\r\n    this.language = \"\";\r\n    if (\"language\" in contentManagerAttributes) {\r\n      this.language = contentManagerAttributes.language;\r\n    } else {\r\n      throw new Error(\"ContentManager constructor error: language property missed\");\r\n    }\r\n\r\n    /**\r\n     * {@link EditorListener} instance. Manages the changes inside the editor.\r\n     * @type {EditorListener}\r\n     */\r\n    this.editorListener = new EditorListener();\r\n\r\n    /**\r\n     * MathType editor instance.\r\n     * @type {JsEditor}\r\n     */\r\n    this.editor = null;\r\n\r\n    /**\r\n     * Navigator user agent.\r\n     * @type {String}\r\n     */\r\n    this.ua = navigator.userAgent.toLowerCase();\r\n\r\n    /**\r\n     * Mobile device properties object\r\n     * @type {DeviceProperties}\r\n     */\r\n    this.deviceProperties = {};\r\n    this.deviceProperties.isAndroid = this.ua.indexOf(\"android\") > -1;\r\n    this.deviceProperties.isIOS = ContentManager.isIOS();\r\n\r\n    /**\r\n     * Custom editor toolbar.\r\n     * @type {String}\r\n     */\r\n    this.toolbar = null;\r\n\r\n    /**\r\n     * Custom editor toolbar.\r\n     * @type {String}\r\n     */\r\n    this.dbclick = null;\r\n\r\n    /**\r\n     * Instance of the {@link ModalDialog} class associated with the current\r\n     * {@link ContentManager} instance.\r\n     * @type {ModalDialog}\r\n     */\r\n    this.modalDialogInstance = null;\r\n\r\n    /**\r\n     * ContentManager listeners.\r\n     * @type {Listeners}\r\n     */\r\n    this.listeners = new Listeners();\r\n\r\n    /**\r\n     * MathML associated to the ContentManager instance.\r\n     * @type {String}\r\n     */\r\n    this.mathML = null;\r\n\r\n    /**\r\n     * Indicates if the edited element is a new one or not.\r\n     * @type {Boolean}\r\n     */\r\n    this.isNewElement = true;\r\n\r\n    /**\r\n     * {@link IntegrationModel} instance. Needed to call wrapper methods.\r\n     * @type {IntegrationModel}\r\n     */\r\n    this.integrationModel = null;\r\n  }\r\n\r\n  /**\r\n   * Adds a new listener to the current {@link ContentManager} instance.\r\n   * @param {Object} listener - The listener to be added.\r\n   */\r\n  addListener(listener) {\r\n    this.listeners.add(listener);\r\n  }\r\n\r\n  /**\r\n   * Sets an instance of {@link IntegrationModel} class to the current {@link ContentManager}\r\n   * instance.\r\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} instance.\r\n   */\r\n  setIntegrationModel(integrationModel) {\r\n    this.integrationModel = integrationModel;\r\n  }\r\n\r\n  /**\r\n   * Sets the {@link ModalDialog} instance into the current {@link ContentManager} instance.\r\n   * @param {ModalDialog} modalDialogInstance - The {@link ModalDialog} instance\r\n   */\r\n  setModalDialogInstance(modalDialogInstance) {\r\n    this.modalDialogInstance = modalDialogInstance;\r\n  }\r\n\r\n  /**\r\n   * Inserts the content into the current {@link ModalDialog} instance updating\r\n   * the title and inserting the JavaScript editor.\r\n   */\r\n  insert() {\r\n    // Before insert the editor we update the modal object title to avoid weird render display.\r\n    this.updateTitle(this.modalDialogInstance);\r\n    this.insertEditor(this.modalDialogInstance);\r\n  }\r\n\r\n  /**\r\n   * Inserts MathType editor into the {@link ModalDialog.contentContainer}. It waits until\r\n   * editor's JavaScript is loaded.\r\n   */\r\n  insertEditor() {\r\n    if (ContentManager.isEditorLoaded()) {\r\n      this.editor = window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);\r\n      this.editor.insertInto(this.modalDialogInstance.contentContainer);\r\n      this.editor.focus();\r\n\r\n      // `editor.action(\"rtl\");` toggles the RTL mode based on the current state, it doesn't just switch to RTL.\r\n      if (this.modalDialogInstance.rtl && !this.editor.getEditorModel().isRTL()) {\r\n        this.editor.action(\"rtl\");\r\n      }\r\n      // Setting div in rtl in case of it's activated.\r\n      if (this.editor.getEditorModel().isRTL()) {\r\n        this.editor.element.style.direction = \"rtl\";\r\n      }\r\n\r\n      // Editor listener: this object manages the changes logic of editor.\r\n      this.editor.getEditorModel().addEditorListener(this.editorListener);\r\n\r\n      // iOS events.\r\n      if (this.modalDialogInstance.deviceProperties.isIOS) {\r\n        setTimeout(function () {\r\n          // Make sure the modalDialogInstance is available when the timeout is over\r\n          // to avoid throw errors and stop execution.\r\n          if (this.hasOwnProperty(\"modalDialogInstance\")) this.modalDialogInstance.hideKeyboard(); // eslint-disable-line no-prototype-builtins\r\n        }, 400);\r\n\r\n        const formulaDisplayDiv = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\r\n        Util.addEvent(formulaDisplayDiv, \"focus\", this.modalDialogInstance.handleOpenedIosSoftkeyboard);\r\n        Util.addEvent(formulaDisplayDiv, \"blur\", this.modalDialogInstance.handleClosedIosSoftkeyboard);\r\n      }\r\n      // Fire onLoad event. Necessary to set the MathML into the editor\r\n      // after is loaded.\r\n      this.listeners.fire(\"onLoad\", {});\r\n    } else {\r\n      setTimeout(ContentManager.prototype.insertEditor.bind(this), 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initializes the current class by loading MathType script.\r\n   */\r\n  init() {\r\n    if (!ContentManager.isEditorLoaded()) {\r\n      this.addEditorAsExternalDependency();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds script element to the DOM to include editor externally.\r\n   */\r\n  addEditorAsExternalDependency() {\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    let editorUrl = Configuration.get(\"editorUrl\");\r\n\r\n    // We create an object url for parse url string and work more efficiently.\r\n    const anchorElement = document.createElement(\"a\");\r\n\r\n    ContentManager.setHrefToAnchorElement(anchorElement, editorUrl);\r\n    ContentManager.setProtocolToAnchorElement(anchorElement);\r\n\r\n    editorUrl = ContentManager.getURLFromAnchorElement(anchorElement);\r\n\r\n    // Load editor URL. We add stats as GET params.\r\n    const stats = this.getEditorStats();\r\n    script.src = `${editorUrl}?lang=${this.language}&stats-editor=${stats.editor}&stats-mode=${stats.mode}&stats-version=${stats.version}`;\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n  }\r\n\r\n  /**\r\n   * Sets the specified url to the anchor element.\r\n   * @param {HTMLAnchorElement} anchorElement - Element where set 'url'.\r\n   * @param {String} url - URL to set.\r\n   */\r\n  static setHrefToAnchorElement(anchorElement, url) {\r\n    anchorElement.href = url;\r\n  }\r\n\r\n  /**\r\n   * Sets the current protocol to the anchor element.\r\n   * @param {HTMLAnchorElement} anchorElement - Element where set its protocol.\r\n   */\r\n  static setProtocolToAnchorElement(anchorElement) {\r\n    // Change to https if necessary.\r\n    if (window.location.href.indexOf(\"https://\") === 0) {\r\n      // It check if browser is https and configuration is http.\r\n      // If this is so, we will replace protocol.\r\n      if (anchorElement.protocol === \"http:\") {\r\n        anchorElement.protocol = \"https:\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the url of the anchor element adding the current port\r\n   * if it is needed.\r\n   * @param {HTMLAnchorElement} anchorElement - Element where extract the url.\r\n   * @returns {String}\r\n   */\r\n  static getURLFromAnchorElement(anchorElement) {\r\n    // Check protocol and remove port if it's standard.\r\n    const removePort = anchorElement.port === \"80\" || anchorElement.port === \"443\" || anchorElement.port === \"\";\r\n    return `${anchorElement.protocol}//${anchorElement.hostname}${removePort ? \"\" : `:${anchorElement.port}`}${anchorElement.pathname.startsWith(\"/\") ? anchorElement.pathname : `/${anchorElement.pathname}`}`; // eslint-disable-line max-len\r\n  }\r\n\r\n  /**\r\n   * Returns object with editor stats.\r\n   *\r\n   * @typedef {Object} EditorStatsObject\r\n   * @property {string} editor - Editor name.\r\n   * @property {string} mode - Current configuration for formula save mode.\r\n   * @property {string} version - Current plugins version.\r\n   * @returns {EditorStatsObject}\r\n   */\r\n  getEditorStats() {\r\n    // Editor stats. Use environment property to set it.\r\n    const stats = {};\r\n    if (\"editor\" in this.environment) {\r\n      stats.editor = this.environment.editor;\r\n    } else {\r\n      stats.editor = \"unknown\";\r\n    }\r\n\r\n    if (\"mode\" in this.environment) {\r\n      stats.mode = this.environment.mode;\r\n    } else {\r\n      stats.mode = Configuration.get(\"saveMode\");\r\n    }\r\n\r\n    if (\"version\" in this.environment) {\r\n      stats.version = this.environment.version;\r\n    } else {\r\n      stats.version = Configuration.get(\"version\");\r\n    }\r\n\r\n    return stats;\r\n  }\r\n\r\n  /**\r\n   * Returns true if device is iOS. Otherwise, false.\r\n   * @returns {Boolean}\r\n   */\r\n  static isIOS() {\r\n    return (\r\n      [\"iPad Simulator\", \"iPhone Simulator\", \"iPod Simulator\", \"iPad\", \"iPhone\", \"iPod\"].includes(navigator.platform) ||\r\n      // iPad on iOS 13 detection\r\n      (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Returns true if device is Mobile. Otherwise, false.\r\n   * @returns {Boolean}\r\n   */\r\n  static isMobile() {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n  }\r\n\r\n  /**\r\n   * Returns true if editor is loaded. Otherwise, false.\r\n   * @returns {Boolean}\r\n   */\r\n  static isEditorLoaded() {\r\n    // To know if editor JavaScript is loaded we need to wait until\r\n    // window.com.wiris.jsEditor.JsEditor.newInstance is ready.\r\n    return (\r\n      window.com &&\r\n      window.com.wiris &&\r\n      window.com.wiris.jsEditor &&\r\n      window.com.wiris.jsEditor.JsEditor &&\r\n      window.com.wiris.jsEditor.JsEditor.newInstance\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets the {@link ContentManager.editor} initial content.\r\n   */\r\n  setInitialContent() {\r\n    if (!this.isNewElement) {\r\n      this.setMathML(this.mathML);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a MathML into {@link ContentManager.editor} instance.\r\n   * @param {String} mathml - MathML string.\r\n   * @param {Boolean} focusDisabled - If true editor don't get focus after the MathML is set.\r\n   * False by default.\r\n   */\r\n  setMathML(mathml, focusDisabled) {\r\n    // By default focus is enabled.\r\n    if (typeof focusDisabled === \"undefined\") {\r\n      focusDisabled = false;\r\n    }\r\n    // Using setMathML method is not a change produced by the user but for the API\r\n    // so we set to false the contentChange property of editorListener.\r\n    this.editor.setMathMLWithCallback(mathml, () => {\r\n      this.editorListener.setWaitingForChanges(true);\r\n    });\r\n\r\n    // We need to wait a little until the callback finish.\r\n    setTimeout(() => {\r\n      this.editorListener.setIsContentChanged(false);\r\n    }, 500);\r\n\r\n    // In some scenarios - like closing modal object - editor mustn't be focused.\r\n    if (!focusDisabled) {\r\n      this.onFocus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the focus to the current instance of {@link ContentManager.editor}. Triggered by\r\n   * {@link ModalDialog.focus}.\r\n   */\r\n  onFocus() {\r\n    if (typeof this.editor !== \"undefined\" && this.editor != null) {\r\n      this.editor.focus();\r\n\r\n      // On WordPress integration, the focus gets lost right after setting it.\r\n      // To fix this, we enforce another focus some milliseconds after this behaviour.\r\n      setTimeout(() => {\r\n        this.editor.focus();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the edition area by calling {@link IntegrationModel.updateFormula}.\r\n   * Triggered by {@link ModalDialog.submitAction}.\r\n   */\r\n  submitAction() {\r\n    if (!this.editor.isFormulaEmpty()) {\r\n      let mathML = this.editor.getMathMLWithSemantics();\r\n      // Add class for custom editors.\r\n      if (this.customEditors.getActiveEditor() !== null) {\r\n        const { toolbar } = this.customEditors.getActiveEditor();\r\n        mathML = MathML.addCustomEditorClassAttribute(mathML, toolbar);\r\n      } else {\r\n        // We need - if exists - the editor name from MathML\r\n        // class attribute.\r\n        Object.keys(this.customEditors.editors).forEach((key) => {\r\n          mathML = MathML.removeCustomEditorClassAttribute(mathML, key);\r\n        });\r\n      }\r\n      const mathmlEntitiesEncoded = MathML.mathMLEntities(mathML);\r\n      this.integrationModel.updateFormula(mathmlEntitiesEncoded);\r\n    } else {\r\n      this.integrationModel.updateFormula(null);\r\n    }\r\n\r\n    this.customEditors.disable();\r\n    this.integrationModel.notifyWindowClosed();\r\n\r\n    // Set disabled focus to prevent lost focus.\r\n    this.setEmptyMathML();\r\n    this.customEditors.disable();\r\n  }\r\n\r\n  /**\r\n   * Sets an empty MathML as {@link ContentManager.editor} content.\r\n   * This will open the MT/CT editor with the hand mode.\r\n   * It adds dir rtl in case of it's activated.\r\n   */\r\n  setEmptyMathML() {\r\n    const isMobile = this.deviceProperties.isAndroid || this.deviceProperties.isIOS;\r\n    const isRTL = this.editor.getEditorModel().isRTL();\r\n\r\n    if (isMobile || this.integrationModel.forcedHandMode) {\r\n      // For mobile devices or forced hand mode, set an empty annotation MATHML to maintain the editor in Hand mode.\r\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>`;\r\n      this.setMathML(mathML, true);\r\n    } else {\r\n      // For non-mobile devices or not forced hand mode, set the empty MathML without an annotation.\r\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}/>`;\r\n      this.setMathML(mathML, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open event. Triggered by {@link ModalDialog.open}. Does the following:\r\n   * - Updates the {@link ContentManager.editor} content\r\n   *   (with an empty MathML or an existing formula),\r\n   * - Updates the {@link ContentManager.editor} toolbar.\r\n   * - Recovers the the focus.\r\n   */\r\n  onOpen() {\r\n    if (this.isNewElement) {\r\n      this.setEmptyMathML();\r\n    } else {\r\n      this.setMathML(this.mathML);\r\n    }\r\n    const toolbar = this.updateToolbar();\r\n    this.onFocus();\r\n\r\n    if (this.deviceProperties.isIOS) {\r\n      const zoom = document.documentElement.clientWidth / window.innerWidth;\r\n\r\n      if (zoom !== 1) {\r\n        // Open editor in Keyboard mode if user use iOS, Safari and page is zoomed.\r\n        this.setKeyboardMode();\r\n      }\r\n    }\r\n\r\n    const trigger = this.dbclick ? \"formula\" : \"button\";\r\n\r\n    // Call Telemetry service to track the event.\r\n    try {\r\n      Telemeter.telemeter.track(\"OPENED_MTCT_EDITOR\", {\r\n        toolbar,\r\n        trigger,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error tracking OPENED_MTCT_EDITOR\", error);\r\n    }\r\n\r\n    Core.globalListeners.fire(\"onModalOpen\", {});\r\n\r\n    if (this.integrationModel.forcedHandMode) {\r\n      this.hideHandModeButton();\r\n\r\n      // In case we have a keyboard written formula, we still want it to be opened with handMode.\r\n      if (this.mathML && !this.mathML.includes('<annotation encoding=\"application/json\">') && !this.isNewElement) {\r\n        this.openHandOnKeyboardMathML(this.mathML, this.editor);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change Editor in keyboard mode when is loaded\r\n   */\r\n  setKeyboardMode() {\r\n    const wrsEditor = document.getElementsByClassName(\"wrs_handOpen wrs_disablePalette\")[0];\r\n    if (wrsEditor) {\r\n      wrsEditor.classList.remove(\"wrs_handOpen\");\r\n      wrsEditor.classList.remove(\"wrs_disablePalette\");\r\n    } else {\r\n      setTimeout(ContentManager.prototype.setKeyboardMode.bind(this), 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides the hand <-> keyboard mode switch.\r\n   *\r\n   * This method relies completely on the classes used on different HTML elements within the editor itself, meaning\r\n   * any change on those classes will make this code stop working properly.\r\n   *\r\n   * On top of that, some of those classes are changed on runtime (for example, the one that makes some buttons change).\r\n   * This forces us to use some delayed code (this is, a timeout) to make sure everything exists when we need it.\r\n   * @param {*} forced (boolean) Forces the user to stay in Hand mode by hiding the keyboard mode button.\r\n   */\r\n  hideHandModeButton(forced = true) {\r\n    if (this.handSwitchHidden) {\r\n      return; // hand <-> keyboard button already hidden.\r\n    }\r\n\r\n    // \"Open hand mode\" button takes a little bit to be available.\r\n    // This selector gets the hand <-> keyboard mode switch\r\n    const handModeButtonSelector =\r\n      \"div.wrs_editor.wrs_flexEditor.wrs_withHand.wrs_animated .wrs_handWrapper input[type=button]\";\r\n\r\n    // If in \"forced mode\", we hide the \"keyboard button\" so the user can't can't change between hand and keyboard modes.\r\n    // We use an observer to ensure that the button it hidden as soon as it appears.\r\n    if (forced) {\r\n      const mutationInstance = new MutationObserver((mutations) => {\r\n        const handModeButton = document.querySelector(handModeButtonSelector);\r\n        if (handModeButton) {\r\n          handModeButton.hidden = true;\r\n          this.handSwitchHidden = true;\r\n          mutationInstance.disconnect();\r\n        }\r\n      });\r\n      mutationInstance.observe(document.body, {\r\n        attributes: true,\r\n        childList: true,\r\n        characterData: true,\r\n        subtree: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * It will open any formula written in Keyboard mode with the hand mode with the default hand trace.\r\n   *\r\n   * @param {String} mathml The original KeyBoard MathML\r\n   * @param {Object} editor The editor object.\r\n   */\r\n  async openHandOnKeyboardMathML(mathml, editor) {\r\n    // First, as an editor requirement, we need to update the editor object with the current MathML formula.\r\n    // Once the MathML formula is updated to the one we want to open with handMode, we will be able to proceed.\r\n    await new Promise((resolve) => {\r\n      editor.setMathMLWithCallback(mathml, resolve);\r\n    });\r\n\r\n    // We wait until the hand editor object exists.\r\n    await this.waitForHand(editor);\r\n\r\n    // Logic to get the hand traces and open the formula in hand mode.\r\n    // This logic comes from the editor.\r\n    const handEditor = editor.hand;\r\n    editor.handTemporalMathML = editor.getMathML();\r\n    const handCoordinates = editor.editorModel.getHandStrokes();\r\n    handEditor.setStrokes(handCoordinates);\r\n    handEditor.fitStrokes(true);\r\n    editor.openHand();\r\n  }\r\n\r\n  /**\r\n   * Waits until the hand editor object exists.\r\n   * @param {Obect} editor The editor object.\r\n   */\r\n  async waitForHand(editor) {\r\n    while (!editor.hand) {\r\n      await new Promise((resolve) => setTimeout(resolve, 100));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the correct toolbar depending if exist other custom toolbars\r\n   * at the same time (e.g: Chemistry).\r\n   */\r\n  updateToolbar() {\r\n    this.updateTitle(this.modalDialogInstance);\r\n    const customEditor = this.customEditors.getActiveEditor();\r\n\r\n    let toolbar;\r\n    if (customEditor) {\r\n      toolbar = customEditor.toolbar ? customEditor.toolbar : _wrs_int_wirisProperties.toolbar;\r\n\r\n      if (this.toolbar == null || this.toolbar !== toolbar) {\r\n        this.setToolbar(toolbar);\r\n      }\r\n    } else {\r\n      toolbar = this.getToolbar();\r\n      if (this.toolbar == null || this.toolbar !== toolbar) {\r\n        this.setToolbar(toolbar);\r\n        this.customEditors.disable();\r\n      }\r\n    }\r\n\r\n    return toolbar;\r\n  }\r\n\r\n  /**\r\n   * Updates the current {@link ModalDialog.title}. If a {@link CustomEditors} is enabled\r\n   * sets the custom editor title. Otherwise sets the default title.\r\n   */\r\n  updateTitle() {\r\n    const customEditor = this.customEditors.getActiveEditor();\r\n    if (customEditor) {\r\n      this.modalDialogInstance.setTitle(customEditor.title);\r\n    } else {\r\n      this.modalDialogInstance.setTitle(\"MathType\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the editor toolbar, depending on the configuration local or server side.\r\n   * @returns {String} - Toolbar identifier.\r\n   */\r\n  getToolbar() {\r\n    let toolbar = \"general\";\r\n    if (\"toolbar\" in this.editorAttributes) {\r\n      ({ toolbar } = this.editorAttributes);\r\n    }\r\n    // TODO: Change global integration variable for integration custom toolbar.\r\n    if (toolbar === \"general\") {\r\n      // eslint-disable-next-line camelcase\r\n      toolbar =\r\n        typeof _wrs_int_wirisProperties === \"undefined\" || typeof _wrs_int_wirisProperties.toolbar === \"undefined\"\r\n          ? \"general\"\r\n          : _wrs_int_wirisProperties.toolbar;\r\n    }\r\n\r\n    return toolbar;\r\n  }\r\n\r\n  /**\r\n   * Sets the current {@link ContentManager.editor} instance toolbar.\r\n   * @param {String} toolbar - The toolbar name.\r\n   */\r\n  setToolbar(toolbar) {\r\n    this.toolbar = toolbar;\r\n    this.editor.setParams({ toolbar: this.toolbar });\r\n  }\r\n\r\n  /**\r\n   * Sets the custom headers added on editor requests.\r\n   * @returns {Object} headers - key value headers.\r\n   */\r\n  setCustomHeaders(headers) {\r\n    let headersObj = {};\r\n\r\n    // We control that we only get String or Object as the input.\r\n    if (typeof headers === \"object\") {\r\n      headersObj = headers;\r\n    } else if (typeof headers === \"string\") {\r\n      headersObj = Util.convertStringToObject(headers);\r\n    }\r\n\r\n    this.editor.setParams({ customHeaders: headersObj });\r\n    return headersObj;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the content of the editor has been changed. The logic of the changes\r\n   * is delegated to {@link EditorListener} class.\r\n   * @returns {Boolean} True if the editor content has been changed. False otherwise.\r\n   */\r\n  hasChanges() {\r\n    return !this.editor.isFormulaEmpty() && this.editorListener.getIsContentChanged();\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard events detected in modal when elements of this class intervene.\r\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\r\n   */\r\n  onKeyDown(keyboardEvent) {\r\n    if (keyboardEvent.key !== undefined && keyboardEvent.repeat === false) {\r\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\r\n        // Code to detect Esc event.\r\n        // There should be only one element with class name 'wrs_pressed' at the same time.\r\n        let list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed\");\r\n        if (list.length === 0) {\r\n          list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed\");\r\n          if (list.length === 0) {\r\n            list = document.getElementsByClassName(\"wrs_select wrs_pressed\");\r\n            if (list.length === 0) {\r\n              this.modalDialogInstance.cancelAction();\r\n              keyboardEvent.stopPropagation();\r\n              keyboardEvent.preventDefault();\r\n            }\r\n          }\r\n        }\r\n      } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\r\n        // Code to detect shift Tab event.\r\n        if (document.activeElement === this.modalDialogInstance.submitButton) {\r\n          // Focus is on OK button.\r\n          this.editor.focus();\r\n          keyboardEvent.stopPropagation();\r\n          keyboardEvent.preventDefault();\r\n        } else if (document.querySelector('[title=\"Manual\"]') === document.activeElement) {\r\n          // Focus is on minimize button (_).\r\n          this.modalDialogInstance.closeDiv.focus();\r\n          keyboardEvent.stopPropagation();\r\n          keyboardEvent.preventDefault();\r\n        } else if (document.activeElement === this.modalDialogInstance.minimizeDiv) {\r\n          // Focus on cancel button.\r\n          if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\r\n            this.modalDialogInstance.cancelButton.focus();\r\n            keyboardEvent.stopPropagation();\r\n            keyboardEvent.preventDefault();\r\n          }\r\n        }\r\n      } else if (keyboardEvent.key === \"Tab\") {\r\n        // Code to detect Tab event.\r\n        if (document.activeElement === this.modalDialogInstance.cancelButton) {\r\n          // Focus is on X button.\r\n          this.modalDialogInstance.minimizeDiv.focus();\r\n          keyboardEvent.stopPropagation();\r\n          keyboardEvent.preventDefault();\r\n        } else if (document.activeElement === this.modalDialogInstance.closeDiv) {\r\n          // Focus on help button.\r\n          if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\r\n            const element = document.querySelector('[title=\"Manual\"]');\r\n            element.focus();\r\n            keyboardEvent.stopPropagation();\r\n            keyboardEvent.preventDefault();\r\n          }\r\n        } else {\r\n          // There should be only one element with class name 'wrs_formulaDisplay'.\r\n          const element = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\r\n          if (element.getAttribute(\"class\") === \"wrs_formulaDisplay wrs_focused\") {\r\n            // Focus is on formuladisplay.\r\n            this.modalDialogInstance.submitButton.focus();\r\n            keyboardEvent.stopPropagation();\r\n            keyboardEvent.preventDefault();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * A custom editor is MathType editor with a different\r\n * @typedef {Object} CustomEditor\r\n * @property {String} CustomEditor.name - Custom editor name.\r\n * @property {String} CustomEditor.toolbar - Custom editor toolbar.\r\n * @property {String} CustomEditor.icon - Custom editor icon.\r\n * @property {String} CustomEditor.confVariable - Configuration property to manage\r\n * the availability of the custom editor.\r\n * @property {String} CustomEditor.title - Custom editor modal dialog title.\r\n * @property {String} CustomEditor.tooltip - Custom editor icon tooltip.\r\n */\r\n\r\nexport default class CustomEditors {\r\n  /**\r\n   * @classdesc\r\n   * This class represents the MathType custom editors manager.\r\n   * A custom editor is MathType editor with a custom  toolbar.\r\n   * This class associates a {@link CustomEditor} to:\r\n   * - It's own formulas\r\n   * - A custom toolbar\r\n   * - An icon to open it from a HTML editor.\r\n   * - A tooltip for the icon.\r\n   * - A global variable to enable or disable it globally.\r\n   * @constructs\r\n   */\r\n  constructor() {\r\n    /**\r\n     * The custom editors.\r\n     * @type {Array.<CustomEditor>}\r\n     */\r\n\r\n    this.editors = [];\r\n    /**\r\n     * The active editor name.\r\n     * @type {String}\r\n     */\r\n    this.activeEditor = \"default\";\r\n  }\r\n\r\n  /**\r\n   * Adds a {@link CustomEditor} to editors array.\r\n   * @param {String} editorName - The editor name.\r\n   * @param {CustomEditor} editorParams - The custom editor parameters.\r\n   */\r\n  addEditor(editorName, editorParams) {\r\n    const customEditor = {};\r\n    customEditor.name = editorParams.name;\r\n    customEditor.toolbar = editorParams.toolbar;\r\n    customEditor.icon = editorParams.icon;\r\n    customEditor.confVariable = editorParams.confVariable;\r\n    customEditor.title = editorParams.title;\r\n    customEditor.tooltip = editorParams.tooltip;\r\n    this.editors[editorName] = customEditor;\r\n  }\r\n\r\n  /**\r\n   * Enables a {@link CustomEditor}.\r\n   * @param {String} customEditorName - The custom editor name.\r\n   */\r\n  enable(customEditorName) {\r\n    this.activeEditor = customEditorName;\r\n  }\r\n\r\n  /**\r\n   * Disables a {@link CustomEditor}.\r\n   */\r\n  disable() {\r\n    this.activeEditor = \"default\";\r\n  }\r\n\r\n  /**\r\n   * Returns the active editor.\r\n   * @return {CustomEditor} - A {@link CustomEditor} if a custom editor is enabled. Null otherwise.\r\n   */\r\n  getActiveEditor() {\r\n    if (this.activeEditor !== \"default\") {\r\n      return this.editors[this.activeEditor];\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","/**\r\n * Represents the configuration properties generated from the frontend (JavaScript variables).\r\n * @type {Object}\r\n * @property {string} imageClassName - Default MathType formula image class.\r\n * @property {string} imageClassName - Default MathType CAS image class.\r\n * @ignore\r\n */\r\nconst jsProperties = {\r\n  imageCustomEditorName: \"data-custom-editor\",\r\n  imageClassName: \"Wirisformula\",\r\n  CASClassName: \"Wiriscas\",\r\n};\r\nexport default jsProperties;\r\n","export default class Event {\r\n  /**\r\n   * @classdesc\r\n   * This class represents a custom event. Events should be fired by the {@link Listener} class.\r\n   *\r\n   * ```js\r\n   *  let customEvent = new Event();\r\n   *  customEvent.properties = {};\r\n   *\r\n   *  let listeners = new Listeners();\r\n   *  listeners.newListener(eventName, callback);\r\n   *\r\n   *  listeners.fire(eventName, customEvent) *\r\n   * ```\r\n   * @constructs\r\n   */\r\n  constructor() {\r\n    /**\r\n     * Indicates if the event should be cancelled.\r\n     * @type {Boolean}\r\n     */\r\n\r\n    this.cancelled = false;\r\n    /**\r\n     * Indicates if the event should be prevented.\r\n     * @type {Boolean}\r\n     */\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  /**\r\n   * Cancels the event.\r\n   */\r\n  cancel() {\r\n    this.cancelled = true;\r\n  }\r\n\r\n  /**\r\n   * Prevents the default action.\r\n   */\r\n  preventDefault() {\r\n    this.defaultPrevented = true;\r\n  }\r\n}\r\n","import IntegrationModel from \"./integrationmodel\";\r\n\r\n/**\r\n\r\n */\r\nexport default class PopUpMessage {\r\n  /**\r\n   * @classdesc\r\n   * This class represents a dialog message overlaying a DOM element in order to\r\n   * accept / cancel discard changes. The dialog can be closed i.e the overlay disappears\r\n   * o canceled. In this last case a callback function should be called.\r\n   * @constructs\r\n   * @param {Object} popupMessageAttributes - Object containing popup properties.\r\n   * @param {HTMLElement} popupMessageAttributes.overlayElement - Element to overlay.\r\n   * @param {Object} popupMessageAttributes.callbacks - Contains callback\r\n   * methods for close and cancel actions.\r\n   * @param {Object} popupMessageAttributes.strings - Contains all the strings needed.\r\n   */\r\n  constructor(popupMessageAttributes) {\r\n    /**\r\n     * Element to be overlaid when the popup appears.\r\n     */\r\n    this.overlayElement = popupMessageAttributes.overlayElement;\r\n\r\n    this.callbacks = popupMessageAttributes.callbacks;\r\n\r\n    /**\r\n     * HTMLElement element to wrap all HTML elements inside the popupMessage.\r\n     */\r\n    this.overlayWrapper = this.overlayElement.appendChild(document.createElement(\"div\"));\r\n    this.overlayWrapper.setAttribute(\"class\", \"wrs_popupmessage_overlay_envolture\");\r\n\r\n    /**\r\n     * HTMLElement to display the popup message, close button and cancel button.\r\n     */\r\n    this.message = this.overlayWrapper.appendChild(document.createElement(\"div\"));\r\n    this.message.id = \"wrs_popupmessage\";\r\n    this.message.setAttribute(\"class\", \"wrs_popupmessage_panel\");\r\n    this.message.setAttribute(\"role\", \"dialog\");\r\n    this.message.setAttribute(\"aria-describedby\", \"description_txt\");\r\n    const paragraph = document.createElement(\"p\");\r\n    const text = document.createTextNode(popupMessageAttributes.strings.message);\r\n    paragraph.appendChild(text);\r\n    paragraph.id = \"description_txt\";\r\n    this.message.appendChild(paragraph);\r\n\r\n    /**\r\n     * HTML element overlaying the overlayElement.\r\n     */\r\n    const overlay = this.overlayWrapper.appendChild(document.createElement(\"div\"));\r\n    overlay.setAttribute(\"class\", \"wrs_popupmessage_overlay\");\r\n    // We create a overlay that close popup message on click in there\r\n    overlay.addEventListener(\"click\", this.cancelAction.bind(this));\r\n\r\n    /**\r\n     * HTML element containing cancel and close buttons.\r\n     */\r\n    this.buttonArea = this.message.appendChild(document.createElement(\"div\"));\r\n    this.buttonArea.setAttribute(\"class\", \"wrs_popupmessage_button_area\");\r\n    this.buttonArea.id = \"wrs_popup_button_area\";\r\n\r\n    // Close button arguments.\r\n    const buttonSubmitArguments = {\r\n      class: \"wrs_button_accept\",\r\n      innerHTML: popupMessageAttributes.strings.submitString,\r\n      id: \"wrs_popup_accept_button\",\r\n      // To identifiy the element in automated testing\r\n      \"data-testid\": \"mtcteditor-cd-close-button\",\r\n    };\r\n\r\n    /**\r\n     * Close button arguments.\r\n     */\r\n    this.closeButton = this.createButton(buttonSubmitArguments, this.closeAction.bind(this));\r\n    this.buttonArea.appendChild(this.closeButton);\r\n\r\n    // Cancel button arguments.\r\n    const buttonCancelArguments = {\r\n      class: \"wrs_button_cancel\",\r\n      innerHTML: popupMessageAttributes.strings.cancelString,\r\n      id: \"wrs_popup_cancel_button\",\r\n      // To identifiy the element in automated testing\r\n      \"data-testid\": \"mtcteditor-cd-cancel-button\",\r\n    };\r\n\r\n    /**\r\n     * Cancel button.\r\n     */\r\n    this.cancelButton = this.createButton(buttonCancelArguments, this.cancelAction.bind(this));\r\n    this.buttonArea.appendChild(this.cancelButton);\r\n  }\r\n\r\n  /**\r\n   * This method create a button with arguments and return button dom object\r\n   * @param {Object} parameters - An object containing id, class and innerHTML button text.\r\n   * @param {String} parameters.id - Button id.\r\n   * @param {String} parameters.class - Button class name.\r\n   * @param {String} parameters.innerHTML - Button innerHTML text.\r\n   * @param {Object} callback- Callback method to call on click event.\r\n   * @returns {HTMLElement} HTML button.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  createButton(parameters, callback) {\r\n    let element = {};\r\n    element = document.createElement(\"button\");\r\n    element.setAttribute(\"id\", parameters.id);\r\n    element.setAttribute(\"class\", parameters.class);\r\n    element.innerHTML = parameters.innerHTML;\r\n    element.addEventListener(\"click\", callback);\r\n    if (parameters[\"data-testid\"]) {\r\n      element.setAttribute(\"data-testid\", parameters[\"data-testid\"]);\r\n    }\r\n\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * Shows the popupmessage containing a message, and two buttons\r\n   * to cancel the action or close the modal dialog.\r\n   */\r\n  show() {\r\n    if (this.overlayWrapper.style.display !== \"block\") {\r\n      // Clear focus with blur for prevent press any key.\r\n      document.activeElement.blur();\r\n      this.overlayWrapper.style.display = \"block\";\r\n      this.closeButton.focus();\r\n    } else {\r\n      this.overlayWrapper.style.display = \"none\";\r\n      // _wrs_modalWindow.focus(); This throws an error of not existing _wrs_modalWindow\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method cancels the popupMessage: the dialog disappears revealing the overlaid element.\r\n   * A callback method is called (if defined). For example a method to focus the overlaid element.\r\n   */\r\n  cancelAction() {\r\n    this.overlayWrapper.style.display = \"none\";\r\n    if (typeof this.callbacks.cancelCallback !== \"undefined\") {\r\n      this.callbacks.cancelCallback();\r\n      // Set temporal image to null to prevent loading\r\n      // an existent formula when starting one from scratch. Make focus come back too.\r\n      // IntegrationModel.setActionsOnCancelButtons();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method closes the popupMessage: the dialog disappears and the close callback is called.\r\n   * For example to close the overlaid element.\r\n   */\r\n  closeAction() {\r\n    this.cancelAction();\r\n    if (typeof this.callbacks.closeCallback !== \"undefined\") {\r\n      this.callbacks.closeCallback();\r\n    }\r\n    IntegrationModel.setActionsOnCancelButtons();\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard events detected in modal when elements of this class intervene.\r\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\r\n   */\r\n  onKeyDown(keyboardEvent) {\r\n    if (keyboardEvent.key !== undefined) {\r\n      // Code to detect Esc event.\r\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\r\n        this.cancelAction();\r\n        keyboardEvent.stopPropagation();\r\n        keyboardEvent.preventDefault();\r\n      } else if (keyboardEvent.key === \"Tab\") {\r\n        // Code to detect Tab event.\r\n        if (document.activeElement === this.closeButton) {\r\n          this.cancelButton.focus();\r\n        } else {\r\n          this.closeButton.focus();\r\n        }\r\n        keyboardEvent.stopPropagation();\r\n        keyboardEvent.preventDefault();\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * This module provides protection against external focus management scripts\r\n * that might interfere with the MathType editor modal.\r\n */\r\n\r\n/**\r\n * focusProtection function creates and returns methods to prevent external scripts from\r\n * interfering with the focus of the MathType modal dialog.\r\n *\r\n * @returns {Object} An object with protect and unprotect methods.\r\n */\r\nconst focusProtection = () => {\r\n  /**\r\n   * Initialize focus protection on the given modal element.\r\n   *\r\n   * @param {HTMLElement} modalElement - The modal element to protect\r\n   * @param {HTMLElement} overlayElement - The overlay element of the modal (not used in current implementation)\r\n   * @param {HTMLElement} editorElement - The editor element inside the modal\r\n   */\r\n  const protect = (modalElement, overlayElement, editorElement) => {\r\n    if (!modalElement || !overlayElement || !editorElement) {\r\n      console.warn(\"FocusProtection: Missing required elements\");\r\n      return;\r\n    }\r\n\r\n    // Apply the focus protection\r\n    overrideFocusBehavior(modalElement, editorElement);\r\n  };\r\n\r\n  /**\r\n   * Apply focus protection by overriding focus-related methods\r\n   *\r\n   * @param {HTMLElement} modalElement - The modal element\r\n   * @param {HTMLElement} editorElement - The editor element to keep focused\r\n   * @private\r\n   */\r\n  const overrideFocusBehavior = (modalElement, editorElement) => {\r\n    // Store original focus methods to be able to restore them\r\n    const originalElementFocus = HTMLElement.prototype.focus;\r\n    const originalElementBlur = HTMLElement.prototype.blur;\r\n\r\n    // Override the focus method for all elements\r\n    HTMLElement.prototype.focus = function (...args) {\r\n      // If the modal is open and this is not part of the modal, prevent focus\r\n      if (modalElement.style.display !== \"none\" && !modalElement.contains(this) && this !== document.body) {\r\n        // If some external script is trying to focus another element, prevent it\r\n        // and restore focus to the editor\r\n        if (editorElement) {\r\n          // Use the original focus method to avoid infinite recursion\r\n          originalElementFocus.apply(editorElement, args);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Otherwise, allow the focus to happen\r\n      originalElementFocus.apply(this, args);\r\n    };\r\n\r\n    // Store the methods to remove them when the modal is closed\r\n    modalElement.originalElementFocus = originalElementFocus;\r\n    modalElement.originalElementBlur = originalElementBlur;\r\n  };\r\n\r\n  /**\r\n   * Remove focus protection from the modal\r\n   *\r\n   * @param {HTMLElement} modalElement - The modal element to unprotect\r\n   */\r\n  const unprotect = (modalElement) => {\r\n    if (!modalElement) {\r\n      return;\r\n    }\r\n\r\n    // Restore original focus methods\r\n    if (modalElement.originalElementFocus) {\r\n      HTMLElement.prototype.focus = modalElement.originalElementFocus;\r\n      delete modalElement.originalElementFocus;\r\n    }\r\n\r\n    if (modalElement.originalElementBlur) {\r\n      HTMLElement.prototype.blur = modalElement.originalElementBlur;\r\n      delete modalElement.originalElementBlur;\r\n    }\r\n  };\r\n\r\n  return {\r\n    protect,\r\n    unprotect,\r\n  };\r\n};\r\n\r\nexport default focusProtection;\r\n","// eslint-disable-next-line max-classes-per-file\r\nimport PopUpMessage from \"./popupmessage\";\r\nimport Util from \"./util\";\r\nimport Configuration from \"./configuration\";\r\nimport Listeners from \"./listeners\";\r\nimport StringManager from \"./stringmanager\";\r\nimport ContentManager from \"./contentmanager\";\r\nimport Telemeter from \"./telemeter\";\r\nimport IntegrationModel from \"./integrationmodel\";\r\nimport Core from \"./core.src\";\r\nimport focusProtection from \"./focusprotection\";\r\nimport closeIcon from \"../styles/icons/general/close_icon.svg\"; //eslint-disable-line\r\nimport closeHoverIcon from \"../styles/icons/hover/close_icon_h.svg\"; //eslint-disable-line\r\nimport fullsIcon from \"../styles/icons/general/fulls_icon.svg\"; //eslint-disable-line\r\nimport fullsHoverIcon from \"../styles/icons/hover/fulls_icon_h.svg\"; //eslint-disable-line\r\nimport minIcon from \"../styles/icons/general/min_icon.svg\"; //eslint-disable-line\r\nimport minHoverIcon from \"../styles/icons/hover/min_icon_h.svg\"; //eslint-disable-line\r\nimport minsIcon from \"../styles/icons/general/mins_icon.svg\"; //eslint-disable-line\r\nimport minsHoverIcon from \"../styles/icons/hover/mins_icon_h.svg\"; //eslint-disable-line\r\nimport maxIcon from \"../styles/icons/general/max_icon.svg\"; //eslint-disable-line\r\nimport maxHoverIcon from \"../styles/icons/hover/max_icon_h.svg\"; //eslint-disable-line\r\nconst { unprotect, protect } = focusProtection();\r\n\r\n/**\r\n * @typedef {Object} DeviceProperties\r\n * @property {String} DeviceProperties.orientation - Indicates of the orientation of the device.\r\n * @property {Boolean} DeviceProperties.isAndroid - True if the device is Android. False otherwise.\r\n * @property {Boolean} DeviceProperties.isIOS - True if the device is iOS. False otherwise.\r\n * @property {Boolean} DeviceProperties.isMobile - True if the device is a mobile one.\r\n * False otherwise.\r\n * @property {Boolean} DeviceProperties.isDesktop - True if the device is a desktop one.\r\n * False otherwise.\r\n */\r\n\r\nexport default class ModalDialog {\r\n  /**\r\n   * @classdesc\r\n   * This class represents a modal dialog. The modal dialog admits\r\n   * a {@link ContentManager} instance to manage the content of the dialog.\r\n   * @constructs\r\n   * @param {Object} modalDialogAttributes  - An object containing all modal dialog attributes.\r\n   */\r\n  constructor(modalDialogAttributes) {\r\n    this.attributes = modalDialogAttributes;\r\n\r\n    // Metrics.\r\n    const ua = navigator.userAgent.toLowerCase();\r\n    const isAndroid = ua.indexOf(\"android\") > -1;\r\n    const isIOS = ContentManager.isIOS();\r\n    this.iosSoftkeyboardOpened = false;\r\n    this.iosMeasureUnit = ua.indexOf(\"crios\") === -1 ? \"%\" : \"vh\";\r\n    this.iosDivHeight = `auto`;\r\n\r\n    const deviceWidth = window.outerWidth;\r\n    const deviceHeight = window.outerHeight;\r\n\r\n    const landscape = deviceWidth > deviceHeight;\r\n    const portrait = deviceWidth < deviceHeight;\r\n\r\n    // TODO: Detect isMobile without using editor metrics.\r\n    const isLandscape = landscape && this.attributes.height > deviceHeight;\r\n    const isPortrait = portrait && this.attributes.width > deviceWidth;\r\n    const isMobile = ContentManager.isMobile();\r\n\r\n    // Obtain number of current instance.\r\n    this.instanceId = document.getElementsByClassName(\"wrs_modal_dialogContainer\").length;\r\n\r\n    // Device object properties.\r\n\r\n    /**\r\n     * @type {DeviceProperties}\r\n     */\r\n    this.deviceProperties = {\r\n      orientation: landscape ? \"landscape\" : \"portrait\",\r\n      isAndroid,\r\n      isIOS,\r\n      isMobile,\r\n      isDesktop: !isMobile && !isIOS && !isAndroid,\r\n    };\r\n\r\n    this.properties = {\r\n      created: false,\r\n      state: \"\",\r\n      previousState: \"\",\r\n      position: { bottom: 0, right: 10 },\r\n      size: { height: 338, width: 580 },\r\n    };\r\n\r\n    /**\r\n     * Object to keep website's style before change it on lock scroll for mobile devices.\r\n     * @type {Object}\r\n     * @property {String} bodyStylePosition - Previous body style position.\r\n     * @property {String} bodyStyleOverflow - Previous body style overflow.\r\n     * @property {String} htmlStyleOverflow - Previous body style overflow.\r\n     * @property {String} windowScrollX - Previous window's scroll Y.\r\n     * @property {String} windowScrollY - Previous window's scroll X.\r\n     */\r\n    this.websiteBeforeLockParameters = null;\r\n\r\n    let attributes = {};\r\n    attributes.class = \"wrs_modal_overlay\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.overlay = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_title_bar\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.titleBar = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_title\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.title = Util.createElement(\"div\", attributes);\r\n    this.title.innerHTML = \"offline\";\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_close_button\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    attributes.title = StringManager.get(\"close\");\r\n    attributes.style = {};\r\n    this.closeDiv = Util.createElement(\"a\", attributes);\r\n    this.closeDiv.setAttribute(\"role\", \"button\");\r\n    this.closeDiv.setAttribute(\"tabindex\", 3);\r\n    // Apply styles and events after the creation as createElement doesn't process them correctly\r\n    const generalStyleClose = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeIcon)})`;\r\n    const hoverStyleClose = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeHoverIcon)})`;\r\n    this.closeDiv.setAttribute(\"style\", generalStyleClose);\r\n    this.closeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyleClose));\r\n    this.closeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyleClose));\r\n    // To identifiy the element in automated testing\r\n    this.closeDiv.setAttribute(\"data-testid\", \"mtcteditor-close-button\");\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_stack_button\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    attributes.title = StringManager.get(\"exit_fullscreen\");\r\n    this.stackDiv = Util.createElement(\"a\", attributes);\r\n    this.stackDiv.setAttribute(\"role\", \"button\");\r\n    this.stackDiv.setAttribute(\"tabindex\", 2);\r\n    const generalStyleStack = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsIcon)})`;\r\n    const hoverStyleStack = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsHoverIcon)})`;\r\n    this.stackDiv.setAttribute(\"style\", generalStyleStack);\r\n    this.stackDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyleStack));\r\n    this.stackDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyleStack));\r\n    // To identifiy the element in automated testing\r\n    this.stackDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-disable-button\");\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_maximize_button\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    attributes.title = StringManager.get(\"fullscreen\");\r\n    this.maximizeDiv = Util.createElement(\"a\", attributes);\r\n    this.maximizeDiv.setAttribute(\"role\", \"button\");\r\n    this.maximizeDiv.setAttribute(\"tabindex\", 2);\r\n    const generalStyleMaximize = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsIcon)})`;\r\n    const hoverStyleMaximize = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsHoverIcon)})`;\r\n    this.maximizeDiv.setAttribute(\"style\", generalStyleMaximize);\r\n    this.maximizeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyleMaximize));\r\n    this.maximizeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyleMaximize));\r\n    // To identifiy the element in automated testing\r\n    this.maximizeDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-enable-button\");\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_minimize_button\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    attributes.title = StringManager.get(\"minimize\");\r\n    this.minimizeDiv = Util.createElement(\"a\", attributes);\r\n    this.minimizeDiv.setAttribute(\"role\", \"button\");\r\n    this.minimizeDiv.setAttribute(\"tabindex\", 1);\r\n    const generalStyleMinimize = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\r\n    const hoverStyleMinimize = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\r\n    this.minimizeDiv.setAttribute(\"style\", generalStyleMinimize);\r\n    this.minimizeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyleMinimize));\r\n    this.minimizeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyleMinimize));\r\n    // To identify the element in automated testing\r\n    this.minimizeDiv.setAttribute(\"data-testid\", \"mtcteditor-minimize-button\");\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_dialogContainer\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    attributes.role = \"dialog\";\r\n    this.container = Util.createElement(\"div\", attributes);\r\n    this.container.setAttribute(\"aria-labeledby\", \"wrs_modal_title[0]\");\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_wrapper\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.wrapper = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_content_container\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.contentContainer = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_controls\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.controls = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_buttons_container\";\r\n    attributes.id = this.getElementId(attributes.class);\r\n    this.buttonContainer = Util.createElement(\"div\", attributes);\r\n\r\n    // Buttons: all button must be created using createSubmitButton method.\r\n    this.submitButton = this.createSubmitButton(\r\n      {\r\n        id: this.getElementId(\"wrs_modal_button_accept\"),\r\n        class: \"wrs_modal_button_accept\",\r\n        innerHTML: StringManager.get(\"accept\"),\r\n        // To identifiy the element in automated testing\r\n        \"data-testid\": \"mtcteditor-insert-button\",\r\n      },\r\n      this.submitAction.bind(this),\r\n    );\r\n\r\n    this.cancelButton = this.createSubmitButton(\r\n      {\r\n        id: this.getElementId(\"wrs_modal_button_cancel\"),\r\n        class: \"wrs_modal_button_cancel\",\r\n        innerHTML: StringManager.get(\"cancel\"),\r\n        // To identifiy the element in automated testing\r\n        \"data-testid\": \"mtcteditor-cancel-button\",\r\n      },\r\n      this.cancelAction.bind(this),\r\n    );\r\n\r\n    this.contentManager = null;\r\n\r\n    // Overlay popup.\r\n    const popupStrings = {\r\n      cancelString: StringManager.get(\"cancel\"),\r\n      submitString: StringManager.get(\"close\"),\r\n      message: StringManager.get(\"close_modal_warning\"),\r\n    };\r\n\r\n    const callbacks = {\r\n      closeCallback: () => {\r\n        this.close(\"mtc_close\");\r\n      },\r\n      cancelCallback: () => {\r\n        this.focus();\r\n      },\r\n    };\r\n\r\n    const popupupProperties = {\r\n      overlayElement: this.container,\r\n      callbacks,\r\n      strings: popupStrings,\r\n    };\r\n\r\n    this.popup = new PopUpMessage(popupupProperties);\r\n\r\n    /**\r\n     * Indicates if directionality of the modal dialog is RTL. false by default.\r\n     * @type {Boolean}\r\n     */\r\n    this.rtl = false;\r\n    if (\"rtl\" in this.attributes) {\r\n      this.rtl = this.attributes.rtl;\r\n    }\r\n\r\n    // Event handlers need modal instance context.\r\n    this.handleOpenedIosSoftkeyboard = this.handleOpenedIosSoftkeyboard.bind(this);\r\n    this.handleClosedIosSoftkeyboard = this.handleClosedIosSoftkeyboard.bind(this);\r\n  }\r\n\r\n  /**\r\n   * This method sets an ContentManager instance to ModalDialog. ContentManager\r\n   * manages the logic of ModalDialog content: submit, update, close and changes.\r\n   * @param {ContentManager} contentManager - ContentManager instance.\r\n   */\r\n  setContentManager(contentManager) {\r\n    this.contentManager = contentManager;\r\n  }\r\n\r\n  /**\r\n   * Returns the modal contentElement object.\r\n   * @returns {ContentManager} the instance of the ContentManager class.\r\n   */\r\n  getContentManager() {\r\n    return this.contentManager;\r\n  }\r\n\r\n  /**\r\n   * This method is called when the modal object has been submitted. Calls\r\n   * contentElement submitAction method - if exists - and closes the modal\r\n   * object. No logic about the content should be placed here,\r\n   * contentElement.submitAction is the responsible of the content logic.\r\n   */\r\n  async submitAction() {\r\n    if (typeof this.contentManager.submitAction !== \"undefined\") {\r\n      this.contentManager.submitAction();\r\n    }\r\n\r\n    await this.close(\"mtc_insert\");\r\n  }\r\n\r\n  /**\r\n   * Performs the cancel action.\r\n   * If there are no changes in the content, it closes the modal.\r\n   * Otherwise, it shows a pop-up message to confirm the cancel action.\r\n   * @returns {Promise<void>} - A promise that resolves when the modal is closed.\r\n   */\r\n  async cancelAction() {\r\n    if (typeof this.contentManager.hasChanges === \"undefined\" || !this.contentManager.hasChanges()) {\r\n      IntegrationModel.setActionsOnCancelButtons();\r\n      await this.close(\"mtc_close\");\r\n    } else {\r\n      this.showPopUpMessage();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a button element.\r\n   * @param {Object} properties - Input button properties.\r\n   * @param {String} properties.class - Input button class.\r\n   * @param {String} properties.innerHTML - Input button innerHTML.\r\n   * @param {Object} callback - Callback function associated to click event.\r\n   * @returns {HTMLButtonElement} The button element.\r\n   *\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  createSubmitButton(properties, callback) {\r\n    class SubmitButton {\r\n      constructor() {\r\n        this.element = document.createElement(\"button\");\r\n        this.element.id = properties.id;\r\n        this.element.className = properties.class;\r\n        this.element.innerHTML = properties.innerHTML;\r\n        this.element.dataset.testid = properties[\"data-testid\"];\r\n        Util.addEvent(this.element, \"click\", callback);\r\n      }\r\n\r\n      getElement() {\r\n        return this.element;\r\n      }\r\n    }\r\n    return new SubmitButton(properties, callback).getElement();\r\n  }\r\n\r\n  /**\r\n   * Creates the modal window object inserting a contentElement object.\r\n   */\r\n  create() {\r\n    /* Modal Window Structure\r\n    _____________________________________________________________________________________\r\n    |wrs_modal_dialog_Container                                                         |\r\n    | _________________________________________________________________________________ |\r\n    | |title_bar                          minimize_button  stack_button  close_button | |\r\n    | |_______________________________________________________________________________| |\r\n    | |wrapper                                                                        | |\r\n    | | _____________________________________________________________________________ | |\r\n    | | |content                                                                    | | |\r\n    | | |                                                                           | | |\r\n    | | |                                                                           | | |\r\n    | | |___________________________________________________________________________| | |\r\n    | | _____________________________________________________________________________ | |\r\n    | | |controls                                                                   | | |\r\n    | | | ___________________________________                                       | | |\r\n    | | | |buttonContainer                  |                                       | | |\r\n    | | | | _______________________________ |                                       | | |\r\n    | | | | |button_accept | button_cancel| |                                       | | |\r\n    | | | |_|_____________ |______________|_|                                       | | |\r\n    | | |___________________________________________________________________________| | |\r\n    | |_______________________________________________________________________________| |\r\n    |___________________________________________________________________________________| */\r\n\r\n    this.titleBar.appendChild(this.closeDiv);\r\n    this.titleBar.appendChild(this.stackDiv);\r\n    this.titleBar.appendChild(this.maximizeDiv);\r\n    this.titleBar.appendChild(this.minimizeDiv);\r\n    this.titleBar.appendChild(this.title);\r\n\r\n    if (this.deviceProperties.isDesktop) {\r\n      this.container.appendChild(this.titleBar);\r\n    }\r\n\r\n    this.wrapper.appendChild(this.contentContainer);\r\n    this.wrapper.appendChild(this.controls);\r\n\r\n    this.controls.appendChild(this.buttonContainer);\r\n\r\n    this.buttonContainer.appendChild(this.submitButton);\r\n    this.buttonContainer.appendChild(this.cancelButton);\r\n\r\n    this.container.appendChild(this.wrapper);\r\n\r\n    // Check if browser has scrollBar before modal has modified.\r\n    this.recalculateScrollBar();\r\n\r\n    document.body.appendChild(this.container);\r\n    document.body.appendChild(this.overlay);\r\n\r\n    if (this.deviceProperties.isDesktop) {\r\n      // Desktop.\r\n      this.createModalWindowDesktop();\r\n      this.createResizeButtons();\r\n\r\n      this.addListeners();\r\n      // Maximize window only when the configuration is set and the device is not iOS or Android.\r\n      if (Configuration.get(\"modalWindowFullScreen\")) {\r\n        this.maximize();\r\n      }\r\n    } else if (this.deviceProperties.isAndroid) {\r\n      this.createModalWindowAndroid();\r\n    } else if (this.deviceProperties.isIOS) {\r\n      this.createModalWindowIos();\r\n    }\r\n\r\n    if (this.contentManager != null) {\r\n      this.contentManager.insert(this);\r\n    }\r\n\r\n    this.properties.open = true;\r\n    this.properties.created = true;\r\n\r\n    // Checks language directionality.\r\n    if (this.isRTL()) {\r\n      this.container.style.right = `${window.innerWidth - this.scrollbarWidth - this.container.offsetWidth}px`;\r\n      this.container.className += \" wrs_modal_rtl\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a button in the modal object to resize it.\r\n   */\r\n  createResizeButtons() {\r\n    // This is a definition of Resize Button Bottom-Right.\r\n    this.resizerBR = document.createElement(\"div\");\r\n    this.resizerBR.className = \"wrs_bottom_right_resizer\";\r\n    this.resizerBR.innerHTML = \"◢\";\r\n    // To identifiy the element in automated testing\r\n    this.resizerBR.dataset.testid = \"mtcteditor-resize-button-right\";\r\n    // This is a definition of Resize Button Top-Left.\r\n    this.resizerTL = document.createElement(\"div\");\r\n    this.resizerTL.className = \"wrs_bottom_left_resizer\";\r\n    // To identifiy the element in automated testing\r\n    this.resizerTL.dataset.testid = \"mtcteditor-resize-button-left\";\r\n    // Append resize buttons to modal.\r\n    this.container.appendChild(this.resizerBR);\r\n    this.titleBar.appendChild(this.resizerTL);\r\n    // Add events to resize on click and drag.\r\n    Util.addEvent(this.resizerBR, \"mousedown\", this.activateResizeStateBR.bind(this));\r\n    Util.addEvent(this.resizerTL, \"mousedown\", this.activateResizeStateTL.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Initialize variables for Bottom-Right resize button\r\n   * @param {MouseEvent} mouseEvent - Mouse event.\r\n   */\r\n  activateResizeStateBR(mouseEvent) {\r\n    this.initializeResizeProperties(mouseEvent, false);\r\n  }\r\n\r\n  /**\r\n   * Initialize variables for Top-Left resize button\r\n   * @param {MouseEvent} mouseEvent - Mouse event.\r\n   */\r\n  activateResizeStateTL(mouseEvent) {\r\n    this.initializeResizeProperties(mouseEvent, true);\r\n  }\r\n\r\n  /**\r\n   * Common method to initialize variables at resize.\r\n   * @param {MouseEvent} mouseEvent - Mouse event.\r\n   */\r\n  initializeResizeProperties(mouseEvent, leftOption) {\r\n    // Apply class for disable involuntary select text when drag.\r\n    Util.addClass(document.body, \"wrs_noselect\");\r\n    Util.addClass(this.overlay, \"wrs_overlay_active\");\r\n    this.resizeDataObject = {\r\n      x: this.eventClient(mouseEvent).X,\r\n      y: this.eventClient(mouseEvent).Y,\r\n    };\r\n    // Save Initial state of modal to compare on drag and obtain the difference.\r\n    this.initialWidth = parseInt(this.container.style.width, 10);\r\n    this.initialHeight = parseInt(this.container.style.height, 10);\r\n    if (!leftOption) {\r\n      this.initialRight = parseInt(this.container.style.right, 10);\r\n      this.initialBottom = parseInt(this.container.style.bottom, 10);\r\n    } else {\r\n      this.leftScale = true;\r\n    }\r\n    if (!this.initialRight) {\r\n      this.initialRight = 0;\r\n    }\r\n    if (!this.initialBottom) {\r\n      this.initialBottom = 0;\r\n    }\r\n    // Disable mouse events on editor when we start to drag modal.\r\n    document.body.style[\"user-select\"] = \"none\";\r\n  }\r\n\r\n  /**\r\n   * This method opens the modal window, restoring the previous state, position and metrics,\r\n   * if exists. By default the modal object opens in stack mode.\r\n   */\r\n  open() {\r\n    // Removing close class.\r\n    this.removeClass(\"wrs_closed\");\r\n    // Hiding keyboard for mobile devices.\r\n    const { isIOS } = this.deviceProperties;\r\n    const { isAndroid } = this.deviceProperties;\r\n    const { isMobile } = this.deviceProperties;\r\n    if (isIOS || isAndroid || isMobile) {\r\n      // Restore scale to 1.\r\n      this.restoreWebsiteScale();\r\n      this.lockWebsiteScroll();\r\n      // Due to editor wait we need to wait until editor focus.\r\n      setTimeout(() => {\r\n        this.hideKeyboard();\r\n      }, 400);\r\n    }\r\n\r\n    // New modal window. He need to create the whole object.\r\n    if (!this.properties.created) {\r\n      this.create();\r\n    } else {\r\n      // Previous state closed. Open method can be called even the previous state is open,\r\n      // for example updating the content of the modal object.\r\n      if (!this.properties.open) {\r\n        this.properties.open = true;\r\n\r\n        // Restoring the previous open state: if the modal object has been closed\r\n        // re-open it should preserve the state and the metrics.\r\n        if (!this.deviceProperties.isAndroid && !this.deviceProperties.isIOS) {\r\n          this.restoreState();\r\n        }\r\n      }\r\n\r\n      // Maximize window only when the configuration is set and the device is not iOs or Android.\r\n      if (this.deviceProperties.isDesktop && Configuration.get(\"modalWindowFullScreen\")) {\r\n        this.maximize();\r\n      }\r\n\r\n      // In iOS we need to recalculate the size of the modal object because\r\n      // iOS keyboard is a float div which can overlay the modal object.\r\n      if (this.deviceProperties.isIOS) {\r\n        this.iosSoftkeyboardOpened = false;\r\n      }\r\n    }\r\n\r\n    if (!ContentManager.isEditorLoaded()) {\r\n      const listener = Listeners.newListener(\"onLoad\", () => {\r\n        this.displayEditor();\r\n      });\r\n      this.contentManager.addListener(listener);\r\n    } else {\r\n      this.displayEditor();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prepares and displays the editor in the modal.\r\n   *\r\n   * This method is responsible for displaying the MathType editor inside the modal container.\r\n   *\r\n   * For Moodle environments, it applies focus protection to prevent external scripts\r\n   * from hijacking focus away from the editor while it's open. This is particularly\r\n   * important in Moodle which may have its own focus management scripts.\r\n   * @returns {void}\r\n   */\r\n  displayEditor() {\r\n    if (this.contentManager.integrationModel.isMoodle) {\r\n      protect(this.container, this.overlay, this.contentContainer);\r\n    }\r\n\r\n    // Initialize and open the editor using the contentManager.\r\n    this.contentManager.onOpen(this);\r\n  }\r\n\r\n  /**\r\n   * Closes the modal.\r\n   * Removes specific CSS classes, saves modal properties, unlocks website scroll,\r\n   * sets the 'open' property to false, and triggers the 'onModalClose' event.\r\n   * If a close trigger is defined, it tracks the telemetry event 'CLOSED_MTCT_EDITOR' with the trigger.\r\n   * @returns {Promise<void>} A promise that resolves when the modal is closed.\r\n   */\r\n  async close(trigger) {\r\n    // Remove focus protection before closing\r\n    unprotect(this.container);\r\n\r\n    this.removeClass(\"wrs_maximized\");\r\n    this.removeClass(\"wrs_minimized\");\r\n    this.removeClass(\"wrs_stack\");\r\n    this.addClass(\"wrs_closed\");\r\n    this.saveModalProperties();\r\n    this.unlockWebsiteScroll();\r\n    this.properties.open = false;\r\n\r\n    if (trigger) {\r\n      try {\r\n        await Telemeter.telemeter.track(\"CLOSED_MTCT_EDITOR\", {\r\n          toolbar: this.contentManager.toolbar,\r\n          trigger,\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error tracking CLOSED_MTCT_EDITOR\", error);\r\n      }\r\n    }\r\n\r\n    Core.globalListeners.fire(\"onModalClose\", {});\r\n  }\r\n\r\n  /**\r\n   * Closes modal window and destroys the object.\r\n   */\r\n  destroy() {\r\n    // Remove focus protection before destroying\r\n    unprotect(this.container);\r\n\r\n    // Close modal window.\r\n    this.close();\r\n    // Remove listeners and destroy the object.\r\n    this.removeListeners();\r\n    this.overlay.remove();\r\n    this.container.remove();\r\n    // Reset properties to allow open again.\r\n    this.properties.created = false;\r\n  }\r\n\r\n  /**\r\n   * Sets the website scale to one.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  restoreWebsiteScale() {\r\n    let viewportmeta = document.querySelector(\"meta[name=viewport]\");\r\n    // Let the equal symbols in order to search and make meta's final content.\r\n    const contentAttrsToUpdate = [\"initial-scale=\", \"minimum-scale=\", \"maximum-scale=\"];\r\n    const contentAttrsValuesToUpdate = [\"1.0\", \"1.0\", \"1.0\"];\r\n    const setMetaAttrFunc = (viewportelement, contentAttrs) => {\r\n      const contentAttr = viewportelement.getAttribute(\"content\");\r\n      // If it exists, we need to maintain old values and put our values.\r\n      if (contentAttr) {\r\n        const attrArray = contentAttr.split(\",\");\r\n        let finalContentMeta = \"\";\r\n        const oldAttrs = [];\r\n        for (let i = 0; i < attrArray.length; i += 1) {\r\n          let isAttrToUpdate = false;\r\n          let j = 0;\r\n          while (!isAttrToUpdate && j < contentAttrs.length) {\r\n            if (attrArray[i].indexOf(contentAttrs[j])) {\r\n              isAttrToUpdate = true;\r\n            }\r\n            j += 1;\r\n          }\r\n\r\n          if (!isAttrToUpdate) {\r\n            oldAttrs.push(attrArray[i]);\r\n          }\r\n        }\r\n\r\n        for (let i = 0; i < contentAttrs.length; i += 1) {\r\n          const attr = contentAttrs[i] + contentAttrsValuesToUpdate[i];\r\n          finalContentMeta += i === 0 ? attr : `,${attr}`;\r\n        }\r\n\r\n        for (let i = 0; i < oldAttrs.length; i += 1) {\r\n          finalContentMeta += `,${oldAttrs[i]}`;\r\n        }\r\n        viewportelement.setAttribute(\"content\", finalContentMeta);\r\n        // It needs to set to empty because setAttribute refresh only when attribute is different.\r\n        viewportelement.setAttribute(\"content\", \"\");\r\n        viewportelement.setAttribute(\"content\", contentAttr);\r\n      } else {\r\n        viewportelement.setAttribute(\"content\", \"initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0\");\r\n        viewportelement.removeAttribute(\"content\");\r\n      }\r\n    };\r\n\r\n    if (!viewportmeta) {\r\n      viewportmeta = document.createElement(\"meta\");\r\n      document.getElementsByTagName(\"head\")[0].appendChild(viewportmeta);\r\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\r\n      viewportmeta.remove();\r\n    } else {\r\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Locks website scroll for mobile devices.\r\n   */\r\n  lockWebsiteScroll() {\r\n    this.websiteBeforeLockParameters = {\r\n      bodyStylePosition: document.body.style.position ? document.body.style.position : \"\",\r\n      bodyStyleOverflow: document.body.style.overflow ? document.body.style.overflow : \"\",\r\n      htmlStyleOverflow: document.documentElement.style.overflow ? document.documentElement.style.overflow : \"\",\r\n      windowScrollX: window.scrollX,\r\n      windowScrollY: window.scrollY,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Unlocks website scroll for mobile devices.\r\n   */\r\n  unlockWebsiteScroll() {\r\n    if (this.websiteBeforeLockParameters) {\r\n      document.body.style.position = this.websiteBeforeLockParameters.bodyStylePosition;\r\n      document.body.style.overflow = this.websiteBeforeLockParameters.bodyStyleOverflow;\r\n      document.documentElement.style.overflow = this.websiteBeforeLockParameters.htmlStyleOverflow;\r\n      const { windowScrollX } = this.websiteBeforeLockParameters;\r\n      const { windowScrollY } = this.websiteBeforeLockParameters;\r\n      window.scrollTo(windowScrollX, windowScrollY);\r\n      this.websiteBeforeLockParameters = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Util function to known if browser is IE11.\r\n   * @returns {Boolean} true if the browser is IE11. false otherwise.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  isIE11() {\r\n    if (\r\n      navigator.userAgent.search(\"Msie/\") >= 0 ||\r\n      navigator.userAgent.search(\"Trident/\") >= 0 ||\r\n      navigator.userAgent.search(\"Edge/\") >= 0\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Returns if the current language type is RTL.\r\n   * @return {Boolean} true if current language is RTL. false otherwise.\r\n   */\r\n  isRTL() {\r\n    if (this.attributes.language === \"ar\" || this.attributes.language === \"he\") {\r\n      return true;\r\n    }\r\n    return this.rtl;\r\n  }\r\n\r\n  /**\r\n   * Adds a class to all modal ModalDialog DOM elements.\r\n   * @param {String} className - Class name.\r\n   */\r\n  addClass(className) {\r\n    Util.addClass(this.overlay, className);\r\n    Util.addClass(this.titleBar, className);\r\n    Util.addClass(this.overlay, className);\r\n    Util.addClass(this.container, className);\r\n    Util.addClass(this.contentContainer, className);\r\n    Util.addClass(this.stackDiv, className);\r\n    Util.addClass(this.minimizeDiv, className);\r\n    Util.addClass(this.maximizeDiv, className);\r\n    Util.addClass(this.wrapper, className);\r\n  }\r\n\r\n  /**\r\n   * Remove a class from all modal DOM elements.\r\n   * @param {String} className - Class name.\r\n   */\r\n  removeClass(className) {\r\n    Util.removeClass(this.overlay, className);\r\n    Util.removeClass(this.titleBar, className);\r\n    Util.removeClass(this.overlay, className);\r\n    Util.removeClass(this.container, className);\r\n    Util.removeClass(this.contentContainer, className);\r\n    Util.removeClass(this.stackDiv, className);\r\n    Util.removeClass(this.minimizeDiv, className);\r\n    Util.removeClass(this.maximizeDiv, className);\r\n    Util.removeClass(this.wrapper, className);\r\n  }\r\n\r\n  /**\r\n   * Create modal dialog for desktop.\r\n   */\r\n  createModalWindowDesktop() {\r\n    this.addClass(\"wrs_modal_desktop\");\r\n    this.stack();\r\n  }\r\n\r\n  /**\r\n   * Create modal dialog for non android devices.\r\n   */\r\n  createModalWindowAndroid() {\r\n    this.addClass(\"wrs_modal_android\");\r\n    window.addEventListener(\"resize\", this.orientationChangeAndroidSoftkeyboard.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Create modal dialog for iOS devices.\r\n   */\r\n  createModalWindowIos() {\r\n    this.addClass(\"wrs_modal_ios\");\r\n    // Refresh the size when the orientation is changed.\r\n    window.addEventListener(\"resize\", this.orientationChangeIosSoftkeyboard.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Restore previous state, position and size of previous stacked modal dialog.\r\n   */\r\n  restoreState() {\r\n    if (this.properties.state === \"maximized\") {\r\n      // Reset states for prevent return to stack state.\r\n      this.maximize();\r\n    } else if (this.properties.state === \"minimized\") {\r\n      // Reset states for prevent return to stack state.\r\n      this.properties.state = this.properties.previousState;\r\n      this.properties.previousState = \"\";\r\n      this.minimize();\r\n    } else {\r\n      this.stack();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stacks the modal object.\r\n   */\r\n  stack() {\r\n    this.properties.previousState = this.properties.state;\r\n    this.properties.state = \"stack\";\r\n    this.removeClass(\"wrs_maximized\");\r\n    this.minimizeDiv.title = StringManager.get(\"minimize\");\r\n    this.removeClass(\"wrs_minimized\");\r\n    this.addClass(\"wrs_stack\");\r\n\r\n    // Change maximize/minimize icon to minimize icon\r\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\r\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\r\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\r\n    this.minimizeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyle));\r\n    this.minimizeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyle));\r\n\r\n    this.restoreModalProperties();\r\n\r\n    if (typeof this.resizerBR !== \"undefined\" && typeof this.resizerTL !== \"undefined\") {\r\n      this.setResizeButtonsVisibility();\r\n    }\r\n\r\n    // Need recalculate position of actual modal because window can was changed in fullscreenmode.\r\n    this.recalculateScrollBar();\r\n    this.recalculatePosition();\r\n    this.recalculateScale();\r\n    this.focus();\r\n  }\r\n\r\n  /**\r\n   * Minimizes the modal object.\r\n   */\r\n  minimize() {\r\n    // Saving width, height, top and bottom parameters to restore when opening.\r\n    this.saveModalProperties();\r\n    this.title.style.cursor = \"pointer\";\r\n    if (this.properties.state === \"minimized\" && this.properties.previousState === \"stack\") {\r\n      this.stack();\r\n    } else if (this.properties.state === \"minimized\" && this.properties.previousState === \"maximized\") {\r\n      this.maximize();\r\n    } else {\r\n      // Setting css to prevent important tag into css style.\r\n      this.container.style.height = \"30px\";\r\n      this.container.style.width = \"250px\";\r\n      this.container.style.bottom = \"0px\";\r\n      this.container.style.right = \"10px\";\r\n\r\n      this.removeListeners();\r\n      this.properties.previousState = this.properties.state;\r\n      this.properties.state = \"minimized\";\r\n      this.setResizeButtonsVisibility();\r\n      this.minimizeDiv.title = StringManager.get(\"maximize\");\r\n\r\n      if (Util.containsClass(this.overlay, \"wrs_stack\")) {\r\n        this.removeClass(\"wrs_stack\");\r\n      } else {\r\n        this.removeClass(\"wrs_maximized\");\r\n      }\r\n      this.addClass(\"wrs_minimized\");\r\n\r\n      // Change minimize icon to maximize icon\r\n      const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxIcon)})`;\r\n      const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxHoverIcon)})`;\r\n      this.minimizeDiv.setAttribute(\"style\", generalStyle);\r\n      this.minimizeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyle));\r\n      this.minimizeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyle));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Maximizes the modal object.\r\n   */\r\n  maximize() {\r\n    // Saving width, height, top and bottom parameters to restore when opening.\r\n    this.saveModalProperties();\r\n    if (this.properties.state !== \"maximized\") {\r\n      this.properties.previousState = this.properties.state;\r\n      this.properties.state = \"maximized\";\r\n    }\r\n    // Don't permit resize on maximize mode.\r\n    this.setResizeButtonsVisibility();\r\n\r\n    if (Util.containsClass(this.overlay, \"wrs_minimized\")) {\r\n      this.minimizeDiv.title = StringManager.get(\"minimize\");\r\n      this.removeClass(\"wrs_minimized\");\r\n    } else if (Util.containsClass(this.overlay, \"wrs_stack\")) {\r\n      this.container.style.left = null;\r\n      this.container.style.top = null;\r\n      this.removeClass(\"wrs_stack\");\r\n    }\r\n\r\n    this.addClass(\"wrs_maximized\");\r\n\r\n    // Change maximize icon to minimize icon\r\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\r\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\r\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\r\n    this.minimizeDiv.addEventListener(\"mouseover\", (e) => (e.target.style = hoverStyle));\r\n    this.minimizeDiv.addEventListener(\"mouseout\", (e) => (e.target.style = generalStyle));\r\n\r\n    // Set size to 80% screen with a max size.\r\n    this.setSize(parseInt(window.innerHeight * 0.8, 10), parseInt(window.innerWidth * 0.8, 10));\r\n    if (this.container.clientHeight > 700) {\r\n      this.container.style.height = \"700px\";\r\n    }\r\n    if (this.container.clientWidth > 1200) {\r\n      this.container.style.width = \"1200px\";\r\n    }\r\n\r\n    // Setting modal position in center on screen.\r\n    const { innerHeight } = window;\r\n    const { innerWidth } = window;\r\n    const { offsetHeight } = this.container;\r\n    const { offsetWidth } = this.container;\r\n    const bottom = innerHeight / 2 - offsetHeight / 2;\r\n    const right = innerWidth / 2 - offsetWidth / 2;\r\n\r\n    this.setPosition(bottom, right);\r\n    this.recalculateScale();\r\n    this.recalculatePosition();\r\n    this.recalculateSize();\r\n    this.focus();\r\n  }\r\n\r\n  /**\r\n   * Expand again the modal object from a minimized state.\r\n   */\r\n  reExpand() {\r\n    if (this.properties.state === \"minimized\") {\r\n      if (this.properties.previousState === \"maximized\") {\r\n        this.maximize();\r\n      } else {\r\n        this.stack();\r\n      }\r\n      this.title.style.cursor = \"\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets modal size.\r\n   * @param {Number} height - Height of the ModalDialog\r\n   * @param {Number} width - Width of the ModalDialog.\r\n   */\r\n  setSize(height, width) {\r\n    this.container.style.height = `${height}px`;\r\n    this.container.style.width = `${width}px`;\r\n    this.recalculateSize();\r\n  }\r\n\r\n  /**\r\n   * Sets modal position using bottom and right style attributes.\r\n   * @param  {number} bottom - bottom attribute.\r\n   * @param  {number} right - right attribute.\r\n   */\r\n  setPosition(bottom, right) {\r\n    this.container.style.bottom = `${bottom}px`;\r\n    this.container.style.right = `${right}px`;\r\n  }\r\n\r\n  /**\r\n   * Saves position and size parameters of and open ModalDialog. This attributes\r\n   * are needed to restore it on re-open.\r\n   */\r\n  saveModalProperties() {\r\n    // Saving values of modal only when modal is in stack state.\r\n    if (this.properties.state === \"stack\") {\r\n      this.properties.position.bottom = parseInt(this.container.style.bottom, 10);\r\n      this.properties.position.right = parseInt(this.container.style.right, 10);\r\n      this.properties.size.width = parseInt(this.container.style.width, 10);\r\n      this.properties.size.height = parseInt(this.container.style.height, 10);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore ModalDialog position and size parameters.\r\n   */\r\n  restoreModalProperties() {\r\n    if (this.properties.state === \"stack\") {\r\n      // Restoring Bottom and Right values from last modal.\r\n      this.setPosition(this.properties.position.bottom, this.properties.position.right);\r\n      // Restoring Height and Left values from last modal.\r\n      this.setSize(this.properties.size.height, this.properties.size.width);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the modal dialog initial size.\r\n   */\r\n  recalculateSize() {\r\n    this.contentContainer.style.height = `${parseInt(this.wrapper.offsetHeight - 50, 10)}px`;\r\n  }\r\n\r\n  /**\r\n   * Enable or disable visibility of resize buttons in modal window depend on state.\r\n   */\r\n  setResizeButtonsVisibility() {\r\n    if (this.properties.state === \"stack\") {\r\n      this.resizerTL.style.visibility = \"visible\";\r\n      this.resizerBR.style.visibility = \"visible\";\r\n    } else {\r\n      this.resizerTL.style.visibility = \"hidden\";\r\n      this.resizerBR.style.visibility = \"hidden\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Makes an object draggable adding mouse and touch events.\r\n   */\r\n  addListeners() {\r\n    // Button events (maximize, minimize, stack and close).\r\n    this.maximizeDiv.addEventListener(\"click\", this.maximize.bind(this), true);\r\n    this.stackDiv.addEventListener(\"click\", this.stack.bind(this), true);\r\n    this.minimizeDiv.addEventListener(\"click\", this.minimize.bind(this), true);\r\n    this.closeDiv.addEventListener(\"click\", this.cancelAction.bind(this));\r\n    this.maximizeDiv.addEventListener(\r\n      \"keypress\",\r\n      (e) => {\r\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\r\n          // Handle enter and space.\r\n          e.target.click();\r\n        }\r\n      },\r\n      true,\r\n    );\r\n    this.stackDiv.addEventListener(\r\n      \"keypress\",\r\n      (e) => {\r\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\r\n          // Handle enter and space.\r\n          e.target.click();\r\n          e.preventDefault();\r\n        }\r\n      },\r\n      true,\r\n    );\r\n    this.minimizeDiv.addEventListener(\r\n      \"keypress\",\r\n      (e) => {\r\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\r\n          // Handle enter and space.\r\n          e.target.click();\r\n          e.preventDefault();\r\n        }\r\n      },\r\n      true,\r\n    );\r\n    this.closeDiv.addEventListener(\"keypress\", (e) => {\r\n      if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\r\n        // Handle enter and space.\r\n        e.target.click();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n    this.title.addEventListener(\"click\", this.reExpand.bind(this));\r\n\r\n    // Overlay events (close).\r\n    this.overlay.addEventListener(\"click\", this.cancelAction.bind(this));\r\n\r\n    // Mouse events.\r\n    Util.addEvent(window, \"mousedown\", this.startDrag.bind(this));\r\n    Util.addEvent(window, \"mouseup\", this.stopDrag.bind(this));\r\n    Util.addEvent(window, \"mousemove\", this.drag.bind(this));\r\n    Util.addEvent(window, \"resize\", this.onWindowResize.bind(this));\r\n    // Key events.\r\n    Util.addEvent(window, \"keydown\", this.onKeyDown.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Removes draggable events from an object.\r\n   */\r\n  removeListeners() {\r\n    // Mouse events.\r\n    Util.removeEvent(window, \"mousedown\", this.startDrag);\r\n    Util.removeEvent(window, \"mouseup\", this.stopDrag);\r\n    Util.removeEvent(window, \"mousemove\", this.drag);\r\n    Util.removeEvent(window, \"resize\", this.onWindowResize);\r\n    // Key events.\r\n    Util.removeEvent(window, \"keydown\", this.onKeyDown);\r\n  }\r\n\r\n  /**\r\n   * Returns mouse or touch coordinates (on touch events ev.ClientX doesn't exists)\r\n   * @param {MouseEvent} mouseEvent - Mouse event.\r\n   * @return {Object} With the X and Y coordinates.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  eventClient(mouseEvent) {\r\n    if (typeof mouseEvent.clientX === \"undefined\" && mouseEvent.changedTouches) {\r\n      const client = {\r\n        X: mouseEvent.changedTouches[0].clientX,\r\n        Y: mouseEvent.changedTouches[0].clientY,\r\n      };\r\n      return client;\r\n    }\r\n    const client = {\r\n      X: mouseEvent.clientX,\r\n      Y: mouseEvent.clientY,\r\n    };\r\n    return client;\r\n  }\r\n\r\n  /**\r\n   * Start drag function: set the object dragDataObject with the draggable\r\n   * object offsets coordinates.\r\n   * when drag starts (on touchstart or mousedown events).\r\n   * @param {MouseEvent} mouseEvent - Touchstart or mousedown event.\r\n   */\r\n  startDrag(mouseEvent) {\r\n    if (this.properties.state === \"minimized\") {\r\n      return;\r\n    }\r\n    if (mouseEvent.target === this.title) {\r\n      if (typeof this.dragDataObject === \"undefined\" || this.dragDataObject === null) {\r\n        // Save first click mouse point on screen.\r\n        this.dragDataObject = {\r\n          x: this.eventClient(mouseEvent).X,\r\n          y: this.eventClient(mouseEvent).Y,\r\n        };\r\n        // Reset last drag position when start drag.\r\n        this.lastDrag = {\r\n          x: \"0px\",\r\n          y: \"0px\",\r\n        };\r\n        // Init right and bottom values for window modal if it isn't exist.\r\n        if (this.container.style.right === \"\") {\r\n          this.container.style.right = \"0px\";\r\n        }\r\n        if (this.container.style.bottom === \"\") {\r\n          this.container.style.bottom = \"0px\";\r\n        }\r\n\r\n        // Needed for IE11 for apply disabled mouse events on editor because\r\n        // internet explorer needs a dynamic object to apply this property.\r\n        if (this.isIE11()) {\r\n          // this.iframe.style['position'] = 'relative';\r\n        }\r\n        // Apply class for disable involuntary select text when drag.\r\n        Util.addClass(document.body, \"wrs_noselect\");\r\n        Util.addClass(this.overlay, \"wrs_overlay_active\");\r\n        // Obtain screen limits for prevent overflow.\r\n        this.limitWindow = this.getLimitWindow();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates dragDataObject with the draggable object coordinates when\r\n   * the draggable object is being moved.\r\n   * @param {MouseEvent} mouseEvent - The mouse event.\r\n   */\r\n  drag(mouseEvent) {\r\n    if (this.dragDataObject) {\r\n      mouseEvent.preventDefault();\r\n      // Calculate max and min between actual mouse position and limit of screeen.\r\n      // It restric the movement of modal into window.\r\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, this.limitWindow.minPointer.y);\r\n      limitY = Math.max(this.limitWindow.maxPointer.y, limitY);\r\n      let limitX = Math.min(this.eventClient(mouseEvent).X, this.limitWindow.minPointer.x);\r\n      limitX = Math.max(this.limitWindow.maxPointer.x, limitX);\r\n      // Subtract limit with first position to obtain relative pixels increment\r\n      // to the anchor point.\r\n      const dragX = `${limitX - this.dragDataObject.x}px`;\r\n      const dragY = `${limitY - this.dragDataObject.y}px`;\r\n      // Save last valid position of modal before window overflow.\r\n      this.lastDrag = {\r\n        x: dragX,\r\n        y: dragY,\r\n      };\r\n      // This move modal with hardware acceleration.\r\n      this.container.style.transform = `translate3d(${dragX},${dragY},0)`;\r\n    }\r\n    if (this.resizeDataObject) {\r\n      const { innerWidth } = window;\r\n      const { innerHeight } = window;\r\n      let limitX = Math.min(this.eventClient(mouseEvent).X, innerWidth - this.scrollbarWidth - 7);\r\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, innerHeight - 7);\r\n      if (limitX < 0) {\r\n        limitX = 0;\r\n      }\r\n\r\n      if (limitY < 0) {\r\n        limitY = 0;\r\n      }\r\n\r\n      let scaleMultiplier;\r\n      if (this.leftScale) {\r\n        scaleMultiplier = -1;\r\n      } else {\r\n        scaleMultiplier = 1;\r\n      }\r\n\r\n      this.container.style.width = `${this.initialWidth + scaleMultiplier * (limitX - this.resizeDataObject.x)}px`;\r\n      this.container.style.height = `${this.initialHeight + scaleMultiplier * (limitY - this.resizeDataObject.y)}px`;\r\n      if (!this.leftScale) {\r\n        if (this.resizeDataObject.x - limitX - this.initialWidth < -580) {\r\n          this.container.style.right = `${this.initialRight - (limitX - this.resizeDataObject.x)}px`;\r\n        } else {\r\n          this.container.style.right = `${this.initialRight + this.initialWidth - 580}px`;\r\n          this.container.style.width = \"580px\";\r\n        }\r\n        if (this.resizeDataObject.y - limitY < this.initialHeight - 338) {\r\n          this.container.style.bottom = `${this.initialBottom - (limitY - this.resizeDataObject.y)}px`;\r\n        } else {\r\n          this.container.style.bottom = `${this.initialBottom + this.initialHeight - 338}px`;\r\n          this.container.style.height = \"338px\";\r\n        }\r\n      }\r\n      this.recalculateScale();\r\n      this.recalculatePosition();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the boundaries of actual window to limit modal movement.\r\n   * @return {Object} Object containing mouseX and mouseY coordinates of actual mouse on screen.\r\n   */\r\n  getLimitWindow() {\r\n    // Obtain dimensions of window page.\r\n    const maxWidth = window.innerWidth;\r\n    const maxHeight = window.innerHeight;\r\n\r\n    // Calculate relative position of mouse point into window.\r\n    const { offsetHeight } = this.container;\r\n    const contStyleBottom = parseInt(this.container.style.bottom, 10);\r\n    const contStyleRight = parseInt(this.container.style.right, 10);\r\n\r\n    const { pageXOffset } = window;\r\n    const dragY = this.dragDataObject.y;\r\n    const dragX = this.dragDataObject.x;\r\n\r\n    const offSetToolbarY = offsetHeight + contStyleBottom - (maxHeight - (dragY - pageXOffset));\r\n    const offSetToolbarX = maxWidth - this.scrollbarWidth - (dragX - pageXOffset) - contStyleRight;\r\n\r\n    // Calculate limits with sizes of window, modal and mouse position.\r\n    const minPointerY = maxHeight - this.container.offsetHeight + offSetToolbarY;\r\n    const maxPointerY = this.title.offsetHeight - (this.title.offsetHeight - offSetToolbarY);\r\n    const minPointerX = maxWidth - offSetToolbarX - this.scrollbarWidth;\r\n    const maxPointerX = this.container.offsetWidth - offSetToolbarX;\r\n    const minPointer = { x: minPointerX, y: minPointerY };\r\n    const maxPointer = { x: maxPointerX, y: maxPointerY };\r\n    return { minPointer, maxPointer };\r\n  }\r\n\r\n  /**\r\n   * Returns the scrollbar width size of browser\r\n   * @returns {Number} The scrollbar width.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  getScrollBarWidth() {\r\n    // Create a paragraph with full width of page.\r\n    const inner = document.createElement(\"p\");\r\n    inner.style.width = \"100%\";\r\n    inner.style.height = \"200px\";\r\n\r\n    // Create a hidden div to compare sizes.\r\n    const outer = document.createElement(\"div\");\r\n    outer.style.position = \"absolute\";\r\n    outer.style.top = \"0px\";\r\n    outer.style.left = \"0px\";\r\n    outer.style.visibility = \"hidden\";\r\n    outer.style.width = \"200px\";\r\n    outer.style.height = \"150px\";\r\n    outer.style.overflow = \"hidden\";\r\n    outer.appendChild(inner);\r\n\r\n    document.body.appendChild(outer);\r\n    const widthOuter = inner.offsetWidth;\r\n\r\n    // Change type overflow of paragraph for measure scrollbar.\r\n    outer.style.overflow = \"scroll\";\r\n    let widthInner = inner.offsetWidth;\r\n\r\n    // If measure is the same, we compare with internal div.\r\n    if (widthOuter === widthInner) {\r\n      widthInner = outer.clientWidth;\r\n    }\r\n    document.body.removeChild(outer);\r\n\r\n    return widthOuter - widthInner;\r\n  }\r\n\r\n  /**\r\n   * Set the dragDataObject to null.\r\n   */\r\n  stopDrag() {\r\n    // Due to we have multiple events that call this function, we need only to execute\r\n    // the next modifiers one time,\r\n    // when the user stops to drag and dragDataObject is not null (the object to drag is attached).\r\n    if (this.dragDataObject || this.resizeDataObject) {\r\n      // If modal doesn't change, it's not necessary to set position with interpolation.\r\n      this.container.style.transform = \"\";\r\n      if (this.dragDataObject) {\r\n        this.container.style.right = `${parseInt(this.container.style.right, 10) - parseInt(this.lastDrag.x, 10)}px`;\r\n        this.container.style.bottom = `${parseInt(this.container.style.bottom, 10) - parseInt(this.lastDrag.y, 10)}px`;\r\n      }\r\n      // We make focus on editor after drag modal windows to prevent lose focus.\r\n      this.focus();\r\n      // Restore mouse events on iframe.\r\n      // this.iframe.style['pointer-events'] = 'auto';\r\n      document.body.style[\"user-select\"] = \"\";\r\n      // Restore static state of iframe if we use Internet Explorer.\r\n      if (this.isIE11()) {\r\n        // this.iframe.style['position'] = null;\r\n      }\r\n      // Active text select event.\r\n      Util.removeClass(document.body, \"wrs_noselect\");\r\n      Util.removeClass(this.overlay, \"wrs_overlay_active\");\r\n    }\r\n    this.dragDataObject = null;\r\n    this.resizeDataObject = null;\r\n    this.initialWidth = null;\r\n    this.leftScale = null;\r\n  }\r\n\r\n  /**\r\n   * Recalculates scale for modal when resize browser window.\r\n   */\r\n  onWindowResize() {\r\n    this.recalculateScrollBar();\r\n    this.recalculatePosition();\r\n    this.recalculateScale();\r\n  }\r\n\r\n  /**\r\n   * Triggers keyboard events:\r\n   * - Tab key tab to go to submit button.\r\n   * - Esc key to close the modal dialog.\r\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\r\n   */\r\n  onKeyDown(keyboardEvent) {\r\n    if (keyboardEvent.key !== undefined) {\r\n      // Popupmessage is not oppened.\r\n      if (this.popup.overlayWrapper.style.display !== \"block\") {\r\n        // Code to detect Esc event\r\n        if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\r\n          if (this.properties.open) {\r\n            this.contentManager.onKeyDown(keyboardEvent);\r\n          }\r\n        } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\r\n          // Code to detect shift Tab event.\r\n          if (document.activeElement === this.cancelButton) {\r\n            this.submitButton.focus();\r\n            keyboardEvent.stopPropagation();\r\n            keyboardEvent.preventDefault();\r\n          } else {\r\n            this.contentManager.onKeyDown(keyboardEvent);\r\n          }\r\n        } else if (keyboardEvent.key === \"Tab\") {\r\n          // Code to detect Tab event.\r\n          if (document.activeElement === this.submitButton) {\r\n            this.cancelButton.focus();\r\n            keyboardEvent.stopPropagation();\r\n            keyboardEvent.preventDefault();\r\n          } else {\r\n            this.contentManager.onKeyDown(keyboardEvent);\r\n          }\r\n        }\r\n      } else {\r\n        // Popupmessage oppened.\r\n        this.popup.onKeyDown(keyboardEvent);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Recalculating position for modal dialog when the browser is resized.\r\n   */\r\n  recalculatePosition() {\r\n    this.container.style.right = `${Math.min(parseInt(this.container.style.right, 10), window.innerWidth - this.scrollbarWidth - this.container.offsetWidth)}px`;\r\n    if (parseInt(this.container.style.right, 10) < 0) {\r\n      this.container.style.right = \"0px\";\r\n    }\r\n    this.container.style.bottom = `${Math.min(parseInt(this.container.style.bottom, 10), window.innerHeight - this.container.offsetHeight)}px`;\r\n    if (parseInt(this.container.style.bottom, 10) < 0) {\r\n      this.container.style.bottom = \"0px\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Recalculating scale for modal when the browser is resized.\r\n   */\r\n  recalculateScale() {\r\n    let sizeModified = false;\r\n\r\n    if (parseInt(this.container.style.width, 10) > 580) {\r\n      this.container.style.width = `${Math.min(parseInt(this.container.style.width, 10), window.innerWidth - this.scrollbarWidth)}px`;\r\n      sizeModified = true;\r\n    } else {\r\n      this.container.style.width = \"580px\";\r\n      sizeModified = true;\r\n    }\r\n\r\n    if (parseInt(this.container.style.height, 10) > 338) {\r\n      this.container.style.height = `${Math.min(parseInt(this.container.style.height, 10), window.innerHeight)}px`;\r\n      sizeModified = true;\r\n    } else {\r\n      this.container.style.height = \"338px\";\r\n      sizeModified = true;\r\n    }\r\n\r\n    if (sizeModified) {\r\n      this.recalculateSize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Recalculating width of browser scroll bar.\r\n   */\r\n  recalculateScrollBar() {\r\n    this.hasScrollBar = window.innerWidth > document.documentElement.clientWidth;\r\n    if (this.hasScrollBar) {\r\n      this.scrollbarWidth = this.getScrollBarWidth();\r\n    } else {\r\n      this.scrollbarWidth = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide soft keyboards on iOS devices.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  hideKeyboard() {\r\n    // iOS keyboard can't be detected or hide directly from JavaScript.\r\n    // So, this method simulates that user focus a text input and blur\r\n    // the selection.\r\n    const inputField = document.createElement(\"input\");\r\n    this.container.appendChild(inputField);\r\n    inputField.focus();\r\n    inputField.blur();\r\n    // Is removed to not see it.\r\n    inputField.remove();\r\n  }\r\n\r\n  /**\r\n   * Focus to contentManager object.\r\n   */\r\n  focus() {\r\n    if (this.contentManager != null && typeof this.contentManager.onFocus !== \"undefined\") {\r\n      this.contentManager.onFocus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns true when the device is on portrait mode.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  portraitMode() {\r\n    return window.innerHeight > window.innerWidth;\r\n  }\r\n\r\n  /**\r\n   * Event handler that change container size when IOS soft keyboard is opened.\r\n   */\r\n  handleOpenedIosSoftkeyboard() {\r\n    if (!this.iosSoftkeyboardOpened && this.iosDivHeight != null && this.iosDivHeight === `auto`) {\r\n      if (this.portraitMode()) {\r\n        this.setContainerHeight(`60${this.iosMeasureUnit}`);\r\n      } else {\r\n        this.setContainerHeight(`35${this.iosMeasureUnit}`);\r\n      }\r\n    }\r\n    this.iosSoftkeyboardOpened = true;\r\n    this.wrapper.style.flexGrow = \"1\";\r\n  }\r\n\r\n  /**\r\n   * Event handler that change container size when IOS soft keyboard is closed.\r\n   */\r\n  handleClosedIosSoftkeyboard() {\r\n    this.iosSoftkeyboardOpened = false;\r\n    this.wrapper.style.flexGrow = \"1\";\r\n  }\r\n\r\n  /**\r\n   * Change container sizes when orientation is changed on iOS.\r\n   */\r\n  orientationChangeIosSoftkeyboard() {\r\n    if (this.iosSoftkeyboardOpened) {\r\n      if (this.portraitMode()) {\r\n        this.setContainerHeight(`65${this.iosMeasureUnit}`);\r\n      } else {\r\n        this.setContainerHeight(`45${this.iosMeasureUnit}`);\r\n      }\r\n    } else {\r\n      this.wrapper.style.flexGrow = \"1\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change container sizes when orientation is changed on Android.\r\n   */\r\n  orientationChangeAndroidSoftkeyboard() {\r\n    this.wrapper.style.flexGrow = \"1\";\r\n  }\r\n\r\n  /**\r\n   * Set iframe container height.\r\n   * @param {Number} height - New height.\r\n   */\r\n  setContainerHeight(height) {\r\n    this.iosDivHeight = height;\r\n    this.wrapper.style.height = height;\r\n  }\r\n\r\n  /**\r\n   * Check content of editor before close action.\r\n   */\r\n  showPopUpMessage() {\r\n    if (this.properties.state === \"minimized\") {\r\n      this.stack();\r\n    }\r\n    this.popup.show();\r\n  }\r\n\r\n  /**\r\n   * Sets the title of the modal dialog.\r\n   * @param {String} title - Modal dialog title.\r\n   */\r\n  setTitle(title) {\r\n    this.title.innerHTML = title;\r\n  }\r\n\r\n  /**\r\n   * Returns the id of an element, adding the instance number to\r\n   * the element class name:\r\n   * className --> className[idNumber]\r\n   * @param {String} className - The element class name.\r\n   * @returns {String} A string appending the instance id to the className.\r\n   */\r\n  getElementId(className) {\r\n    return `${className}[${this.instanceId}]`;\r\n  }\r\n}\r\n","/* eslint-disable */\r\nvar polyfills;\r\nexport default polyfills;\r\n\r\n// Polyfills.\r\n/*! http://mths.be/codepointat v0.1.0 by @mathias */\r\nif (!String.prototype.codePointAt) {\r\n  (function () {\r\n    \"use strict\"; // needed to support `apply`/`call` with `undefined`/`null`\r\n    var codePointAt = function (position) {\r\n      if (this == null) {\r\n        throw TypeError();\r\n      }\r\n      var string = String(this);\r\n      var size = string.length;\r\n      // `ToInteger`\r\n      var index = position ? Number(position) : 0;\r\n      if (index != index) {\r\n        // better `isNaN`\r\n        index = 0;\r\n      }\r\n      // Account for out-of-bounds indices:\r\n      if (index < 0 || index >= size) {\r\n        return undefined;\r\n      }\r\n      // Get the first code unit\r\n      var first = string.charCodeAt(index);\r\n      var second;\r\n      if (\r\n        // check if it’s the start of a surrogate pair\r\n        first >= 0xd800 &&\r\n        first <= 0xdbff && // high surrogate\r\n        size > index + 1 // there is a next code unit\r\n      ) {\r\n        second = string.charCodeAt(index + 1);\r\n        if (second >= 0xdc00 && second <= 0xdfff) {\r\n          // low surrogate\r\n          // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\r\n          return (first - 0xd800) * 0x400 + second - 0xdc00 + 0x10000;\r\n        }\r\n      }\r\n      return first;\r\n    };\r\n    if (Object.defineProperty) {\r\n      Object.defineProperty(String.prototype, \"codePointAt\", {\r\n        value: codePointAt,\r\n        configurable: true,\r\n        writable: true,\r\n      });\r\n    } else {\r\n      String.prototype.codePointAt = codePointAt;\r\n    }\r\n  })();\r\n}\r\n\r\n// Object.assign polyfill.\r\nif (typeof Object.assign != \"function\") {\r\n  // Must be writable: true, enumerable: false, configurable: true\r\n  Object.defineProperty(Object, \"assign\", {\r\n    value: function assign(target, varArgs) {\r\n      // .length of function is 2\r\n      \"use strict\";\r\n      if (target == null) {\r\n        // TypeError if undefined or null\r\n        throw new TypeError(\"Cannot convert undefined or null to object\");\r\n      }\r\n\r\n      var to = Object(target);\r\n\r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n\r\n        if (nextSource != null) {\r\n          // Skip over if undefined or null\r\n          for (var nextKey in nextSource) {\r\n            // Avoid bugs when hasOwnProperty is shadowed\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n              to[nextKey] = nextSource[nextKey];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    },\r\n    writable: true,\r\n    configurable: true,\r\n  });\r\n}\r\n\r\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\r\nif (!Array.prototype.includes) {\r\n  Object.defineProperty(Array.prototype, \"includes\", {\r\n    value: function (searchElement, fromIndex) {\r\n      if (this == null) {\r\n        throw new TypeError('\"this\" s null or is not defined');\r\n      }\r\n\r\n      // 1. Let O be ? ToObject(this value).\r\n      var o = Object(this);\r\n\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n\r\n      // 3. if len is 0, return false.\r\n      if (len === 0) {\r\n        return false;\r\n      }\r\n\r\n      // 4. Let n be ? ToInteger(fromIndex).\r\n      //    (if fromIndex is undefinedo, this step generates the value 0.)\r\n      var n = fromIndex | 0;\r\n\r\n      // 5. if n ≥ 0, then\r\n      //  a. Let k be n.\r\n      // 6. Else n < 0,\r\n      //  a. Let k be len + n.\r\n      //  b. if k < 0, let k be 0.\r\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\r\n\r\n      function sameValueZero(x, y) {\r\n        return x === y || (typeof x === \"number\" && typeof y === \"number\" && isNaN(x) && isNaN(y));\r\n      }\r\n\r\n      // 7. Repeat while k < len\r\n      while (k < len) {\r\n        // a. let element k be the result of ? Get(O, ! ToString(k)).\r\n        // b. if SameValueZero(searchElement, elementK) is true, return true.\r\n        if (sameValueZero(o[k], searchElement)) {\r\n          return true;\r\n        }\r\n        // c. Increase k by 1.\r\n        k++;\r\n      }\r\n\r\n      // 8. Return false\r\n      return false;\r\n    },\r\n  });\r\n}\r\n\r\nif (!String.prototype.includes) {\r\n  String.prototype.includes = function (search, start) {\r\n    \"use strict\";\r\n\r\n    if (search instanceof RegExp) {\r\n      throw TypeError(\"first argument must not be a RegExp\");\r\n    }\r\n    if (start === undefined) {\r\n      start = 0;\r\n    }\r\n    return this.indexOf(search, start) !== -1;\r\n  };\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n  Object.defineProperty(String.prototype, \"startsWith\", {\r\n    value: function (search, rawPos) {\r\n      var pos = rawPos > 0 ? rawPos | 0 : 0;\r\n      return this.substring(pos, pos + search.length) === search;\r\n    },\r\n  });\r\n}\r\n","import Parser from \"./parser\";\r\nimport Util from \"./util\";\r\nimport StringManager from \"./stringmanager\";\r\nimport ContentManager from \"./contentmanager\";\r\nimport Latex from \"./latex\";\r\nimport MathML from \"./mathml\";\r\nimport CustomEditors from \"./customeditors\";\r\nimport Configuration from \"./configuration\";\r\nimport jsProperties from \"./jsvariables\";\r\nimport Event from \"./event\";\r\nimport Listeners from \"./listeners\";\r\nimport Image from \"./image\";\r\nimport ServiceProvider from \"./serviceprovider\";\r\nimport ModalDialog from \"./modal\";\r\nimport Telemeter from \"./telemeter\";\r\nimport \"./polyfills\";\r\nimport \"../styles/styles.css\";\r\n\r\n/**\r\n * @typedef {Object} CoreProperties\r\n * @property {ServiceProviderProperties} serviceProviderProperties\r\n * - The ServiceProvider class properties. *\r\n */\r\nexport default class Core {\r\n  /**\r\n   * @classdesc\r\n   * This class represents MathType integration Core, managing the following:\r\n   * - Integration initialization.\r\n   * - Event managing.\r\n   * - Insertion of formulas into the edit area.\r\n   * ```js\r\n   *       let core = new Core();\r\n   *       core.addListener(listener);\r\n   *       core.language = 'en';\r\n   *\r\n   *       // Initializing Core class.\r\n   *       core.init(configurationService);\r\n   * ```\r\n   * @constructs\r\n   * Core constructor.\r\n   * @param {CoreProperties}\r\n   */\r\n  constructor(coreProperties) {\r\n    /**\r\n     * Language. Needed for accessibility and locales. 'en' by default.\r\n     * @type {String}\r\n     */\r\n    this.language = \"en\";\r\n\r\n    /**\r\n     * Edit mode, 'images' by default. Admits the following values:\r\n     * - images\r\n     * - latex\r\n     * @type {String}\r\n     */\r\n    this.editMode = \"images\";\r\n\r\n    /**\r\n     * Modal dialog instance.\r\n     * @type {ModalDialog}\r\n     */\r\n    this.modalDialog = null;\r\n\r\n    /**\r\n     * The instance of {@link CustomEditors}. By default\r\n     * the only custom editor is the Chemistry editor.\r\n     * @type {CustomEditors}\r\n     */\r\n    this.customEditors = new CustomEditors();\r\n\r\n    /**\r\n     * Chemistry editor.\r\n     * @type {CustomEditor}\r\n     */\r\n    const chemEditorParams = {\r\n      name: \"Chemistry\",\r\n      toolbar: \"chemistry\",\r\n      icon: \"chem.png\",\r\n      confVariable: \"chemEnabled\",\r\n      title: \"ChemType\",\r\n      tooltip: \"Insert a chemistry formula - ChemType\", // TODO: Localize tooltip.\r\n    };\r\n\r\n    this.customEditors.addEditor(\"chemistry\", chemEditorParams);\r\n\r\n    /**\r\n     * Environment properties. This object contains data about the integration platform.\r\n     * @typedef IntegrationEnvironment\r\n     * @property {String} IntegrationEnvironment.editor - Editor name. For example the HTML editor.\r\n     * @property {String} IntegrationEnvironment.mode - Integration save mode.\r\n     * @property {String} IntegrationEnvironment.version - Integration version.\r\n     *\r\n     */\r\n\r\n    /**\r\n     * The environment properties object.\r\n     * @type {IntegrationEnvironment}\r\n     */\r\n    this.environment = {};\r\n\r\n    /**\r\n     * @typedef EditionProperties\r\n     * @property {Boolean} editionProperties.isNewElement - True if the formula is a new one.\r\n     * False otherwise.\r\n     * @property {HTMLImageElement} editionProperties.temporalImage- The image element.\r\n     * Null if the formula is new.\r\n     * @property {Range} editionProperties.latexRange - Tha range that contains the LaTeX formula.\r\n     * @property {Range} editionProperties.range - The range that contains the image element.\r\n     * @property {String} editionProperties.editMode - The edition mode. 'images' by default.\r\n     */\r\n\r\n    /**\r\n     * The properties of the current edition process.\r\n     * @type {EditionProperties}\r\n     */\r\n    this.editionProperties = {};\r\n\r\n    this.editionProperties.isNewElement = true;\r\n    this.editionProperties.temporalImage = null;\r\n    this.editionProperties.latexRange = null;\r\n    this.editionProperties.range = null;\r\n    this.editionProperties.editionStartTime = null;\r\n\r\n    /**\r\n     * The {@link IntegrationModel} instance.\r\n     * @type {IntegrationModel}\r\n     */\r\n    this.integrationModel = null;\r\n\r\n    /**\r\n     * The {@link ContentManager} instance.\r\n     * @type {ContentManager}\r\n     */\r\n    this.contentManager = null;\r\n\r\n    /**\r\n     * The current browser.\r\n     * @type {String}\r\n     */\r\n    this.browser = (() => {\r\n      const ua = navigator.userAgent;\r\n      let browser = \"none\";\r\n      if (ua.search(\"Edge/\") >= 0) {\r\n        browser = \"EDGE\";\r\n      } else if (ua.search(\"Chrome/\") >= 0) {\r\n        browser = \"CHROME\";\r\n      } else if (ua.search(\"Trident/\") >= 0) {\r\n        browser = \"IE\";\r\n      } else if (ua.search(\"Firefox/\") >= 0) {\r\n        browser = \"FIREFOX\";\r\n      } else if (ua.search(\"Safari/\") >= 0) {\r\n        browser = \"SAFARI\";\r\n      }\r\n      return browser;\r\n    })();\r\n\r\n    /**\r\n     * Plugin listeners.\r\n     * @type {Array.<Object>}\r\n     */\r\n    this.listeners = new Listeners();\r\n\r\n    /**\r\n     * Service provider properties.\r\n     * @type {ServiceProviderProperties}\r\n     */\r\n    this.serviceProviderProperties = {};\r\n    if (\"serviceProviderProperties\" in coreProperties) {\r\n      this.serviceProviderProperties = coreProperties.serviceProviderProperties;\r\n    } else {\r\n      throw new Error(\"serviceProviderProperties property missing.\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Static property.\r\n   * Core listeners.\r\n   * @private\r\n   * @type {Listeners}\r\n   */\r\n  static get globalListeners() {\r\n    return Core._globalListeners;\r\n  }\r\n\r\n  /**\r\n   * Static property setter.\r\n   * Set core listeners.\r\n   * @param {Listeners} value - The property value.\r\n   * @ignore\r\n   */\r\n  static set globalListeners(value) {\r\n    Core._globalListeners = value;\r\n  }\r\n\r\n  /**\r\n   * Core state. Says if it was loaded previously.\r\n   * True when Core.init was called. Otherwise, false.\r\n   * @private\r\n   * @type {Boolean}\r\n   */\r\n  static get initialized() {\r\n    return Core._initialized;\r\n  }\r\n\r\n  /**\r\n   * Core state. Says if it was loaded previously.\r\n   * @param {Boolean} value - True to say that Core.init was called. Otherwise, false.\r\n   * @ignore\r\n   */\r\n  static set initialized(value) {\r\n    Core._initialized = value;\r\n  }\r\n\r\n  /**\r\n   * Sets the {@link Core.integrationModel} property.\r\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} property.\r\n   */\r\n  setIntegrationModel(integrationModel) {\r\n    this.integrationModel = integrationModel;\r\n  }\r\n\r\n  /**\r\n   * Sets the {@link Core.environment} property.\r\n   * @param {IntegrationEnvironment} integrationEnvironment -\r\n   * The {@link IntegrationEnvironment} object.\r\n   */\r\n  setEnvironment(integrationEnvironment) {\r\n    if (\"editor\" in integrationEnvironment) {\r\n      this.environment.editor = integrationEnvironment.editor;\r\n    }\r\n    if (\"mode\" in integrationEnvironment) {\r\n      this.environment.mode = integrationEnvironment.mode;\r\n    }\r\n    if (\"version\" in integrationEnvironment) {\r\n      this.environment.version = integrationEnvironment.version;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the custom headers added on editor requests if contentManager isn't undefined.\r\n   * @returns {Object} headers - key value headers.\r\n   */\r\n  setHeaders(headers) {\r\n    const headerObject = this?.contentManager?.setCustomHeaders(headers) || headers;\r\n    Configuration.set(\"customHeaders\", headerObject);\r\n  }\r\n\r\n  /**\r\n   * Returns the current {@link ModalDialog} instance.\r\n   * @returns {ModalDialog} The current {@link ModalDialog} instance.\r\n   */\r\n  getModalDialog() {\r\n    return this.modalDialog;\r\n  }\r\n\r\n  /**\r\n   * Inits the {@link Core} class, doing the following:\r\n   * - Calls asynchronously configuration service, retrieving the backend configuration in a JSON.\r\n   * - Updates {@link Configuration} class with the previous configuration properties.\r\n   * - Updates the {@link ServiceProvider} class using the configuration service path as reference.\r\n   * - Loads language strings.\r\n   * - Fires onLoad event.\r\n   * @param {Object} serviceParameters - Service parameters.\r\n   */\r\n  init() {\r\n    if (!Core.initialized) {\r\n      const serviceProviderListener = Listeners.newListener(\"onInit\", () => {\r\n        const jsConfiguration = ServiceProvider.getService(\"configurationjs\", \"\", \"get\");\r\n        const jsonConfiguration = JSON.parse(jsConfiguration);\r\n        Configuration.addConfiguration(jsonConfiguration);\r\n        // Adding JavaScript (not backend) configuration variables.\r\n        Configuration.addConfiguration(jsProperties);\r\n        // Fire 'onLoad' event:\r\n        // All integration must listen this event in order to know if the plugin\r\n        // has been properly loaded.\r\n        StringManager.language = this.language;\r\n        this.listeners.fire(\"onLoad\", {});\r\n      });\r\n\r\n      ServiceProvider.addListener(serviceProviderListener);\r\n      ServiceProvider.init(this.serviceProviderProperties);\r\n\r\n      Core.initialized = true;\r\n    } else {\r\n      // Case when there are more than two editor instances.\r\n      // After the first editor all the other editors don't need to load any file or service.\r\n      this.listeners.fire(\"onLoad\", {});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a {@link Listener} to the current instance of the {@link Core} class.\r\n   * @param {Listener} listener - The listener object.\r\n   */\r\n  addListener(listener) {\r\n    this.listeners.add(listener);\r\n  }\r\n\r\n  /**\r\n   * Adds the global {@link Listener} instance to {@link Core} class.\r\n   * @param {Listener} listener - The event listener to be added.\r\n   * @static\r\n   */\r\n  static addGlobalListener(listener) {\r\n    Core.globalListeners.add(listener);\r\n  }\r\n\r\n  beforeUpdateFormula(mathml, wirisProperties) {\r\n    /**\r\n     * This event is fired before updating the formula.\r\n     * @type {Object}\r\n     * @property {String} mathml - MathML to be transformed.\r\n     * @property {String} editMode - Edit mode.\r\n     * @property {Object} wirisProperties - Extra attributes for the formula.\r\n     * @property {String} language - Formula language.\r\n     */\r\n    const beforeUpdateEvent = new Event();\r\n\r\n    beforeUpdateEvent.mathml = mathml;\r\n\r\n    // Cloning wirisProperties object\r\n    // We don't want wirisProperties object modified.\r\n    beforeUpdateEvent.wirisProperties = {};\r\n\r\n    if (wirisProperties != null) {\r\n      Object.keys(wirisProperties).forEach((attr) => {\r\n        beforeUpdateEvent.wirisProperties[attr] = wirisProperties[attr];\r\n      });\r\n    }\r\n\r\n    // Read only.\r\n    beforeUpdateEvent.language = this.language;\r\n    beforeUpdateEvent.editMode = this.editMode;\r\n\r\n    if (this.listeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\r\n      return {};\r\n    }\r\n\r\n    if (Core.globalListeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\r\n      return {};\r\n    }\r\n\r\n    return {\r\n      mathml: beforeUpdateEvent.mathml,\r\n      wirisProperties: beforeUpdateEvent.wirisProperties,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Converts a MathML into it's correspondent image and inserts the image is\r\n   * inserted in a HTMLElement target by creating\r\n   * a new image or updating an existing one.\r\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the insertion.\r\n   * @param {Window} windowTarget - The window element where the editable content is.\r\n   * @param {String} mathml - The MathML.\r\n   * @param {Array.<Object>} wirisProperties - The extra attributes for the formula.\r\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\r\n   */\r\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\r\n    /**\r\n     * It is the object with the information of the node or latex to insert.\r\n     * @typedef ReturnObject\r\n     * @property {Node} [node] - The DOM node to insert.\r\n     * @property {String} [latex] - The latex to insert.\r\n     */\r\n    const returnObject = {};\r\n\r\n    if (!mathml) {\r\n      this.insertElementOnSelection(null, focusElement, windowTarget);\r\n    } else if (this.editMode === \"latex\") {\r\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\r\n      // this.integrationModel.getNonLatexNode is an integration wrapper\r\n      // to have special behaviours for nonLatex.\r\n      // Not all the integrations have special behaviours for nonLatex.\r\n      if (!!this.integrationModel.fillNonLatexNode && !returnObject.latex) {\r\n        const afterUpdateEvent = new Event();\r\n        afterUpdateEvent.editMode = this.editMode;\r\n        afterUpdateEvent.windowTarget = windowTarget;\r\n        afterUpdateEvent.focusElement = focusElement;\r\n        afterUpdateEvent.latex = returnObject.latex;\r\n        this.integrationModel.fillNonLatexNode(afterUpdateEvent, windowTarget, mathml);\r\n      } else {\r\n        returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\r\n      }\r\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\r\n    } else {\r\n      returnObject.node = Parser.mathmlToImgObject(windowTarget.document, mathml, wirisProperties, this.language);\r\n\r\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\r\n    }\r\n\r\n    return returnObject;\r\n  }\r\n\r\n  afterUpdateFormula(focusElement, windowTarget, node, latex) {\r\n    /**\r\n     * This event is fired after update the formula.\r\n     * @type {Event}\r\n     * @param {String} editMode - edit mode.\r\n     * @param {Object} windowTarget - target window.\r\n     * @param {Object} focusElement - target element to be focused after update.\r\n     * @param {String} latex - LaTeX generated by the formula (editMode=latex).\r\n     * @param {Object} node - node generated after update the formula (text if LaTeX img otherwise).\r\n     */\r\n    const afterUpdateEvent = new Event();\r\n    afterUpdateEvent.editMode = this.editMode;\r\n    afterUpdateEvent.windowTarget = windowTarget;\r\n    afterUpdateEvent.focusElement = focusElement;\r\n    afterUpdateEvent.node = node;\r\n    afterUpdateEvent.latex = latex;\r\n\r\n    if (this.listeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\r\n      return {};\r\n    }\r\n\r\n    if (Core.globalListeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\r\n      return {};\r\n    }\r\n\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Sets the caret after a given Node and set the focus to the owner document.\r\n   * @param {Node} node - The Node element.\r\n   */\r\n  placeCaretAfterNode(node) {\r\n    if (node === null) return;\r\n\r\n    this.integrationModel.getSelection();\r\n    const nodeDocument = node.ownerDocument;\r\n    if (typeof nodeDocument.getSelection !== \"undefined\" && !!node.parentElement) {\r\n      const range = nodeDocument.createRange();\r\n      range.setStartAfter(node);\r\n      range.collapse(true);\r\n      const selection = nodeDocument.getSelection();\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n      nodeDocument.body.focus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Replaces a Selection object with an HTMLElement.\r\n   * @param {HTMLElement} element - The HTMLElement to replace the selection.\r\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the replace.\r\n   * @param {Window} windowTarget - The window target.\r\n   */\r\n  insertElementOnSelection(element, focusElement, windowTarget) {\r\n    let mathmlOrigin = null;\r\n    if (this.editionProperties.isNewElement) {\r\n      if (element) {\r\n        if (focusElement.type === \"textarea\") {\r\n          Util.updateTextArea(focusElement, element.textContent);\r\n        } else if (document.selection && document.getSelection === 0) {\r\n          let range = windowTarget.document.selection.createRange();\r\n          windowTarget.document.execCommand(\"InsertImage\", false, element.src);\r\n\r\n          if (!(\"parentElement\" in range)) {\r\n            windowTarget.document.execCommand(\"delete\", false);\r\n            range = windowTarget.document.selection.createRange();\r\n            windowTarget.document.execCommand(\"InsertImage\", false, element.src);\r\n          }\r\n\r\n          if (\"parentElement\" in range) {\r\n            const temporalObject = range.parentElement();\r\n\r\n            if (temporalObject.nodeName.toUpperCase() === \"IMG\") {\r\n              temporalObject.parentNode.replaceChild(element, temporalObject);\r\n            } else {\r\n              // IE9 fix: parentNode() does not return the IMG node,\r\n              // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\r\n              range.pasteHTML(Util.createObjectCode(element));\r\n            }\r\n          }\r\n        } else {\r\n          let range = null;\r\n          // In IE is needed keep the range due to after focus the modal window\r\n          // it can't be retrieved the last selection.\r\n          if (this.editionProperties.range) {\r\n            ({ range } = this.editionProperties);\r\n            this.editionProperties.range = null;\r\n          } else {\r\n            const editorSelection = this.integrationModel.getSelection();\r\n            range = editorSelection.getRangeAt(0);\r\n          }\r\n\r\n          // Delete if something was surrounded.\r\n          range.deleteContents();\r\n\r\n          let node = range.startContainer;\r\n          const position = range.startOffset;\r\n\r\n          if (node.nodeType === 3) {\r\n            // TEXT_NODE.\r\n            node = node.splitText(position);\r\n            node.parentNode.insertBefore(element, node);\r\n          } else if (node.nodeType === 1) {\r\n            // ELEMENT_NODE.\r\n            node.insertBefore(element, node.childNodes[position]);\r\n          }\r\n\r\n          this.placeCaretAfterNode(element);\r\n        }\r\n      } else if (focusElement.type === \"textarea\") {\r\n        focusElement.focus();\r\n      } else {\r\n        const editorSelection = this.integrationModel.getSelection();\r\n        editorSelection.removeAllRanges();\r\n\r\n        if (this.editionProperties.range) {\r\n          const { range } = this.editionProperties;\r\n          this.editionProperties.range = null;\r\n          editorSelection.addRange(range);\r\n        }\r\n      }\r\n    } else if (this.editionProperties.latexRange) {\r\n      if (document.selection && document.getSelection === 0) {\r\n        this.editionProperties.isNewElement = true;\r\n        this.editionProperties.latexRange.select();\r\n        this.insertElementOnSelection(element, focusElement, windowTarget);\r\n      } else {\r\n        this.editionProperties.latexRange.deleteContents();\r\n        this.editionProperties.latexRange.insertNode(element);\r\n        this.placeCaretAfterNode(element);\r\n      }\r\n    } else if (focusElement.type === \"textarea\") {\r\n      let item;\r\n      // Wrapper for some integrations that can have special behaviours to show latex.\r\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\r\n        item = this.integrationModel.getSelectedItem(focusElement, false);\r\n      } else {\r\n        item = Util.getSelectedItemOnTextarea(focusElement);\r\n      }\r\n      Util.updateExistingTextOnTextarea(focusElement, element.textContent, item.startPosition, item.endPosition);\r\n    } else {\r\n      mathmlOrigin = this.editionProperties.temporalImage?.dataset.mathml;\r\n      if (element && element.nodeName.toLowerCase() === \"img\") {\r\n        // Editor empty, formula has been erased on edit.\r\n        // There are editors (e.g: CKEditor) that put attributes in images.\r\n        // We don't allow that behaviour in our images.\r\n        Image.removeImgDataAttributes(this.editionProperties.temporalImage);\r\n        // Clone is needed to maintain event references to temporalImage.\r\n        Image.clone(element, this.editionProperties.temporalImage);\r\n      } else {\r\n        this.editionProperties.temporalImage.remove();\r\n      }\r\n      this.placeCaretAfterNode(this.editionProperties.temporalImage);\r\n    }\r\n\r\n    // Build the telemeter payload separated to delete null/undefined entries.\r\n    const mathml = element?.dataset?.mathml;\r\n    const payload = {\r\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\r\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\r\n      elapsed_time: Date.now() - this.editionProperties.editionStartTime,\r\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\r\n      toolbar: this.modalDialog.contentManager.toolbar,\r\n      size: mathml?.length,\r\n    };\r\n\r\n    // Remove the desired null keys.\r\n    Object.keys(payload).forEach((key) => {\r\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\r\n    });\r\n\r\n    // Call Telemetry service to track the event.\r\n    try {\r\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\r\n        ...payload,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens a modal dialog containing MathType editor..\r\n   * @param {HTMLElement} target - The target HTMLElement where formulas should be inserted.\r\n   * @param {Boolean} isIframe - True if the target HTMLElement is an iframe. False otherwise.\r\n   */\r\n  openModalDialog(target, isIframe) {\r\n    // Count the time since the editor is open\r\n    this.editionProperties.editionStartTime = Date.now();\r\n\r\n    // Textarea elements don't have normal document ranges. It only accepts latex edit.\r\n    this.editMode = \"images\";\r\n\r\n    // In IE is needed keep the range due to after focus the modal window\r\n    // it can't be retrieved the last selection.\r\n    try {\r\n      if (isIframe) {\r\n        // Is needed focus the target first.\r\n        target.contentWindow.focus();\r\n        const selection = target.contentWindow.getSelection();\r\n        this.editionProperties.range = selection.getRangeAt(0);\r\n      } else {\r\n        // Is needed focus the target first.\r\n        target.focus();\r\n        const selection = getSelection();\r\n        this.editionProperties.range = selection.getRangeAt(0);\r\n      }\r\n    } catch (e) {\r\n      this.editionProperties.range = null;\r\n    }\r\n\r\n    if (isIframe === undefined) {\r\n      isIframe = true;\r\n    }\r\n\r\n    this.editionProperties.latexRange = null;\r\n\r\n    if (target) {\r\n      let selectedItem;\r\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\r\n        selectedItem = this.integrationModel.getSelectedItem(target, isIframe);\r\n      } else {\r\n        selectedItem = Util.getSelectedItem(target, isIframe);\r\n      }\r\n\r\n      // Check LaTeX if and only if the node is a text node (nodeType==3).\r\n      if (selectedItem) {\r\n        // Case when image was selected and button pressed.\r\n        if (!selectedItem.caretPosition && Util.containsClass(selectedItem.node, Configuration.get(\"imageClassName\"))) {\r\n          this.editionProperties.temporalImage = selectedItem.node;\r\n          this.editionProperties.isNewElement = false;\r\n        } else if (selectedItem.node.nodeType === 3) {\r\n          // If it's a text node means that editor is working with LaTeX.\r\n          if (this.integrationModel.getMathmlFromTextNode) {\r\n            // If integration has this function it isn't set range due to we don't\r\n            // know if it will be put into a textarea as a text or image.\r\n            const mathml = this.integrationModel.getMathmlFromTextNode(selectedItem.node, selectedItem.caretPosition);\r\n            if (mathml) {\r\n              this.editMode = \"latex\";\r\n              this.editionProperties.isNewElement = false;\r\n              this.editionProperties.temporalImage = document.createElement(\"img\");\r\n              this.editionProperties.temporalImage.setAttribute(\r\n                Configuration.get(\"imageMathmlAttribute\"),\r\n                MathML.safeXmlEncode(mathml),\r\n              );\r\n            }\r\n          } else {\r\n            const latexResult = Latex.getLatexFromTextNode(selectedItem.node, selectedItem.caretPosition);\r\n            if (latexResult) {\r\n              const mathml = Latex.getMathMLFromLatex(latexResult.latex);\r\n              this.editMode = \"latex\";\r\n              this.editionProperties.isNewElement = false;\r\n              this.editionProperties.temporalImage = document.createElement(\"img\");\r\n              this.editionProperties.temporalImage.setAttribute(\r\n                Configuration.get(\"imageMathmlAttribute\"),\r\n                MathML.safeXmlEncode(mathml),\r\n              );\r\n              const windowTarget = isIframe ? target.contentWindow : window;\r\n\r\n              if (target.tagName.toLowerCase() !== \"textarea\") {\r\n                if (document.selection) {\r\n                  let leftOffset = 0;\r\n                  let previousNode = latexResult.startNode.previousSibling;\r\n\r\n                  while (previousNode) {\r\n                    leftOffset += Util.getNodeLength(previousNode);\r\n                    previousNode = previousNode.previousSibling;\r\n                  }\r\n\r\n                  this.editionProperties.latexRange = windowTarget.document.selection.createRange();\r\n                  this.editionProperties.latexRange.moveToElementText(latexResult.startNode.parentNode);\r\n                  this.editionProperties.latexRange.move(\"character\", leftOffset + latexResult.startPosition);\r\n                  this.editionProperties.latexRange.moveEnd(\"character\", latexResult.latex.length + 4); // Plus 4 for the '$$' characters.\r\n                } else {\r\n                  this.editionProperties.latexRange = windowTarget.document.createRange();\r\n                  this.editionProperties.latexRange.setStart(latexResult.startNode, latexResult.startPosition);\r\n                  this.editionProperties.latexRange.setEnd(latexResult.endNode, latexResult.endPosition);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (target.tagName.toLowerCase() === \"textarea\") {\r\n        // By default editMode is 'images', but when target is a textarea it needs to be 'latex'.\r\n        this.editMode = \"latex\";\r\n      }\r\n    }\r\n\r\n    // Setting an object with the editor parameters.\r\n    // Editor parameters can be customized in several ways:\r\n    // 1 - editorAttributes: Contains the default editor attributes,\r\n    //  usually the metrics in a comma separated string. Always exists.\r\n    // 2 - editorParameters: Object containing custom editor parameters.\r\n    // These parameters are defined in the backend. So they affects all integration instances.\r\n\r\n    // The backend send the default editor attributes in a coma separated\r\n    // with the following structure: key1=value1,key2=value2...\r\n    const defaultEditorAttributesArray = Configuration.get(\"editorAttributes\").split(\", \");\r\n    const defaultEditorAttributes = {};\r\n    for (let i = 0, len = defaultEditorAttributesArray.length; i < len; i += 1) {\r\n      const tempAttribute = defaultEditorAttributesArray[i].split(\"=\");\r\n      const key = tempAttribute[0];\r\n      const value = tempAttribute[1];\r\n      defaultEditorAttributes[key] = value;\r\n    }\r\n    // Custom editor parameters.\r\n    const editorAttributes = {\r\n      language: this.language, // Default language value\r\n    };\r\n    // Editor parameters in backend, usually configuration.ini.\r\n    const serverEditorParameters = Configuration.get(\"editorParameters\");\r\n    // Editor parameters through JavaScript configuration.\r\n    const clientEditorParameters = this.integrationModel.editorParameters;\r\n    Object.assign(editorAttributes, defaultEditorAttributes, serverEditorParameters);\r\n    Object.assign(editorAttributes, defaultEditorAttributes, clientEditorParameters);\r\n\r\n    // Now, update backwards: if user has set a custom language, pass that back to core properties\r\n    this.language = editorAttributes.language;\r\n    StringManager.language = this.language;\r\n\r\n    editorAttributes.rtl = this.integrationModel.rtl;\r\n\r\n    const customHeaders = Configuration.get(\"customHeaders\");\r\n    // This is not being used in the code, we are keeping it just in case it's needed.\r\n    // We check if it is a string since we have a setter that will make the customHeaders an object. And we do the conversion for the case when we get the headers from the backend.\r\n    editorAttributes.customHeaders =\r\n      typeof customHeaders === \"string\" ? Util.convertStringToObject(customHeaders) : customHeaders;\r\n\r\n    const contentManagerAttributes = {};\r\n    contentManagerAttributes.editorAttributes = editorAttributes;\r\n    contentManagerAttributes.language = this.language;\r\n    contentManagerAttributes.customEditors = this.customEditors;\r\n    contentManagerAttributes.environment = this.environment;\r\n\r\n    if (this.modalDialog == null) {\r\n      this.modalDialog = new ModalDialog(editorAttributes);\r\n      this.contentManager = new ContentManager(contentManagerAttributes);\r\n      // When an instance of ContentManager is created we need to wait until\r\n      // the ContentManager is ready by listening 'onLoad' event.\r\n      const listener = Listeners.newListener(\"onLoad\", () => {\r\n        this.contentManager.dbclick = this.editionProperties.dbclick;\r\n        this.contentManager.isNewElement = this.editionProperties.isNewElement;\r\n        if (this.editionProperties.temporalImage != null) {\r\n          const mathML = MathML.safeXmlDecode(\r\n            this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\r\n          );\r\n          this.contentManager.mathML = mathML;\r\n        }\r\n      });\r\n      this.contentManager.addListener(listener);\r\n      this.contentManager.init();\r\n      this.modalDialog.setContentManager(this.contentManager);\r\n      this.contentManager.setModalDialogInstance(this.modalDialog);\r\n    } else {\r\n      this.contentManager.dbclick = this.editionProperties.dbclick;\r\n      this.contentManager.isNewElement = this.editionProperties.isNewElement;\r\n      if (this.editionProperties.temporalImage != null) {\r\n        const mathML = MathML.safeXmlDecode(\r\n          this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\r\n        );\r\n        this.contentManager.mathML = mathML;\r\n      }\r\n    }\r\n    this.contentManager.setIntegrationModel(this.integrationModel);\r\n    this.modalDialog.open();\r\n  }\r\n\r\n  /**\r\n   * Returns the {@link CustomEditors} instance.\r\n   * @return {CustomEditors} The current {@link CustomEditors} instance.\r\n   */\r\n  getCustomEditors() {\r\n    return this.customEditors;\r\n  }\r\n}\r\n\r\n/**\r\n * Core static listeners.\r\n * @type {Listeners}\r\n * @private\r\n */\r\nCore._globalListeners = new Listeners();\r\n\r\n/**\r\n * Resources state. Says if they were loaded or not.\r\n * @type {Boolean}\r\n * @private\r\n */\r\nCore._initialized = false;\r\n","// eslint-disable-next-line no-unused-vars, import/named\r\nimport Core from \"./core.src\";\r\nimport Image from \"./image\";\r\nimport Listeners from \"./listeners\";\r\nimport Util from \"./util\";\r\nimport Configuration from \"./configuration\";\r\nimport ServiceProvider from \"./serviceprovider\";\r\nimport Telemeter from \"./telemeter\";\r\nimport warnIcon from \"../styles/icons/general/warn_icon.svg\"; //eslint-disable-line\r\n\r\n/**\r\n * @typedef {Object} IntegrationModelProperties\r\n * @property {string} configurationService - Configuration service path.\r\n * This parameter is needed to determine all services paths.\r\n * @property {HTMLElement} integrationModelProperties.target - HTML target.\r\n * @property {string} integrationModelProperties.scriptName - Integration script name.\r\n * Usually the name of the integration script.\r\n * @property {Object} integrationModelProperties.environment - integration environment properties.\r\n * @property {Object} [integrationModelProperties.callbackMethodArguments] - object containing\r\n * callback method arguments.\r\n * @property {string} [integrationModelProperties.version] - integration version number.\r\n * @property {Object} [integrationModelProperties.editorObject] - object containing\r\n * the integration editor instance.\r\n * @property {boolean} [integrationModelProperties.rtl] - true if the editor is in RTL mode.\r\n * false otherwise.\r\n * @property {ServiceProviderProperties} [integrationModelProperties.serviceProviderProperties]\r\n * - The service parameters.\r\n * @property {Object} [integrationModelProperties.integrationParameters]\r\n * - Overwritten integration parameters.\r\n */\r\n\r\nexport default class IntegrationModel {\r\n  /**\r\n   * @classdesc\r\n   * This class represents an integration model, allowing the integration script to\r\n   * communicate with Core class. Each integration must extend this class.\r\n   * @constructs\r\n   * @param {IntegrationModelProperties} integrationModelProperties\r\n   */\r\n  constructor(integrationModelProperties) {\r\n    /**\r\n     * Language. Needed for accessibility and locales. English by default.\r\n     */\r\n    this.language = \"en\";\r\n\r\n    /**\r\n     * Service parameters\r\n     * @type {ServiceProviderProperties}\r\n     */\r\n    this.serviceProviderProperties = integrationModelProperties.serviceProviderProperties ?? {};\r\n\r\n    /**\r\n     * Configuration service path. The integration service is needed by Core class to\r\n     * load all the backend configuration into the frontend and also to create the paths\r\n     * of all services (all services lives in the same route). Mandatory property.\r\n     */\r\n    this.configurationService = \"\";\r\n    if (\"configurationService\" in integrationModelProperties) {\r\n      this.serviceProviderProperties.URI = integrationModelProperties.configurationService;\r\n      console.warn(\"Deprecated property configurationService. Use serviceParameters on instead.\", [\r\n        integrationModelProperties.configurationService,\r\n      ]);\r\n    }\r\n\r\n    /**\r\n     * Plugin version. Needed to stats and caching.\r\n     * @type {string}\r\n     */\r\n    this.version = \"version\" in integrationModelProperties ? integrationModelProperties.version : \"\";\r\n\r\n    /**\r\n     * DOM target in which the plugin works. Needed to associate events, insert formulas, etc.\r\n     * Mandatory property.\r\n     */\r\n    this.target = null;\r\n    if (\"target\" in integrationModelProperties) {\r\n      this.target = integrationModelProperties.target;\r\n    } else {\r\n      throw new Error(\"IntegrationModel constructor error: target property missed.\");\r\n    }\r\n\r\n    /**\r\n     * Integration script name. Needed to know the plugin path.\r\n     */\r\n    if (\"scriptName\" in integrationModelProperties) {\r\n      this.scriptName = integrationModelProperties.scriptName;\r\n    }\r\n\r\n    /**\r\n     * Object containing the arguments needed by the callback function.\r\n     */\r\n    this.callbackMethodArguments = integrationModelProperties.callbackMethodArguments ?? {};\r\n\r\n    /**\r\n     * Contains information about the integration environment:\r\n     * like the name of the editor, the version, etc.\r\n     */\r\n    this.environment = integrationModelProperties.environment ?? {};\r\n\r\n    /**\r\n     * Indicates if the DOM target is - or not - and iframe.\r\n     */\r\n    this.isIframe = false;\r\n    if (this.target != null) {\r\n      this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\r\n    }\r\n\r\n    /**\r\n     * Instance of the integration editor object. Usually the entry point to access the API\r\n     * of a HTML editor.\r\n     */\r\n    this.editorObject = integrationModelProperties.editorObject ?? null;\r\n\r\n    /**\r\n     * Specifies if the direction of the text is RTL. false by default.\r\n     */\r\n    this.rtl = integrationModelProperties.rtl ?? false;\r\n\r\n    /**\r\n     * Specifies if the integration model exposes the locale strings. false by default.\r\n     */\r\n    this.managesLanguage = integrationModelProperties.managesLanguage ?? false;\r\n\r\n    /**\r\n     * Specify if editor will open in hand mode only\r\n     */\r\n    this.forcedHandMode = integrationModelProperties?.integrationParameters?.forcedHandMode ?? false;\r\n\r\n    /**\r\n     * Indicates if an image is selected. Needed to resize the image to the original size in case\r\n     * the image is resized.\r\n     * @type {boolean}\r\n     */\r\n    this.temporalImageResizing = false;\r\n\r\n    /**\r\n     * The Core class instance associated to the integration model.\r\n     * @type {Core}\r\n     */\r\n    this.core = null;\r\n\r\n    /**\r\n     * Integration model listeners.\r\n     * @type {Listeners}\r\n     */\r\n    this.listeners = new Listeners();\r\n\r\n    // Parameters overwrite.\r\n    if (\"integrationParameters\" in integrationModelProperties) {\r\n      IntegrationModel.integrationParameters.forEach((parameter) => {\r\n        if (parameter in integrationModelProperties.integrationParameters) {\r\n          // Don't add empty parameters.\r\n          const value = integrationModelProperties.integrationParameters[parameter];\r\n          if (Object.keys(value).length !== 0) {\r\n            this[parameter] = value;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init function. Usually called from the integration side once the core.js file is loaded.\r\n   */\r\n  init() {\r\n    // Check if language is an object and select the property necessary\r\n    this.language = this.getLanguage();\r\n\r\n    // We need to wait until Core class is loaded ('onLoad' event) before\r\n    // call the callback method.\r\n    const listener = Listeners.newListener(\"onLoad\", () => {\r\n      this.callbackFunction(this.callbackMethodArguments);\r\n    });\r\n\r\n    // Backwards compatibility.\r\n    if (this.serviceProviderProperties.URI.indexOf(\"configuration\") !== -1) {\r\n      const uri = this.serviceProviderProperties.URI;\r\n      const server = ServiceProvider.getServerLanguageFromService(uri);\r\n      this.serviceProviderProperties.server = server;\r\n      const configurationIndex = this.serviceProviderProperties.URI.indexOf(\"configuration\");\r\n      const subsTring = this.serviceProviderProperties.URI.substring(0, configurationIndex);\r\n      this.serviceProviderProperties.URI = subsTring;\r\n    }\r\n\r\n    let serviceParametersURI = this.serviceProviderProperties.URI;\r\n    serviceParametersURI =\r\n      serviceParametersURI.indexOf(\"/\") === 0 || serviceParametersURI.indexOf(\"http\") === 0\r\n        ? serviceParametersURI\r\n        : Util.concatenateUrl(this.getPath(), serviceParametersURI);\r\n\r\n    this.serviceProviderProperties.URI = serviceParametersURI;\r\n\r\n    const coreProperties = {};\r\n    coreProperties.serviceProviderProperties = this.serviceProviderProperties;\r\n\r\n    this.setCore(new Core(coreProperties));\r\n    this.core.addListener(listener);\r\n    this.core.language = this.language;\r\n\r\n    // Initializing Core class.\r\n    this.core.init();\r\n    // TODO: Move to Core constructor.\r\n    this.core.setEnvironment(this.environment);\r\n\r\n    // No internet connection modal.\r\n    let attributes = {};\r\n    attributes.class = attributes.id = \"wrs_modal_offline\";\r\n    this.offlineModal = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_content_offline\";\r\n    this.offlineModalContent = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_offline_close\";\r\n    this.offlineModalClose = Util.createElement(\"span\", attributes);\r\n    this.offlineModalClose.innerHTML = \"&times;\";\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_offline_warn\";\r\n    this.offlineModalWarn = Util.createElement(\"span\", attributes);\r\n    const generalStyle = `background-image: url(data:image/svg+xml;base64,${window.btoa(warnIcon)})`;\r\n    this.offlineModalWarn.setAttribute(\"style\", generalStyle);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_offline_text_container\";\r\n    this.offlineModalMessage = Util.createElement(\"div\", attributes);\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_offline_text_warn\";\r\n    this.offlineModalMessage1 = Util.createElement(\"p\", attributes);\r\n    this.offlineModalMessage1.innerHTML = \"You are not online!\";\r\n\r\n    attributes = {};\r\n    attributes.class = \"wrs_modal_offline_text\";\r\n    this.offlineModalMessage2 = Util.createElement(\"p\", attributes);\r\n    this.offlineModalMessage2.innerHTML = `Thank you for using MathType. We have detected you are disconnected from the network. We remind you that you'll need to be connected to use MathType. <br /><br />Please refresh the page if this message continues appearing.`;\r\n\r\n    // Append offline modal elements\r\n    this.offlineModalContent.appendChild(this.offlineModalClose);\r\n    this.offlineModalMessage.appendChild(this.offlineModalMessage1);\r\n    this.offlineModalMessage.appendChild(this.offlineModalMessage2);\r\n    this.offlineModalContent.appendChild(this.offlineModalMessage);\r\n    this.offlineModalContent.appendChild(this.offlineModalWarn);\r\n    this.offlineModal.appendChild(this.offlineModalContent);\r\n    document.body.appendChild(this.offlineModal);\r\n\r\n    const modal = document.getElementById(\"wrs_modal_offline\");\r\n    this.offlineModalClose.addEventListener(\"click\", () => {\r\n      modal.style.display = \"none\";\r\n    });\r\n\r\n    // Store editor name for telemetry purposes.\r\n    let editorName = this.environment.editor;\r\n    editorName = editorName.slice(0, -1); // Remove version number from editors\r\n    if (editorName.includes(\"TinyMCE\")) editorName = \"TinyMCE\"; // Remove version from Tinymce editor.\r\n    if (editorName.includes(\"Generic\")) editorName = \"Generic\"; // Remove version from Generic editor.\r\n    let solutionTelemeter = editorName;\r\n\r\n    // If moodle, add information to hosts and solution.\r\n    const isMoodle = !!(typeof M === \"object\" && M !== null);\r\n    let lms;\r\n\r\n    if (isMoodle) {\r\n      solutionTelemeter = \"Moodle\";\r\n      lms = {\r\n        nam: \"moodle\",\r\n        fam: \"lms\",\r\n        ver: this.environment.moodleVersion,\r\n        category: this.environment.moodleCourseCategory,\r\n        course: this.environment.moodleCourseName,\r\n      };\r\n      if (!editorName.includes(\"TinyMCE\")) {\r\n        editorName = \"Atto\";\r\n      }\r\n    }\r\n\r\n    // Get the OS and its version.\r\n    const OSData = this.getOS();\r\n\r\n    // Get the broswer and its version.\r\n    const broswerData = this.getBrowser();\r\n\r\n    // Create list of hosts to send to telemetry.\r\n    let hosts = [\r\n      {\r\n        nam: broswerData.detectedBrowser,\r\n        fam: \"browser\",\r\n        ver: broswerData.versionBrowser,\r\n      },\r\n      {\r\n        nam: editorName.toLowerCase(),\r\n        fam: \"html-editor\",\r\n        ver: this.environment.editorVersion,\r\n      },\r\n      {\r\n        nam: OSData.detectedOS,\r\n        fam: \"os\",\r\n        ver: OSData.versionOS,\r\n      },\r\n      {\r\n        nam: window.location.hostname,\r\n        fam: \"domain\",\r\n      },\r\n      lms,\r\n    ];\r\n\r\n    // Filter hosts to remove empty objects and empty keys.\r\n    hosts = hosts.filter((element) => {\r\n      if (element) Object.keys(element).forEach((key) => (element[key] === \"unknown\" ? delete element[key] : {}));\r\n      return element !== undefined;\r\n    });\r\n\r\n    // Initialize telemeter\r\n    Telemeter.init({\r\n      solution: {\r\n        name: `MathType for ${solutionTelemeter}`,\r\n        version: this.version,\r\n      },\r\n      hosts,\r\n      config: {\r\n        test: false, // True to use the staging Telemetry endpoint instead of the production one.\r\n        debug: false, // True to show more information about Telemeter's execution and use dev-tools.\r\n        dry_run: false, // True to skip sending data to the Telemetry endpoint (for example for unit tests).\r\n        api_key: \"eda2ce9b-0e8a-46f2-acdd-c228a615314e\", // to auth against Telemetry. Data team is the responsible of providing it.\r\n      },\r\n      url: undefined,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the Browser name and its version.\r\n   * @return {array} - detectedBrowser = Operating System name.\r\n   *                   versionBrowser = Operating System version.\r\n   */\r\n  getBrowser() {\r\n    // default value for OS just in case nothing is detected\r\n    let detectedBrowser = \"unknown\";\r\n    let versionBrowser = \"unknown\";\r\n\r\n    const userAgent = window.navigator.userAgent;\r\n\r\n    if (/Brave/.test(userAgent)) {\r\n      detectedBrowser = \"brave\";\r\n      if (userAgent.indexOf(\"Brave/\")) {\r\n        const start = userAgent.indexOf(\"Brave\") + 6;\r\n        let end = userAgent.substring(start).indexOf(\" \");\r\n        end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n        versionBrowser = userAgent\r\n          .substring(start, end + start)\r\n          .replace(\"_\", \".\")\r\n          .replace(/[^\\d.-]/g, \"\");\r\n      }\r\n    } else if (userAgent.indexOf(\"Edg/\") !== -1) {\r\n      detectedBrowser = \"edge_chromium\";\r\n      const start = userAgent.indexOf(\"Edg/\") + 4;\r\n      versionBrowser = userAgent\r\n        .substring(start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (/Edg/.test(userAgent)) {\r\n      detectedBrowser = \"edge\";\r\n      let start = userAgent.indexOf(\"Edg\") + 3;\r\n      start += userAgent.substring(start).indexOf(\"/\");\r\n      let end = userAgent.substring(start).indexOf(\" \");\r\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n      versionBrowser = userAgent\r\n        .substring(start, end + start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (/Firefox/.test(userAgent) || /FxiOS/.test(userAgent)) {\r\n      detectedBrowser = \"firefox\";\r\n      let start = userAgent.indexOf(\"Firefox\");\r\n      start = start === -1 ? userAgent.indexOf(\"FxiOS\") : start;\r\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\r\n      let end = userAgent.substring(start).indexOf(\" \");\r\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\r\n    } else if (/OPR/.test(userAgent)) {\r\n      detectedBrowser = \"opera\";\r\n      const start = userAgent.indexOf(\"OPR/\") + 4;\r\n      let end = userAgent.substring(start).indexOf(\" \");\r\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n      versionBrowser = userAgent\r\n        .substring(start, end + start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (/Chrome/.test(userAgent) || /CriOS/.test(userAgent)) {\r\n      detectedBrowser = \"chrome\";\r\n      let start = userAgent.indexOf(\"Chrome\");\r\n      start = start === -1 ? userAgent.indexOf(\"CriOS\") : start;\r\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\r\n      let end = userAgent.substring(start).indexOf(\" \");\r\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\r\n    } else if (/Safari/.test(userAgent)) {\r\n      detectedBrowser = \"safari\";\r\n      let start = userAgent.indexOf(\"Version/\");\r\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\r\n      let end = userAgent.substring(start).indexOf(\" \");\r\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\r\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\r\n    }\r\n\r\n    return { detectedBrowser, versionBrowser };\r\n  }\r\n\r\n  /**\r\n   * Returns the operating system and its version.\r\n   * @return {array} - detectedOS = Operating System name.\r\n   *                   versionOS = Operating System version.\r\n   */\r\n  getOS() {\r\n    // default value for OS just in case nothing is detected\r\n    let detectedOS = \"unknown\";\r\n    let versionOS = \"unknown\";\r\n\r\n    // Retrieve properties to easily detect the OS\r\n    const userAgent = window.navigator.userAgent;\r\n    const platform = window.navigator.platform;\r\n    const macosPlatforms = [\"Macintosh\", \"MacIntel\", \"MacPPC\", \"Mac68K\"];\r\n    const windowsPlatforms = [\"Win32\", \"Win64\", \"Windows\", \"WinCE\"];\r\n    const iosPlatforms = [\"iPhone\", \"iPad\", \"iPod\"];\r\n\r\n    // Find OS and their respective versions\r\n    if (macosPlatforms.indexOf(platform) !== -1) {\r\n      detectedOS = \"macos\";\r\n      if (userAgent.indexOf(\"OS X\") !== -1) {\r\n        const start = userAgent.indexOf(\"OS X\") + 5;\r\n        const end = userAgent.substring(start).indexOf(\" \");\r\n        versionOS = userAgent\r\n          .substring(start, end + start)\r\n          .replace(\"_\", \".\")\r\n          .replace(/[^\\d.-]/g, \"\");\r\n      }\r\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\r\n      detectedOS = \"ios\";\r\n      if (userAgent.indexOf(\"OS \") !== -1) {\r\n        const start = userAgent.indexOf(\"OS \") + 3;\r\n        const end = userAgent.substring(start).indexOf(\")\");\r\n        versionOS = userAgent\r\n          .substring(start, end + start)\r\n          .replace(\"_\", \".\")\r\n          .replace(/[^\\d.-]/g, \"\");\r\n      }\r\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\r\n      detectedOS = \"windows\";\r\n      const start = userAgent.indexOf(\"Windows\");\r\n      let end = userAgent.substring(start).indexOf(\";\");\r\n      if (end === -1) {\r\n        end = userAgent.substring(start).indexOf(\")\");\r\n      }\r\n      versionOS = userAgent\r\n        .substring(start, end + start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (/Android/.test(userAgent)) {\r\n      detectedOS = \"android\";\r\n      const start = userAgent.indexOf(\"Android\");\r\n      let end = userAgent.substring(start).indexOf(\";\");\r\n      if (end === -1) {\r\n        end = userAgent.substring(start).indexOf(\")\");\r\n      }\r\n      versionOS = userAgent\r\n        .substring(start, end + start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (/CrOS/.test(userAgent)) {\r\n      detectedOS = \"chromeos\";\r\n      let start = userAgent.indexOf(\"CrOS \") + 5;\r\n      start += userAgent.substring(start).indexOf(\" \");\r\n      const end = userAgent.substring(start).indexOf(\")\");\r\n      versionOS = userAgent\r\n        .substring(start, end + start)\r\n        .replace(\"_\", \".\")\r\n        .replace(/[^\\d.-]/g, \"\");\r\n    } else if (detectedOS === \"unknown\" && /Linux/.test(platform)) {\r\n      detectedOS = \"linux\";\r\n    }\r\n\r\n    return { detectedOS, versionOS };\r\n  }\r\n\r\n  /**\r\n   * Returns the absolute path of the integration script.\r\n   * @return {string} - Absolute path for the integration script.\r\n   */\r\n  getPath() {\r\n    if (typeof this.scriptName === \"undefined\") {\r\n      throw new Error(\"scriptName property needed for getPath.\");\r\n    }\r\n    const col = document.getElementsByTagName(\"script\");\r\n    let path = \"\";\r\n    for (let i = 0; i < col.length; i += 1) {\r\n      const j = col[i].src.lastIndexOf(this.scriptName);\r\n      if (j >= 0) {\r\n        path = col[i].src.substr(0, j - 1);\r\n      }\r\n    }\r\n    return path;\r\n  }\r\n\r\n  /**\r\n   * Returns integration model plugin version\r\n   * @param {string} - Plugin version\r\n   */\r\n  getVersion() {\r\n    return this.version;\r\n  }\r\n\r\n  /**\r\n   * Sets the language property.\r\n   * @param {string} language - language code.\r\n   */\r\n  setLanguage(language) {\r\n    this.language = language;\r\n  }\r\n\r\n  /**\r\n   * Sets a Core instance.\r\n   * @param {Core} core - instance of Core class.\r\n   */\r\n  setCore(core) {\r\n    this.core = core;\r\n    core.setIntegrationModel(this);\r\n  }\r\n\r\n  /**\r\n   * Returns the Core instance.\r\n   * @returns {Core} instance of Core class.\r\n   */\r\n  getCore() {\r\n    return this.core;\r\n  }\r\n\r\n  /**\r\n   * Sets the object target and updates the iframe property.\r\n   * @param {HTMLElement} target - target object.\r\n   */\r\n  setTarget(target) {\r\n    this.target = target;\r\n    this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\r\n  }\r\n\r\n  /**\r\n   * Sets the editor object.\r\n   * @param {Object} editorObject - The editor object.\r\n   */\r\n  setEditorObject(editorObject) {\r\n    this.editorObject = editorObject;\r\n  }\r\n\r\n  /**\r\n   * Opens formula editor to editing a new formula. Can be overwritten in order to make some\r\n   * actions from integration part before the formula is edited.\r\n   */\r\n  openNewFormulaEditor() {\r\n    if (window.navigator.onLine) {\r\n      this.core.editionProperties.dbclick = false;\r\n      this.core.editionProperties.isNewElement = true;\r\n      this.core.openModalDialog(this.target, this.isIframe);\r\n    } else {\r\n      const modal = document.getElementById(\"wrs_modal_offline\");\r\n      modal.style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens formula editor to editing an existing formula. Can be overwritten in order to make some\r\n   * actions from integration part before the formula is edited.\r\n   */\r\n  openExistingFormulaEditor() {\r\n    if (window.navigator.onLine) {\r\n      this.core.editionProperties.isNewElement = false;\r\n      this.core.openModalDialog(this.target, this.isIframe);\r\n    } else {\r\n      const modal = document.getElementById(\"wrs_modal_offline\");\r\n      modal.style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Wrapper to Core.updateFormula method.\r\n   * Transform a MathML into a image formula.\r\n   * Then the image formula is inserted in the specified target, creating a new image (new formula)\r\n   * or updating an existing one.\r\n   * @param {string} mathml - MathML to generate the formula.\r\n   * @param {string} editMode - Edit Mode (LaTeX or images).\r\n   */\r\n  updateFormula(mathml) {\r\n    if (this.editorParameters) {\r\n      mathml = com.wiris.editor.util.EditorUtils.addAnnotation(\r\n        mathml,\r\n        \"application/vnd.wiris.mtweb-params+json\",\r\n        JSON.stringify(this.editorParameters),\r\n      );\r\n    }\r\n    let focusElement;\r\n    let windowTarget;\r\n    const wirisProperties = null;\r\n\r\n    if (this.isIframe) {\r\n      focusElement = this.target.contentWindow;\r\n      windowTarget = this.target.contentWindow;\r\n    } else {\r\n      focusElement = this.target;\r\n      windowTarget = window;\r\n    }\r\n\r\n    let obj = this.core.beforeUpdateFormula(mathml, wirisProperties);\r\n\r\n    if (!obj) {\r\n      return \"\";\r\n    }\r\n\r\n    obj = this.insertFormula(focusElement, windowTarget, obj.mathml, obj.wirisProperties);\r\n\r\n    if (!obj) {\r\n      return \"\";\r\n    }\r\n\r\n    return this.core.afterUpdateFormula(obj.focusElement, obj.windowTarget, obj.node, obj.latex);\r\n  }\r\n\r\n  /**\r\n   * Wrapper to Core.insertFormula method.\r\n   * Inserts the formula in the specified target, creating\r\n   * a new image (new formula) or updating an existing one.\r\n   * @param {string} mathml - MathML to generate the formula.\r\n   * @param {string} editMode - Edit Mode (LaTeX or images).\r\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\r\n   */\r\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\r\n    const obj = this.core.insertFormula(focusElement, windowTarget, mathml, wirisProperties);\r\n\r\n    // Delete temporal image when inserted\r\n    this.core.editionProperties.temporalImage = null;\r\n\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Returns the target selection.\r\n   * @returns {Selection} target selection.\r\n   */\r\n  getSelection() {\r\n    if (this.isIframe) {\r\n      this.target.contentWindow.focus();\r\n      return this.target.contentWindow.getSelection();\r\n    }\r\n    this.target.focus();\r\n    return window.getSelection();\r\n  }\r\n\r\n  /**\r\n   * Add events to formulas in the DOM target. The events added are the following:\r\n   * - doubleClickHandler: handles Double-click event on formulas by opening an editor\r\n   * to edit them.\r\n   * - mouseDownHandler: handles mouse down event on formulas by saving the size of the formula\r\n   * in case the the formula is resized.\r\n   * - mouseUpHandler: handles mouse up event on formulas by restoring the saved formula size\r\n   * in case the formula is resized.\r\n   */\r\n  addEvents() {\r\n    const eventTarget = this.isIframe ? this.target.contentWindow.document : this.target;\r\n    Util.addElementEvents(\r\n      eventTarget,\r\n      (element, event) => {\r\n        this.doubleClickHandler(element, event);\r\n        // Avoid creating the double click listener more than once for each element.\r\n        // This also allows CKEditor4 to add their own double click listener.\r\n        event.preventDefault();\r\n      },\r\n      (element, event) => {\r\n        this.mousedownHandler(element, event);\r\n      },\r\n      (element, event) => {\r\n        this.mouseupHandler(element, event);\r\n      },\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove events to formulas in the DOM target.\r\n   */\r\n  removeEvents() {\r\n    const eventTarget =\r\n      this.isIframe && this.target.contentWindow?.document ? this.target.contentWindow.document : this.target;\r\n\r\n    if (!eventTarget) {\r\n      return;\r\n    }\r\n\r\n    Util.removeElementEvents(eventTarget);\r\n  }\r\n\r\n  /**\r\n   * Remove events, modals and set this.editorObject to null in order to prevent memory leaks.\r\n   */\r\n  destroy() {\r\n    this.removeEvents();\r\n    // Destroy modal dialog if exists.\r\n    if (this.core.modalDialog) {\r\n      this.core.modalDialog.destroy();\r\n    }\r\n\r\n    // Remove offline modal dialog if exists.\r\n    if (this.offlineModal) {\r\n      this.offlineModal.remove();\r\n    }\r\n\r\n    this.editorObject = null;\r\n  }\r\n\r\n  /**\r\n   * Handles a Double-click on the target element. Opens an editor\r\n   * to re-edit the double-clicked formula.\r\n   * @param {HTMLElement} element - DOM object target.\r\n   */\r\n  doubleClickHandler(element) {\r\n    this.core.editionProperties.dbclick = true;\r\n    if (element.nodeName.toLowerCase() === \"img\") {\r\n      this.core.getCustomEditors().disable();\r\n      const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\r\n      if (element.hasAttribute(customEditorAttributeName)) {\r\n        const customEditor = element.getAttribute(customEditorAttributeName);\r\n        this.core.getCustomEditors().enable(customEditor);\r\n      }\r\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\r\n        this.core.editionProperties.temporalImage = element;\r\n        this.core.editionProperties.isNewElement = true;\r\n        this.openExistingFormulaEditor();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles a mouse up event on the target element. Restores the image size to avoid\r\n   * resizing formulas.\r\n   */\r\n  mouseupHandler() {\r\n    if (this.temporalImageResizing) {\r\n      setTimeout(() => {\r\n        Image.fixAfterResize(this.temporalImageResizing);\r\n      }, 10);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles a mouse down event on the target element. Saves the formula size to avoid\r\n   * resizing formulas.\r\n   * @param {HTMLElement} element - target element.\r\n   */\r\n  mousedownHandler(element) {\r\n    if (element.nodeName.toLowerCase() === \"img\") {\r\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\r\n        this.temporalImageResizing = element;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the integration language. By default the browser agent. This method\r\n   * should be overwritten to obtain the integration language, for example using the\r\n   * plugin API of an HTML editor.\r\n   * @returns {string} integration language.\r\n   */\r\n  getLanguage() {\r\n    return this.getBrowserLanguage();\r\n  }\r\n\r\n  /**\r\n   * Returns the browser language.\r\n   * @returns {string} the browser language.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  getBrowserLanguage() {\r\n    let language = \"en\";\r\n    if (navigator.userLanguage) {\r\n      language = navigator.userLanguage.substring(0, 2);\r\n    } else if (navigator.language) {\r\n      language = navigator.language.substring(0, 2);\r\n    } else {\r\n      language = \"en\";\r\n    }\r\n    return language;\r\n  }\r\n\r\n  /**\r\n   * This function is called once the {@link Core} is loaded. IntegrationModel class\r\n   * will fire this method when {@link Core} 'onLoad' event is fired.\r\n   * This method should content all the logic to init\r\n   * the integration.\r\n   */\r\n  callbackFunction() {\r\n    // It's needed to wait until the integration target is ready. The event is fired\r\n    // from the integration side.\r\n    const listener = Listeners.newListener(\"onTargetReady\", () => {\r\n      this.addEvents(this.target);\r\n    });\r\n    this.listeners.add(listener);\r\n  }\r\n\r\n  /**\r\n   * Function called when the content submits an action.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  notifyWindowClosed() {\r\n    // Nothing.\r\n  }\r\n\r\n  /**\r\n   * Wrapper.\r\n   * Extracts mathml of a determined text node. This function is used as a wrapper inside core.js\r\n   * in order to get mathml from a text node that can contain normal LaTeX or other chosen text.\r\n   * @param {string} textNode - text node to extract the MathML.\r\n   * @param {int} caretPosition - caret position inside the text node.\r\n   * @returns {string} MathML inside the text node.\r\n   */\r\n\r\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\r\n  getMathmlFromTextNode(textNode, caretPosition) {}\r\n\r\n  /**\r\n   * Wrapper\r\n   * It fills wrs event object of nonLatex with the desired data.\r\n   * @param {Object} event - event object.\r\n   * @param {Object} window dom window object.\r\n   * @param {string} mathml valid mathml.\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\r\n  fillNonLatexNode(event, window, mathml) {}\r\n\r\n  /**\r\n    Wrapper.\r\n   * Returns selected item from the target.\r\n   * @param {HTMLElement} target - target element\r\n   * @param {boolean} iframe\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\r\n  getSelectedItem(target, isIframe) {}\r\n\r\n  // Set temporal image to null and make focus come back.\r\n  static setActionsOnCancelButtons() {\r\n    // Make focus come back on the previous place it was when click cancel button\r\n    const currentInstance = WirisPlugin.currentInstance;\r\n    const editorSelection = currentInstance.getSelection();\r\n    editorSelection.removeAllRanges();\r\n\r\n    if (currentInstance.core.editionProperties.range) {\r\n      const { range } = currentInstance.core.editionProperties;\r\n      currentInstance.core.editionProperties.range = null;\r\n      editorSelection.addRange(range);\r\n      if (range.startOffset !== range.endOffset) {\r\n        currentInstance.core.placeCaretAfterNode(currentInstance.core.editionProperties.temporalImage);\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line no-undef\r\n    if (WirisPlugin.currentInstance) {\r\n      WirisPlugin.currentInstance.core.editionProperties.temporalImage = null; // eslint-disable-line\r\n    }\r\n  }\r\n}\r\n\r\n// To know if the integration that extends this class implements\r\n// wrapper methods, they are set as undefined.\r\nIntegrationModel.prototype.getMathmlFromTextNode = undefined;\r\nIntegrationModel.prototype.fillNonLatexNode = undefined;\r\nIntegrationModel.prototype.getSelectedItem = undefined;\r\n\r\n/**\r\n * An object containing a list with the overwritable class constructor properties.\r\n * @type {Object}\r\n */\r\nIntegrationModel.integrationParameters = [\"serviceProviderProperties\", \"editorParameters\"];\r\n","/* eslint-disable */\r\nvar md5;\r\nexport default md5;\r\n\r\n(function () {\r\n  var HxOverrides = function () {};\r\n  HxOverrides.__name__ = true;\r\n  HxOverrides.dateStr = function (date) {\r\n    var m = date.getMonth() + 1;\r\n    var d = date.getDate();\r\n    var h = date.getHours();\r\n    var mi = date.getMinutes();\r\n    var s = date.getSeconds();\r\n    return (\r\n      date.getFullYear() +\r\n      \"-\" +\r\n      (m < 10 ? \"0\" + m : \"\" + m) +\r\n      \"-\" +\r\n      (d < 10 ? \"0\" + d : \"\" + d) +\r\n      \" \" +\r\n      (h < 10 ? \"0\" + h : \"\" + h) +\r\n      \":\" +\r\n      (mi < 10 ? \"0\" + mi : \"\" + mi) +\r\n      \":\" +\r\n      (s < 10 ? \"0\" + s : \"\" + s)\r\n    );\r\n  };\r\n  HxOverrides.strDate = function (s) {\r\n    switch (s.length) {\r\n      case 8:\r\n        var k = s.split(\":\");\r\n        var d = new Date();\r\n        d.setTime(0);\r\n        d.setUTCHours(k[0]);\r\n        d.setUTCMinutes(k[1]);\r\n        d.setUTCSeconds(k[2]);\r\n        return d;\r\n      case 10:\r\n        var k = s.split(\"-\");\r\n        return new Date(k[0], k[1] - 1, k[2], 0, 0, 0);\r\n      case 19:\r\n        var k = s.split(\" \");\r\n        var y = k[0].split(\"-\");\r\n        var t = k[1].split(\":\");\r\n        return new Date(y[0], y[1] - 1, y[2], t[0], t[1], t[2]);\r\n      default:\r\n        throw \"Invalid date format : \" + s;\r\n    }\r\n  };\r\n  HxOverrides.cca = function (s, index) {\r\n    var x = s.charCodeAt(index);\r\n    if (x != x) return undefined;\r\n    return x;\r\n  };\r\n  HxOverrides.substr = function (s, pos, len) {\r\n    if (pos != null && pos != 0 && len != null && len < 0) return \"\";\r\n    if (len == null) len = s.length;\r\n    if (pos < 0) {\r\n      pos = s.length + pos;\r\n      if (pos < 0) pos = 0;\r\n    } else if (len < 0) len = s.length + len - pos;\r\n    return s.substr(pos, len);\r\n  };\r\n  HxOverrides.remove = function (a, obj) {\r\n    var i = 0;\r\n    var l = a.length;\r\n    while (i < l) {\r\n      if (a[i] == obj) {\r\n        a.splice(i, 1);\r\n        return true;\r\n      }\r\n      i++;\r\n    }\r\n    return false;\r\n  };\r\n  HxOverrides.iter = function (a) {\r\n    return {\r\n      cur: 0,\r\n      arr: a,\r\n      hasNext: function () {\r\n        return this.cur < this.arr.length;\r\n      },\r\n      next: function () {\r\n        return this.arr[this.cur++];\r\n      },\r\n    };\r\n  };\r\n  var IntIter = function (min, max) {\r\n    this.min = min;\r\n    this.max = max;\r\n  };\r\n  IntIter.__name__ = true;\r\n  IntIter.prototype = {\r\n    next: function () {\r\n      return this.min++;\r\n    },\r\n    hasNext: function () {\r\n      return this.min < this.max;\r\n    },\r\n    __class__: IntIter,\r\n  };\r\n  var Std = function () {};\r\n  Std.__name__ = true;\r\n  Std[\"is\"] = function (v, t) {\r\n    return js.Boot.__instanceof(v, t);\r\n  };\r\n  Std.string = function (s) {\r\n    return js.Boot.__string_rec(s, \"\");\r\n  };\r\n  Std[\"int\"] = function (x) {\r\n    return x | 0;\r\n  };\r\n  Std.parseInt = function (x) {\r\n    var v = parseInt(x, 10);\r\n    if (v == 0 && (HxOverrides.cca(x, 1) == 120 || HxOverrides.cca(x, 1) == 88)) v = parseInt(x);\r\n    if (isNaN(v)) return null;\r\n    return v;\r\n  };\r\n  Std.parseFloat = function (x) {\r\n    return parseFloat(x);\r\n  };\r\n  Std.random = function (x) {\r\n    return Math.floor(Math.random() * x);\r\n  };\r\n  var com = com || {};\r\n  if (!com.wiris) com.wiris = {};\r\n  if (!com.wiris.js) com.wiris.js = {};\r\n  com.wiris.js.JsPluginTools = function () {\r\n    this.tryReady();\r\n  };\r\n  com.wiris.js.JsPluginTools.__name__ = true;\r\n  com.wiris.js.JsPluginTools.main = function () {\r\n    var ev;\r\n    ev = com.wiris.js.JsPluginTools.getInstance();\r\n    haxe.Timer.delay($bind(ev, ev.tryReady), 100);\r\n  };\r\n  com.wiris.js.JsPluginTools.getInstance = function () {\r\n    if (com.wiris.js.JsPluginTools.instance == null)\r\n      com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\r\n    return com.wiris.js.JsPluginTools.instance;\r\n  };\r\n  com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\r\n    if (window.com == null) window.com = {};\r\n    if (window.com.wiris == null) window.com.wiris = {};\r\n    if (window.com.wiris.js == null) window.com.wiris.js = {};\r\n    if (window.com.wiris.js.JsPluginTools == null)\r\n      window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\r\n  };\r\n  com.wiris.js.JsPluginTools.prototype = {\r\n    md5encode: function (content) {\r\n      return haxe.Md5.encode(content);\r\n    },\r\n    doLoad: function () {\r\n      this.ready = true;\r\n      com.wiris.js.JsPluginTools.instance = this;\r\n      com.wiris.js.JsPluginTools.bypassEncapsulation();\r\n    },\r\n    tryReady: function () {\r\n      this.ready = false;\r\n      if (js.Lib.document.readyState) {\r\n        this.doLoad();\r\n        this.ready = true;\r\n      }\r\n      if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\r\n    },\r\n    __class__: com.wiris.js.JsPluginTools,\r\n  };\r\n  var haxe = haxe || {};\r\n  haxe.Log = function () {};\r\n  haxe.Log.__name__ = true;\r\n  haxe.Log.trace = function (v, infos) {\r\n    js.Boot.__trace(v, infos);\r\n  };\r\n  haxe.Log.clear = function () {\r\n    js.Boot.__clear_trace();\r\n  };\r\n  haxe.Md5 = function () {};\r\n  haxe.Md5.__name__ = true;\r\n  haxe.Md5.encode = function (s) {\r\n    return new haxe.Md5().doEncode(s);\r\n  };\r\n  haxe.Md5.prototype = {\r\n    doEncode: function (str) {\r\n      var x = this.str2blks(str);\r\n      var a = 1732584193;\r\n      var b = -271733879;\r\n      var c = -1732584194;\r\n      var d = 271733878;\r\n      var step;\r\n      var i = 0;\r\n      while (i < x.length) {\r\n        var olda = a;\r\n        var oldb = b;\r\n        var oldc = c;\r\n        var oldd = d;\r\n        step = 0;\r\n        a = this.ff(a, b, c, d, x[i], 7, -680876936);\r\n        d = this.ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n        c = this.ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n        b = this.ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n        a = this.ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n        d = this.ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n        c = this.ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n        b = this.ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n        a = this.ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n        d = this.ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n        c = this.ff(c, d, a, b, x[i + 10], 17, -42063);\r\n        b = this.ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n        a = this.ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n        d = this.ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n        c = this.ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n        b = this.ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n        a = this.gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n        d = this.gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n        c = this.gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n        b = this.gg(b, c, d, a, x[i], 20, -373897302);\r\n        a = this.gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n        d = this.gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n        c = this.gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n        b = this.gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n        a = this.gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n        d = this.gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n        c = this.gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n        b = this.gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n        a = this.gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n        d = this.gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n        c = this.gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n        b = this.gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n        a = this.hh(a, b, c, d, x[i + 5], 4, -378558);\r\n        d = this.hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n        c = this.hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n        b = this.hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n        a = this.hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n        d = this.hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n        c = this.hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n        b = this.hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n        a = this.hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n        d = this.hh(d, a, b, c, x[i], 11, -358537222);\r\n        c = this.hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n        b = this.hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n        a = this.hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n        d = this.hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n        c = this.hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n        b = this.hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n        a = this.ii(a, b, c, d, x[i], 6, -198630844);\r\n        d = this.ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n        c = this.ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n        b = this.ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n        a = this.ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n        d = this.ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n        c = this.ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n        b = this.ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n        a = this.ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n        d = this.ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n        c = this.ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n        b = this.ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n        a = this.ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n        d = this.ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n        c = this.ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n        b = this.ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n        a = this.addme(a, olda);\r\n        b = this.addme(b, oldb);\r\n        c = this.addme(c, oldc);\r\n        d = this.addme(d, oldd);\r\n        i += 16;\r\n      }\r\n      return this.rhex(a) + this.rhex(b) + this.rhex(c) + this.rhex(d);\r\n    },\r\n    ii: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitXOR(c, this.bitOR(b, ~d)), a, b, x, s, t);\r\n    },\r\n    hh: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitXOR(this.bitXOR(b, c), d), a, b, x, s, t);\r\n    },\r\n    gg: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitOR(this.bitAND(b, d), this.bitAND(c, ~d)), a, b, x, s, t);\r\n    },\r\n    ff: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitOR(this.bitAND(b, c), this.bitAND(~b, d)), a, b, x, s, t);\r\n    },\r\n    cmn: function (q, a, b, x, s, t) {\r\n      return this.addme(this.rol(this.addme(this.addme(a, q), this.addme(x, t)), s), b);\r\n    },\r\n    rol: function (num, cnt) {\r\n      return (num << cnt) | (num >>> (32 - cnt));\r\n    },\r\n    str2blks: function (str) {\r\n      var nblk = ((str.length + 8) >> 6) + 1;\r\n      var blks = new Array();\r\n      var _g1 = 0,\r\n        _g = nblk * 16;\r\n      while (_g1 < _g) {\r\n        var i = _g1++;\r\n        blks[i] = 0;\r\n      }\r\n      var i = 0;\r\n      while (i < str.length) {\r\n        blks[i >> 2] |= HxOverrides.cca(str, i) << (((str.length * 8 + i) % 4) * 8);\r\n        i++;\r\n      }\r\n      blks[i >> 2] |= 128 << (((str.length * 8 + i) % 4) * 8);\r\n      var l = str.length * 8;\r\n      var k = nblk * 16 - 2;\r\n      blks[k] = l & 255;\r\n      blks[k] |= ((l >>> 8) & 255) << 8;\r\n      blks[k] |= ((l >>> 16) & 255) << 16;\r\n      blks[k] |= ((l >>> 24) & 255) << 24;\r\n      return blks;\r\n    },\r\n    rhex: function (num) {\r\n      var str = \"\";\r\n      var hex_chr = \"0123456789abcdef\";\r\n      var _g = 0;\r\n      while (_g < 4) {\r\n        var j = _g++;\r\n        str += hex_chr.charAt((num >> (j * 8 + 4)) & 15) + hex_chr.charAt((num >> (j * 8)) & 15);\r\n      }\r\n      return str;\r\n    },\r\n    addme: function (x, y) {\r\n      var lsw = (x & 65535) + (y & 65535);\r\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n      return (msw << 16) | (lsw & 65535);\r\n    },\r\n    bitAND: function (a, b) {\r\n      var lsb = a & 1 & (b & 1);\r\n      var msb31 = (a >>> 1) & (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    bitXOR: function (a, b) {\r\n      var lsb = (a & 1) ^ (b & 1);\r\n      var msb31 = (a >>> 1) ^ (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    bitOR: function (a, b) {\r\n      var lsb = (a & 1) | (b & 1);\r\n      var msb31 = (a >>> 1) | (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    __class__: haxe.Md5,\r\n  };\r\n  haxe.Timer = function (time_ms) {\r\n    var me = this;\r\n    this.id = window.setInterval(function () {\r\n      me.run();\r\n    }, time_ms);\r\n  };\r\n  haxe.Timer.__name__ = true;\r\n  haxe.Timer.delay = function (f, time_ms) {\r\n    var t = new haxe.Timer(time_ms);\r\n    t.run = function () {\r\n      t.stop();\r\n      f();\r\n    };\r\n    return t;\r\n  };\r\n  haxe.Timer.measure = function (f, pos) {\r\n    var t0 = haxe.Timer.stamp();\r\n    var r = f();\r\n    haxe.Log.trace(haxe.Timer.stamp() - t0 + \"s\", pos);\r\n    return r;\r\n  };\r\n  haxe.Timer.stamp = function () {\r\n    return new Date().getTime() / 1000;\r\n  };\r\n  haxe.Timer.prototype = {\r\n    run: function () {},\r\n    stop: function () {\r\n      if (this.id == null) return;\r\n      window.clearInterval(this.id);\r\n      this.id = null;\r\n    },\r\n    __class__: haxe.Timer,\r\n  };\r\n  var js = js || {};\r\n  js.Boot = function () {};\r\n  js.Boot.__name__ = true;\r\n  js.Boot.__unhtml = function (s) {\r\n    return s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\r\n  };\r\n  js.Boot.__trace = function (v, i) {\r\n    var msg = i != null ? i.fileName + \":\" + i.lineNumber + \": \" : \"\";\r\n    msg += js.Boot.__string_rec(v, \"\");\r\n    var d;\r\n    if (typeof document != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null)\r\n      d.innerHTML += js.Boot.__unhtml(msg) + \"<br/>\";\r\n    else if (typeof console != \"undefined\" && console.log != null) console.log(msg);\r\n  };\r\n  js.Boot.__clear_trace = function () {\r\n    var d = document.getElementById(\"haxe:trace\");\r\n    if (d != null) d.innerHTML = \"\";\r\n  };\r\n  js.Boot.isClass = function (o) {\r\n    return o.__name__;\r\n  };\r\n  js.Boot.isEnum = function (e) {\r\n    return e.__ename__;\r\n  };\r\n  js.Boot.getClass = function (o) {\r\n    return o.__class__;\r\n  };\r\n  js.Boot.__string_rec = function (o, s) {\r\n    if (o == null) return \"null\";\r\n    if (s.length >= 5) return \"<...>\";\r\n    var t = typeof o;\r\n    if (t == \"function\" && (o.__name__ || o.__ename__)) t = \"object\";\r\n    switch (t) {\r\n      case \"object\":\r\n        if (o instanceof Array) {\r\n          if (o.__enum__) {\r\n            if (o.length == 2) return o[0];\r\n            var str = o[0] + \"(\";\r\n            s += \"\\t\";\r\n            var _g1 = 2,\r\n              _g = o.length;\r\n            while (_g1 < _g) {\r\n              var i = _g1++;\r\n              if (i != 2) str += \",\" + js.Boot.__string_rec(o[i], s);\r\n              else str += js.Boot.__string_rec(o[i], s);\r\n            }\r\n            return str + \")\";\r\n          }\r\n          var l = o.length;\r\n          var i;\r\n          var str = \"[\";\r\n          s += \"\\t\";\r\n          var _g = 0;\r\n          while (_g < l) {\r\n            var i1 = _g++;\r\n            str += (i1 > 0 ? \",\" : \"\") + js.Boot.__string_rec(o[i1], s);\r\n          }\r\n          str += \"]\";\r\n          return str;\r\n        }\r\n        var tostr;\r\n        try {\r\n          tostr = o.toString;\r\n        } catch (e) {\r\n          return \"???\";\r\n        }\r\n        if (tostr != null && tostr != Object.toString) {\r\n          var s2 = o.toString();\r\n          if (s2 != \"[object Object]\") return s2;\r\n        }\r\n        var k = null;\r\n        var str = \"{\\n\";\r\n        s += \"\\t\";\r\n        var hasp = o.hasOwnProperty != null;\r\n        for (var k in o) {\r\n          if (hasp && !o.hasOwnProperty(k)) {\r\n            continue;\r\n          }\r\n          if (\r\n            k == \"prototype\" ||\r\n            k == \"__class__\" ||\r\n            k == \"__super__\" ||\r\n            k == \"__interfaces__\" ||\r\n            k == \"__properties__\"\r\n          ) {\r\n            continue;\r\n          }\r\n          if (str.length != 2) str += \", \\n\";\r\n          str += s + k + \" : \" + js.Boot.__string_rec(o[k], s);\r\n        }\r\n        s = s.substring(1);\r\n        str += \"\\n\" + s + \"}\";\r\n        return str;\r\n      case \"function\":\r\n        return \"<function>\";\r\n      case \"string\":\r\n        return o;\r\n      default:\r\n        return String(o);\r\n    }\r\n  };\r\n  js.Boot.__interfLoop = function (cc, cl) {\r\n    if (cc == null) return false;\r\n    if (cc == cl) return true;\r\n    var intf = cc.__interfaces__;\r\n    if (intf != null) {\r\n      var _g1 = 0,\r\n        _g = intf.length;\r\n      while (_g1 < _g) {\r\n        var i = _g1++;\r\n        var i1 = intf[i];\r\n        if (i1 == cl || js.Boot.__interfLoop(i1, cl)) return true;\r\n      }\r\n    }\r\n    return js.Boot.__interfLoop(cc.__super__, cl);\r\n  };\r\n  js.Boot.__instanceof = function (o, cl) {\r\n    try {\r\n      if (o instanceof cl) {\r\n        if (cl == Array) return o.__enum__ == null;\r\n        return true;\r\n      }\r\n      if (js.Boot.__interfLoop(o.__class__, cl)) return true;\r\n    } catch (e) {\r\n      if (cl == null) return false;\r\n    }\r\n    switch (cl) {\r\n      case Int:\r\n        return Math.ceil(o % 2147483648.0) === o;\r\n      case Float:\r\n        return typeof o == \"number\";\r\n      case Bool:\r\n        return o === true || o === false;\r\n      case String:\r\n        return typeof o == \"string\";\r\n      case Dynamic:\r\n        return true;\r\n      default:\r\n        if (o == null) return false;\r\n        if (cl == Class && o.__name__ != null) return true;\r\n        else null;\r\n        if (cl == Enum && o.__ename__ != null) return true;\r\n        else null;\r\n        return o.__enum__ == cl;\r\n    }\r\n  };\r\n  js.Boot.__cast = function (o, t) {\r\n    if (js.Boot.__instanceof(o, t)) return o;\r\n    else throw \"Cannot cast \" + Std.string(o) + \" to \" + Std.string(t);\r\n  };\r\n  js.Lib = function () {};\r\n  js.Lib.__name__ = true;\r\n  js.Lib.debug = function () {\r\n    debugger;\r\n  };\r\n  js.Lib.alert = function (v) {\r\n    alert(js.Boot.__string_rec(v, \"\"));\r\n  };\r\n  js.Lib.eval = function (code) {\r\n    return eval(code);\r\n  };\r\n  js.Lib.setErrorHandler = function (f) {\r\n    js.Lib.onerror = f;\r\n  };\r\n  var $_;\r\n  function $bind(o, m) {\r\n    var f = function () {\r\n      return f.method.apply(f.scope, arguments);\r\n    };\r\n    f.scope = o;\r\n    f.method = m;\r\n    return f;\r\n  }\r\n  if (Array.prototype.indexOf)\r\n    HxOverrides.remove = function (a, o) {\r\n      var i = a.indexOf(o);\r\n      if (i == -1) return false;\r\n      a.splice(i, 1);\r\n      return true;\r\n    };\r\n  else null;\r\n  Math.__name__ = [\"Math\"];\r\n  Math.NaN = Number.NaN;\r\n  Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\r\n  Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\r\n  Math.isFinite = function (i) {\r\n    return isFinite(i);\r\n  };\r\n  Math.isNaN = function (i) {\r\n    return isNaN(i);\r\n  };\r\n  String.prototype.__class__ = String;\r\n  String.__name__ = true;\r\n  Array.prototype.__class__ = Array;\r\n  Array.__name__ = true;\r\n  Date.prototype.__class__ = Date;\r\n  Date.__name__ = [\"Date\"];\r\n  var Int = { __name__: [\"Int\"] };\r\n  var Dynamic = { __name__: [\"Dynamic\"] };\r\n  var Float = Number;\r\n  Float.__name__ = [\"Float\"];\r\n  var Bool = Boolean;\r\n  Bool.__ename__ = [\"Bool\"];\r\n  var Class = { __name__: [\"Class\"] };\r\n  var Enum = {};\r\n  var Void = { __ename__: [\"Void\"] };\r\n  if (typeof document != \"undefined\") js.Lib.document = document;\r\n  if (typeof window != \"undefined\") {\r\n    js.Lib.window = window;\r\n    js.Lib.window.onerror = function (msg, url, line) {\r\n      var f = js.Lib.onerror;\r\n      if (f == null) return false;\r\n      return f(msg, [url + \":\" + line]);\r\n    };\r\n  }\r\n  com.wiris.js.JsPluginTools.main();\r\n  delete Array.prototype.__class__;\r\n})();\r\n\r\n(function () {\r\n  var HxOverrides = function () {};\r\n  HxOverrides.__name__ = true;\r\n  HxOverrides.dateStr = function (date) {\r\n    var m = date.getMonth() + 1;\r\n    var d = date.getDate();\r\n    var h = date.getHours();\r\n    var mi = date.getMinutes();\r\n    var s = date.getSeconds();\r\n    return (\r\n      date.getFullYear() +\r\n      \"-\" +\r\n      (m < 10 ? \"0\" + m : \"\" + m) +\r\n      \"-\" +\r\n      (d < 10 ? \"0\" + d : \"\" + d) +\r\n      \" \" +\r\n      (h < 10 ? \"0\" + h : \"\" + h) +\r\n      \":\" +\r\n      (mi < 10 ? \"0\" + mi : \"\" + mi) +\r\n      \":\" +\r\n      (s < 10 ? \"0\" + s : \"\" + s)\r\n    );\r\n  };\r\n  HxOverrides.strDate = function (s) {\r\n    switch (s.length) {\r\n      case 8:\r\n        var k = s.split(\":\");\r\n        var d = new Date();\r\n        d.setTime(0);\r\n        d.setUTCHours(k[0]);\r\n        d.setUTCMinutes(k[1]);\r\n        d.setUTCSeconds(k[2]);\r\n        return d;\r\n      case 10:\r\n        var k = s.split(\"-\");\r\n        return new Date(k[0], k[1] - 1, k[2], 0, 0, 0);\r\n      case 19:\r\n        var k = s.split(\" \");\r\n        var y = k[0].split(\"-\");\r\n        var t = k[1].split(\":\");\r\n        return new Date(y[0], y[1] - 1, y[2], t[0], t[1], t[2]);\r\n      default:\r\n        throw \"Invalid date format : \" + s;\r\n    }\r\n  };\r\n  HxOverrides.cca = function (s, index) {\r\n    var x = s.charCodeAt(index);\r\n    if (x != x) return undefined;\r\n    return x;\r\n  };\r\n  HxOverrides.substr = function (s, pos, len) {\r\n    if (pos != null && pos != 0 && len != null && len < 0) return \"\";\r\n    if (len == null) len = s.length;\r\n    if (pos < 0) {\r\n      pos = s.length + pos;\r\n      if (pos < 0) pos = 0;\r\n    } else if (len < 0) len = s.length + len - pos;\r\n    return s.substr(pos, len);\r\n  };\r\n  HxOverrides.remove = function (a, obj) {\r\n    var i = 0;\r\n    var l = a.length;\r\n    while (i < l) {\r\n      if (a[i] == obj) {\r\n        a.splice(i, 1);\r\n        return true;\r\n      }\r\n      i++;\r\n    }\r\n    return false;\r\n  };\r\n  HxOverrides.iter = function (a) {\r\n    return {\r\n      cur: 0,\r\n      arr: a,\r\n      hasNext: function () {\r\n        return this.cur < this.arr.length;\r\n      },\r\n      next: function () {\r\n        return this.arr[this.cur++];\r\n      },\r\n    };\r\n  };\r\n  var IntIter = function (min, max) {\r\n    this.min = min;\r\n    this.max = max;\r\n  };\r\n  IntIter.__name__ = true;\r\n  IntIter.prototype = {\r\n    next: function () {\r\n      return this.min++;\r\n    },\r\n    hasNext: function () {\r\n      return this.min < this.max;\r\n    },\r\n    __class__: IntIter,\r\n  };\r\n  var Std = function () {};\r\n  Std.__name__ = true;\r\n  Std[\"is\"] = function (v, t) {\r\n    return js.Boot.__instanceof(v, t);\r\n  };\r\n  Std.string = function (s) {\r\n    return js.Boot.__string_rec(s, \"\");\r\n  };\r\n  Std[\"int\"] = function (x) {\r\n    return x | 0;\r\n  };\r\n  Std.parseInt = function (x) {\r\n    var v = parseInt(x, 10);\r\n    if (v == 0 && (HxOverrides.cca(x, 1) == 120 || HxOverrides.cca(x, 1) == 88)) v = parseInt(x);\r\n    if (isNaN(v)) return null;\r\n    return v;\r\n  };\r\n  Std.parseFloat = function (x) {\r\n    return parseFloat(x);\r\n  };\r\n  Std.random = function (x) {\r\n    return Math.floor(Math.random() * x);\r\n  };\r\n  var com = com || {};\r\n  if (!com.wiris) com.wiris = {};\r\n  if (!com.wiris.js) com.wiris.js = {};\r\n  com.wiris.js.JsPluginTools = function () {\r\n    this.tryReady();\r\n  };\r\n  com.wiris.js.JsPluginTools.__name__ = true;\r\n  com.wiris.js.JsPluginTools.main = function () {\r\n    var ev;\r\n    ev = com.wiris.js.JsPluginTools.getInstance();\r\n    haxe.Timer.delay($bind(ev, ev.tryReady), 100);\r\n  };\r\n  com.wiris.js.JsPluginTools.getInstance = function () {\r\n    if (com.wiris.js.JsPluginTools.instance == null)\r\n      com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\r\n    return com.wiris.js.JsPluginTools.instance;\r\n  };\r\n  com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\r\n    if (window.com == null) window.com = {};\r\n    if (window.com.wiris == null) window.com.wiris = {};\r\n    if (window.com.wiris.js == null) window.com.wiris.js = {};\r\n    if (window.com.wiris.js.JsPluginTools == null)\r\n      window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\r\n  };\r\n  com.wiris.js.JsPluginTools.prototype = {\r\n    md5encode: function (content) {\r\n      return haxe.Md5.encode(content);\r\n    },\r\n    doLoad: function () {\r\n      this.ready = true;\r\n      com.wiris.js.JsPluginTools.instance = this;\r\n      com.wiris.js.JsPluginTools.bypassEncapsulation();\r\n    },\r\n    tryReady: function () {\r\n      this.ready = false;\r\n      if (js.Lib.document.readyState) {\r\n        this.doLoad();\r\n        this.ready = true;\r\n      }\r\n      if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\r\n    },\r\n    __class__: com.wiris.js.JsPluginTools,\r\n  };\r\n  var haxe = haxe || {};\r\n  haxe.Log = function () {};\r\n  haxe.Log.__name__ = true;\r\n  haxe.Log.trace = function (v, infos) {\r\n    js.Boot.__trace(v, infos);\r\n  };\r\n  haxe.Log.clear = function () {\r\n    js.Boot.__clear_trace();\r\n  };\r\n  haxe.Md5 = function () {};\r\n  haxe.Md5.__name__ = true;\r\n  haxe.Md5.encode = function (s) {\r\n    return new haxe.Md5().doEncode(s);\r\n  };\r\n  haxe.Md5.prototype = {\r\n    doEncode: function (str) {\r\n      var x = this.str2blks(str);\r\n      var a = 1732584193;\r\n      var b = -271733879;\r\n      var c = -1732584194;\r\n      var d = 271733878;\r\n      var step;\r\n      var i = 0;\r\n      while (i < x.length) {\r\n        var olda = a;\r\n        var oldb = b;\r\n        var oldc = c;\r\n        var oldd = d;\r\n        step = 0;\r\n        a = this.ff(a, b, c, d, x[i], 7, -680876936);\r\n        d = this.ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n        c = this.ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n        b = this.ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n        a = this.ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n        d = this.ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n        c = this.ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n        b = this.ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n        a = this.ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n        d = this.ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n        c = this.ff(c, d, a, b, x[i + 10], 17, -42063);\r\n        b = this.ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n        a = this.ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n        d = this.ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n        c = this.ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n        b = this.ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n        a = this.gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n        d = this.gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n        c = this.gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n        b = this.gg(b, c, d, a, x[i], 20, -373897302);\r\n        a = this.gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n        d = this.gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n        c = this.gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n        b = this.gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n        a = this.gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n        d = this.gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n        c = this.gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n        b = this.gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n        a = this.gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n        d = this.gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n        c = this.gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n        b = this.gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n        a = this.hh(a, b, c, d, x[i + 5], 4, -378558);\r\n        d = this.hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n        c = this.hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n        b = this.hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n        a = this.hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n        d = this.hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n        c = this.hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n        b = this.hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n        a = this.hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n        d = this.hh(d, a, b, c, x[i], 11, -358537222);\r\n        c = this.hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n        b = this.hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n        a = this.hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n        d = this.hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n        c = this.hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n        b = this.hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n        a = this.ii(a, b, c, d, x[i], 6, -198630844);\r\n        d = this.ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n        c = this.ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n        b = this.ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n        a = this.ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n        d = this.ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n        c = this.ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n        b = this.ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n        a = this.ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n        d = this.ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n        c = this.ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n        b = this.ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n        a = this.ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n        d = this.ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n        c = this.ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n        b = this.ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n        a = this.addme(a, olda);\r\n        b = this.addme(b, oldb);\r\n        c = this.addme(c, oldc);\r\n        d = this.addme(d, oldd);\r\n        i += 16;\r\n      }\r\n      return this.rhex(a) + this.rhex(b) + this.rhex(c) + this.rhex(d);\r\n    },\r\n    ii: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitXOR(c, this.bitOR(b, ~d)), a, b, x, s, t);\r\n    },\r\n    hh: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitXOR(this.bitXOR(b, c), d), a, b, x, s, t);\r\n    },\r\n    gg: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitOR(this.bitAND(b, d), this.bitAND(c, ~d)), a, b, x, s, t);\r\n    },\r\n    ff: function (a, b, c, d, x, s, t) {\r\n      return this.cmn(this.bitOR(this.bitAND(b, c), this.bitAND(~b, d)), a, b, x, s, t);\r\n    },\r\n    cmn: function (q, a, b, x, s, t) {\r\n      return this.addme(this.rol(this.addme(this.addme(a, q), this.addme(x, t)), s), b);\r\n    },\r\n    rol: function (num, cnt) {\r\n      return (num << cnt) | (num >>> (32 - cnt));\r\n    },\r\n    str2blks: function (str) {\r\n      var nblk = ((str.length + 8) >> 6) + 1;\r\n      var blks = new Array();\r\n      var _g1 = 0,\r\n        _g = nblk * 16;\r\n      while (_g1 < _g) {\r\n        var i = _g1++;\r\n        blks[i] = 0;\r\n      }\r\n      var i = 0;\r\n      while (i < str.length) {\r\n        blks[i >> 2] |= HxOverrides.cca(str, i) << (((str.length * 8 + i) % 4) * 8);\r\n        i++;\r\n      }\r\n      blks[i >> 2] |= 128 << (((str.length * 8 + i) % 4) * 8);\r\n      var l = str.length * 8;\r\n      var k = nblk * 16 - 2;\r\n      blks[k] = l & 255;\r\n      blks[k] |= ((l >>> 8) & 255) << 8;\r\n      blks[k] |= ((l >>> 16) & 255) << 16;\r\n      blks[k] |= ((l >>> 24) & 255) << 24;\r\n      return blks;\r\n    },\r\n    rhex: function (num) {\r\n      var str = \"\";\r\n      var hex_chr = \"0123456789abcdef\";\r\n      var _g = 0;\r\n      while (_g < 4) {\r\n        var j = _g++;\r\n        str += hex_chr.charAt((num >> (j * 8 + 4)) & 15) + hex_chr.charAt((num >> (j * 8)) & 15);\r\n      }\r\n      return str;\r\n    },\r\n    addme: function (x, y) {\r\n      var lsw = (x & 65535) + (y & 65535);\r\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n      return (msw << 16) | (lsw & 65535);\r\n    },\r\n    bitAND: function (a, b) {\r\n      var lsb = a & 1 & (b & 1);\r\n      var msb31 = (a >>> 1) & (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    bitXOR: function (a, b) {\r\n      var lsb = (a & 1) ^ (b & 1);\r\n      var msb31 = (a >>> 1) ^ (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    bitOR: function (a, b) {\r\n      var lsb = (a & 1) | (b & 1);\r\n      var msb31 = (a >>> 1) | (b >>> 1);\r\n      return (msb31 << 1) | lsb;\r\n    },\r\n    __class__: haxe.Md5,\r\n  };\r\n  haxe.Timer = function (time_ms) {\r\n    var me = this;\r\n    this.id = window.setInterval(function () {\r\n      me.run();\r\n    }, time_ms);\r\n  };\r\n  haxe.Timer.__name__ = true;\r\n  haxe.Timer.delay = function (f, time_ms) {\r\n    var t = new haxe.Timer(time_ms);\r\n    t.run = function () {\r\n      t.stop();\r\n      f();\r\n    };\r\n    return t;\r\n  };\r\n  haxe.Timer.measure = function (f, pos) {\r\n    var t0 = haxe.Timer.stamp();\r\n    var r = f();\r\n    haxe.Log.trace(haxe.Timer.stamp() - t0 + \"s\", pos);\r\n    return r;\r\n  };\r\n  haxe.Timer.stamp = function () {\r\n    return new Date().getTime() / 1000;\r\n  };\r\n  haxe.Timer.prototype = {\r\n    run: function () {},\r\n    stop: function () {\r\n      if (this.id == null) return;\r\n      window.clearInterval(this.id);\r\n      this.id = null;\r\n    },\r\n    __class__: haxe.Timer,\r\n  };\r\n  var js = js || {};\r\n  js.Boot = function () {};\r\n  js.Boot.__name__ = true;\r\n  js.Boot.__unhtml = function (s) {\r\n    return s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\r\n  };\r\n  js.Boot.__trace = function (v, i) {\r\n    var msg = i != null ? i.fileName + \":\" + i.lineNumber + \": \" : \"\";\r\n    msg += js.Boot.__string_rec(v, \"\");\r\n    var d;\r\n    if (typeof document != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null)\r\n      d.innerHTML += js.Boot.__unhtml(msg) + \"<br/>\";\r\n    else if (typeof console != \"undefined\" && console.log != null) console.log(msg);\r\n  };\r\n  js.Boot.__clear_trace = function () {\r\n    var d = document.getElementById(\"haxe:trace\");\r\n    if (d != null) d.innerHTML = \"\";\r\n  };\r\n  js.Boot.isClass = function (o) {\r\n    return o.__name__;\r\n  };\r\n  js.Boot.isEnum = function (e) {\r\n    return e.__ename__;\r\n  };\r\n  js.Boot.getClass = function (o) {\r\n    return o.__class__;\r\n  };\r\n  js.Boot.__string_rec = function (o, s) {\r\n    if (o == null) return \"null\";\r\n    if (s.length >= 5) return \"<...>\";\r\n    var t = typeof o;\r\n    if (t == \"function\" && (o.__name__ || o.__ename__)) t = \"object\";\r\n    switch (t) {\r\n      case \"object\":\r\n        if (o instanceof Array) {\r\n          if (o.__enum__) {\r\n            if (o.length == 2) return o[0];\r\n            var str = o[0] + \"(\";\r\n            s += \"\\t\";\r\n            var _g1 = 2,\r\n              _g = o.length;\r\n            while (_g1 < _g) {\r\n              var i = _g1++;\r\n              if (i != 2) str += \",\" + js.Boot.__string_rec(o[i], s);\r\n              else str += js.Boot.__string_rec(o[i], s);\r\n            }\r\n            return str + \")\";\r\n          }\r\n          var l = o.length;\r\n          var i;\r\n          var str = \"[\";\r\n          s += \"\\t\";\r\n          var _g = 0;\r\n          while (_g < l) {\r\n            var i1 = _g++;\r\n            str += (i1 > 0 ? \",\" : \"\") + js.Boot.__string_rec(o[i1], s);\r\n          }\r\n          str += \"]\";\r\n          return str;\r\n        }\r\n        var tostr;\r\n        try {\r\n          tostr = o.toString;\r\n        } catch (e) {\r\n          return \"???\";\r\n        }\r\n        if (tostr != null && tostr != Object.toString) {\r\n          var s2 = o.toString();\r\n          if (s2 != \"[object Object]\") return s2;\r\n        }\r\n        var k = null;\r\n        var str = \"{\\n\";\r\n        s += \"\\t\";\r\n        var hasp = o.hasOwnProperty != null;\r\n        for (var k in o) {\r\n          if (hasp && !o.hasOwnProperty(k)) {\r\n            continue;\r\n          }\r\n          if (\r\n            k == \"prototype\" ||\r\n            k == \"__class__\" ||\r\n            k == \"__super__\" ||\r\n            k == \"__interfaces__\" ||\r\n            k == \"__properties__\"\r\n          ) {\r\n            continue;\r\n          }\r\n          if (str.length != 2) str += \", \\n\";\r\n          str += s + k + \" : \" + js.Boot.__string_rec(o[k], s);\r\n        }\r\n        s = s.substring(1);\r\n        str += \"\\n\" + s + \"}\";\r\n        return str;\r\n      case \"function\":\r\n        return \"<function>\";\r\n      case \"string\":\r\n        return o;\r\n      default:\r\n        return String(o);\r\n    }\r\n  };\r\n  js.Boot.__interfLoop = function (cc, cl) {\r\n    if (cc == null) return false;\r\n    if (cc == cl) return true;\r\n    var intf = cc.__interfaces__;\r\n    if (intf != null) {\r\n      var _g1 = 0,\r\n        _g = intf.length;\r\n      while (_g1 < _g) {\r\n        var i = _g1++;\r\n        var i1 = intf[i];\r\n        if (i1 == cl || js.Boot.__interfLoop(i1, cl)) return true;\r\n      }\r\n    }\r\n    return js.Boot.__interfLoop(cc.__super__, cl);\r\n  };\r\n  js.Boot.__instanceof = function (o, cl) {\r\n    try {\r\n      if (o instanceof cl) {\r\n        if (cl == Array) return o.__enum__ == null;\r\n        return true;\r\n      }\r\n      if (js.Boot.__interfLoop(o.__class__, cl)) return true;\r\n    } catch (e) {\r\n      if (cl == null) return false;\r\n    }\r\n    switch (cl) {\r\n      case Int:\r\n        return Math.ceil(o % 2147483648.0) === o;\r\n      case Float:\r\n        return typeof o == \"number\";\r\n      case Bool:\r\n        return o === true || o === false;\r\n      case String:\r\n        return typeof o == \"string\";\r\n      case Dynamic:\r\n        return true;\r\n      default:\r\n        if (o == null) return false;\r\n        if (cl == Class && o.__name__ != null) return true;\r\n        else null;\r\n        if (cl == Enum && o.__ename__ != null) return true;\r\n        else null;\r\n        return o.__enum__ == cl;\r\n    }\r\n  };\r\n  js.Boot.__cast = function (o, t) {\r\n    if (js.Boot.__instanceof(o, t)) return o;\r\n    else throw \"Cannot cast \" + Std.string(o) + \" to \" + Std.string(t);\r\n  };\r\n  js.Lib = function () {};\r\n  js.Lib.__name__ = true;\r\n  js.Lib.debug = function () {\r\n    debugger;\r\n  };\r\n  js.Lib.alert = function (v) {\r\n    alert(js.Boot.__string_rec(v, \"\"));\r\n  };\r\n  js.Lib.eval = function (code) {\r\n    return eval(code);\r\n  };\r\n  js.Lib.setErrorHandler = function (f) {\r\n    js.Lib.onerror = f;\r\n  };\r\n  var $_;\r\n  function $bind(o, m) {\r\n    var f = function () {\r\n      return f.method.apply(f.scope, arguments);\r\n    };\r\n    f.scope = o;\r\n    f.method = m;\r\n    return f;\r\n  }\r\n  if (Array.prototype.indexOf)\r\n    HxOverrides.remove = function (a, o) {\r\n      var i = a.indexOf(o);\r\n      if (i == -1) return false;\r\n      a.splice(i, 1);\r\n      return true;\r\n    };\r\n  else null;\r\n  Math.__name__ = [\"Math\"];\r\n  Math.NaN = Number.NaN;\r\n  Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\r\n  Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\r\n  Math.isFinite = function (i) {\r\n    return isFinite(i);\r\n  };\r\n  Math.isNaN = function (i) {\r\n    return isNaN(i);\r\n  };\r\n  String.prototype.__class__ = String;\r\n  String.__name__ = true;\r\n  Array.prototype.__class__ = Array;\r\n  Array.__name__ = true;\r\n  Date.prototype.__class__ = Date;\r\n  Date.__name__ = [\"Date\"];\r\n  var Int = { __name__: [\"Int\"] };\r\n  var Dynamic = { __name__: [\"Dynamic\"] };\r\n  var Float = Number;\r\n  Float.__name__ = [\"Float\"];\r\n  var Bool = Boolean;\r\n  Bool.__ename__ = [\"Bool\"];\r\n  var Class = { __name__: [\"Class\"] };\r\n  var Enum = {};\r\n  var Void = { __ename__: [\"Void\"] };\r\n  if (typeof document != \"undefined\") js.Lib.document = document;\r\n  if (typeof window != \"undefined\") {\r\n    js.Lib.window = window;\r\n    js.Lib.window.onerror = function (msg, url, line) {\r\n      var f = js.Lib.onerror;\r\n      if (f == null) return false;\r\n      return f(msg, [url + \":\" + line]);\r\n    };\r\n  }\r\n  com.wiris.js.JsPluginTools.main();\r\n})();\r\ndelete Array.prototype.__class__;\r\n// @codingStandardsIgnoreEnd\r\n","import IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\r\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\r\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\r\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\r\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\r\nimport Telemeter from \"@wiris/mathtype-html-integration-devkit/src/telemeter.js\";\r\n\r\n/**\r\n * This class represents the MathType integration for CKEditor5.\r\n * @extends {IntegrationModel}\r\n */\r\nexport default class CKEditor5Integration extends IntegrationModel {\r\n  constructor(ckeditorIntegrationModelProperties) {\r\n    const editor = ckeditorIntegrationModelProperties.editorObject;\r\n\r\n    if (typeof editor.config !== \"undefined\" && typeof editor.config.get(\"mathTypeParameters\") !== \"undefined\") {\r\n      ckeditorIntegrationModelProperties.integrationParameters = editor.config.get(\"mathTypeParameters\");\r\n    }\r\n    /**\r\n     * CKEditor5 Integration.\r\n     *\r\n     * @param {integrationModelProperties} integrationModelAttributes\r\n     */\r\n    super(ckeditorIntegrationModelProperties);\r\n\r\n    /**\r\n     * Folder name used for the integration inside CKEditor plugins folder.\r\n     */\r\n    this.integrationFolderName = \"ckeditor_wiris\";\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   * @returns {string} - The CKEditor instance language.\r\n   * @override\r\n   */\r\n  getLanguage() {\r\n    // Returns the CKEDitor instance language taking into account that the language can be an object.\r\n    // Try to get editorParameters.language, fail silently otherwise\r\n    try {\r\n      return this.editorParameters.language;\r\n    } catch (e) {}\r\n    const languageObject = this.editorObject.config.get(\"language\");\r\n    if (languageObject != null) {\r\n      if (typeof languageObject === \"object\") {\r\n        if (Object.prototype.hasOwnProperty.call(languageObject, \"ui\")) {\r\n          return languageObject.ui;\r\n        }\r\n        return this.editorObject.locale.uiLanguage;\r\n      }\r\n      return languageObject;\r\n    }\r\n    return super.getLanguage();\r\n  }\r\n\r\n  /**\r\n   * Adds callbacks to the following CKEditor listeners:\r\n   * - 'focus' - updates the current instance.\r\n   * - 'contentDom' - adds 'doubleclick' callback.\r\n   * - 'doubleclick' - sets to null data.dialog property to avoid modifications for MathType formulas.\r\n   * - 'setData' - parses the data converting MathML into images.\r\n   * - 'afterSetData' - adds an observer to MathType formulas to avoid modifications.\r\n   * - 'getData' - parses the data converting images into selected save mode (MathML by default).\r\n   * - 'mode' - recalculates the active element.\r\n   */\r\n  addEditorListeners() {\r\n    const editor = this.editorObject;\r\n\r\n    if (typeof editor.config.wirislistenersdisabled === \"undefined\" || !editor.config.wirislistenersdisabled) {\r\n      this.checkElement();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks the current container and assign events in case that it doesn't have them.\r\n   * CKEditor replaces several times the element element during its execution,\r\n   * so we must assign the events again to editor element.\r\n   */\r\n  checkElement() {\r\n    const editor = this.editorObject;\r\n    const newElement = editor.sourceElement;\r\n\r\n    // If the element wasn't treated, add the events.\r\n    if (!newElement.wirisActive) {\r\n      this.setTarget(newElement);\r\n      this.addEvents();\r\n      // Set the element as treated\r\n      newElement.wirisActive = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   * @param {HTMLElement} element - HTMLElement target.\r\n   * @param {MouseEvent} event - event which trigger the handler.\r\n   */\r\n  doubleClickHandler(element, event) {\r\n    this.core.editionProperties.dbclick = true;\r\n    if (this.editorObject.isReadOnly === false) {\r\n      if (element.nodeName.toLowerCase() === \"img\") {\r\n        if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\r\n          // Some plugins (image2, image) open a dialog on Double-click. On formulas\r\n          // doubleclick event ends here.\r\n          if (typeof event.stopPropagation !== \"undefined\") {\r\n            // old I.E compatibility.\r\n            event.stopPropagation();\r\n          } else {\r\n            event.returnValue = false;\r\n          }\r\n          this.core.getCustomEditors().disable();\r\n          const customEditorAttr = element.getAttribute(Configuration.get(\"imageCustomEditorName\"));\r\n          if (customEditorAttr) {\r\n            this.core.getCustomEditors().enable(customEditorAttr);\r\n          }\r\n          this.core.editionProperties.temporalImage = element;\r\n          this.openExistingFormulaEditor();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @inheritdoc */\r\n  static getCorePath() {\r\n    return null; // TODO\r\n  }\r\n\r\n  /** @inheritdoc */\r\n  callbackFunction() {\r\n    super.callbackFunction();\r\n    this.addEditorListeners();\r\n  }\r\n\r\n  openNewFormulaEditor() {\r\n    // Store the editor selection as it will be lost upon opening the modal\r\n    this.core.editionProperties.selection = this.editorObject.editing.view.document.selection;\r\n\r\n    // Focus on the selected editor when multiple editor instances are present\r\n    WirisPlugin.currentInstance = this;\r\n\r\n    return super.openNewFormulaEditor();\r\n  }\r\n\r\n  /**\r\n   * Replaces old formula with new MathML or inserts it in caret position if new\r\n   * @param {String} mathml MathML to update old one or insert\r\n   * @returns {module:engine/model/element~Element} The model element corresponding to the inserted image\r\n   */\r\n  insertMathml(mathml) {\r\n    // This returns the value returned by the callback function (writer => {...})\r\n    return this.editorObject.model.change((writer) => {\r\n      const core = this.getCore();\r\n      const selection = this.editorObject.model.document.selection;\r\n\r\n      const modelElementNew = writer.createElement(\"mathml\", {\r\n        formula: mathml,\r\n        ...Object.fromEntries(selection.getAttributes()), // To keep the format, such as style and font\r\n      });\r\n\r\n      // Obtain the DOM <span><img ... /></span> object corresponding to the formula\r\n      if (core.editionProperties.isNewElement) {\r\n        // Don't bother inserting anything at all if the MathML is empty.\r\n        if (!mathml) return;\r\n\r\n        const viewSelection =\r\n          this.core.editionProperties.selection || this.editorObject.editing.view.document.selection;\r\n        const modelPosition = this.editorObject.editing.mapper.toModelPosition(viewSelection.getLastPosition());\r\n\r\n        this.editorObject.model.insertObject(modelElementNew, modelPosition);\r\n\r\n        // Remove selection\r\n        if (!viewSelection.isCollapsed) {\r\n          for (const range of viewSelection.getRanges()) {\r\n            writer.remove(this.editorObject.editing.mapper.toModelRange(range));\r\n          }\r\n        }\r\n\r\n        // Set carret after the formula\r\n        const position = this.editorObject.model.createPositionAfter(modelElementNew);\r\n        writer.setSelection(position);\r\n      } else {\r\n        const img = core.editionProperties.temporalImage;\r\n        const viewElement = this.editorObject.editing.view.domConverter.domToView(img).parent;\r\n        const modelElementOld = this.editorObject.editing.mapper.toModelElement(viewElement);\r\n\r\n        // Insert the new <mathml> and remove the old one\r\n        const position = this.editorObject.model.createPositionBefore(modelElementOld);\r\n\r\n        // If the given MathML is empty, don't insert a new formula.\r\n        if (mathml) {\r\n          this.editorObject.model.insertObject(modelElementNew, position);\r\n        }\r\n        writer.remove(modelElementOld);\r\n      }\r\n\r\n      // eslint-disable-next-line consistent-return\r\n      return modelElementNew;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Finds the text node corresponding to given DOM text element.\r\n   * @param {element} viewElement Element to find corresponding text node of.\r\n   * @returns {module:engine/model/text~Text|undefined} Text node corresponding to the given element or undefined if it doesn't exist.\r\n   */\r\n  findText(viewElement) {\r\n    // eslint-disable-line consistent-return\r\n    // mapper always converts text nodes to *new* model elements so we need to convert the text's parents and then come back down\r\n    let pivot = viewElement;\r\n    let element;\r\n    while (!element) {\r\n      element = this.editorObject.editing.mapper.toModelElement(\r\n        this.editorObject.editing.view.domConverter.domToView(pivot),\r\n      );\r\n      pivot = pivot.parentElement;\r\n    }\r\n\r\n    // Navigate through all the subtree under `pivot` in order to find the correct text node\r\n    const range = this.editorObject.model.createRangeIn(element);\r\n    const descendants = Array.from(range.getItems());\r\n    for (const node of descendants) {\r\n      let viewElementData = viewElement.data;\r\n      if (viewElement.nodeType === 3) {\r\n        // Remove invisible white spaces\r\n        viewElementData = viewElementData.replaceAll(String.fromCharCode(8288), \"\");\r\n      }\r\n      if (node.is(\"textProxy\") && node.data === viewElementData.replace(String.fromCharCode(160), \" \")) {\r\n        return node.textNode;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @inheritdoc */\r\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\r\n    // eslint-disable-line no-unused-vars\r\n    const returnObject = {};\r\n\r\n    let mathmlOrigin;\r\n    if (!mathml) {\r\n      this.insertMathml(\"\");\r\n    } else if (this.core.editMode === \"latex\") {\r\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\r\n      returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\r\n\r\n      this.editorObject.model.change((writer) => {\r\n        const { latexRange } = this.core.editionProperties;\r\n\r\n        const startNode = this.findText(latexRange.startContainer);\r\n        const endNode = this.findText(latexRange.endContainer);\r\n\r\n        let startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + latexRange.startOffset);\r\n        let endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + latexRange.endOffset);\r\n\r\n        let range = writer.createRange(startPosition, endPosition);\r\n\r\n        // When Latex is next to image/formula.\r\n        if (latexRange.startContainer.nodeType === 3 && latexRange.startContainer.previousSibling?.nodeType === 1) {\r\n          // Get the position of the latex to be replaced.\r\n          const latexEdited = `$$${Latex.getLatexFromMathML(\r\n            MathML.safeXmlDecode(this.core.editionProperties.temporalImage.dataset.mathml),\r\n          )}$$`;\r\n          let data = latexRange.startContainer.data;\r\n\r\n          // Remove invisible characters.\r\n          data = data.replaceAll(String.fromCharCode(8288), \"\");\r\n\r\n          // Get to the start of the latex we are editing.\r\n          const offset = data.indexOf(latexEdited);\r\n          const dataOffset = data.substring(offset);\r\n          const second$ = dataOffset.substring(2).indexOf(\"$$\") + 4;\r\n          const substring = dataOffset.substr(0, second$);\r\n          data = data.replace(substring, \"\");\r\n\r\n          if (!data) {\r\n            startPosition = writer.createPositionBefore(startNode);\r\n            range = startNode;\r\n          } else {\r\n            startPosition = startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + offset);\r\n            endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + second$ + offset);\r\n            range = writer.createRange(startPosition, endPosition);\r\n          }\r\n        }\r\n\r\n        writer.remove(range);\r\n        writer.insertText(`$$${returnObject.latex}$$`, startNode.getAttributes(), startPosition);\r\n      });\r\n    } else {\r\n      mathmlOrigin = this.core.editionProperties.temporalImage?.dataset.mathml;\r\n      try {\r\n        returnObject.node = this.editorObject.editing.view.domConverter.viewToDom(\r\n          this.editorObject.editing.mapper.toViewElement(this.insertMathml(mathml)),\r\n          windowTarget.document,\r\n        );\r\n      } catch (e) {\r\n        const x = e.toString();\r\n        if (x.includes(\"CKEditorError: Cannot read property 'parent' of undefined\")) {\r\n          this.core.modalDialog.cancelAction();\r\n        }\r\n      }\r\n    }\r\n\r\n    // Build the telemeter payload separated to delete null/undefined entries.\r\n    const payload = {\r\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\r\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\r\n      elapsed_time: Date.now() - this.core.editionProperties.editionStartTime,\r\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\r\n      toolbar: this.core.modalDialog.contentManager.toolbar,\r\n      size: mathml?.length,\r\n    };\r\n\r\n    // Remove desired null keys.\r\n    Object.keys(payload).forEach((key) => {\r\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\r\n    });\r\n\r\n    // Call Telemetry service to track the event.\r\n    try {\r\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\r\n        ...payload,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\r\n    }\r\n\r\n    /* Due to PLUGINS-1329, we add the onChange event to the CK4 insertFormula.\r\n        We probably should add it here as well, but we should look further into how */\r\n    // this.editorObject.fire('change');\r\n\r\n    // Remove temporal image of inserted formula\r\n    this.core.editionProperties.temporalImage = null;\r\n\r\n    return returnObject;\r\n  }\r\n\r\n  /**\r\n   * Function called when the content submits an action.\r\n   */\r\n  notifyWindowClosed() {\r\n    this.editorObject.editing.view.focus();\r\n  }\r\n}\r\n","/* eslint-disable max-classes-per-file */\r\nimport { Command } from \"ckeditor5/src/core.js\";\r\nimport CKEditor5Integration from \"./integration.js\";\r\n\r\n/**\r\n * Command for opening the MathType editor\r\n */\r\nexport class MathTypeCommand extends Command {\r\n  execute(options = {}) {\r\n    // Check we get a valid integration\r\n    // eslint-disable-next-line no-prototype-builtins\r\n    if (!options.hasOwnProperty(\"integration\") || !(options.integration instanceof CKEditor5Integration)) {\r\n      throw 'Must pass a valid CKEditor5Integration instance as attribute \"integration\" of options';\r\n    }\r\n\r\n    // Save the integration instance as a property of the command.\r\n    this.integration = options.integration;\r\n\r\n    // Set custom editor or disable it\r\n    this.setEditor();\r\n\r\n    // Open the editor\r\n    this.openEditor();\r\n  }\r\n\r\n  /**\r\n   * Sets the appropriate custom editor, if any, or disables them.\r\n   */\r\n  setEditor() {\r\n    // It's possible that a custom editor was last used.\r\n    // We need to disable it to avoid wrong behaviors.\r\n    this.integration.core.getCustomEditors().disable();\r\n  }\r\n\r\n  /**\r\n   * Checks whether we are editing an existing formula or a new one and opens the editor.\r\n   */\r\n  openEditor() {\r\n    this.integration.core.editionProperties.dbclick = false;\r\n    const image = this._getSelectedImage();\r\n    if (\r\n      typeof image !== \"undefined\" &&\r\n      image !== null &&\r\n      image.classList.contains(WirisPlugin.Configuration.get(\"imageClassName\"))\r\n    ) {\r\n      this.integration.core.editionProperties.temporalImage = image;\r\n      this.integration.openExistingFormulaEditor();\r\n    } else {\r\n      this.integration.openNewFormulaEditor();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the currently selected formula image\r\n   * @returns {Element} selected image, if any, undefined otherwise\r\n   */\r\n  _getSelectedImage() {\r\n    const { selection } = this.editor.editing.view.document;\r\n\r\n    // If we can not extract the formula, fall back to default behavior.\r\n    if (selection.isCollapsed || selection.rangeCount !== 1) {\r\n      return;\r\n    }\r\n\r\n    // Look for the <span> wrapping the formula and then for the <img/> inside\r\n\r\n    const range = selection.getFirstRange();\r\n\r\n    let image;\r\n\r\n    for (const span of range) {\r\n      if (span.item.name !== \"span\") {\r\n        return;\r\n      }\r\n      image = span.item.getChild(0);\r\n      break;\r\n    }\r\n\r\n    if (!image) {\r\n      return;\r\n    }\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    return this.editor.editing.view.domConverter.mapViewToDom(image);\r\n  }\r\n}\r\n\r\n/**\r\n * Command for opening the ChemType editor\r\n */\r\nexport class ChemTypeCommand extends MathTypeCommand {\r\n  setEditor() {\r\n    this.integration.core.getCustomEditors().enable(\"chemistry\");\r\n  }\r\n}\r\n","// CKEditor imports\r\nimport { Plugin } from \"ckeditor5/src/core.js\";\r\nimport { ButtonView } from \"ckeditor5/src/ui.js\";\r\nimport { ClickObserver, HtmlDataProcessor, XmlDataProcessor, ViewUpcastWriter } from \"ckeditor5/src/engine.js\";\r\nimport { Widget, toWidget, viewToModelPositionOutsideModelElement } from \"ckeditor5/src/widget.js\";\r\n\r\n// MathType API imports\r\nimport IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\r\nimport Core from \"@wiris/mathtype-html-integration-devkit/src/core.src.js\";\r\nimport Parser from \"@wiris/mathtype-html-integration-devkit/src/parser.js\";\r\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\r\nimport Image from \"@wiris/mathtype-html-integration-devkit/src/image.js\";\r\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\r\nimport Listeners from \"@wiris/mathtype-html-integration-devkit/src/listeners.js\";\r\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\r\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\r\nimport StringManager from \"@wiris/mathtype-html-integration-devkit/src/stringmanager.js\";\r\nimport \"@wiris/mathtype-html-integration-devkit/src/md5.js\";\r\n\r\n// Local imports\r\nimport { MathTypeCommand, ChemTypeCommand } from \"./commands.js\";\r\nimport CKEditor5Integration from \"./integration.js\";\r\n\r\nimport mathIcon from \"../theme/icons/ckeditor5-formula.svg\";\r\nimport chemIcon from \"../theme/icons/ckeditor5-chem.svg\";\r\n\r\nimport packageInfo from \"../package.json\";\r\n\r\nexport let currentInstance = null; // eslint-disable-line import/no-mutable-exports\r\n\r\nexport default class MathType extends Plugin {\r\n  static get requires() {\r\n    return [Widget];\r\n  }\r\n\r\n  static get pluginName() {\r\n    return \"MathType\";\r\n  }\r\n\r\n  init() {\r\n    // Create the MathType API Integration object\r\n    const integration = this._addIntegration();\r\n    currentInstance = integration;\r\n\r\n    // Add the MathType and ChemType commands to the editor\r\n    this._addCommands();\r\n\r\n    // Add the buttons for MathType and ChemType\r\n    this._addViews(integration);\r\n\r\n    // Registers the <mathml> element in the schema\r\n    this._addSchema();\r\n\r\n    // Add the downcast and upcast converters\r\n    this._addConverters(integration);\r\n\r\n    // Expose the WirisPlugin variable to the window\r\n    this._exposeWiris();\r\n  }\r\n\r\n  /**\r\n   * Inherited from Plugin class: Executed when CKEditor5 is destroyed\r\n   */\r\n  destroy() {\r\n    // eslint-disable-line class-methods-use-this\r\n    currentInstance?.destroy();\r\n  }\r\n\r\n  /**\r\n   * Create the MathType API Integration object\r\n   * @returns {CKEditor5Integration} the integration object\r\n   */\r\n  _addIntegration() {\r\n    const { editor } = this;\r\n\r\n    /**\r\n     * Integration model constructor attributes.\r\n     * @type {integrationModelProperties}\r\n     */\r\n    const integrationProperties = {};\r\n    integrationProperties.environment = {};\r\n    integrationProperties.environment.editor = \"CKEditor5\";\r\n    integrationProperties.environment.editorVersion = \"5.x\";\r\n    integrationProperties.version = packageInfo.version;\r\n    integrationProperties.editorObject = editor;\r\n    integrationProperties.serviceProviderProperties = {};\r\n    integrationProperties.serviceProviderProperties.URI = \"https://www.wiris.net/demo/plugins/app\";\r\n    integrationProperties.serviceProviderProperties.server = \"java\";\r\n    integrationProperties.target = editor.sourceElement;\r\n    integrationProperties.scriptName = \"bundle.js\";\r\n    integrationProperties.managesLanguage = true;\r\n    // etc\r\n\r\n    // There are platforms like Drupal that initialize CKEditor but they hide or remove the container element.\r\n    // To avoid a wrong behavior, this integration only starts if the workspace container exists.\r\n    let integration;\r\n    if (integrationProperties.target) {\r\n      // Instance of the integration associated to this editor instance\r\n      integration = new CKEditor5Integration(integrationProperties);\r\n      integration.init();\r\n      integration.listeners.fire(\"onTargetReady\", {});\r\n\r\n      integration.checkElement();\r\n\r\n      this.listenTo(\r\n        editor.editing.view.document,\r\n        \"click\",\r\n        (evt, data) => {\r\n          // Is Double-click\r\n          if (data.domEvent.detail === 2) {\r\n            integration.doubleClickHandler(data.domTarget, data.domEvent);\r\n            evt.stop();\r\n          }\r\n        },\r\n        { priority: \"highest\" },\r\n      );\r\n    }\r\n\r\n    return integration;\r\n  }\r\n\r\n  /**\r\n   * Add the MathType and ChemType commands to the editor\r\n   */\r\n  _addCommands() {\r\n    const { editor } = this;\r\n\r\n    // Add command to open the formula editor\r\n    editor.commands.add(\"MathType\", new MathTypeCommand(editor));\r\n\r\n    // Add command to open the chemistry formula editor\r\n    editor.commands.add(\"ChemType\", new ChemTypeCommand(editor));\r\n  }\r\n\r\n  /**\r\n   * Add the buttons for MathType and ChemType\r\n   * @param {CKEditor5Integration} integration the integration object\r\n   */\r\n  _addViews(integration) {\r\n    const { editor } = this;\r\n\r\n    // Check if MathType editor is enabled\r\n    if (Configuration.get(\"editorEnabled\")) {\r\n      // Add button for the formula editor\r\n      editor.ui.componentFactory.add(\"MathType\", (locale) => {\r\n        const view = new ButtonView(locale);\r\n\r\n        // View is enabled iff command is enabled\r\n        view.bind(\"isEnabled\").to(editor.commands.get(\"MathType\"), \"isEnabled\");\r\n        view.set({\r\n          label: StringManager.get(\"insert_math\", integration.getLanguage()),\r\n          icon: mathIcon,\r\n          tooltip: true,\r\n        });\r\n\r\n        // Callback executed once the image is clicked.\r\n        view.on(\"execute\", () => {\r\n          editor.execute(\"MathType\", {\r\n            integration, // Pass integration as parameter\r\n          });\r\n        });\r\n\r\n        return view;\r\n      });\r\n    }\r\n\r\n    // Check if ChemType editor is enabled\r\n    if (Configuration.get(\"chemEnabled\")) {\r\n      // Add button for the chemistry formula editor\r\n      editor.ui.componentFactory.add(\"ChemType\", (locale) => {\r\n        const view = new ButtonView(locale);\r\n\r\n        // View is enabled iff command is enabled\r\n        view.bind(\"isEnabled\").to(editor.commands.get(\"ChemType\"), \"isEnabled\");\r\n\r\n        view.set({\r\n          label: StringManager.get(\"insert_chem\", integration.getLanguage()),\r\n          icon: chemIcon,\r\n          tooltip: true,\r\n        });\r\n\r\n        // Callback executed once the image is clicked.\r\n        view.on(\"execute\", () => {\r\n          editor.execute(\"ChemType\", {\r\n            integration, // Pass integration as parameter\r\n          });\r\n        });\r\n\r\n        return view;\r\n      });\r\n    }\r\n\r\n    // Observer for the Double-click event\r\n    editor.editing.view.addObserver(ClickObserver);\r\n  }\r\n\r\n  /**\r\n   * Registers the <mathml> element in the schema\r\n   */\r\n  _addSchema() {\r\n    const { schema } = this.editor.model;\r\n\r\n    schema.register(\"mathml\", {\r\n      inheritAllFrom: \"$inlineObject\",\r\n      allowAttributes: [\"formula\", \"htmlContent\"],\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add the downcast and upcast converters\r\n   */\r\n  _addConverters(integration) {\r\n    const { editor } = this;\r\n\r\n    // Editing view -> Model\r\n    editor.conversion.for(\"upcast\").elementToElement({\r\n      view: {\r\n        name: \"span\",\r\n        classes: \"ck-math-widget\",\r\n      },\r\n      model: (viewElement, { writer: modelWriter }) => {\r\n        const formula = MathML.safeXmlDecode(viewElement.getChild(0).getAttribute(\"data-mathml\"));\r\n        return modelWriter.createElement(\"mathml\", {\r\n          formula,\r\n        });\r\n      },\r\n    });\r\n\r\n    // Data view -> Model\r\n    editor.data.upcastDispatcher.on(\"element:math\", (evt, data, conversionApi) => {\r\n      const { consumable, writer } = conversionApi;\r\n      const { viewItem } = data;\r\n\r\n      // When element was already consumed then skip it.\r\n      if (!consumable.test(viewItem, { name: true })) {\r\n        return;\r\n      }\r\n\r\n      // If we encounter any <math> with a LaTeX annotation inside,\r\n      // convert it into a \"$$...$$\" string.\r\n      const isLatex = mathIsLatex(viewItem); // eslint-disable-line no-use-before-define\r\n\r\n      // Get the formula of the <math> (which is all its children).\r\n      const processor = new XmlDataProcessor(editor.editing.view.document);\r\n\r\n      // Only god knows why the following line makes viewItem lose all of its children,\r\n      // so we obtain isLatex before doing this because we need viewItem's children for that.\r\n      const upcastWriter = new ViewUpcastWriter(editor.editing.view.document);\r\n      const viewDocumentFragment = upcastWriter.createDocumentFragment(viewItem.getChildren());\r\n\r\n      // and obtain the attributes of <math> too!\r\n      const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\r\n\r\n      // We process the document fragment\r\n      let formula = processor.toData(viewDocumentFragment) || \"\";\r\n\r\n      // And obtain the complete formula\r\n      formula = Util.htmlSanitize(`<math${mathAttributes}>${formula}</math>`);\r\n\r\n      // Replaces the < & > characters to its HTMLEntity to avoid render issues.\r\n      formula = formula.replaceAll('\"<\"', '\"&lt;\"').replaceAll('\">\"', '\"&gt;\"').replaceAll(\"><<\", \">&lt;<\");\r\n\r\n      /* Model node that contains what's going to actually be inserted. This can be either:\r\n            - A <mathml> element with a formula attribute set to the given formula, or\r\n            - If the original <math> had a LaTeX annotation, then the annotation surrounded by \"$$...$$\" */\r\n      const modelNode = isLatex\r\n        ? writer.createText(Parser.initParse(formula, integration.getLanguage()))\r\n        : writer.createElement(\"mathml\", { formula });\r\n\r\n      // Find allowed parent for element that we are going to insert.\r\n      // If current parent does not allow to insert element but one of the ancestors does\r\n      // then split nodes to allowed parent.\r\n      const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\r\n\r\n      // When there is no split result it means that we can't insert element to model tree, so let's skip it.\r\n      if (!splitResult) {\r\n        return;\r\n      }\r\n\r\n      // Insert element on allowed position.\r\n      conversionApi.writer.insert(modelNode, splitResult.position);\r\n\r\n      // Consume appropriate value from consumable values list.\r\n      consumable.consume(viewItem, { name: true });\r\n\r\n      const parts = conversionApi.getSplitParts(modelNode);\r\n\r\n      // Set conversion result range.\r\n      data.modelRange = writer.createRange(\r\n        conversionApi.writer.createPositionBefore(modelNode),\r\n        conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\r\n      );\r\n\r\n      // Now we need to check where the `modelCursor` should be.\r\n      if (splitResult.cursorParent) {\r\n        // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\r\n        //\r\n        // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\r\n        // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\r\n\r\n        data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\r\n      } else {\r\n        // Otherwise just continue after inserted element.\r\n        data.modelCursor = data.modelRange.end;\r\n      }\r\n    });\r\n\r\n    // Data view -> Model\r\n    editor.data.upcastDispatcher.on(\r\n      \"element:img\",\r\n      (evt, data, conversionApi) => {\r\n        const { consumable, writer } = conversionApi;\r\n        const { viewItem } = data;\r\n\r\n        // Only upcast when is wiris formula\r\n        if (viewItem.getClassNames().next().value !== \"Wirisformula\") {\r\n          return;\r\n        }\r\n\r\n        //  The following code ensures that the element's name, attributes, and classes are consumed.\r\n        // This means that they are marked as handled so that other parts of the system or plugins don't process them again.\r\n\r\n        // Check if we can consume the element name.\r\n        if (!consumable.test(viewItem, { name: true })) {\r\n          return;\r\n        }\r\n\r\n        // Consume the name, attributes, and classes so nothing else processes it.\r\n        consumable.consume(viewItem, { name: true });\r\n        for (const attrName of viewItem.getAttributes()) {\r\n          consumable.consume(viewItem, { attributes: [attrName] });\r\n        }\r\n\r\n        for (const className of viewItem.getClassNames()) {\r\n          consumable.consume(viewItem, { classes: [className] });\r\n        }\r\n\r\n        const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\r\n        const htmlContent = Util.htmlSanitize(`<img${mathAttributes}>`);\r\n\r\n        const modelNode = writer.createElement(\"mathml\", { htmlContent });\r\n\r\n        // Find allowed parent for element that we are going to insert.\r\n        // If current parent does not allow to insert element but one of the ancestors does\r\n        // then split nodes to allowed parent.\r\n        const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\r\n\r\n        // When there is no split result it means that we can't insert element to model tree, so let's skip it.\r\n        if (!splitResult) {\r\n          return;\r\n        }\r\n\r\n        // Insert element on allowed position.\r\n        conversionApi.writer.insert(modelNode, splitResult.position);\r\n\r\n        // Consume appropriate value from consumable values list.\r\n        consumable.consume(viewItem, { name: true });\r\n\r\n        const parts = conversionApi.getSplitParts(modelNode);\r\n\r\n        // Set conversion result range.\r\n        data.modelRange = writer.createRange(\r\n          conversionApi.writer.createPositionBefore(modelNode),\r\n          conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\r\n        );\r\n\r\n        // Now we need to check where the `modelCursor` should be.\r\n        if (splitResult.cursorParent) {\r\n          // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\r\n          //\r\n          // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\r\n          // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\r\n\r\n          data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\r\n        } else {\r\n          // Otherwise just continue after inserted element.\r\n          data.modelCursor = data.modelRange.end;\r\n        }\r\n      },\r\n      // Ensures MathType processes the Wiris formulas before other plugins, preventing conflicts.\r\n      { priority: \"high\" },\r\n    );\r\n\r\n    /**\r\n     * Whether the given view <math> element has a LaTeX annotation element.\r\n     * @param {*} math\r\n     * @returns {bool}\r\n     */\r\n    function mathIsLatex(math) {\r\n      const semantics = math.getChild(0);\r\n      if (!semantics || semantics.name !== \"semantics\") return false;\r\n      for (const child of semantics.getChildren()) {\r\n        if (child.name === \"annotation\" && child.getAttribute(\"encoding\") === \"LaTeX\") {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    function createViewWidget(modelItem, { writer: viewWriter }) {\r\n      const widgetElement = viewWriter.createContainerElement(\"span\", {\r\n        class: \"ck-math-widget\",\r\n      });\r\n\r\n      const mathUIElement = createViewImage(modelItem, { writer: viewWriter }); // eslint-disable-line no-use-before-define\r\n\r\n      if (mathUIElement) {\r\n        viewWriter.insert(viewWriter.createPositionAt(widgetElement, 0), mathUIElement);\r\n      }\r\n\r\n      return toWidget(widgetElement, viewWriter);\r\n    }\r\n\r\n    function createViewImage(modelItem, { writer: viewWriter }) {\r\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\r\n\r\n      const formula = modelItem.getAttribute(\"formula\");\r\n      const htmlContent = modelItem.getAttribute(\"htmlContent\");\r\n\r\n      if (!formula && !htmlContent) {\r\n        return null;\r\n      }\r\n\r\n      let imgElement = null;\r\n\r\n      if (htmlContent) {\r\n        imgElement = htmlDataProcessor.toView(htmlContent).getChild(0);\r\n      } else if (formula) {\r\n        const mathString = formula.replaceAll('ref=\"<\"', 'ref=\"&lt;\"');\r\n\r\n        const imgHtml = Parser.initParse(mathString, integration.getLanguage());\r\n        imgElement = htmlDataProcessor.toView(imgHtml).getChild(0);\r\n\r\n        // Add HTML element (<img>) to model\r\n        viewWriter.setAttribute(\"htmlContent\", imgHtml, modelItem);\r\n      }\r\n\r\n      /* Although we use the HtmlDataProcessor to obtain the attributes,\r\n       *  we must create a new EmptyElement which is independent of the\r\n       *  DataProcessor being used by this editor instance\r\n       */\r\n      if (imgElement) {\r\n        return viewWriter.createEmptyElement(\"img\", imgElement.getAttributes(), {\r\n          renderUnsafeAttributes: [\"src\"],\r\n        });\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    // Model -> Editing view\r\n    editor.conversion.for(\"editingDowncast\").elementToElement({\r\n      model: \"mathml\",\r\n      view: createViewWidget,\r\n    });\r\n\r\n    // Model -> Data view\r\n    editor.conversion.for(\"dataDowncast\").elementToElement({\r\n      model: \"mathml\",\r\n      view: createDataString, // eslint-disable-line no-use-before-define\r\n    });\r\n\r\n    /**\r\n     * Makes a copy of the given view node.\r\n     * @param {module:engine/view/node~Node} sourceNode Node to copy.\r\n     * @returns {module:engine/view/node~Node} Copy of the node.\r\n     */\r\n    function clone(viewWriter, sourceNode) {\r\n      if (sourceNode.is(\"text\")) {\r\n        return viewWriter.createText(sourceNode.data);\r\n      }\r\n      if (sourceNode.is(\"element\")) {\r\n        if (sourceNode.is(\"emptyElement\")) {\r\n          return viewWriter.createEmptyElement(sourceNode.name, sourceNode.getAttributes());\r\n        }\r\n        const element = viewWriter.createContainerElement(sourceNode.name, sourceNode.getAttributes());\r\n        for (const child of sourceNode.getChildren()) {\r\n          viewWriter.insert(viewWriter.createPositionAt(element, \"end\"), clone(viewWriter, child));\r\n        }\r\n        return element;\r\n      }\r\n\r\n      throw new Exception(\"Given node has unsupported type.\"); // eslint-disable-line no-undef\r\n    }\r\n\r\n    function createDataString(modelItem, { writer: viewWriter }) {\r\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\r\n\r\n      // Load img element\r\n      const mathString =\r\n        modelItem.getAttribute(\"htmlContent\") || Parser.endParseSaveMode(modelItem.getAttribute(\"formula\"));\r\n\r\n      const sourceMathElement = htmlDataProcessor.toView(mathString).getChild(0);\r\n\r\n      return clone(viewWriter, sourceMathElement);\r\n    }\r\n\r\n    // This stops the view selection getting into the <span>s and messing up caret movement\r\n    editor.editing.mapper.on(\r\n      \"viewToModelPosition\",\r\n      viewToModelPositionOutsideModelElement(editor.model, (viewElement) => viewElement.hasClass(\"ck-math-widget\")),\r\n    );\r\n\r\n    // Keep a reference to the original get and set function.\r\n    const { get, set } = editor.data;\r\n\r\n    /**\r\n     * Hack to transform $$latex$$ into <math> in editor.getData()'s output.\r\n     */\r\n    editor.data.on(\r\n      \"get\",\r\n      (e) => {\r\n        const output = e.return;\r\n        const parsedResult = Parser.endParse(output);\r\n\r\n        // Cleans all the semantics tag for safexml\r\n        // including the handwritten data points\r\n        e.return = MathML.removeSafeXMLSemantics(parsedResult);\r\n      },\r\n      { priority: \"low\" },\r\n    );\r\n\r\n    /**\r\n     * Hack to transform <math> with LaTeX into $$LaTeX$$ and formula images in editor.setData().\r\n     */\r\n    editor.data.on(\r\n      \"set\",\r\n      (e, args) => {\r\n        // Retrieve the data to be set on the CKEditor.\r\n        let modifiedData = args[0];\r\n        // Regex to find all mathml formulas.\r\n        const regexp = /(<img\\b[^>]*>)|(<math(.*?)<\\/math>)/gm;\r\n        const formulas = [];\r\n        let formula;\r\n\r\n        // Both data.set from the source plugin and console command are taken into account as the data received is MathML or an image containing the MathML.\r\n        while ((formula = regexp.exec(modifiedData)) !== null) {\r\n          formulas.push(formula[0]);\r\n        }\r\n\r\n        // Loop to find LaTeX and formula images and replace the MathML for the both.\r\n        formulas.forEach((formula) => {\r\n          if (formula.includes('encoding=\"LaTeX\"')) {\r\n            // LaTeX found.\r\n            const latex = `$$$${Latex.getLatexFromMathML(formula)}$$$`; // We add $$$ instead of $$ because the replace function ignores one $.\r\n            modifiedData = modifiedData.replace(formula, latex);\r\n          } else if (formula.includes(\"<img\")) {\r\n            // If we found a formula image, we should find MathML data, and then substitute the entire image.\r\n            const regexp = /«math\\b[^»]*»(.*?)«\\/math»/g;\r\n            const safexml = formula.match(regexp);\r\n            if (safexml !== null) {\r\n              const decodeXML = MathML.safeXmlDecode(safexml[0]);\r\n              modifiedData = modifiedData.replace(formula, decodeXML);\r\n            }\r\n          }\r\n        });\r\n\r\n        args[0] = modifiedData;\r\n      },\r\n      { priority: \"high\" },\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Expose the WirisPlugin variable to the window\r\n   */\r\n  // eslint-disable-next-line class-methods-use-this\r\n  _exposeWiris() {\r\n    window.WirisPlugin = {\r\n      Core,\r\n      Parser,\r\n      Image,\r\n      MathML,\r\n      Util,\r\n      Configuration,\r\n      Listeners,\r\n      IntegrationModel,\r\n      currentInstance,\r\n      Latex,\r\n    };\r\n  }\r\n}\r\n"],"names":["Constants","safeXmlCharactersEntities","tagOpener","tagCloser","doubleQuote","realDoubleQuote","safeBadBlackboardCharacters","ltElement","gtElement","ampElement","safeGoodBlackboardCharacters","xmlCharacters","id","ampersand","quote","safeXmlCharacters","MathML","isMathmlInAttribute","content","i","mathAtt","attContent","att","atts","regex","expression","RegExp","actualContent","substring","reversed","split","reverse","join","exists","test","safeXmlDecode","input","window","_wrs_blackboard","returnValue","currentEntity","length","character","charAt","match","safeXmlEncode","mathMLEntities","mathml","toReturn","codePointAt","end","indexOf","container","document","createElement","innerHTML","Util","fixedCharCodeAt","textContent","innerText","addCustomEditorClassAttribute","customEditor","start","substr","removeCustomEditorClassAttribute","replace","addAnnotation","annotationEncoding","containsAnnotation","mathmlWithAnnotation","closeSemanticsIndex","isEmpty","endIndexInline","endIndexNonInline","endIndex","beginMathMLContent","endMathmlContent","lastIndexOf","mathmlContent","removeAnnotation","mathmlWithoutAnnotation","openAnnotationTag","closeAnnotationTag","startAnnotationIndex","differentAnnotationFound","differentAnnotationIndex","closeIndex","endAnnotationIndex","startIndex","removeSemantics","semanticsStartingTagRegex","semanticsEndingTagRegex","removeSafeXMLSemantics","element","semanticsSafeStartingTagRegex","semanticsSafeEndingTagRegex","removeSemanticsOcurrences","text","characters","mathTagStart","mathTagEnd","mathTagEndline","semanticsTagStart","annotationTagStart","output","mathTagEndIndex","mathTagEndlineIndex","firstTagCloser","semanticsIndex","mmlTagStart","annotationIndex","mmlContent","containClass","mathML","className","classIndex","classTagEndIndex","classTag","closeTag","closeTagInline","firstCloseTagIndex","firstCloseTagInlineIndex","empty","mathTagEndRegex","mathTagEndArray","exec","index","encodeProperties","replacer","quoteIndex","propertyValue","propertyValueEncoded","htmlEntities","matchEncoded","mathmlEncoded","Configuration","addConfiguration","properties","Object","assign","_properties","value","get","key","prototype","hasOwnProperty","call","set","update","updateProperty","TextCache","cache","populate","Listeners","listeners","add","listener","push","fire","eventName","event","cancelled","callback","defaultPrevented","newListener","ServiceProvider","_listeners","addListener","fireEvent","parameters","_parameters","servicePaths","_servicePaths","setServicePath","service","path","getServicePath","serviceName","integrationPath","_integrationPath","getServerURL","url","location","href","arr","result","init","configurationURI","createServiceURI","createImageURI","showImageURI","getMathMLURI","serviceURI","URI","serverPath","getUrl","postVariables","currentPath","toString","httpRequest","createHttpRequest","open","header","convertStringToObject","entries","forEach","val","setRequestHeader","send","httpBuildQuery","responseText","getService","response","getVariables","serviceUrl","getServerLanguageFromService","extension","serverExtension","concatenateUrl","server","Latex","_cache","getLatexFromMathML","mathmlWithoutSemantics","data","mml","jsonResponse","JSON","parse","latex","status","latexHtmlEntitiesEncoded","mathmlWithSemantics","getMathMLFromLatex","includeLatexOnSemantics","latexCache","saveLatex","parseMathmlToLatex","mathTagBegin","openTarget","closeTarget","startAnnotation","closeAnnotation","getLatexFromTextNode","textNode","caretPosition","latexTags","defaultLatexTags","close","startNode","previousSibling","nodeType","getNextLatexPosition","currentNode","currentPosition","tag","position","nodeValue","nextSibling","node","isPrevious","endNode","endPosition","tagLength","startPosition","StringManager","Error","lang","language","slice","strings","console","warn","translations","eventTarget","createEvent","eventObject","initEvent","dispatchEvent","createEventObject","addEvent","callBackFunction","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","elementEventsMap","Map","addElementEvents","doubleClickHandler","mousedownHandler","mouseupHandler","removeElementEvents","entry","callbackDblclick","realEvent","srcElement","target","callbackMousedown","callbackMouseup","delete","addClass","containsClass","currentClasses","removeClass","newClassName","classes","trim","convertOldXmlinitialtextAttribute","xitpos","valpos","startquote","endquote","newvalue","keyValueString","map","pair","reduce","resultObject","tagName","attributes","creator","undefined","html","keys","attributeName","e","setAttribute","createObject","objectCode","recursiveParamsFix","object","getAttribute","attributesParsed","nodeName","param","NAME","name","VALUE","removeAttribute","parentNode","replaceChild","applet","childNodes","toLowerCase","appendChild","firstChild","createObjectCode","specified","path1","path2","separator","htmlSanitize","annotationRegex","annotation","DOMPurify","sanitize","ADD_TAGS","ADD_ATTR","htmlEntitiesDecode","textarea","XMLHttpRequest","ActiveXObject","oc","urlEncode","propertiesToString","hash","n","j","s1","s2","compareStrings","a","b","an","bn","c","string","idx","code","charCodeAt","hi","low","Number","isNaN","urlToAssArray","query","ss","h","s","kv","decodeURIComponent","clearString","encodeURIComponent","getWIRISImageOutput","imgCode","convertToXml","convertToSafeXml","imgObject","dataMathML","safeMathML","getNodeLength","staticNodeLengths","IMG","BR","toUpperCase","getSelectedItem","isIframe","forceGetSelection","windowTarget","contentWindow","focus","selection","range","createRange","parentElement","htmlText","execCommand","temporalObject","pasteHTML","getElementById","createTextNode","insertBefore","removeChild","item","getSelection","getRangeAt","startContainer","startOffset","endContainer","endOffset","localName","classList","contains","remove","emptySpan","getSelectedItemOnTextarea","textNodeValues","selectionStart","getElementsByNameFromString","autoClosed","elements","endString","decode64","PLUS","SLASH","NUMBER","LOWER","UPPER","PLUS_URL_SAFE","SLASH_URL_SAFE","b64ToByteArray","b64String","tmp","l","placeHolders","readInt32","bytes","int32","splice","readByte","shift","readBytes","pos","len","updateTextArea","selectionEnd","selectionEndSub","updateExistingTextOnTextarea","textareaStart","addArgument","parameter","sep","Image","removeImgDataAttributes","img","attributesToRemove","attribute","clone","originImg","destImg","customEditorAttributeName","hasAttribute","mathmlAttributeName","imgAttributes","iterator","originAttribute","isSvg","src","startsWith","isBase64","setImgSize","uri","ar","base64String","svgString","getMetricsFromSvgString","String","fromCharCode","getMetricsFromBytes","width","cw","height","ch","baseline","cb","dpi","style","verticalAlign","fixAfterResize","maxWidth","processImg","atob","encodedSvgString","svg","base64","reader","FileReader","onload","fetch","then","r","blob","readAsDataURL","first","last","typ","Math","round","Accessibility","mathMLToAccessible","mode","ignoreStyles","accessibleText","accessibleJsonResponse","Parser","mathmlToImgObject","wirisProperties","align","wirisEditorProperties","metrics","centerbaseline","mathmlSubstring","createShowImageSrc","format","alt","createImageSrc","observer","observe","baseParts","pop","initParse","initParseSaveMode","initParseEditMode","parseMathmlToImg","codeImgTransform","imgList","token","carry","mathmlStartToken","mathmlStart","mathmlEnd","latexStartPosition","latexEndPosition","replaceText","endParse","codeEndParsedEditMode","endParseEditMode","codeEndParseSaveMode","endParseSaveMode","decodedLatex","savemode","base64savemode","createShowImageSrcData","dataMd5","renderParams","dataObject","formula","com","wiris","js","JsPluginTools","md5encode","version","pattern","patternLength","source","lastIndex","characterNextPosition","xmlCode","imageMathmlAtrribute","MutationObserver","mutationObserver","mutations","mutation","oldValue","create","Config","attributeOldValue","getPrototypeOf","EditorListener","isContentChanged","waitingForChanges","setIsContentChanged","getIsContentChanged","setWaitingForChanges","caretPositionChanged","_editor","clipboardChanged","contentChanged","styleChanged","transformationReceived","wasm","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachedUint8Memory0","getUint8Memory0","byteLength","Uint8Array","memory","buffer","getStringFromWasm0","ptr","subarray","heap","Array","fill","heap_next","addHeapObject","obj","getObject","dropObject","takeObject","ret","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encode","encodeString","encodeInto","arg","view","buf","read","written","passStringToWasm0","malloc","realloc","mem","offset","isLikeNone","x","cachedInt32Memory0","getInt32Memory0","Int32Array","cachedFloat64Memory0","getFloat64Memory0","Float64Array","cachedBigInt64Memory0","getBigInt64Memory0","BigInt64Array","debugString","type","description","isArray","debug","builtInMatches","stringify","_","message","stack","makeClosure","arg0","arg1","dtor","f","state","cnt","real","args","__wbindgen_export_2","original","__wbg_adapter_46","arg2","__wbindgen_export_3","makeMutClosure","__wbg_adapter_49","__wbindgen_export_4","__wbg_adapter_52","__wbindgen_export_5","handleError","apply","__wbindgen_export_6","__wbg_adapter_103","arg3","__wbindgen_export_7","getArrayU8FromWasm0","Telemeter","__destroy_into_raw","__wbg_ptr","free","__wbg_telemeter_free","solution","hosts","config","retptr","__wbindgen_add_to_stack_pointer","telemeter_new","r0","r1","r2","identify","sender_id","ptr0","__wbindgen_export_0","__wbindgen_export_1","len0","telemeter_identify","track","event_type","event_payload","telemeter_track","log","level","payload","telemeter_log","finish","telemeter_finish","new_debug_status","telemeter_debug","__wbg_load","module","imports","Response","WebAssembly","instantiateStreaming","headers","arrayBuffer","instantiate","instance","Instance","__wbg_get_imports","wbg","__wbindgen_string_new","__wbg_new_c728d68b8b34487e","__wbg_status_7841bb47be2a8f16","__wbg_headers_ea7ef583d1564b08","__wbg_new0_ad75dd38f92424e2","Date","__wbg_getTime_ed6ee333b702f8fc","getTime","__wbindgen_object_drop_ref","__wbindgen_is_object","__wbg_crypto_58f13aa23ffcb166","crypto","__wbg_process_5b786e71d465a513","process","__wbg_versions_c2ab80650590b6a2","versions","__wbg_node_523d7bd03ef69fba","__wbindgen_is_string","__wbg_msCrypto_abcb1295e768d1f2","msCrypto","__wbg_require_2784e593a4674877","require","arguments","__wbg_newwithlength_13b5319ab422dcf6","__wbg_get_4a9aa5157afeb382","__wbg_next_1989a20442400aaa","next","__wbg_done_bc26bf4ada718266","done","__wbg_value_0570714ff7d75f35","__wbg_iterator_7ee1a391d310f8e4","Symbol","__wbg_get_2aff440840bb6202","Reflect","__wbg_next_15da6a3df9290720","__wbindgen_is_function","__wbg_call_669127b9d730c650","__wbindgen_object_clone_ref","__wbg_self_3fad056edded10bd","self","__wbg_window_a4f46c98a61d4089","__wbg_globalThis_17eff828815f7d84","globalThis","__wbg_global_46f939f6541643c5","global","__wbindgen_is_undefined","__wbg_newnoargs_ccdcae30fd002262","Function","__wbg_isArray_38525be7442aa21e","__wbg_call_53fc3abd42e24ec8","__wbg_isSafeInteger_c38b0a16d0c7cef7","isSafeInteger","__wbg_new_feb65b865d980ae2","state0","cb0","Promise","__wbindgen_memory","__wbg_buffer_344d9b41efe96da7","__wbg_new_d8a000788389a31e","__wbg_set_dcfd613a3420f908","__wbg_length_a5587d6cd79ab197","__wbindgen_string_get","ptr1","len1","__wbg_stringify_4039297315a25b00","__wbg_set_40f7786a25a9cc7e","__wbg_has_cdf8b85f6e903c80","has","__wbg_fetch_701fcd2bde06379a","__wbg_fetch_b5d6bebed1e6c2d2","__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3","__wbg_new_e4960143e41697a4","AbortController","__wbg_signal_1ed842bebd6ae322","signal","__wbg_abort_8355f201f30300bb","abort","__wbindgen_error_new","__wbindgen_jsval_loose_eq","__wbindgen_boolean_get","v","__wbindgen_number_get","__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1","__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d","ArrayBuffer","__wbg_entries_6d727b73ee02b7ce","__wbg_String_917f38a1211cf44b","__wbg_warn_ade8d3b7ecee11ff","__wbg_readyState_13e55da5ad6d64e2","readyState","__wbg_warn_4affe1093892a4ef","__wbg_close_f4135085ec3fc8f0","__wbg_new_b9b318679315404f","WebSocket","__wbg_setbinaryType_dcb62e0f2b346301","binaryType","__wbg_log_7811587c4c6d2844","__wbg_error_f0a6627f4b23c19d","error","__wbg_info_3ca7870690403fee","info","__wbg_document_183cf1eecfdbffee","__wbg_visibilityState_9721703a5ef75faf","visibilityState","__wbg_getwithrefkey_3b3c46ba20582127","__wbg_length_cace2e0b3ddc0502","__wbg_addEventListener_0f2891b0794e07fa","__wbg_removeEventListener_104d11302bb212d1","__wbindgen_is_bigint","__wbindgen_bigint_from_i64","__wbindgen_in","__wbindgen_bigint_from_u64","BigInt","asUintN","__wbindgen_jsval_eq","__wbg_localStorage_e11f72e996a4f5d9","localStorage","__wbg_getItem_c81cd3ae30cd579a","getItem","__wbg_navigator_7078da62d92ff5ad","navigator","__wbg_mediaDevices_e00b1f64d2b9939f","mediaDevices","__wbg_enumerateDevices_619d52f5eef34c2f","enumerateDevices","__wbg_setItem_fe04f524052a3839","arg4","setItem","__wbindgen_cb_drop","__wbg_deviceId_58f7da2228a26c02","deviceId","__wbg_instanceof_Response_944e2745b5db71f5","__wbg_randomFillSync_a0d98aa11c81fe89","randomFillSync","__wbg_subarray_6ca5cfa7fbb9abbe","__wbg_getRandomValues_504510b5564925af","getRandomValues","__wbindgen_bigint_get_as_i64","__wbindgen_debug_string","__wbindgen_throw","__wbg_then_89e1c559530b85cf","__wbg_queueMicrotask_e5949c35d772a669","queueMicrotask","__wbg_then_1bbc9edafd859b06","__wbg_queueMicrotask_2be8b97a81fe4d00","__wbg_resolve_a3252b2860f0a09e","resolve","__wbg_url_1f609e63ff1a7983","__wbg_send_2860805104507701","__wbg_instanceof_Window_cde2416cf5126a72","Window","__wbg_new_19676474aa414d62","Headers","__wbg_append_feec4143bbf21904","append","__wbg_newwithstrandinit_29038da14d09e330","Request","__wbindgen_closure_wrapper1532","__wbindgen_closure_wrapper1602","__wbindgen_closure_wrapper1834","__wbg_finalize_init","exports","__wbg_init","__wbindgen_wasm_module","__wbindgen_start","URL","telemeterAttributes","telemeter","waitingForInit","TelemeterWASM","catch","finally","local_telemeter","ContentManager","contentManagerAttributes","editorAttributes","customEditors","environment","editorListener","editor","ua","userAgent","deviceProperties","isAndroid","isIOS","toolbar","dbclick","modalDialogInstance","isNewElement","integrationModel","setIntegrationModel","setModalDialogInstance","insert","updateTitle","insertEditor","isEditorLoaded","jsEditor","JsEditor","newInstance","insertInto","contentContainer","rtl","getEditorModel","isRTL","action","direction","addEditorListener","setTimeout","hideKeyboard","formulaDisplayDiv","getElementsByClassName","handleOpenedIosSoftkeyboard","handleClosedIosSoftkeyboard","bind","addEditorAsExternalDependency","script","editorUrl","anchorElement","setHrefToAnchorElement","setProtocolToAnchorElement","getURLFromAnchorElement","stats","getEditorStats","getElementsByTagName","protocol","removePort","port","hostname","pathname","includes","platform","isMobile","setInitialContent","setMathML","focusDisabled","setMathMLWithCallback","onFocus","submitAction","isFormulaEmpty","getMathMLWithSemantics","getActiveEditor","editors","mathmlEntitiesEncoded","updateFormula","disable","notifyWindowClosed","setEmptyMathML","forcedHandMode","onOpen","updateToolbar","zoom","documentElement","clientWidth","innerWidth","setKeyboardMode","trigger","Core","globalListeners","hideHandModeButton","openHandOnKeyboardMathML","wrsEditor","forced","handSwitchHidden","handModeButtonSelector","mutationInstance","handModeButton","querySelector","hidden","disconnect","body","childList","characterData","subtree","waitForHand","handEditor","hand","handTemporalMathML","getMathML","handCoordinates","editorModel","getHandStrokes","setStrokes","fitStrokes","openHand","_wrs_int_wirisProperties","setToolbar","getToolbar","setTitle","title","setParams","setCustomHeaders","headersObj","customHeaders","hasChanges","onKeyDown","keyboardEvent","repeat","list","cancelAction","stopPropagation","preventDefault","shiftKey","activeElement","submitButton","closeDiv","minimizeDiv","cancelButton","CustomEditors","activeEditor","addEditor","editorName","editorParams","icon","confVariable","tooltip","enable","customEditorName","jsProperties","imageCustomEditorName","imageClassName","CASClassName","Event","cancel","PopUpMessage","popupMessageAttributes","overlayElement","callbacks","overlayWrapper","paragraph","overlay","buttonArea","buttonSubmitArguments","class","submitString","closeButton","createButton","closeAction","buttonCancelArguments","cancelString","show","display","blur","cancelCallback","closeCallback","IntegrationModel","setActionsOnCancelButtons","focusProtection","protect","modalElement","editorElement","overrideFocusBehavior","originalElementFocus","HTMLElement","originalElementBlur","unprotect","ModalDialog","modalDialogAttributes","iosSoftkeyboardOpened","iosMeasureUnit","iosDivHeight","deviceWidth","outerWidth","deviceHeight","outerHeight","landscape","portrait","instanceId","orientation","isDesktop","created","previousState","bottom","right","size","websiteBeforeLockParameters","getElementId","titleBar","generalStyleClose","btoa","closeIcon","hoverStyleClose","closeHoverIcon","stackDiv","generalStyleStack","minsIcon","hoverStyleStack","minsHoverIcon","maximizeDiv","generalStyleMaximize","fullsIcon","hoverStyleMaximize","fullsHoverIcon","generalStyleMinimize","minIcon","hoverStyleMinimize","minHoverIcon","role","wrapper","controls","buttonContainer","createSubmitButton","contentManager","popupStrings","popupupProperties","popup","setContentManager","getContentManager","showPopUpMessage","SubmitButton","dataset","testid","getElement","recalculateScrollBar","createModalWindowDesktop","createResizeButtons","addListeners","maximize","createModalWindowAndroid","createModalWindowIos","scrollbarWidth","offsetWidth","resizerBR","resizerTL","activateResizeStateBR","activateResizeStateTL","mouseEvent","initializeResizeProperties","leftOption","resizeDataObject","eventClient","X","y","Y","initialWidth","parseInt","initialHeight","initialRight","initialBottom","leftScale","restoreWebsiteScale","lockWebsiteScroll","restoreState","displayEditor","isMoodle","saveModalProperties","unlockWebsiteScroll","destroy","removeListeners","viewportmeta","contentAttrsToUpdate","contentAttrsValuesToUpdate","setMetaAttrFunc","viewportelement","contentAttrs","contentAttr","attrArray","finalContentMeta","oldAttrs","isAttrToUpdate","attr","bodyStylePosition","bodyStyleOverflow","overflow","htmlStyleOverflow","windowScrollX","scrollX","windowScrollY","scrollY","scrollTo","isIE11","search","orientationChangeAndroidSoftkeyboard","orientationChangeIosSoftkeyboard","minimize","generalStyle","hoverStyle","restoreModalProperties","setResizeButtonsVisibility","recalculatePosition","recalculateScale","cursor","maxIcon","maxHoverIcon","left","top","setSize","innerHeight","clientHeight","offsetHeight","setPosition","recalculateSize","reExpand","visibility","keyCode","click","startDrag","stopDrag","drag","onWindowResize","clientX","changedTouches","client","clientY","dragDataObject","lastDrag","limitWindow","getLimitWindow","limitY","min","minPointer","max","maxPointer","limitX","dragX","dragY","transform","scaleMultiplier","maxHeight","contStyleBottom","contStyleRight","pageXOffset","offSetToolbarY","offSetToolbarX","minPointerY","maxPointerY","minPointerX","maxPointerX","getScrollBarWidth","inner","outer","widthOuter","widthInner","sizeModified","hasScrollBar","inputField","portraitMode","setContainerHeight","flexGrow","TypeError","second","defineProperty","configurable","writable","varArgs","to","nextSource","nextKey","searchElement","fromIndex","o","k","abs","sameValueZero","rawPos","coreProperties","editMode","modalDialog","chemEditorParams","editionProperties","temporalImage","latexRange","editionStartTime","browser","serviceProviderProperties","_globalListeners","initialized","_initialized","setEnvironment","integrationEnvironment","setHeaders","headerObject","getModalDialog","serviceProviderListener","jsConfiguration","jsonConfiguration","addGlobalListener","beforeUpdateFormula","beforeUpdateEvent","insertFormula","focusElement","returnObject","insertElementOnSelection","fillNonLatexNode","afterUpdateEvent","afterUpdateFormula","placeCaretAfterNode","nodeDocument","ownerDocument","setStartAfter","collapse","removeAllRanges","addRange","mathmlOrigin","editorSelection","deleteContents","splitText","select","insertNode","mathml_origin","elapsed_time","now","editor_origin","openModalDialog","selectedItem","getMathmlFromTextNode","latexResult","leftOffset","previousNode","moveToElementText","move","moveEnd","setStart","setEnd","defaultEditorAttributesArray","defaultEditorAttributes","tempAttribute","serverEditorParameters","clientEditorParameters","editorParameters","getCustomEditors","integrationModelProperties","configurationService","scriptName","callbackMethodArguments","editorObject","managesLanguage","integrationParameters","temporalImageResizing","core","getLanguage","callbackFunction","configurationIndex","subsTring","serviceParametersURI","getPath","setCore","offlineModal","offlineModalContent","offlineModalClose","offlineModalWarn","warnIcon","offlineModalMessage","offlineModalMessage1","offlineModalMessage2","modal","solutionTelemeter","M","lms","nam","fam","ver","moodleVersion","category","moodleCourseCategory","course","moodleCourseName","OSData","getOS","broswerData","getBrowser","detectedBrowser","versionBrowser","editorVersion","detectedOS","versionOS","filter","dry_run","api_key","macosPlatforms","windowsPlatforms","iosPlatforms","col","getVersion","setLanguage","getCore","setTarget","setEditorObject","openNewFormulaEditor","onLine","openExistingFormulaEditor","util","EditorUtils","addEvents","removeEvents","getBrowserLanguage","userLanguage","currentInstance","WirisPlugin","HxOverrides","__name__","dateStr","date","m","getMonth","d","getDate","getHours","mi","getMinutes","getSeconds","getFullYear","strDate","setTime","setUTCHours","setUTCMinutes","setUTCSeconds","t","cca","iter","cur","hasNext","IntIter","__class__","Std","Boot","__instanceof","__string_rec","parseFloat","random","floor","tryReady","main","ev","getInstance","haxe","Timer","delay","$bind","bypassEncapsulation","Md5","doLoad","ready","Lib","Log","trace","infos","__trace","clear","__clear_trace","doEncode","str","str2blks","olda","oldb","oldc","oldd","ff","gg","hh","ii","addme","rhex","cmn","bitXOR","bitOR","bitAND","q","rol","num","nblk","blks","_g1","_g","hex_chr","lsw","msw","lsb","msb31","time_ms","me","setInterval","run","stop","measure","t0","stamp","clearInterval","__unhtml","msg","fileName","lineNumber","isClass","isEnum","__ename__","getClass","__enum__","i1","tostr","hasp","__interfLoop","cc","cl","intf","__interfaces__","__super__","Int","ceil","Float","Bool","Dynamic","Class","Enum","__cast","alert","eval","setErrorHandler","onerror","method","scope","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","isFinite","Boolean","line","CKEditor5Integration","ckeditorIntegrationModelProperties","integrationFolderName","languageObject","ui","locale","uiLanguage","addEditorListeners","wirislistenersdisabled","checkElement","newElement","sourceElement","wirisActive","isReadOnly","customEditorAttr","getCorePath","editing","insertMathml","model","change","writer","modelElementNew","fromEntries","getAttributes","viewSelection","modelPosition","mapper","toModelPosition","getLastPosition","insertObject","isCollapsed","getRanges","toModelRange","createPositionAfter","setSelection","viewElement","domConverter","domToView","parent","modelElementOld","toModelElement","createPositionBefore","findText","pivot","createRangeIn","descendants","from","getItems","viewElementData","replaceAll","is","createPositionAt","latexEdited","dataOffset","second$","insertText","viewToDom","toViewElement","MathTypeCommand","Command","execute","options","integration","setEditor","openEditor","image","_getSelectedImage","rangeCount","getFirstRange","span","getChild","mapViewToDom","ChemTypeCommand","MathType","Plugin","requires","Widget","pluginName","_addIntegration","_addCommands","_addViews","_addSchema","_addConverters","_exposeWiris","integrationProperties","packageInfo","listenTo","evt","domEvent","detail","domTarget","priority","commands","componentFactory","ButtonView","label","mathIcon","on","chemIcon","addObserver","ClickObserver","schema","register","inheritAllFrom","allowAttributes","conversion","for","elementToElement","modelWriter","upcastDispatcher","conversionApi","consumable","viewItem","isLatex","mathIsLatex","processor","XmlDataProcessor","upcastWriter","ViewUpcastWriter","viewDocumentFragment","createDocumentFragment","getChildren","mathAttributes","toData","modelNode","createText","splitResult","splitToAllowedParent","modelCursor","consume","parts","getSplitParts","modelRange","cursorParent","getClassNames","attrName","htmlContent","math","semantics","child","createViewWidget","modelItem","viewWriter","widgetElement","createContainerElement","mathUIElement","createViewImage","toWidget","htmlDataProcessor","HtmlDataProcessor","imgElement","toView","mathString","imgHtml","createEmptyElement","renderUnsafeAttributes","createDataString","sourceNode","Exception","sourceMathElement","viewToModelPositionOutsideModelElement","hasClass","return","parsedResult","modifiedData","regexp","formulas","safexml","decodeXML"],"mappings":"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","x_google_ignoreList":[0]}