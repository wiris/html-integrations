{"version":3,"file":"index.umd.js","sources":["../../../../node_modules/dompurify/dist/purify.es.mjs","../../../devkit/src/constants.js","../../../devkit/src/mathml.js","../../../devkit/src/configuration.js","../../../devkit/src/textcache.js","../../../devkit/src/listeners.js","../../../devkit/src/serviceprovider.js","../../../devkit/src/latex.js","../../../devkit/src/stringmanager.js","../../../devkit/src/util.js","../../../devkit/src/image.js","../../../devkit/src/accessibility.js","../../../devkit/src/parser.js","../../../devkit/src/editorlistener.js","../../../devkit/telemeter-wasm/telemeter_wasm.js","../../../devkit/src/telemeter.js","../../../devkit/src/contentmanager.js","../../../devkit/src/customeditors.js","../../../devkit/src/jsvariables.js","../../../devkit/src/event.js","../../../devkit/src/popupmessage.js","../../../devkit/src/modal.js","../../../devkit/src/polyfills.js","../../../devkit/src/core.src.js","../../../devkit/src/integrationmodel.js","../../src/integration.js","../../src/commands.js","../../src/plugin.js"],"sourcesContent":["/*! @license DOMPurify 3.2.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.2/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n// SVG\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.2.2';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      let value = name === 'value' ? attrValue : stringTrim(attrValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_) {}\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint) {\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","/**\n * This class represents all the constants needed in a MathType integration among different classes.\n * If a constant should be used across different classes should be defined using attribute\n * accessors.\n */\nexport default class Constants {\n  /**\n   * Safe XML entities.\n   * @type {Object}\n   */\n  static get safeXmlCharactersEntities() {\n    return {\n      tagOpener: \"&laquo;\",\n      tagCloser: \"&raquo;\",\n      doubleQuote: \"&uml;\",\n      realDoubleQuote: \"&quot;\",\n    };\n  }\n\n  /**\n   * Blackboard invalid safe characters.\n   * @type {Object}\n   */\n  static get safeBadBlackboardCharacters() {\n    return {\n      ltElement: \"«mo»<«/mo»\",\n      gtElement: \"«mo»>«/mo»\",\n      ampElement: \"«mo»&«/mo»\",\n    };\n  }\n\n  /**\n   * Blackboard valid safe characters.\n   * @type{Object}\n   */\n  static get safeGoodBlackboardCharacters() {\n    return {\n      ltElement: \"«mo»§lt;«/mo»\",\n      gtElement: \"«mo»§gt;«/mo»\",\n      ampElement: \"«mo»§amp;«/mo»\",\n    };\n  }\n\n  /**\n   * Standard XML special characters.\n   * @type {Object}\n   */\n  static get xmlCharacters() {\n    return {\n      id: \"xmlCharacters\",\n      tagOpener: \"<\", // Hex: \\x3C.\n      tagCloser: \">\", // Hex: \\x3E.\n      doubleQuote: '\"', // Hex: \\x22.\n      ampersand: \"&\", // Hex: \\x26.\n      quote: \"'\", // Hex: \\x27.\n    };\n  }\n\n  /**\n   * Safe XML special characters. This characters are used instead the standard\n   * the standard to parse the  MathML if safeXML save mode is enable. Each XML\n   * special character have a UTF-8 representation.\n   * @type {Object}\n   */\n  static get safeXmlCharacters() {\n    return {\n      id: \"safeXmlCharacters\",\n      tagOpener: \"«\", // Hex: \\xAB.\n      tagCloser: \"»\", // Hex: \\xBB.\n      doubleQuote: \"¨\", // Hex: \\xA8.\n      ampersand: \"§\", // Hex: \\xA7.\n      quote: \"`\", // Hex: \\x60.\n      realDoubleQuote: \"¨\",\n    };\n  }\n}\n","import Constants from \"./constants\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents a class to manage MathML objects.\n */\nexport default class MathML {\n  /**\n   * Checks if the mathml at position i is inside an HTML attribute or not.\n   * @param {string} content - a string containing MathML code.\n   * @param {number} i -  search index.\n   * @return {boolean} true if is inside an HTML attribute. false otherwise.\n   */\n  static isMathmlInAttribute(content, i) {\n    // Regex =\n    // '^[\\'\"][\\\\s]*=[\\\\s]*[\\\\w-]+([\\\\s]*(\"[^\"]*\"|\\'[^\\']*\\')[\\\\s]*\n    // =[\\\\s]*[\\\\w-]+[\\\\s]*)*[\\\\s]+gmi<';\n    const mathAtt = \"['\\\"][\\\\s]*=[\\\\s]*[\\\\w-]+\"; // \"=att OR '=att\n    const attContent = \"\\\"[^\\\"]*\\\"|'[^']*'\"; // \"blabla\" OR 'blabla'\n    const att = `[\\\\s]*(${attContent})[\\\\s]*=[\\\\s]*[\\\\w-]+[\\\\s]*`; // \"blabla\"=att OR 'blabla'=att\n    const atts = `('${att}')*`; // \"blabla\"=att1 \"blabla\"=att2\n    const regex = `^${mathAtt}${atts}[\\\\s]+gmi<`; // \"=att \"blabla\"=att1 \"blabla\"=att2 gmi< .\n    const expression = new RegExp(regex);\n\n    const actualContent = content.substring(0, i);\n    const reversed = actualContent.split(\"\").reverse().join(\"\");\n    const exists = expression.test(reversed);\n\n    return exists;\n  }\n\n  /**\n   * Decodes an encoded MathML with standard XML tags.\n   * We use these entities because IE doesn't support html entities\n   * on its attributes sometimes. Yes, sometimes.\n   * @param {string} input - string to be decoded.\n   * @return {string} decoded string.\n   */\n  static safeXmlDecode(input) {\n    let { tagOpener } = Constants.safeXmlCharactersEntities;\n    let { tagCloser } = Constants.safeXmlCharactersEntities;\n    let { doubleQuote } = Constants.safeXmlCharactersEntities;\n    let { realDoubleQuote } = Constants.safeXmlCharactersEntities;\n    // Decoding entities.\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\n    // Added to fix problem due to import from 1.9.x.\n    input = input.split(realDoubleQuote).join(Constants.safeXmlCharacters.realDoubleQuote);\n\n    // Blackboard.\n    const { ltElement } = Constants.safeBadBlackboardCharacters;\n    const { gtElement } = Constants.safeBadBlackboardCharacters;\n    const { ampElement } = Constants.safeBadBlackboardCharacters;\n    if (\"_wrs_blackboard\" in window && window._wrs_blackboard) {\n      input = input.split(ltElement).join(Constants.safeGoodBlackboardCharacters.ltElement);\n      input = input.split(gtElement).join(Constants.safeGoodBlackboardCharacters.gtElement);\n      input = input.split(ampElement).join(Constants.safeGoodBlackboardCharacters.ampElement);\n    }\n\n    ({ tagOpener } = Constants.safeXmlCharacters);\n    ({ tagCloser } = Constants.safeXmlCharacters);\n    ({ doubleQuote } = Constants.safeXmlCharacters);\n    ({ realDoubleQuote } = Constants.safeXmlCharacters);\n    const { ampersand } = Constants.safeXmlCharacters;\n    const { quote } = Constants.safeXmlCharacters;\n\n    // Decoding characters.\n    input = input.split(tagOpener).join(Constants.xmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.xmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.xmlCharacters.doubleQuote);\n    input = input.split(ampersand).join(Constants.xmlCharacters.ampersand);\n    input = input.split(quote).join(Constants.xmlCharacters.quote);\n\n    // We are replacing $ by & when its part of an entity for retro-compatibility.\n    // Now, the standard is replace § by &.\n    let returnValue = \"\";\n    let currentEntity = null;\n\n    for (let i = 0; i < input.length; i += 1) {\n      const character = input.charAt(i);\n      if (currentEntity == null) {\n        if (character === \"$\") {\n          currentEntity = \"\";\n        } else {\n          returnValue += character;\n        }\n      } else if (character === \";\") {\n        returnValue += `&${currentEntity}`;\n        currentEntity = null;\n      } else if (character.match(/([a-zA-Z0-9#._-] | '-')/)) {\n        // Character is part of an entity.\n        currentEntity += character;\n      } else {\n        returnValue += `$${currentEntity}`; // Is not an entity.\n        currentEntity = null;\n        i -= 1; // Parse again the current character.\n      }\n    }\n\n    return returnValue;\n  }\n\n  /**\n   * Encodes a MathML with standard XML tags to a MMathML encoded with safe XML tags.\n   * We use these entities because IE doesn't support html entities on its attributes sometimes.\n   * @param {string} input - input string to be encoded\n   * @returns {string} encoded string.\n   */\n  static safeXmlEncode(input) {\n    const { tagOpener } = Constants.xmlCharacters;\n    const { tagCloser } = Constants.xmlCharacters;\n    const { doubleQuote } = Constants.xmlCharacters;\n    const { ampersand } = Constants.xmlCharacters;\n    const { quote } = Constants.xmlCharacters;\n\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\n    input = input.split(ampersand).join(Constants.safeXmlCharacters.ampersand);\n    input = input.split(quote).join(Constants.safeXmlCharacters.quote);\n\n    return input;\n  }\n\n  /**\n   * Converts special symbols (> 128) to entities and replaces all textual\n   * entities by its number entities.\n   * @param {string} mathml - MathML string containing - or not - special symbols\n   * @returns {string} MathML with all textual entities replaced.\n   */\n  static mathMLEntities(mathml) {\n    let toReturn = \"\";\n\n    for (let i = 0; i < mathml.length; i += 1) {\n      const character = mathml.charAt(i);\n\n      // Parsing > 128 characters.\n      if (mathml.codePointAt(i) > 128) {\n        toReturn += `&#${mathml.codePointAt(i)};`;\n        // For UTF-32 characters we need to move the index one position.\n        if (mathml.codePointAt(i) > 0xffff) {\n          i += 1;\n        }\n      } else if (character === \"&\") {\n        const end = mathml.indexOf(\";\", i + 1);\n        if (end >= 0) {\n          const container = document.createElement(\"span\");\n          container.innerHTML = mathml.substring(i, end + 1);\n          toReturn += `&#${Util.fixedCharCodeAt(container.textContent || container.innerText, 0)};`;\n          i = end;\n        } else {\n          toReturn += character;\n        }\n      } else {\n        toReturn += character;\n      }\n    }\n\n    return toReturn;\n  }\n\n  /**\n   * Add a custom editor name with the prefix wrs_ to a MathML class attribute.\n   * @param {string} mathml - a MathML string created with a custom editor, like chemistry.\n   * @param {string} customEditor - custom editor name.\n   * @returns {string} MathML string with his class containing the editor toolbar string.\n   */\n  static addCustomEditorClassAttribute(mathml, customEditor) {\n    let toReturn = \"\";\n\n    const start = mathml.indexOf(\"<math\");\n    if (start === 0) {\n      const end = mathml.indexOf(\">\");\n      if (mathml.indexOf(\"class\") === -1) {\n        // Adding custom editor type.\n        toReturn = `${mathml.substr(start, end)} class=\"wrs_${customEditor}\">`;\n        toReturn += mathml.substr(end + 1, mathml.length);\n        return toReturn;\n      }\n    }\n    return mathml;\n  }\n\n  /**\n   * Remove a custom editor name from the MathML class attribute.\n   * @param {string} mathml - a MathML string.\n   * @param {string} customEditor - custom editor name.\n   * @returns {string} The input MathML without customEditor name in his class.\n   */\n  static removeCustomEditorClassAttribute(mathml, customEditor) {\n    // Discard MathML without the specified class.\n    if (mathml.indexOf(\"class\") === -1 || mathml.indexOf(`wrs_${customEditor}`) === -1) {\n      return mathml;\n    }\n\n    // Trivial case: class attribute value equal to editor name. Then\n    // class attribute is removed.\n    // First try to remove it with a space before if there is one\n    // Otherwise without the space\n    if (mathml.indexOf(` class=\"wrs_${customEditor}\"`) !== -1) {\n      return mathml.replace(` class=\"wrs_${customEditor}\"`, \"\");\n    } else if (mathml.indexOf(`class=\"wrs_${customEditor}\"`) !== -1) {\n      return mathml.replace(`class=\"wrs_${customEditor}\"`, \"\");\n    }\n\n    // Non Trivial case: class attribute contains editor name.\n    return mathml.replace(`wrs_${customEditor}`, \"\");\n  }\n\n  /**\n   * Adds annotation tag in MathML element.\n   * @param {String} mathml - valid MathML.\n   * @param {String} content - value to put inside annotation tag.\n   * @param {String} annotationEncoding - annotation encoding.\n   * @returns {String} - 'mathml' with an annotation that contains\n   * 'content' and encoding 'encoding'.\n   */\n  static addAnnotation(mathml, content, annotationEncoding) {\n    // If contains annotation, also contains semantics tag.\n    const containsAnnotation = mathml.indexOf(\"<annotation\");\n\n    let mathmlWithAnnotation = \"\";\n    if (containsAnnotation !== -1) {\n      const closeSemanticsIndex = mathml.indexOf(\"</semantics>\");\n      mathmlWithAnnotation = `${mathml.substring(0, closeSemanticsIndex)}<annotation encoding=\"${annotationEncoding}\">${content}</annotation>${mathml.substring(closeSemanticsIndex)}`;\n    } else if (MathML.isEmpty(mathml)) {\n      const endIndexInline = mathml.indexOf(\"/>\");\n      const endIndexNonInline = mathml.indexOf(\">\");\n      const endIndex = endIndexNonInline === endIndexInline ? endIndexInline : endIndexNonInline;\n      mathmlWithAnnotation = `${mathml.substring(0, endIndex)}><semantics><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`;\n    } else {\n      const beginMathMLContent = mathml.indexOf(\">\") + 1;\n      const endMathmlContent = mathml.lastIndexOf(\"</math>\");\n      const mathmlContent = mathml.substring(beginMathMLContent, endMathmlContent);\n      mathmlWithAnnotation = `${mathml.substring(0, beginMathMLContent)}<semantics><mrow>${mathmlContent}</mrow><annotation encoding=\"${annotationEncoding}\">${content}</annotation></semantics></math>`; // eslint-disable-line max-len\n    }\n\n    return mathmlWithAnnotation;\n  }\n\n  /**\n   * Removes specific annotation tag in MathML element.\n   * In case of remove the unique annotation, also is removed semantics tag.\n   * @param {String} mathml - valid MathML.\n   * @param {String} annotationEncoding - annotation encoding to remove.\n   * @returns {String} - 'mathml' without the annotation encoding specified.\n   */\n  static removeAnnotation(mathml, annotationEncoding) {\n    let mathmlWithoutAnnotation = mathml;\n    const openAnnotationTag = `<annotation encoding=\"${annotationEncoding}\">`;\n    const closeAnnotationTag = \"</annotation>\";\n    const startAnnotationIndex = mathml.indexOf(openAnnotationTag);\n    if (startAnnotationIndex !== -1) {\n      let differentAnnotationFound = false;\n      let differentAnnotationIndex = mathml.indexOf(\"<annotation\");\n      while (differentAnnotationIndex !== -1) {\n        if (differentAnnotationIndex !== startAnnotationIndex) {\n          differentAnnotationFound = true;\n        }\n        differentAnnotationIndex = mathml.indexOf(\"<annotation\", differentAnnotationIndex + 1);\n      }\n\n      if (differentAnnotationFound) {\n        const closeIndex = mathml.indexOf(closeAnnotationTag, startAnnotationIndex);\n        const endAnnotationIndex = closeIndex + closeAnnotationTag.length;\n        const startIndex = mathml.substring(0, startAnnotationIndex);\n        mathmlWithoutAnnotation = startIndex + mathml.substring(endAnnotationIndex);\n      } else {\n        mathmlWithoutAnnotation = MathML.removeSemantics(mathml);\n      }\n    }\n\n    return mathmlWithoutAnnotation;\n  }\n\n  /**\n   * Removes semantics tag to mathml.\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\n   * @param {string} mathml - MathML string.\n   * @returns {string} - 'mathml' without semantics tag.\n   */\n  static removeSemantics(mathml) {\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\n    const semanticsStartingTagRegex = /<semantics>\\s*?(<mrow>)?/gm;\n\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\n    const semanticsEndingTagRegex = /(<\\/mrow>)?\\s*<annotation[\\W\\w]*?<\\/semantics>/gm;\n\n    return mathml.replace(semanticsStartingTagRegex, \"\").replace(semanticsEndingTagRegex, \"\");\n  }\n\n  /**\n   * Removes semantics tag to element that contains mathml.\n   * When using Hand to create formulas, it adds the mrow tag due to the semantics one, this one is also removed.\n   * @param {string} element - Inner HTML text string.\n   * @returns {string} - 'mathml' without semantics tag.\n   */\n  static removeSafeXMLSemantics(element) {\n    // If `mrow` is found right before the `semantics` starting tag, it's removed as well\n    const semanticsSafeStartingTagRegex = /«semantics»\\s*?(«mrow»)?/gm;\n\n    // If `mrow` is found right after the `annotation` ending tag, it's removed as well\n    // alongside `semantics` closing tag and the whole `annotation` tag and its contents.\n    const semanticsSafeEndingTagRegex = /(«\\/mrow»)?\\s*«annotation[\\W\\w]*?«\\/semantics»/gm;\n\n    return element.replace(semanticsSafeStartingTagRegex, \"\").replace(semanticsSafeEndingTagRegex, \"\");\n  }\n\n  /**\n   * Transforms all xml mathml occurrences that contain semantics to the same\n   * xml mathml occurrences without semantics.\n   * @param {string} text - string that can contain xml mathml occurrences.\n   * @param {Constants} [characters] - Constant object containing xmlCharacters\n   * or safeXmlCharacters relation.\n   * xmlCharacters by default.\n   * @returns {string} - 'text' with all xml mathml occurrences without annotation tag.\n   */\n  static removeSemanticsOcurrences(text, characters = Constants.xmlCharacters) {\n    const mathTagStart = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    const mathTagEndline = `/${characters.tagCloser}`;\n    const { tagCloser } = characters;\n    const semanticsTagStart = `${characters.tagOpener}semantics${characters.tagCloser}`;\n    const annotationTagStart = `${characters.tagOpener}annotation encoding=`;\n\n    let output = \"\";\n    let start = text.indexOf(mathTagStart);\n    let end = 0;\n    while (start !== -1) {\n      output += text.substring(end, start);\n\n      // MathML can be written as '<math></math>' or '<math />'.\n      const mathTagEndIndex = text.indexOf(mathTagEnd, start);\n      const mathTagEndlineIndex = text.indexOf(mathTagEndline, start);\n      const firstTagCloser = text.indexOf(tagCloser, start);\n      if (mathTagEndIndex !== -1) {\n        end = mathTagEndIndex;\n      } else if (mathTagEndlineIndex === firstTagCloser - 1) {\n        end = mathTagEndlineIndex;\n      }\n\n      const semanticsIndex = text.indexOf(semanticsTagStart, start);\n      if (semanticsIndex !== -1) {\n        const mmlTagStart = text.substring(start, semanticsIndex);\n        const annotationIndex = text.indexOf(annotationTagStart, start);\n        if (annotationIndex !== -1) {\n          const startIndex = semanticsIndex + semanticsTagStart.length;\n          const mmlContent = text.substring(startIndex, annotationIndex);\n          output += mmlTagStart + mmlContent + mathTagEnd;\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\n          end += mathTagEnd.length;\n        } else {\n          end = start;\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\n        }\n      } else {\n        end = start;\n        start = text.indexOf(mathTagStart, start + mathTagStart.length);\n      }\n    }\n\n    output += text.substring(end, text.length);\n    return output;\n  }\n\n  /**\n   * Returns true if a MathML contains a certain class.\n   * @param {string} mathML - input MathML.\n   * @param {string} className - className.\n   * @returns {boolean} true if the input MathML contains the input class.\n   * false otherwise.\n   * @static\n   */\n  static containClass(mathML, className) {\n    const classIndex = mathML.indexOf(\"class\");\n    if (classIndex === -1) {\n      return false;\n    }\n    const classTagEndIndex = mathML.indexOf(\">\", classIndex);\n    const classTag = mathML.substring(classIndex, classTagEndIndex);\n    if (classTag.indexOf(className) !== -1) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns true if mathml is empty. Otherwise, false.\n   * @param {string} mathml - valid MathML with standard XML tags.\n   * @returns {boolean} - true if mathml is empty. Otherwise, false.\n   */\n  static isEmpty(mathml) {\n    // MathML can have the shape <math></math> or '<math />'.\n    const closeTag = \">\";\n    const closeTagInline = \"/>\";\n    const firstCloseTagIndex = mathml.indexOf(closeTag);\n    const firstCloseTagInlineIndex = mathml.indexOf(closeTagInline);\n    let empty = false;\n    // MathML is always empty in the second shape.\n    if (firstCloseTagInlineIndex !== -1) {\n      if (firstCloseTagInlineIndex === firstCloseTagIndex - 1) {\n        empty = true;\n      }\n    }\n\n    // MathML is always empty in the first shape when there aren't elements\n    // between math tags.\n    if (!empty) {\n      const mathTagEndRegex = new RegExp(\"</(.+:)?math>\");\n      const mathTagEndArray = mathTagEndRegex.exec(mathml);\n      if (mathTagEndArray) {\n        empty = firstCloseTagIndex + 1 === mathTagEndArray.index;\n      }\n    }\n\n    return empty;\n  }\n\n  /**\n   * Encodes html entities inside properties.\n   * @param {String} mathml - valid MathML with standard XML tags.\n   * @returns {String} - 'mathml' with property entities encoded.\n   */\n  static encodeProperties(mathml) {\n    // Search all the properties.\n    const regex = /\\w+=\".*?\"/g;\n    // Encode html entities.\n    const replacer = (match) => {\n      // It has the shape:\n      // <math propertyOne=\"somethingOne\"><children propertyTwo=\"somethingTwo\"></children></math>.\n      const quoteIndex = match.indexOf('\"');\n      const propertyValue = match.substring(quoteIndex + 1, match.length - 1);\n      const propertyValueEncoded = Util.htmlEntities(propertyValue);\n      const matchEncoded = `${match.substring(0, quoteIndex + 1)}${propertyValueEncoded}\"`;\n      return matchEncoded;\n    };\n\n    const mathmlEncoded = mathml.replace(regex, replacer);\n    return mathmlEncoded;\n  }\n}\n","/**\n * This class represents the configuration class.\n * Usually used to retrieve configuration properties generated in the backend into the frontend.\n */\nexport default class Configuration {\n  /**\n   * Adds a properties object to {@link Configuration.properties}.\n   * @param {Object} properties - properties to append to current properties.\n   */\n  static addConfiguration(properties) {\n    Object.assign(Configuration.properties, properties);\n  }\n\n  /**\n   * Static property.\n   * The configuration properties object.\n   * @private\n   * @type {Object}\n   */\n  static get properties() {\n    return Configuration._properties;\n  }\n\n  /**\n   * Static property setter.\n   * Set configuration properties.\n   * @param {Object} value - The property value.\n   * @ignore\n   */\n  static set properties(value) {\n    Configuration._properties = value;\n  }\n\n  /**\n   * Returns the value of a property key.\n   * @param {String} key - Property key\n   * @returns {String} Property value\n   */\n  static get(key) {\n    if (!Object.prototype.hasOwnProperty.call(Configuration.properties, key)) {\n      // Backwards compatibility.\n      if (Object.prototype.hasOwnProperty.call(Configuration.properties, \"_wrs_conf_\")) {\n        return Configuration.properties[`_wrs_conf_${key}`];\n      }\n      return false;\n    }\n    return Configuration.properties[key];\n  }\n\n  /**\n   * Adds a new property to Configuration class.\n   * @param {String} key - Property key.\n   * @param {Object} value - Property value.\n   */\n  static set(key, value) {\n    Configuration.properties[key] = value;\n  }\n\n  /**\n   * Updates a property object value with new values.\n   * @param {String} key - The property key to be updated.\n   * @param {Object} propertyValue - Object containing the new values.\n   */\n  static update(key, propertyValue) {\n    if (!Configuration.get(key)) {\n      Configuration.set(key, propertyValue);\n    } else {\n      const updateProperty = Object.assign(Configuration.get(key), propertyValue);\n      Configuration.set(key, updateProperty);\n    }\n  }\n}\n\n/**\n * Static properties object. Stores all configuration properties.\n * Needed to attribute accessors.\n * @private\n * @type {Object}\n */\nConfiguration._properties = {};\n","export default class TextCache {\n  /**\n   * @classdesc\n   * This class represent a client-side text cache class. Contains pairs of\n   * strings (key/value) which can be retrieved in any moment. Usually used\n   * to store AJAX responses for text services like mathml2latex\n   * (c.f {@link Latex} class) or mathml2accessible (c.f {@link Accessibility} class).\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Cache array property storing the cache entries.\n     * @type {Array.<String>}\n     */\n    this.cache = [];\n  }\n\n  /**\n   * This method populates a key/value pair into the {@link this.cache} property.\n   * @param {String} key - Cache key, usually the service string parameter.\n   * @param {String} value - Cache value, usually the service response.\n   */\n  populate(key, value) {\n    this.cache[key] = value;\n  }\n\n  /**\n   * Returns the cache value associated to certain cache key.\n   * @param {String} key - Cache key, usually the service string parameter.\n   * @return {String} value - Cache value, if exists. False otherwise.\n   */\n  get(key) {\n    if (Object.prototype.hasOwnProperty.call(this.cache, key)) {\n      return this.cache[key];\n    }\n    return false;\n  }\n}\n","/**\n * This object represents a custom listener.\n * @typedef {Object} Listener\n * @property {String} Listener.eventName - The listener name.\n * @property {Function} Listener.callback - The listener callback function.\n */\n\nexport default class Listeners {\n  /**\n   * @classdesc\n   * This class represents a custom listeners manager.\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Array containing all custom listeners.\n     * @type {Object[]}\n     */\n    this.listeners = [];\n  }\n\n  /**\n   * Add a listener to Listener class.\n   * @param {Object} listener - A listener object.\n   */\n  add(listener) {\n    this.listeners.push(listener);\n  }\n\n  /**\n   * Fires MathType event listeners\n   * @param {String} eventName - event name\n   * @param {Event} event - event object.\n   * @return {boolean} false if event has been prevented. true otherwise.\n   */\n  fire(eventName, event) {\n    for (let i = 0; i < this.listeners.length && !event.cancelled; i += 1) {\n      if (this.listeners[i].eventName === eventName) {\n        // Calling listener.\n        this.listeners[i].callback(event);\n      }\n    }\n    return event.defaultPrevented;\n  }\n\n  /**\n   * Creates a new listener object.\n   * @param {string} eventName - Event name.\n   * @param {Object} callback - Callback function.\n   * @returns {object} the listener object.\n   */\n  static newListener(eventName, callback) {\n    const listener = {};\n    listener.eventName = eventName;\n    listener.callback = callback;\n    return listener;\n  }\n}\n","import Util from \"./util\";\nimport Listeners from \"./listeners\";\nimport Configuration from \"./configuration\";\n\n/**\n * @typedef {Object} ServiceProviderProperties\n * @property {String} URI - Service URI.\n * @property {String} server - Service server language.\n */\n\n/**\n * @classdesc\n * Class representing a serviceProvider. A serviceProvider is a class containing\n * an arbitrary number of services with the correspondent path.\n */\nexport default class ServiceProvider {\n  /**\n   * Returns Service Provider listeners.\n   * @type {Listeners}\n   */\n  static get listeners() {\n    return ServiceProvider._listeners;\n  }\n\n  /**\n   * Adds a {@link Listener} instance to {@link ServiceProvider} class.\n   * @param {Listener} listener - Instance of {@link Listener}.\n   */\n  static addListener(listener) {\n    ServiceProvider.listeners.add(listener);\n  }\n\n  /**\n   * Fires events in Service Provider.\n   * @param {String} eventName - Event name.\n   * @param {Event} event - Event object.\n   */\n  static fireEvent(eventName, event) {\n    ServiceProvider.listeners.fire(eventName, event);\n  }\n\n  /**\n   * Service parameters.\n   * @type {ServiceProviderProperties}\n   *\n   */\n  static get parameters() {\n    return ServiceProvider._parameters;\n  }\n\n  /**\n   * Service parameters.\n   * @private\n   * @type {ServiceProviderProperties}\n   */\n  static set parameters(parameters) {\n    ServiceProvider._parameters = parameters;\n  }\n\n  /**\n   * Static property.\n   * Return service provider paths.\n   * @private\n   * @type {String}\n   */\n  static get servicePaths() {\n    return ServiceProvider._servicePaths;\n  }\n\n  /**\n   * Static property setter.\n   * Set service paths.\n   * @param {String} value - The property value.\n   * @ignore\n   */\n  static set servicePaths(value) {\n    ServiceProvider._servicePaths = value;\n  }\n\n  /**\n   * Adds a new service to the ServiceProvider.\n   * @param {String} service - Service name.\n   * @param {String} path - Service path.\n   * @static\n   */\n  static setServicePath(service, path) {\n    ServiceProvider.servicePaths[service] = path;\n  }\n\n  /**\n   * Returns the service path for a certain service.\n   * @param {String} serviceName - Service name.\n   * @returns {String} The service path.\n   * @static\n   */\n  static getServicePath(serviceName) {\n    return ServiceProvider.servicePaths[serviceName];\n  }\n\n  /**\n   * Static property.\n   * Service provider integration path.\n   * @type {String}\n   */\n  static get integrationPath() {\n    return ServiceProvider._integrationPath;\n  }\n\n  /**\n   * Static property setter.\n   * Set service provider integration path.\n   * @param {String} value - The property value.\n   * @ignore\n   */\n  static set integrationPath(value) {\n    ServiceProvider._integrationPath = value;\n  }\n\n  /**\n   * Returns the server URL in the form protocol://serverName:serverPort.\n   * @return {String} The client side server path.\n   */\n  static getServerURL() {\n    const url = window.location.href;\n    const arr = url.split(\"/\");\n    const result = `${arr[0]}//${arr[2]}`;\n    return result;\n  }\n\n  /**\n   * Inits {@link this} class. Uses {@link this.integrationPath} as\n   * base path to generate all backend services paths.\n   * @param {Object} parameters - Function parameters.\n   * @param {String} parameters.integrationPath - Service path.\n   */\n  static init(parameters) {\n    ServiceProvider.parameters = parameters;\n    // Services path (tech dependant).\n    let configurationURI = ServiceProvider.createServiceURI(\"configurationjs\");\n    let createImageURI = ServiceProvider.createServiceURI(\"createimage\");\n    let showImageURI = ServiceProvider.createServiceURI(\"showimage\");\n    let getMathMLURI = ServiceProvider.createServiceURI(\"getmathml\");\n    let serviceURI = ServiceProvider.createServiceURI(\"service\");\n\n    // Some backend integrations (like Java o Ruby) have an absolute backend path,\n    // for example: /app/service. For them we calculate the absolute URL path, i.e\n    // protocol://domain:port/app/service\n    if (ServiceProvider.parameters.URI.indexOf(\"/\") === 0) {\n      const serverPath = ServiceProvider.getServerURL();\n      configurationURI = serverPath + configurationURI;\n      showImageURI = serverPath + showImageURI;\n      createImageURI = serverPath + createImageURI;\n      getMathMLURI = serverPath + getMathMLURI;\n      serviceURI = serverPath + serviceURI;\n    }\n\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\n    ServiceProvider.setServicePath(\"showimage\", showImageURI);\n    ServiceProvider.setServicePath(\"createimage\", createImageURI);\n    ServiceProvider.setServicePath(\"service\", serviceURI);\n    ServiceProvider.setServicePath(\"getmathml\", getMathMLURI);\n    ServiceProvider.setServicePath(\"configurationjs\", configurationURI);\n\n    ServiceProvider.listeners.fire(\"onInit\", {});\n  }\n\n  /**\n   * Gets the content from an URL.\n   * @param {String} url - Target URL.\n   * @param {Object} [postVariables] - Object containing post variables.\n   * null if a GET query should be done.\n   * @returns {String} Content of the target URL.\n   * @private\n   * @static\n   */\n  static getUrl(url, postVariables) {\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n    const httpRequest = Util.createHttpRequest();\n\n    if (httpRequest) {\n      if (typeof postVariables === \"undefined\" || typeof postVariables === \"undefined\") {\n        httpRequest.open(\"GET\", url, false);\n      } else if (url.substr(0, 1) === \"/\" || url.substr(0, 7) === \"http://\" || url.substr(0, 8) === \"https://\") {\n        httpRequest.open(\"POST\", url, false);\n      } else {\n        httpRequest.open(\"POST\", currentPath + url, false);\n      }\n\n      let header = Configuration.get(\"customHeaders\");\n      if (header) {\n        if (typeof header === \"string\") {\n          header = Util.convertStringToObject(header);\n        }\n        Object.entries(header).forEach(([key, val]) => httpRequest.setRequestHeader(key, val));\n      }\n\n      if (typeof postVariables !== \"undefined\" && postVariables) {\n        httpRequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n        httpRequest.send(Util.httpBuildQuery(postVariables));\n      } else {\n        httpRequest.send(null);\n      }\n\n      return httpRequest.responseText;\n    }\n    return \"\";\n  }\n\n  /**\n   * Returns the response text of a certain service.\n   * @param {String} service - Service name.\n   * @param {String} postVariables - Post variables.\n   * @param {Boolean} get - True if the request is GET instead of POST. false otherwise.\n   * @returns {String} Service response text.\n   */\n  static getService(service, postVariables, get) {\n    let response;\n    if (get === true) {\n      const getVariables = postVariables ? `?${postVariables}` : \"\";\n      const serviceUrl = `${ServiceProvider.getServicePath(service)}${getVariables}`;\n      response = ServiceProvider.getUrl(serviceUrl);\n    } else {\n      const serviceUrl = ServiceProvider.getServicePath(service);\n      response = ServiceProvider.getUrl(serviceUrl, postVariables);\n    }\n    return response;\n  }\n\n  /**\n   * Returns the server language of a certain service. The possible values\n   * are: php, aspx, java and ruby.\n   * This method has backward compatibility purposes.\n   * @param {String} service - The configuration service.\n   * @returns {String} - The server technology associated with the configuration service.\n   */\n  static getServerLanguageFromService(service) {\n    if (service.indexOf(\".php\") !== -1) {\n      return \"php\";\n    }\n    if (service.indexOf(\".aspx\") !== -1) {\n      return \"aspx\";\n    }\n    if (service.indexOf(\"wirispluginengine\") !== -1) {\n      return \"ruby\";\n    }\n    return \"java\";\n  }\n\n  /**\n   * Returns the URI associated with a certain service.\n   * @param {String} service - The service name.\n   * @return {String} The service path.\n   */\n  static createServiceURI(service) {\n    const extension = ServiceProvider.serverExtension();\n    return Util.concatenateUrl(ServiceProvider.parameters.URI, service) + extension;\n  }\n\n  static serverExtension() {\n    if (ServiceProvider.parameters.server.indexOf(\"php\") !== -1) {\n      return \".php\";\n    }\n    if (ServiceProvider.parameters.server.indexOf(\"aspx\") !== -1) {\n      return \".aspx\";\n    }\n    return \"\";\n  }\n}\n\n/**\n * @property {String} service - The service name.\n * @property {String} path - The service path.\n * @static\n */\nServiceProvider._servicePaths = {};\n\n/**\n * The integration path. Contains the path of the configuration service.\n * Used to define the path for all services.\n * @type {String}\n * @private\n */\nServiceProvider._integrationPath = \"\";\n\n/**\n * ServiceProvider static listeners.\n * @type {Listeners}\n * @private\n */\nServiceProvider._listeners = new Listeners();\n\n/**\n * Service provider parameters.\n * @type {ServiceProviderParameters}\n */\nServiceProvider._parameters = {};\n","import TextCache from \"./textcache\";\nimport MathML from \"./mathml\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Constants from \"./constants\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents a LaTeX parser. Manages the services which allows to convert\n * LaTeX into MathML and MathML into LaTeX.\n */\nexport default class Latex {\n  /**\n   * Static property.\n   * Return latex cache.\n   * @private\n   * @type {Cache}\n   */\n  static get cache() {\n    return Latex._cache;\n  }\n\n  /**\n   * Static property setter.\n   * Set latex cache.\n   * @param {Cache} value - The property value.\n   * @ignore\n   */\n  static set cache(value) {\n    Latex._cache = value;\n  }\n\n  /**\n   * Converts MathML to LaTeX by calling mathml2latex service. For text services\n   * we call a text service with the param mathml2latex.\n   * @param {String} mathml - MathML String.\n   * @return {String} LaTeX string generated by the MathML argument.\n   */\n  static getLatexFromMathML(mathml) {\n    const mathmlWithoutSemantics = MathML.removeSemantics(mathml);\n    /**\n     * @type {TextCache}\n     */\n    const { cache } = Latex;\n\n    const data = {\n      service: \"mathml2latex\",\n      mml: mathmlWithoutSemantics,\n    };\n\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n\n    // TODO: Error handling.\n    let latex = \"\";\n\n    if (jsonResponse.status === \"ok\") {\n      latex = jsonResponse.result.text;\n      const latexHtmlEntitiesEncoded = Util.htmlEntities(latex);\n      // Inserting LaTeX semantics.\n      const mathmlWithSemantics = MathML.addAnnotation(mathml, latexHtmlEntitiesEncoded, \"LaTeX\");\n      cache.populate(latex, mathmlWithSemantics);\n    }\n\n    return latex;\n  }\n\n  /**\n   * Converts LaTeX to MathML by calling latex2mathml service. For text services\n   * we call a text service with the param latex2mathml.\n   * @param {String} latex - String containing a LaTeX formula.\n   * @param {Boolean} includeLatexOnSemantics\n   * - If true LaTeX would me included into MathML semantics.\n   * @return {String} MathML string generated by the LaTeX argument.\n   */\n  static getMathMLFromLatex(latex, includeLatexOnSemantics) {\n    /**\n     * @type {TextCache}\n     */\n    const latexCache = Latex.cache;\n\n    if (Latex.cache.get(latex)) {\n      return Latex.cache.get(latex);\n    }\n    const data = {\n      service: \"latex2mathml\",\n      latex,\n    };\n\n    if (includeLatexOnSemantics) {\n      data.saveLatex = \"\";\n    }\n\n    const jsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n\n    let output;\n    if (jsonResponse.status === \"ok\") {\n      let mathml = jsonResponse.result.text;\n      mathml = mathml.split(\"\\r\").join(\"\").split(\"\\n\").join(\" \");\n\n      // Populate LatexCache.\n      if (mathml.indexOf(\"semantics\") === -1 && mathml.indexOf(\"annotation\") === -1) {\n        const content = Util.htmlEntities(latex);\n        mathml = MathML.addAnnotation(mathml, content, \"LaTeX\");\n        output = mathml;\n      } else {\n        output = mathml;\n      }\n      if (!latexCache.get(latex)) {\n        latexCache.populate(latex, mathml);\n      }\n    } else {\n      output = `$$${latex}$$`;\n    }\n    return output;\n  }\n\n  /**\n   * Converts all occurrences of MathML code to LaTeX.\n   * The MathML code should containing <annotation encoding=\"LaTeX\"/> to be converted.\n   * @param {String} content - A string containing MathML valid code.\n   * @param {Object} characters - An object containing special characters.\n   * @return {String} A string containing all MathML annotated occurrences\n   * replaced by the corresponding LaTeX code.\n   */\n  static parseMathmlToLatex(content, characters) {\n    let output = \"\";\n    const mathTagBegin = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    const openTarget = `${characters.tagOpener}annotation encoding=${characters.doubleQuote}LaTeX${characters.doubleQuote}${characters.tagCloser}`;\n    const closeTarget = `${characters.tagOpener}/annotation${characters.tagCloser}`;\n    let start = content.indexOf(mathTagBegin);\n    let end = 0;\n    let mathml;\n    let startAnnotation;\n    let closeAnnotation;\n\n    while (start !== -1) {\n      output += content.substring(end, start);\n      end = content.indexOf(mathTagEnd, start);\n\n      if (end === -1) {\n        end = content.length - 1;\n      } else {\n        end += mathTagEnd.length;\n      }\n\n      mathml = content.substring(start, end);\n\n      startAnnotation = mathml.indexOf(openTarget);\n      if (startAnnotation !== -1) {\n        startAnnotation += openTarget.length;\n        closeAnnotation = mathml.indexOf(closeTarget);\n        let latex = mathml.substring(startAnnotation, closeAnnotation);\n        if (characters === Constants.safeXmlCharacters) {\n          latex = MathML.safeXmlDecode(latex);\n        }\n        output += `$$${latex}$$`;\n        // Populate latex into cache.\n\n        Latex.cache.populate(latex, mathml);\n      } else {\n        output += mathml;\n      }\n      start = content.indexOf(mathTagBegin, end);\n    }\n\n    output += content.substring(end, content.length);\n    return output;\n  }\n\n  /**\n   * Extracts the latex of a determined position in a text.\n   * @param {Node} textNode - textNode to extract the LaTeX\n   * @param {Number} caretPosition - Starting position to find LaTeX.\n   * @param {Object} latexTags - Optional parameter representing tags between latex is inserted.\n   * It has the 'open' attribute for the open tag and the 'close' attribute for the close tag.\n   * \"$$\" by default.\n   * @return {Object} An object with 3 keys: 'latex', 'start' and 'end'. Null if latex is not found.\n   * @static\n   */\n  static getLatexFromTextNode(textNode, caretPosition, latexTags) {\n    // TODO: Set LaTeX Tags as Core variable. Fix the call to this function (third argument).\n    // Tags used for LaTeX formulas.\n    const defaultLatexTags = {\n      open: \"$$\",\n      close: \"$$\",\n    };\n    // latexTags is an optional parameter. If is not set, use default latexTags.\n    if (typeof latexTags === \"undefined\" || latexTags == null) {\n      latexTags = defaultLatexTags;\n    }\n    // Looking for the first textNode.\n    let startNode = textNode;\n\n    while (startNode.previousSibling && startNode.previousSibling.nodeType === 3) {\n      // TEXT_NODE.\n      startNode = startNode.previousSibling;\n    }\n\n    /**\n     * Returns the next latex position and node from a specific node and position.\n     * @param {Node} currentNode - Node where searching latex.\n     * @param {Number} currentPosition - Current position inside the currentNode.\n     * @param {Object} latexTagsToUse - Tags used at latex beginning and latex final.\n     * \"$$\" by default.\n     * @param {Boolean} tag - Tag containing the current search.\n     * @returns {Object} Object containing the current node and the position.\n     */\n    function getNextLatexPosition(currentNode, currentPosition, tag) {\n      let position = currentNode.nodeValue.indexOf(tag, currentPosition);\n\n      while (position === -1) {\n        currentNode = currentNode.nextSibling;\n\n        if (!currentNode) {\n          // TEXT_NODE.\n          return null; // Not found.\n        }\n\n        position = currentNode.nodeValue ? currentNode.nodeValue.indexOf(latexTags.close) : -1;\n      }\n\n      return {\n        node: currentNode,\n        position,\n      };\n    }\n\n    /**\n     * Determines if a node is previous, or not, to a second one.\n     * @param {Node} node - Start node.\n     * @param {Number} position - Start node position.\n     * @param {Node} endNode - End node.\n     * @param {Number} endPosition - End node position.\n     * @returns {Boolean} True if the starting node is previous thant the en node. false otherwise.\n     */\n    function isPrevious(node, position, endNode, endPosition) {\n      if (node === endNode) {\n        return position <= endPosition;\n      }\n      while (node && node !== endNode) {\n        node = node.nextSibling;\n      }\n\n      return node === endNode;\n    }\n\n    let start;\n    let end = {\n      node: startNode,\n      position: 0,\n    };\n    // Is supposed that open and close tags has the same length.\n    const tagLength = latexTags.open.length;\n    do {\n      start = getNextLatexPosition(end.node, end.position, latexTags.open);\n\n      if (start == null || isPrevious(textNode, caretPosition, start.node, start.position)) {\n        return null;\n      }\n\n      end = getNextLatexPosition(start.node, start.position + tagLength, latexTags.close);\n\n      if (end == null) {\n        return null;\n      }\n\n      end.position += tagLength;\n    } while (isPrevious(end.node, end.position, textNode, caretPosition));\n\n    // Isolating latex.\n    let latex;\n\n    if (start.node === end.node) {\n      latex = start.node.nodeValue.substring(start.position + tagLength, end.position - tagLength);\n    } else {\n      const index = start.position + tagLength;\n      latex = start.node.nodeValue.substring(index, start.node.nodeValue.length);\n      let currentNode = start.node;\n\n      do {\n        currentNode = currentNode.nextSibling;\n        if (currentNode === end.node) {\n          latex += end.node.nodeValue.substring(0, end.position - tagLength);\n        } else {\n          latex += currentNode.nodeValue ? currentNode.nodeValue : \"\";\n        }\n      } while (currentNode !== end.node);\n    }\n\n    return {\n      latex,\n      startNode: start.node,\n      startPosition: start.position,\n      endNode: end.node,\n      endPosition: end.position,\n    };\n  }\n}\n\n/**\n * Text cache. Stores all processed LaTeX strings and it's correspondent MathML string.\n * @type {Cache}\n * @static\n */\nLatex._cache = new TextCache();\n","import translations from \"../lang/strings.json\";\n/**\n * This class represents a string manager. It's used to load localized strings.\n */\nexport default class StringManager {\n  constructor() {\n    throw new Error(\"Static class StringManager can not be instantiated.\");\n  }\n\n  /**\n   * Returns the associated value of certain string key. If the associated value\n   * doesn't exits returns the original key.\n   * @param {string} key - string key\n   * @param {string} lang - DEFAULT = null. Specify the language to translate the string\n   * @returns {string} correspondent value. If doesn't exists original key.\n   */\n  static get(key, lang) {\n    // Default language definition\n    let { language } = this;\n\n    // If parameter language, use it\n    if (lang) {\n      language = lang;\n    }\n\n    // Cut down on strings. e.g. en_US -> en\n    if (language && language.length > 2) {\n      language = language.slice(0, 2);\n    }\n\n    // Check if we support the language\n    if (!this.strings.hasOwnProperty(language)) {\n      // eslint-disable-line no-prototype-builtins\n      console.warn(`Unknown language ${language} set in StringManager.`);\n      language = \"en\";\n    }\n\n    // Check if the key is supported in the given language\n    if (!this.strings[language].hasOwnProperty(key)) {\n      // eslint-disable-line no-prototype-builtins\n      console.warn(`Unknown key ${key} for language ${language} in StringManager.`);\n      return key;\n    }\n\n    return this.strings[language][key];\n  }\n}\n\n/**\n * Dictionary of dictionaries:\n * Key: language code\n * Value: Key: id of the string\n *        Value: translation of the string\n */\nStringManager.strings = translations;\n\n/**\n * Language of the translations; English by default\n */\nStringManager.language = \"en\";\n","/* eslint-disable no-bitwise */\nimport DOMPurify from \"dompurify\";\nimport MathML from \"./mathml\";\nimport Configuration from \"./configuration\";\nimport Latex from \"./latex\";\nimport StringManager from \"./stringmanager\";\n\n/**\n * This class represents an utility class.\n */\nexport default class Util {\n  /**\n   * Fires an event in a target.\n   * @param {EventTarget} eventTarget - target where event should be fired.\n   * @param {string} eventName event to fire.\n   * @static\n   */\n  static fireEvent(eventTarget, eventName) {\n    if (document.createEvent) {\n      const eventObject = document.createEvent(\"HTMLEvents\");\n      eventObject.initEvent(eventName, true, true);\n      return !eventTarget.dispatchEvent(eventObject);\n    }\n\n    const eventObject = document.createEventObject();\n    return eventTarget.fireEvent(`on${eventName}`, eventObject);\n  }\n\n  /**\n   * Cross-browser addEventListener/attachEvent function.\n   * @param {EventTarget} eventTarget - target to add the event.\n   * @param {string} eventName - specifies the type of event.\n   * @param {Function} callBackFunction - callback function.\n   * @static\n   */\n  static addEvent(eventTarget, eventName, callBackFunction) {\n    if (eventTarget.addEventListener) {\n      eventTarget.addEventListener(eventName, callBackFunction, true);\n    } else if (eventTarget.attachEvent) {\n      // Backwards compatibility.\n      eventTarget.attachEvent(`on${eventName}`, callBackFunction);\n    }\n  }\n\n  /**\n   * Cross-browser removeEventListener/detachEvent function.\n   * @param {EventTarget} eventTarget - target to add the event.\n   * @param {string} eventName - specifies the type of event.\n   * @param {Function} callBackFunction - function to remove from the event target.\n   * @static\n   */\n  static removeEvent(eventTarget, eventName, callBackFunction) {\n    if (eventTarget.removeEventListener) {\n      eventTarget.removeEventListener(eventName, callBackFunction, true);\n    } else if (eventTarget.detachEvent) {\n      eventTarget.detachEvent(`on${eventName}`, callBackFunction);\n    }\n  }\n\n  /**\n   * Adds the a callback function, for a certain event target, to the following event types:\n   * - dblclick\n   * - mousedown\n   * - mouseup\n   * @param {EventTarget} eventTarget - event target.\n   * @param {Function} doubleClickHandler - function to run when on dblclick event.\n   * @param {Function} mousedownHandler - function to run when on mousedown event.\n   * @param {Function} mouseupHandler - function to run when on mouseup event.\n   * @static\n   */\n  static addElementEvents(eventTarget, doubleClickHandler, mousedownHandler, mouseupHandler) {\n    if (doubleClickHandler) {\n      this.callbackDblclick = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        doubleClickHandler(element, realEvent);\n      };\n\n      Util.addEvent(eventTarget, \"dblclick\", this.callbackDblclick);\n    }\n\n    if (mousedownHandler) {\n      this.callbackMousedown = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        mousedownHandler(element, realEvent);\n      };\n\n      Util.addEvent(eventTarget, \"mousedown\", this.callbackMousedown);\n    }\n\n    if (mouseupHandler) {\n      this.callbackMouseup = (event) => {\n        const realEvent = event || window.event;\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\n        mouseupHandler(element, realEvent);\n      };\n      // Chrome doesn't trigger this event for eventTarget if we release the mouse button\n      // while the mouse is outside the editor text field.\n      // This is a workaround: we trigger the event independently of where the mouse\n      // is when we release its button.\n      Util.addEvent(document, \"mouseup\", this.callbackMouseup);\n      Util.addEvent(eventTarget, \"mouseup\", this.callbackMouseup);\n    }\n  }\n\n  /**\n   * Remove all callback function, for a certain event target, to the following event types:\n   * - dblclick\n   * - mousedown\n   * - mouseup\n   * @param {EventTarget} eventTarget - event target.\n   * @static\n   */\n  static removeElementEvents(eventTarget) {\n    Util.removeEvent(eventTarget, \"dblclick\", this.callbackDblclick);\n    Util.removeEvent(eventTarget, \"mousedown\", this.callbackMousedown);\n    Util.removeEvent(document, \"mouseup\", this.callbackMouseup);\n    Util.removeEvent(eventTarget, \"mouseup\", this.callbackMouseup);\n  }\n\n  /**\n   * Adds a class name to a HTMLElement.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the class name.\n   * @static\n   */\n  static addClass(element, className) {\n    if (!Util.containsClass(element, className)) {\n      element.className += ` ${className}`;\n    }\n  }\n\n  /**\n   * Checks if a HTMLElement contains a certain class.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the className.\n   * @returns {boolean} true if the HTMLElement contains the class name. false otherwise.\n   * @static\n   */\n  static containsClass(element, className) {\n    if (element == null || !(\"className\" in element)) {\n      return false;\n    }\n\n    const currentClasses = element.className.split(\" \");\n\n    for (let i = currentClasses.length - 1; i >= 0; i -= 1) {\n      if (currentClasses[i] === className) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Remove a certain class for a HTMLElement.\n   * @param {HTMLElement} element - the HTML element.\n   * @param {string} className - the class name.\n   * @static\n   */\n  static removeClass(element, className) {\n    let newClassName = \"\";\n    const classes = element.className.split(\" \");\n\n    for (let i = 0; i < classes.length; i += 1) {\n      if (classes[i] !== className) {\n        newClassName += `${classes[i]} `;\n      }\n    }\n    element.className = newClassName.trim();\n  }\n\n  /**\n   * Converts old xml initial text attribute (with «») to the correct one(with §lt;§gt;). It's\n   * used to parse old applets.\n   * @param {string} text - string containing safeXml characters\n   * @returns {string} a string with safeXml characters parsed.\n   * @static\n   */\n  static convertOldXmlinitialtextAttribute(text) {\n    // Used to fix a bug with Cas imported from Moodle 1.9 to Moodle 2.x.\n    // This could be removed in future.\n    const val = \"value=\";\n\n    const xitpos = text.indexOf(\"xmlinitialtext\");\n    const valpos = text.indexOf(val, xitpos);\n    const quote = text.charAt(valpos + val.length);\n    const startquote = valpos + val.length + 1;\n    const endquote = text.indexOf(quote, startquote);\n\n    const value = text.substring(startquote, endquote);\n\n    let newvalue = value.split(\"«\").join(\"§lt;\");\n    newvalue = newvalue.split(\"»\").join(\"§gt;\");\n    newvalue = newvalue.split(\"&\").join(\"§\");\n    newvalue = newvalue.split(\"¨\").join(\"§quot;\");\n\n    text = text.split(value).join(newvalue);\n    return text;\n  }\n\n  /**\n   * Convert a string representation of key-value pairs to an object.\n   * @param {string} keyValueString - String with key-value pairs in the format key1='value1', key2='value2'\n   * @returns {Object} - Object containing the key-value pairs\n   */\n  static convertStringToObject(keyValueString) {\n    if (!keyValueString || typeof keyValueString !== \"string\") {\n      return {};\n    }\n\n    return keyValueString\n      .split(\",\")\n      .map((pair) => pair.trim().split(\"=\"))\n      .reduce((resultObject, [key, value]) => {\n        if (key && value) {\n          resultObject[key] = value;\n        }\n        return resultObject;\n      }, {});\n  }\n\n  /**\n   * Cross-browser solution for creating new elements.\n   * @param {string} tagName - tag name of the wished element.\n   * @param {Object} attributes - an object where each key is a wished\n   * attribute name and each value is its value.\n   * @param {Object} [creator] - if supplied, this function will use\n   * the \"createElement\" method from this param. Otherwise\n   * document will be used as creator.\n   * @returns {Element} The DOM element with the specified attributes assigned.\n   * @static\n   */\n  static createElement(tagName, attributes, creator) {\n    if (attributes === undefined) {\n      attributes = {};\n    }\n\n    if (creator === undefined) {\n      creator = document;\n    }\n\n    let element;\n\n    /*\n     * Internet Explorer fix:\n     * If you create a new object dynamically, you can't set a non-standard attribute.\n     * For example, you can't set the \"src\" attribute on an \"applet\" object.\n     * Other browsers will throw an exception and will run the standard code.\n     */\n    try {\n      let html = `<${tagName}`;\n\n      Object.keys(attributes).forEach((attributeName) => {\n        html += ` ${attributeName}=\"${Util.htmlEntities(attributes[attributeName])}\"`;\n      });\n      html += \">\";\n      element = creator.createElement(html);\n    } catch (e) {\n      element = creator.createElement(tagName);\n      Object.keys(attributes).forEach((attributeName) => {\n        element.setAttribute(attributeName, attributes[attributeName]);\n      });\n    }\n    return element;\n  }\n\n  /**\n   * Creates new HTML from it's HTML code as string.\n   * @param {string} objectCode - html code\n   * @returns {Element} the HTML element.\n   * @static\n   */\n  static createObject(objectCode, creator) {\n    if (creator === undefined) {\n      creator = document;\n    }\n\n    // Internet Explorer can't include \"param\" tag when is setting an innerHTML property.\n    objectCode = objectCode\n      .split(\"<applet \")\n      .join('<span wirisObject=\"WirisApplet\" ')\n      .split(\"<APPLET \")\n      .join('<span wirisObject=\"WirisApplet\" '); // It is a 'span' because 'span' objects can contain 'br' nodes.\n    objectCode = objectCode.split(\"</applet>\").join(\"</span>\").split(\"</APPLET>\").join(\"</span>\");\n\n    objectCode = objectCode\n      .split(\"<param \")\n      .join('<br wirisObject=\"WirisParam\" ')\n      .split(\"<PARAM \")\n      .join('<br wirisObject=\"WirisParam\" '); // It is a 'br' because 'br' can't contain nodes.\n    objectCode = objectCode.split(\"</param>\").join(\"</br>\").split(\"</PARAM>\").join(\"</br>\");\n\n    const container = Util.createElement(\"div\", {}, creator);\n    container.innerHTML = objectCode;\n\n    function recursiveParamsFix(object) {\n      if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisParam\") {\n        const attributesParsed = {};\n\n        for (let i = 0; i < object.attributes.length; i += 1) {\n          if (object.attributes[i].nodeValue !== null) {\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\n          }\n        }\n\n        const param = Util.createElement(\"param\", attributesParsed, creator);\n\n        // IE fix.\n        if (param.NAME) {\n          param.name = param.NAME;\n          param.value = param.VALUE;\n        }\n\n        param.removeAttribute(\"wirisObject\");\n        object.parentNode.replaceChild(param, object);\n      } else if (object.getAttribute && object.getAttribute(\"wirisObject\") === \"WirisApplet\") {\n        const attributesParsed = {};\n\n        for (let i = 0; i < object.attributes.length; i += 1) {\n          if (object.attributes[i].nodeValue !== null) {\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\n          }\n        }\n\n        const applet = Util.createElement(\"applet\", attributesParsed, creator);\n        applet.removeAttribute(\"wirisObject\");\n\n        for (let i = 0; i < object.childNodes.length; i += 1) {\n          recursiveParamsFix(object.childNodes[i]);\n\n          if (object.childNodes[i].nodeName.toLowerCase() === \"param\") {\n            applet.appendChild(object.childNodes[i]);\n            i -= 1; // When we insert the object child into the applet, object loses one child.\n          }\n        }\n\n        object.parentNode.replaceChild(applet, object);\n      } else {\n        for (let i = 0; i < object.childNodes.length; i += 1) {\n          recursiveParamsFix(object.childNodes[i]);\n        }\n      }\n    }\n\n    recursiveParamsFix(container);\n    return container.firstChild;\n  }\n\n  /**\n   * Converts an Element to its HTML code.\n   * @param {Element} element - entry element.\n   * @return {string} the HTML code of the input element.\n   * @static\n   */\n  static createObjectCode(element) {\n    // In case that the image was not created, the object can be null or undefined.\n    if (typeof element === \"undefined\" || element === null) {\n      return null;\n    }\n\n    if (element.nodeType === 1) {\n      // ELEMENT_NODE.\n      let output = `<${element.tagName}`;\n\n      for (let i = 0; i < element.attributes.length; i += 1) {\n        if (element.attributes[i].specified) {\n          output += ` ${element.attributes[i].name}=\"${Util.htmlEntities(element.attributes[i].value)}\"`;\n        }\n      }\n\n      if (element.childNodes.length > 0) {\n        output += \">\";\n\n        for (let i = 0; i < element.childNodes.length; i += 1) {\n          output += Util.createObject(element.childNodes[i]);\n        }\n\n        output += `</${element.tagName}>`;\n      } else if (element.nodeName === \"DIV\" || element.nodeName === \"SCRIPT\") {\n        output += `></${element.tagName}>`;\n      } else {\n        output += \"/>\";\n      }\n\n      return output;\n    }\n\n    if (element.nodeType === 3) {\n      // TEXT_NODE.\n      return Util.htmlEntities(element.nodeValue);\n    }\n\n    return \"\";\n  }\n\n  /**\n   * Concatenates two URL paths.\n   * @param {string} path1 - first URL path\n   * @param {string} path2 - second URL path\n   * @returns {string} new URL.\n   */\n  static concatenateUrl(path1, path2) {\n    let separator = \"\";\n    if (path1.indexOf(\"/\") !== path1.length && path2.indexOf(\"/\") !== 0) {\n      separator = \"/\";\n    }\n    return (path1 + separator + path2).replace(/([^:]\\/)\\/+/g, \"$1\");\n  }\n\n  /**\n   * Parses a text and replaces all HTML special characters by their correspondent entities.\n   * @param {string} input - text to be parsed.\n   * @returns {string} the input text with all their special characters replaced by their entities.\n   * @static\n   */\n  static htmlEntities(input) {\n    return input.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&quot;\");\n  }\n\n  /**\n   * Sanitize HTML to prevent XSS injections.\n   * @param {string} html - html to be sanitize.\n   * @returns {string} html sanitized.\n   * @static\n   */\n  static htmlSanitize(html) {\n    let annotationRegex = /\\<annotation.+\\<\\/annotation\\>/;\n    // Get all the annotation content including the tags.\n    let annotation = html.match(annotationRegex);\n    // Sanitize html code without removing our supported MathML tags and attributes.\n    html = DOMPurify.sanitize(html, {\n      ADD_TAGS: [\"semantics\", \"annotation\", \"mstack\", \"msline\", \"msrow\", \"none\"],\n      ADD_ATTR: [\"linebreak\", \"charalign\", \"stackalign\"],\n    });\n    // Readd old annotation content.\n    return html.replace(annotationRegex, annotation);\n  }\n\n  /**\n   * Parses a text and replaces all the HTML entities by their characters.\n   * @param {string} input - text to be parsed\n   * @returns {string} the input text with all their entities replaced by characters.\n   * @static\n   */\n  static htmlEntitiesDecode(input) {\n    // Textarea element decodes when inner html is set.\n    const textarea = document.createElement(\"textarea\");\n    textarea.innerHTML = input;\n    return textarea.value;\n  }\n\n  /**\n   * Returns a cross-browser http request.\n   * @return {object} httpRequest request object.\n   * @returns {XMLHttpRequest|ActiveXObject} the proper request object.\n   */\n  static createHttpRequest() {\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n    if (currentPath.substr(0, 7) === \"file://\") {\n      throw StringManager.get(\"exception_cross_site\");\n    }\n\n    if (typeof XMLHttpRequest !== \"undefined\") {\n      return new XMLHttpRequest();\n    }\n\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP\");\n    } catch (e) {\n      try {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      } catch (oc) {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Converts a hash to a HTTP query.\n   * @param {Object[]} properties - a key/value object.\n   * @returns {string} a HTTP query containing all the key value pairs with\n   * all the special characters replaced by their entities.\n   * @static\n   */\n  static httpBuildQuery(properties) {\n    let result = \"\";\n\n    Object.keys(properties).forEach((i) => {\n      if (properties[i] != null) {\n        result += `${Util.urlEncode(i)}=${Util.urlEncode(properties[i])}&`;\n      }\n    });\n\n    // Deleting last '&' empty character.\n    if (result.substring(result.length - 1) === \"&\") {\n      result = result.substring(0, result.length - 1);\n    }\n\n    return result;\n  }\n\n  /**\n   * Convert a hash to string sorting keys to get a deterministic output\n   * @param {Object[]} hash - a key/value object.\n   * @returns {string} a string with the form key1=value1...keyn=valuen\n   * @static\n   */\n  static propertiesToString(hash) {\n    // 1. Sort keys. We sort the keys because we want a deterministic output.\n    const keys = [];\n    Object.keys(hash).forEach((key) => {\n      if (Object.prototype.hasOwnProperty.call(hash, key)) {\n        keys.push(key);\n      }\n    });\n\n    const n = keys.length;\n    for (let i = 0; i < n; i += 1) {\n      for (let j = i + 1; j < n; j += 1) {\n        const s1 = keys[i];\n        const s2 = keys[j];\n        if (Util.compareStrings(s1, s2) > 0) {\n          // Swap.\n          keys[i] = s2;\n          keys[j] = s1;\n        }\n      }\n    }\n\n    // 2. Generate output.\n    let output = \"\";\n    for (let i = 0; i < n; i += 1) {\n      const key = keys[i];\n      output += key;\n      output += \"=\";\n      let value = hash[key];\n      value = value.replace(\"\\\\\", \"\\\\\\\\\");\n      value = value.replace(\"\\n\", \"\\\\n\");\n      value = value.replace(\"\\r\", \"\\\\r\");\n      value = value.replace(\"\\t\", \"\\\\t\");\n\n      output += value;\n      output += \"\\n\";\n    }\n    return output;\n  }\n\n  /**\n   * Compare two strings using charCodeAt method\n   * @param {string} a - first string to compare.\n   * @param {string} b - second string to compare.\n   * @returns {number} the difference between a and b\n   * @static\n   */\n  static compareStrings(a, b) {\n    let i;\n    const an = a.length;\n    const bn = b.length;\n    const n = an > bn ? bn : an;\n    for (i = 0; i < n; i += 1) {\n      const c = Util.fixedCharCodeAt(a, i) - Util.fixedCharCodeAt(b, i);\n      if (c !== 0) {\n        return c;\n      }\n    }\n    return a.length - b.length;\n  }\n\n  /**\n   * Fix charCodeAt() JavaScript function to handle non-Basic-Multilingual-Plane characters.\n   * @param {string} string - input string\n   * @param {number} idx - an integer greater than or equal to 0\n   * and less than the length of the string\n   * @returns {number} an integer representing the UTF-16 code of the string at the given index.\n   * @static\n   */\n  static fixedCharCodeAt(string, idx) {\n    idx = idx || 0;\n    const code = string.charCodeAt(idx);\n    let hi;\n    let low;\n\n    /* High surrogate (could change last hex to 0xDB7F to treat high\n    private surrogates as single characters) */\n\n    if (code >= 0xd800 && code <= 0xdbff) {\n      hi = code;\n      low = string.charCodeAt(idx + 1);\n      if (Number.isNaN(low)) {\n        throw StringManager.get(\"exception_high_surrogate\");\n      }\n      return (hi - 0xd800) * 0x400 + (low - 0xdc00) + 0x10000;\n    }\n\n    if (code >= 0xdc00 && code <= 0xdfff) {\n      // Low surrogate.\n      /* We return false to allow loops to skip this iteration since should have\n      already handled high surrogate above in the previous iteration. */\n      return false;\n    }\n    return code;\n  }\n\n  /**\n   * Returns an URL with it's query params converted into array.\n   * @param {string} url - input URL.\n   * @returns {Object[]} an array containing all URL query params.\n   * @static\n   */\n  static urlToAssArray(url) {\n    let i;\n    i = url.indexOf(\"?\");\n    if (i > 0) {\n      const query = url.substring(i + 1);\n      const ss = query.split(\"&\");\n      const h = {};\n      for (i = 0; i < ss.length; i += 1) {\n        const s = ss[i];\n        const kv = s.split(\"=\");\n        if (kv.length > 1) {\n          h[kv[0]] = decodeURIComponent(kv[1].replace(/\\+/g, \" \"));\n        }\n      }\n      return h;\n    }\n    return {};\n  }\n\n  /**\n   * Returns an encoded URL by replacing each instance of certain characters by\n   * one, two, three or four escape sequences using encodeURIComponent method.\n   * !'()* . will not be encoded.\n   *\n   * @param {string} clearString - URL string to be encoded\n   * @returns {string} URL with it's special characters replaced.\n   * @static\n   */\n  static urlEncode(clearString) {\n    let output = \"\";\n    // Method encodeURIComponent doesn't encode !'()*~ .\n    output = encodeURIComponent(clearString);\n    return output;\n  }\n\n  // TODO: To parser?\n  /**\n   * Converts the HTML of a image into the output code that WIRIS must return.\n   * By default returns the MathML stored on data-mahml attribute (if imgCode is a formula)\n   * or the Wiriscas attribute of a WIRIS applet.\n   * @param {string} imgCode - the html code from a formula or a CAS image.\n   * @param {boolean} convertToXml - true if the image should be converted to XML.\n   * @param {boolean} convertToSafeXml - true if the image should be converted to safeXML.\n   * @returns {string} the XML or safeXML of a WIRIS image.\n   * @static\n   */\n  static getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml) {\n    const imgObject = Util.createObject(imgCode);\n    if (imgObject) {\n      if (\n        imgObject.className === Configuration.get(\"imageClassName\") ||\n        imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"))\n      ) {\n        if (!convertToXml) {\n          return imgCode;\n        }\n\n        const dataMathML = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\n        // To handle annotations, first we need the MathML in XML.\n        let mathML = MathML.safeXmlDecode(dataMathML);\n\n        if (!Configuration.get(\"saveHandTraces\")) {\n          mathML = MathML.removeAnnotation(mathML, \"application/json\");\n        }\n\n        if (mathML == null) {\n          mathML = imgObject.getAttribute(\"alt\");\n        }\n\n        if (convertToSafeXml) {\n          const safeMathML = MathML.safeXmlEncode(mathML);\n          return safeMathML;\n        }\n\n        return mathML;\n      }\n    }\n    return imgCode;\n  }\n\n  /**\n   * Gets the node length in characters.\n   * @param {Node} node - HTML node.\n   * @returns {number} node length.\n   * @static\n   */\n  static getNodeLength(node) {\n    const staticNodeLengths = {\n      IMG: 1,\n      BR: 1,\n    };\n\n    if (node.nodeType === 3) {\n      // TEXT_NODE.\n      return node.nodeValue.length;\n    }\n\n    if (node.nodeType === 1) {\n      // ELEMENT_NODE.\n      let length = staticNodeLengths[node.nodeName.toUpperCase()];\n\n      if (length === undefined) {\n        length = 0;\n      }\n\n      for (let i = 0; i < node.childNodes.length; i += 1) {\n        length += Util.getNodeLength(node.childNodes[i]);\n      }\n      return length;\n    }\n    return 0;\n  }\n\n  /**\n   * Gets a selected node or text from an editable HTMLElement.\n   * If the caret is on a text node, concatenates it with all the previous and next text nodes.\n   * @param {HTMLElement} target - the editable HTMLElement.\n   * @param {boolean} isIframe  - specifies if the target is an iframe or not\n   * @param {boolean} forceGetSelection - if true, ignores IE system to get\n   * the current selection and uses window.getSelection()\n   * @returns {object} an object with the 'node' key set if the item is an\n   * element or the keys 'node' and 'caretPosition' if the element is text.\n   * @static\n   */\n  static getSelectedItem(target, isIframe, forceGetSelection) {\n    let windowTarget;\n\n    if (isIframe) {\n      windowTarget = target.contentWindow;\n      windowTarget.focus();\n    } else {\n      windowTarget = window;\n      target.focus();\n    }\n\n    if (document.selection && !forceGetSelection) {\n      const range = windowTarget.document.selection.createRange();\n\n      if (range.parentElement) {\n        if (range.htmlText.length > 0) {\n          if (range.text.length === 0) {\n            return Util.getSelectedItem(target, isIframe, true);\n          }\n\n          return null;\n        }\n\n        windowTarget.document.execCommand(\"InsertImage\", false, \"#\");\n        let temporalObject = range.parentElement();\n\n        if (temporalObject.nodeName.toUpperCase() !== \"IMG\") {\n          // IE9 fix: parentElement() does not return the IMG node,\n          // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\n          range.pasteHTML('<span id=\"wrs_openEditorWindow_temporalObject\"></span>');\n          temporalObject = windowTarget.document.getElementById(\"wrs_openEditorWindow_temporalObject\");\n        }\n\n        let node;\n        let caretPosition;\n\n        if (temporalObject.nextSibling && temporalObject.nextSibling.nodeType === 3) {\n          // TEXT_NODE.\n          node = temporalObject.nextSibling;\n          caretPosition = 0;\n        } else if (temporalObject.previousSibling && temporalObject.previousSibling.nodeType === 3) {\n          node = temporalObject.previousSibling;\n          caretPosition = node.nodeValue.length;\n        } else {\n          node = windowTarget.document.createTextNode(\"\");\n          temporalObject.parentNode.insertBefore(node, temporalObject);\n          caretPosition = 0;\n        }\n\n        temporalObject.parentNode.removeChild(temporalObject);\n\n        return {\n          node,\n          caretPosition,\n        };\n      }\n\n      if (range.length > 1) {\n        return null;\n      }\n\n      return {\n        node: range.item(0),\n      };\n    }\n\n    if (windowTarget.getSelection) {\n      let range;\n      const selection = windowTarget.getSelection();\n\n      try {\n        range = selection.getRangeAt(0);\n      } catch (e) {\n        range = windowTarget.document.createRange();\n      }\n\n      const node = range.startContainer;\n\n      if (node.nodeType === 3) {\n        // TEXT_NODE.\n        return {\n          node,\n          caretPosition: range.startOffset,\n        };\n      }\n\n      if (node !== range.endContainer) {\n        return null;\n      }\n\n      if (node.nodeType === 1) {\n        // ELEMENT_NODE.\n        const position = range.startOffset;\n\n        if (node.childNodes[position]) {\n          // In case that a formula is detected but not selected,\n          // we create an empty span where we could insert the new formula.\n          if (range.startOffset === range.endOffset) {\n            if (\n              position !== 0 &&\n              node.childNodes[position - 1].localName === \"span\" &&\n              node.childNodes[position].classList?.contains(\"Wirisformula\")\n            ) {\n              node.childNodes[position - 1].remove();\n              return Util.getSelectedItem(target, isIframe, forceGetSelection);\n            } else if (node.childNodes[position].classList?.contains(\"Wirisformula\")) {\n              if (\n                (position > 0 && node.childNodes[position - 1].classList?.contains(\"Wirisformula\")) ||\n                position === 0\n              ) {\n                var emptySpan = document.createElement(\"span\");\n                node.insertBefore(emptySpan, node.childNodes[position]);\n                return {\n                  node: node.childNodes[position],\n                };\n              }\n            }\n          }\n          return {\n            node: node.childNodes[position],\n          };\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns null if there isn't any item or if it is malformed.\n   * Otherwise returns an object containing the node with the MathML image\n   * and the cursor position inside the textarea.\n   * @param {HTMLTextAreaElement} textarea - textarea element.\n   * @returns {Object} An object containing the node, the index of the\n   * beginning  of the selected text, caret position and the start and end position of the\n   * text node.\n   * @static\n   */\n  static getSelectedItemOnTextarea(textarea) {\n    const textNode = document.createTextNode(textarea.value);\n    const textNodeValues = Latex.getLatexFromTextNode(textNode, textarea.selectionStart);\n    if (textNodeValues === null) {\n      return null;\n    }\n\n    return {\n      node: textNode,\n      caretPosition: textarea.selectionStart,\n      startPosition: textNodeValues.startPosition,\n      endPosition: textNodeValues.endPosition,\n    };\n  }\n\n  /**\n   * Looks for elements that match the given name in a HTML code string.\n   * Important: this function is very concrete for WIRIS code.\n   * It takes as preconditions lots of behaviors that are not the general case.\n   * @param {string} code -  HTML code.\n   * @param {string} name - element name.\n   * @param {boolean} autoClosed - true if the elements are autoClosed.\n   * @return {Object[]} an object containing all HTML elements of code matching the name argument.\n   * @static\n   */\n  static getElementsByNameFromString(code, name, autoClosed) {\n    const elements = [];\n    code = code.toLowerCase();\n    name = name.toLowerCase();\n    let start = code.indexOf(`<${name} `);\n\n    while (start !== -1) {\n      // Look for nodes.\n      let endString;\n\n      if (autoClosed) {\n        endString = \">\";\n      } else {\n        endString = `</${name}>`;\n      }\n\n      let end = code.indexOf(endString, start);\n\n      if (end !== -1) {\n        end += endString.length;\n        elements.push({\n          start,\n          end,\n        });\n      } else {\n        end = start + 1;\n      }\n\n      start = code.indexOf(`<${name} `, end);\n    }\n\n    return elements;\n  }\n\n  /**\n   * Returns the numeric value of a base64 character.\n   * @param  {string} character - base64 character.\n   * @returns {number} base64 character numeric value.\n   * @static\n   */\n  static decode64(character) {\n    const PLUS = \"+\".charCodeAt(0);\n    const SLASH = \"/\".charCodeAt(0);\n    const NUMBER = \"0\".charCodeAt(0);\n    const LOWER = \"a\".charCodeAt(0);\n    const UPPER = \"A\".charCodeAt(0);\n    const PLUS_URL_SAFE = \"-\".charCodeAt(0);\n    const SLASH_URL_SAFE = \"_\".charCodeAt(0);\n    const code = character.charCodeAt(0);\n\n    if (code === PLUS || code === PLUS_URL_SAFE) {\n      return 62; // Char '+'.\n    }\n    if (code === SLASH || code === SLASH_URL_SAFE) {\n      return 63; // Char '/'.\n    }\n    if (code < NUMBER) {\n      return -1; // No match.\n    }\n    if (code < NUMBER + 10) {\n      return code - NUMBER + 26 + 26;\n    }\n    if (code < UPPER + 26) {\n      return code - UPPER;\n    }\n    if (code < LOWER + 26) {\n      return code - LOWER + 26;\n    }\n\n    return null;\n  }\n\n  /**\n   * Converts a base64 string to a array of bytes.\n   * @param {string} b64String - base64 string.\n   * @param {number} length - dimension of byte array (by default whole string).\n   * @return {Object[]} the resultant byte array.\n   * @static\n   */\n  static b64ToByteArray(b64String, length) {\n    let tmp;\n\n    if (b64String.length % 4 > 0) {\n      throw new Error(\"Invalid string. Length must be a multiple of 4\"); // Tipped base64. Length is fixed.\n    }\n\n    const arr = [];\n\n    let l;\n    let placeHolders;\n    if (!length) {\n      // All b64String string.\n      if (b64String.charAt(b64String.length - 2) === \"=\") {\n        placeHolders = 2;\n      } else if (b64String.charAt(b64String.length - 1) === \"=\") {\n        placeHolders = 1;\n      } else {\n        placeHolders = 0;\n      }\n      l = placeHolders > 0 ? b64String.length - 4 : b64String.length;\n    } else {\n      l = length;\n    }\n\n    let i;\n    for (i = 0; i < l; i += 4) {\n      // Ignoring code checker standards (bitewise operators).\n      // See https://tracker.moodle.org/browse/CONTRIB-5862 for further information.\n      // @codingStandardsIgnoreStart\n      // eslint-disable-next-line max-len\n      tmp =\n        (Util.decode64(b64String.charAt(i)) << 18) |\n        (Util.decode64(b64String.charAt(i + 1)) << 12) |\n        (Util.decode64(b64String.charAt(i + 2)) << 6) |\n        Util.decode64(b64String.charAt(i + 3));\n\n      arr.push((tmp >> 16) & 0xff);\n      arr.push((tmp >> 8) & 0xff);\n      arr.push(tmp & 0xff);\n      // @codingStandardsIgnoreEnd\n    }\n\n    if (placeHolders) {\n      if (placeHolders === 2) {\n        // Ignoring code checker standards (bitewise operators).\n        // @codingStandardsIgnoreStart\n        // eslint-disable-next-line max-len\n        tmp = (Util.decode64(b64String.charAt(i)) << 2) | (Util.decode64(b64String.charAt(i + 1)) >> 4);\n        arr.push(tmp & 0xff);\n      } else if (placeHolders === 1) {\n        // eslint-disable-next-line max-len\n        tmp =\n          (Util.decode64(b64String.charAt(i)) << 10) |\n          (Util.decode64(b64String.charAt(i + 1)) << 4) |\n          (Util.decode64(b64String.charAt(i + 2)) >> 2);\n        arr.push((tmp >> 8) & 0xff);\n        arr.push(tmp & 0xff);\n        // @codingStandardsIgnoreEnd\n      }\n    }\n    return arr;\n  }\n\n  /**\n   * Returns the first 32-bit signed integer from a byte array.\n   * @param {Object[]} bytes - array of bytes.\n   * @returns {number} the 32-bit signed integer.\n   * @static\n   */\n  static readInt32(bytes) {\n    if (bytes.length < 4) {\n      return false;\n    }\n    const int32 = bytes.splice(0, 4);\n    // @codingStandardsIgnoreStart¡\n    return (int32[0] << 24) | (int32[1] << 16) | (int32[2] << 8) | (int32[3] << 0);\n    // @codingStandardsIgnoreEnd\n  }\n\n  /**\n   * Read the first byte from a byte array.\n   * @param {Object} bytes - input byte array.\n   * @returns {number} first byte of the byte array.\n   * @static\n   */\n  static readByte(bytes) {\n    // @codingStandardsIgnoreStart\n    return bytes.shift() << 0;\n    // @codingStandardsIgnoreEnd\n  }\n\n  /**\n   * Read an arbitrary number of bytes, from a fixed position on a byte array.\n   * @param  {Object[]} bytes - byte array.\n   * @param  {number} pos - start position.\n   * @param  {number} len - number of bytes to read.\n   * @returns {Object[]} the byte array.\n   * @static\n   */\n  static readBytes(bytes, pos, len) {\n    return bytes.splice(pos, len);\n  }\n\n  /**\n   * Inserts or modifies formulas or CAS on a textarea.\n   * @param {HTMLTextAreaElement} textarea - textarea target.\n   * @param {string} text - text to add in the textarea. For example, to add the link to the image,\n   * call this function as (textarea, Parser.createImageSrc(mathml));\n   * @static\n   */\n  static updateTextArea(textarea, text) {\n    if (textarea && text) {\n      textarea.focus();\n\n      if (textarea.selectionStart != null) {\n        const { selectionEnd } = textarea;\n        const selectionStart = textarea.value.substring(0, textarea.selectionStart);\n        const selectionEndSub = textarea.value.substring(selectionEnd, textarea.value.length);\n        textarea.value = selectionStart + text + selectionEndSub;\n        textarea.selectionEnd = selectionEnd + text.length;\n      } else {\n        const selection = document.selection.createRange();\n        selection.text = text;\n      }\n    }\n  }\n\n  /**\n   * Modifies existing formula on a textarea.\n   * @param {HTMLTextAreaElement} textarea - text area target.\n   * @param {string} text - text to add in the textarea. For example, if you want to add the link\n   * to the image,you can call this function as\n   * Util.updateTextarea(textarea, Parser.createImageSrc(mathml));\n   * @param {number} start - beginning index from textarea where it needs to be replaced by text.\n   * @param {number} end - ending index from textarea where it needs to be replaced by text\n   * @static\n   */\n  static updateExistingTextOnTextarea(textarea, text, start, end) {\n    textarea.focus();\n    const textareaStart = textarea.value.substring(0, start);\n    textarea.value = textareaStart + text + textarea.value.substring(end, textarea.value.length);\n    textarea.selectionEnd = start + text.length;\n  }\n\n  /**\n   * Add a parameter with it's correspondent value to an URL (GET).\n   * @param {string} path - URL path\n   * @param {string} parameter - parameter\n   * @param {string} value - value\n   * @static\n   */\n  static addArgument(path, parameter, value) {\n    let sep;\n    if (path.indexOf(\"?\") > 0) {\n      sep = \"&\";\n    } else {\n      sep = \"?\";\n    }\n    return `${path + sep + parameter}=${value}`;\n  }\n}\n","import Configuration from \"./configuration\";\nimport Util from \"./util\";\n\n/**\n * @classdesc\n * This class represents MathType Image class. Contains all the logic related\n * to MathType images manipulation.\n * All MathType images are generated using the appropriate MathType\n * integration service: showimage or createimage.\n *\n * There are two available image formats:\n * - svg (default)\n * - png\n *\n * There are two formats for the image src attribute:\n * - A data-uri scheme containing the URL-encoded SVG or a PNG's base64.\n * - A link to the showimage service.\n */\nexport default class Image {\n  /**\n   * Removes data attributes from an image.\n   * @param {HTMLImageElement} img - Image where remove data attributes.\n   */\n  static removeImgDataAttributes(img) {\n    const attributesToRemove = [];\n    const { attributes } = img;\n\n    Object.keys(attributes).forEach((key) => {\n      const attribute = attributes[key];\n      if (attribute !== undefined && attribute.name !== undefined && attribute.name.indexOf(\"data-\") === 0) {\n        // Is preferred keep an array and remove after the search\n        // because when attribute is removed the array of attributes\n        // is modified.\n        attributesToRemove.push(attribute.name);\n      }\n    });\n\n    attributesToRemove.forEach((attribute) => {\n      img.removeAttribute(attribute);\n    });\n  }\n\n  /**\n   * @static\n   * Clones all MathType image attributes from a HTMLImageElement to another.\n   * @param {HTMLImageElement} originImg - The original image.\n   * @param {HTMLImageElement} destImg - The destination image.\n   */\n  static clone(originImg, destImg) {\n    const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\n    if (!originImg.hasAttribute(customEditorAttributeName)) {\n      destImg.removeAttribute(customEditorAttributeName);\n    }\n\n    const mathmlAttributeName = Configuration.get(\"imageMathmlAttribute\");\n    const imgAttributes = [\n      mathmlAttributeName,\n      customEditorAttributeName,\n      \"alt\",\n      \"height\",\n      \"width\",\n      \"style\",\n      \"src\",\n      \"role\",\n    ];\n\n    imgAttributes.forEach((iterator) => {\n      const originAttribute = originImg.getAttribute(iterator);\n      if (originAttribute) {\n        destImg.setAttribute(iterator, originAttribute);\n      }\n    });\n  }\n\n  /**\n   * Determines whether an img src contains an SVG.\n   * @param {HTMLImageElement} img the img element to inspect\n   * @returns true if the img src contains an SVG, false otherwise\n   */\n  static isSvg(img) {\n    return img.src.startsWith(\"data:image/svg+xml;\");\n  }\n\n  /**\n   * Determines whether an img src is encoded in base64 or not.\n   * @param {HTMLImageElement} img the img element to inspect\n   * @returns true if the img src is encoded in base64, false otherwise\n   */\n  static isBase64(img) {\n    return img.src.startsWith(\"data:image/svg+xml;base64,\") || img.src.startsWith(\"data:image/png;base64,\");\n  }\n\n  /**\n   * Calculates the metrics of a MathType image given the the service response and the image format.\n   * @param {HTMLImageElement} img - The HTMLImageElement.\n   * @param {String} uri - The URI generated by the image service: can be a data URI scheme or a URL.\n   * @param {Boolean} jsonResponse - True the response of the image service is a\n   * JSON object. False otherwise.\n   */\n  static setImgSize(img, uri, jsonResponse) {\n    let ar;\n    let base64String;\n    let bytes;\n    let svgString;\n    if (jsonResponse) {\n      // Cleaning data:image/png;base64.\n      if (Image.isSvg(img)) {\n        // SVG format.\n        // If SVG is encoded in base64 we need to convert the base64 bytes into a SVG string.\n        if (!Image.isBase64(img)) {\n          ar = Image.getMetricsFromSvgString(uri);\n        } else {\n          base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\n          svgString = \"\";\n          bytes = Util.b64ToByteArray(base64String, base64String.length);\n          for (let i = 0; i < bytes.length; i += 1) {\n            svgString += String.fromCharCode(bytes[i]);\n          }\n          ar = Image.getMetricsFromSvgString(svgString);\n        }\n        // PNG format: we store all metrics information in the first 88 bytes.\n      } else {\n        base64String = img.src.substr(img.src.indexOf(\"base64,\") + 7, img.src.length);\n        bytes = Util.b64ToByteArray(base64String, 88);\n        ar = Image.getMetricsFromBytes(bytes);\n      }\n      // Backwards compatibility: we store the metrics into createimage response.\n    } else {\n      ar = Util.urlToAssArray(uri);\n    }\n    let width = ar.cw;\n    if (!width) {\n      return;\n    }\n    let height = ar.ch;\n    let baseline = ar.cb;\n    const { dpi } = ar;\n    if (dpi) {\n      width = (width * 96) / dpi;\n      height = (height * 96) / dpi;\n      baseline = (baseline * 96) / dpi;\n    }\n    img.width = width;\n    img.height = height;\n    img.style.verticalAlign = `-${height - baseline}px`;\n  }\n\n  /**\n   * Calculates the metrics of an image which has been resized. Is used to restore the original\n   * metrics of a resized image.\n   * @param {HTMLImageElement } img - The resized HTMLImageElement.\n   */\n  static fixAfterResize(img) {\n    img.removeAttribute(\"style\");\n    img.removeAttribute(\"width\");\n    img.removeAttribute(\"height\");\n    // In order to avoid resize with max-width css property.\n    img.style.maxWidth = \"none\";\n\n    const processImg = (img) => {\n      if (img.src.indexOf(\"data:image\") !== -1) {\n        if (img.src.indexOf(\"data:image/svg+xml\") !== -1) {\n          // Image is in base64: decode it in order to calculate the size, and then bring it back to base64\n          // This is a bit of an ugly hack used to recycle the logic of Image.setImgSize instead of rewriting it\n          // (which would actually make more sense for readibility and efficiency).\n          if (img.src.indexOf(\"data:image/svg+xml;base64,\") !== -1) {\n            // 'data:image/svg+xml;base64,'.length === 26\n            const base64String = img.getAttribute(\"src\").substring(26);\n            const svgString = window.atob(base64String);\n            const encodedSvgString = encodeURIComponent(svgString);\n            img.setAttribute(\"src\", `data:image/svg+xml;charset=utf8,${encodedSvgString}`);\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\n            Image.setImgSize(img, svg, true);\n            // Return src to base64!\n            img.setAttribute(\"src\", `data:image/svg+xml;base64,${base64String}`);\n          } else {\n            // 'data:image/svg+xml;charset=utf8,'.length === 32.\n            const svg = decodeURIComponent(img.src.substring(32, img.src.length));\n            Image.setImgSize(img, svg, true);\n          }\n        } else {\n          // 'data:image/png;base64,' === 22.\n          const base64 = img.src.substring(22, img.src.length);\n          Image.setImgSize(img, base64, true);\n        }\n      } else {\n        Image.setImgSize(img, img.src);\n      }\n    };\n\n    // If the image doesn't contain a blob, just process it normally\n    if (img.src.indexOf(\"blob:\") === -1) {\n      processImg(img);\n      // if it does contain a blob, then read that, replace the src with the decoded content, and process it\n    } else {\n      let reader = new FileReader();\n      reader.onload = function () {\n        img.setAttribute(\"src\", reader.result);\n        processImg(img);\n      };\n      fetch(img.src)\n        .then((r) => r.blob())\n        .then((blob) => {\n          reader.readAsDataURL(blob);\n        });\n    }\n  }\n\n  /**\n   * Returns the metrics (height, width and baseline) contained in a SVG image generated\n   * by the MathType image service. This image contains as an extra custom attribute:\n   * the baseline (wrs:baseline).\n   * @param {String} svgString - The SVG image.\n   * @return {Array} - The image metrics.\n   */\n  static getMetricsFromSvgString(svgString) {\n    let first = svgString.indexOf('height=\"');\n    let last = svgString.indexOf('\"', first + 8, svgString.length);\n    const height = svgString.substring(first + 8, last);\n\n    first = svgString.indexOf('width=\"');\n    last = svgString.indexOf('\"', first + 7, svgString.length);\n    const width = svgString.substring(first + 7, last);\n\n    first = svgString.indexOf('wrs:baseline=\"');\n    last = svgString.indexOf('\"', first + 14, svgString.length);\n    const baseline = svgString.substring(first + 14, last);\n\n    if (typeof width !== \"undefined\") {\n      const arr = [];\n      arr.cw = width;\n      arr.ch = height;\n      if (typeof baseline !== \"undefined\") {\n        arr.cb = baseline;\n      }\n      return arr;\n    }\n    return [];\n  }\n\n  /**\n   * Returns the metrics (width, height, baseline and dpi) contained in a PNG byte array.\n   * @param  {Array.<Bytes>} bytes - png byte array.\n   * @return {Array} The png metrics.\n   */\n  static getMetricsFromBytes(bytes) {\n    Util.readBytes(bytes, 0, 8);\n    let width;\n    let height;\n    let typ;\n    let baseline;\n    let dpi;\n    while (bytes.length >= 4) {\n      typ = Util.readInt32(bytes);\n      if (typ === 0x49484452) {\n        width = Util.readInt32(bytes);\n        height = Util.readInt32(bytes);\n        // Read 5 bytes.\n        Util.readInt32(bytes);\n        Util.readByte(bytes);\n      } else if (typ === 0x62615345) {\n        // Baseline: 'baSE'.\n        baseline = Util.readInt32(bytes);\n      } else if (typ === 0x70485973) {\n        // Dpis: 'pHYs'.\n        dpi = Util.readInt32(bytes);\n        dpi = Math.round(dpi / 39.37);\n        Util.readInt32(bytes);\n        Util.readByte(bytes);\n      }\n      Util.readInt32(bytes);\n    }\n\n    if (typeof width !== \"undefined\") {\n      const arr = [];\n      arr.cw = width;\n      arr.ch = height;\n      arr.dpi = dpi;\n      if (baseline) {\n        arr.cb = baseline;\n      }\n\n      return arr;\n    }\n    return [];\n  }\n}\n","import TextCache from \"./textcache\";\nimport ServiceProvider from \"./serviceprovider\";\nimport MathML from \"./mathml\";\nimport StringManager from \"./stringmanager\";\n\n/**\n * @classdesc\n * This class represents MathType accessible class. Converts MathML to accessible text and manages\n * the associated client-side cache.\n */\nexport default class Accessibility {\n  /**\n   * Static property.\n   * Accessibility cache, each entry contains a MathML and its correspondent accessibility text.\n   * @type {TextCache}\n   */\n  static get cache() {\n    return Accessibility._cache;\n  }\n\n  /**\n   * Static property setter.\n   * Set accessibility cache.\n   * @param {TextCahe} value - The property value.\n   * @ignore\n   */\n  static set cache(value) {\n    Accessibility._cache = value;\n  }\n\n  /**\n   * Converts MathML strings to its accessible text representation.\n   * @param {String} mathML - MathML to be converted to accessible text.\n   * @param {String} [language] - Language of the accessible text. 'en' by default.\n   * @param {Array.<String>} [data] - Parameters to send to mathml2accessible service.\n   * @return {String} Accessibility text.\n   */\n  static mathMLToAccessible(mathML, language, data) {\n    if (typeof language === \"undefined\") {\n      language = \"en\";\n    }\n    // Check MathML class. If the class is chemistry,\n    // we add chemistry to data to force accessibility service\n    // to load chemistry grammar.\n    if (MathML.containClass(mathML, \"wrs_chemistry\")) {\n      data.mode = \"chemistry\";\n    }\n    // Ignore accesibility styles\n    data.ignoreStyles = true;\n    let accessibleText = \"\";\n\n    if (Accessibility.cache.get(mathML)) {\n      accessibleText = Accessibility.cache.get(mathML);\n    } else {\n      data.service = \"mathml2accessible\";\n      data.lang = language;\n      const accessibleJsonResponse = JSON.parse(ServiceProvider.getService(\"service\", data));\n      if (accessibleJsonResponse.status !== \"error\") {\n        accessibleText = accessibleJsonResponse.result.text;\n        Accessibility.cache.populate(mathML, accessibleText);\n      } else {\n        accessibleText = StringManager.get(\"error_convert_accessibility\");\n      }\n    }\n\n    return accessibleText;\n  }\n}\n\n/**\n * Contains an instance of TextCache class to manage the JavaScript accessible cache.\n * Each entry of the cache object contains the MathML and it's correspondent accessibility text.\n * @private\n * @type {TextCache}\n */\nAccessibility._cache = new TextCache();\n","import Util from \"./util\";\nimport Latex from \"./latex\";\nimport MathML from \"./mathml\";\nimport Image from \"./image\";\nimport Accessibility from \"./accessibility\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Configuration from \"./configuration\";\nimport Constants from \"./constants\";\n// eslint-disable-next-line no-unused-vars\nimport md5 from \"./md5\";\n\n/**\n * @classdesc\n * This class represent a MahML parser. Converts MathML into formulas depending on the\n * image format (SVG, PNG, base64) and the save mode (XML, safeXML, Image) configured\n * in the backend.\n */\nexport default class Parser {\n  /**\n   * Converts a MathML string to an img element.\n   * @param {Document} creator - Document object to call createElement method.\n   * @param {string} mathml - MathML code\n   * @param {Object[]} wirisProperties - object containing WIRIS custom properties\n   * @param {language} language - custom language for accessibility.\n   * @returns {HTMLImageElement} the formula image corresponding to initial MathML string.\n   * @static\n   */\n  static mathmlToImgObject(creator, mathml, wirisProperties, language) {\n    const imgObject = creator.createElement(\"img\");\n    imgObject.align = \"middle\";\n    imgObject.style.maxWidth = \"none\";\n    let data = wirisProperties || {};\n\n    // Take into account the backend config\n    const wirisEditorProperties = Configuration.get(\"editorParameters\");\n    data = { ...wirisEditorProperties, ...data };\n\n    data.mml = mathml;\n    data.lang = language;\n    // Request metrics of the generated image.\n    data.metrics = \"true\";\n    data.centerbaseline = \"false\";\n\n    // Full base64 method (edit & save).\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\n      data.base64 = true;\n    }\n\n    // Render js params: _wrs_int_wirisProperties contains some js render params.\n    // Since MathML can support render params, js params should be send only to editor.\n\n    imgObject.className = Configuration.get(\"imageClassName\");\n\n    if (mathml.indexOf('class=\"') !== -1) {\n      // We check here if the MathML has been created from a customEditor (such chemistry)\n      // to add custom editor name attribute to img object (if necessary).\n      let mathmlSubstring = mathml.substring(mathml.indexOf('class=\"') + 'class=\"'.length, mathml.length);\n      mathmlSubstring = mathmlSubstring.substring(0, mathmlSubstring.indexOf('\"'));\n      mathmlSubstring = mathmlSubstring.substring(4, mathmlSubstring.length);\n      imgObject.setAttribute(Configuration.get(\"imageCustomEditorName\"), mathmlSubstring);\n    }\n\n    // Performance enabled.\n    if (\n      Configuration.get(\"wirisPluginPerformance\") &&\n      (Configuration.get(\"saveMode\") === \"xml\" || Configuration.get(\"saveMode\") === \"safeXml\")\n    ) {\n      let result = JSON.parse(Parser.createShowImageSrc(data, language));\n      if (result.status === \"warning\") {\n        // POST call.\n        // if the mathml is malformed, this function will throw an exception.\n        try {\n          result = JSON.parse(ServiceProvider.getService(\"showimage\", data));\n        } catch (e) {\n          return null;\n        }\n      }\n      ({ result } = result);\n      if (result.format === \"png\") {\n        imgObject.src = `data:image/png;base64,${result.content}`;\n      } else {\n        imgObject.src = `data:image/svg+xml;charset=utf8,${Util.urlEncode(result.content)}`;\n      }\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\n      Image.setImgSize(imgObject, result.content, true);\n\n      if (Configuration.get(\"enableAccessibility\")) {\n        if (typeof result.alt === \"undefined\") {\n          imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\n        } else {\n          imgObject.alt = result.alt;\n        }\n      }\n    } else {\n      const result = Parser.createImageSrc(mathml, data);\n      imgObject.setAttribute(Configuration.get(\"imageMathmlAttribute\"), MathML.safeXmlEncode(mathml));\n      imgObject.src = result;\n      Image.setImgSize(\n        imgObject,\n        result,\n        Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\",\n      );\n      if (Configuration.get(\"enableAccessibility\")) {\n        imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\n      }\n    }\n\n    if (typeof Parser.observer !== \"undefined\") {\n      Parser.observer.observe(imgObject);\n    }\n\n    // Role math https://www.w3.org/TR/wai-aria/roles#math.\n    imgObject.setAttribute(\"role\", \"math\");\n    return imgObject;\n  }\n\n  /**\n   * Returns the source to showimage service by calling createimage service. The\n   * output of the createimage service is a URL path pointing to showimage service.\n   * This method is called when performance is disabled.\n   * @param {string} mathml - MathML code.\n   * @param {Object[]} data - data object containing service parameters.\n   * @returns {string} the showimage path.\n   */\n  static createImageSrc(mathml, data) {\n    // Full base64 method (edit & save).\n    if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"default\") {\n      data.base64 = true;\n    }\n\n    let result = ServiceProvider.getService(\"createimage\", data);\n\n    if (result.indexOf(\"@BASE@\") !== -1) {\n      // Replacing '@BASE@' with the base URL of createimage.\n      const baseParts = ServiceProvider.getServicePath(\"createimage\").split(\"/\");\n      baseParts.pop();\n      result = result.split(\"@BASE@\").join(baseParts.join(\"/\"));\n    }\n\n    return result;\n  }\n\n  /**\n   * Parses initial HTML code. If the HTML contains data generated by WIRIS,\n   * this data would be converted as following:\n   * <pre>\n   * MathML code: Image containing the corresponding MathML formulas.\n   * MathML code with LaTeX annotation : LaTeX string.\n   * </pre>\n   * @param {string} code - HTML code containing MathML data.\n   * @param {string} language - language to create image alt text.\n   * @returns {string} HTML code with the original MathML converted into LaTeX and images.\n   */\n  static initParse(code, language) {\n    /* Note: The code inside this function has been inverted.\n    If you invert again the code then you cannot use correctly LaTeX\n    in Moodle.\n    */\n    code = Parser.initParseSaveMode(code, language);\n    return Parser.initParseEditMode(code);\n  }\n\n  /**\n   * Parses initial HTML code depending on the save mode. Transforms all MathML\n   * occurrences for it's correspondent image or LaTeX.\n   * @param {string} code - HTML code to be parsed\n   * @param {string} language - language to create image alt text.\n   * @returns {string} HTML code parsed.\n   */\n  static initParseSaveMode(code, language) {\n    if (Configuration.get(\"saveMode\")) {\n      // Converting XML to tags.\n      code = Latex.parseMathmlToLatex(code, Constants.safeXmlCharacters);\n      code = Latex.parseMathmlToLatex(code, Constants.xmlCharacters);\n      code = Parser.parseMathmlToImg(code, Constants.safeXmlCharacters, language);\n      code = Parser.parseMathmlToImg(code, Constants.xmlCharacters, language);\n      if (Configuration.get(\"saveMode\") === \"base64\" && Configuration.get(\"base64savemode\") === \"image\") {\n        code = Parser.codeImgTransform(code, \"base642showimage\");\n      }\n    }\n    return code;\n  }\n\n  /**\n   * Parses initial HTML code depending on the edit mode.\n   * If 'latex' parseMode is enabled all MathML containing an annotation with encoding='LaTeX' will\n   * be converted into a LaTeX string instead of an image.\n   * @param {string} code - HTML code containing MathML.\n   * @returns {string} parsed HTML code.\n   */\n  static initParseEditMode(code) {\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n      const imgList = Util.getElementsByNameFromString(code, \"img\", true);\n      const token = 'encoding=\"LaTeX\">';\n      // While replacing images with latex, the indexes of the found images changes\n      // respecting the original code, so this carry is needed.\n      let carry = 0;\n\n      for (let i = 0; i < imgList.length; i += 1) {\n        const imgCode = code.substring(imgList[i].start + carry, imgList[i].end + carry);\n\n        if (imgCode.indexOf(` class=\"${Configuration.get(\"imageClassName\")}\"`) !== -1) {\n          let mathmlStartToken = ` ${Configuration.get(\"imageMathmlAttribute\")}=\"`;\n          let mathmlStart = imgCode.indexOf(mathmlStartToken);\n\n          if (mathmlStart === -1) {\n            mathmlStartToken = ' alt=\"';\n            mathmlStart = imgCode.indexOf(mathmlStartToken);\n          }\n\n          if (mathmlStart !== -1) {\n            mathmlStart += mathmlStartToken.length;\n            const mathmlEnd = imgCode.indexOf('\"', mathmlStart);\n            const mathml = Util.htmlSanitize(MathML.safeXmlDecode(imgCode.substring(mathmlStart, mathmlEnd)));\n            let latexStartPosition = mathml.indexOf(token);\n\n            if (latexStartPosition !== -1) {\n              latexStartPosition += token.length;\n              const latexEndPosition = mathml.indexOf(\"</annotation>\", latexStartPosition);\n              const latex = mathml.substring(latexStartPosition, latexEndPosition);\n\n              const replaceText = `$$${Util.htmlEntitiesDecode(latex)}$$`;\n              const start = code.substring(0, imgList[i].start + carry);\n              const end = code.substring(imgList[i].end + carry);\n              code = start + replaceText + end;\n              carry += replaceText.length - (imgList[i].end - imgList[i].start);\n            }\n          }\n        }\n      }\n    }\n\n    return code;\n  }\n\n  /**\n   * Parses end HTML code. The end HTML code is HTML code with embedded images\n   * or LaTeX formulas created with MathType. <br>\n   * By default this method converts the formula images and LaTeX strings in MathML. <br>\n   * If image mode is enabled the images will not be converted into MathML. For further information see {@link https://docs.wiris.com/mathtype/en/mathtype-integrations/mathtype-web-interface-features/full-mathml-mode---wirisplugins-js.html}.\n   * @param {string} code - HTML to be parsed\n   * @returns {string} the HTML code parsed.\n   */\n  static endParse(code) {\n    // Transform LaTeX ocurrences to MathML elements.\n    const codeEndParsedEditMode = Parser.endParseEditMode(code);\n    // Transform img elements to MathML elements.\n    const codeEndParseSaveMode = Parser.endParseSaveMode(codeEndParsedEditMode);\n    return codeEndParseSaveMode;\n  }\n\n  /**\n   * Parses end HTML code depending on the edit mode.\n   * - LaTeX is an enabled parse mode, all LaTeX occurrences will be converted into MathML.\n   * @param {string} code - HTML code to be parsed.\n   * @returns {string} HTML code parsed.\n   */\n  static endParseEditMode(code) {\n    // Converting LaTeX to images.\n    if (Configuration.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n      let output = \"\";\n      let endPosition = 0;\n      let startPosition = code.indexOf(\"$$\");\n      while (startPosition !== -1) {\n        output += code.substring(endPosition, startPosition);\n        endPosition = code.indexOf(\"$$\", startPosition + 2);\n\n        if (endPosition !== -1) {\n          // Before, it was a condition here to execute the next codelines\n          // 'latex.indexOf('<') == -1'.\n          // We don't know why it was used, but seems to have a conflict with\n          // latex formulas that contains '<'.\n          const latex = code.substring(startPosition + 2, endPosition);\n          const decodedLatex = Util.htmlEntitiesDecode(latex);\n          let mathml = Util.htmlSanitize(Latex.getMathMLFromLatex(decodedLatex, true));\n          if (!Configuration.get(\"saveHandTraces\")) {\n            // Remove hand traces.\n            mathml = MathML.removeAnnotation(mathml, \"application/json\");\n          }\n          output += mathml;\n          endPosition += 2;\n        } else {\n          output += \"$$\";\n          endPosition = startPosition + 2;\n        }\n\n        startPosition = code.indexOf(\"$$\", endPosition);\n      }\n\n      output += code.substring(endPosition, code.length);\n      code = output;\n    }\n\n    return code;\n  }\n\n  /**\n   * Parses end HTML code depending on the save mode. Converts all\n   * images into the element determined by the save mode:\n   * - xml: Parses images formulas into MathML.\n   * - safeXml: Parses images formulas into safeMAthML\n   * - base64: Parses images into base64 images.\n   * - image: Parse images into images (no parsing)\n   * @param {string} code - HTML code to be parsed\n   * @returns {string} HTML code parsed.\n   */\n  static endParseSaveMode(code) {\n    const savemode = Configuration.get(\"saveMode\");\n    const base64savemode = Configuration.get(\"base64savemode\");\n\n    if (savemode) {\n      if (savemode === \"safeXml\") {\n        code = Parser.codeImgTransform(code, \"img2mathml\");\n      } else if (savemode === \"xml\") {\n        code = Parser.codeImgTransform(code, \"img2mathml\");\n      } else if (savemode === \"base64\" && base64savemode === \"image\") {\n        code = Parser.codeImgTransform(code, \"img264\");\n      }\n    }\n\n    return code;\n  }\n\n  /**\n   * Auxiliar function that builds the data object to send to the showimage endpoint\n   * @param {Object[]} data - object containing showimage service parameters.\n   * @param {string} language - string containing the language of the formula.\n   * @returns {Object} JSON object with the data to send to showimage.\n   */\n  static createShowImageSrcData(data, language) {\n    const dataMd5 = {};\n    const renderParams = [\n      \"mml\",\n      \"color\",\n      \"centerbaseline\",\n      \"zoom\",\n      \"dpi\",\n      \"fontSize\",\n      \"fontFamily\",\n      \"defaultStretchy\",\n      \"backgroundColor\",\n      \"format\",\n    ];\n    renderParams.forEach((param) => {\n      if (typeof data[param] !== \"undefined\") {\n        dataMd5[param] = data[param];\n      }\n    });\n    // Data variables to get.\n    const dataObject = {};\n    Object.keys(data).forEach((key) => {\n      // We don't need mathml in this request we try to get cached.\n      // Only need the formula md5 calculated before.\n      if (key !== \"mml\") {\n        dataObject[key] = data[key];\n      }\n    });\n\n    dataObject.formula = com.wiris.js.JsPluginTools.md5encode(Util.propertiesToString(dataMd5));\n    dataObject.lang = typeof language === \"undefined\" ? \"en\" : language;\n    dataObject.version = Configuration.get(\"version\");\n\n    return dataObject;\n  }\n\n  /**\n   * Returns the result to call showimage service with the formula md5 as parameter.\n   *  The result could be:\n   * - {'status' : warning'} : The image associated to the MathML md5 is not in cache.\n   * - {'status' : 'ok' ...} : The image associated to the MathML md5 is in cache.\n   * @param {Object[]} data - object containing showimage service parameters.\n   * @param {string} language - string containing the language of the formula.\n   * @returns {Object} JSON object containing showimage response.\n   */\n  static createShowImageSrc(data, language) {\n    const dataObject = this.createShowImageSrcData(data, language);\n    const result = ServiceProvider.getService(\"showimage\", Util.httpBuildQuery(dataObject), true);\n    return result;\n  }\n\n  /**\n   * Transform html img tags inside a html code to mathml, base64 img tags (i.e with base64 on src)\n   * or showimage img tags (i.e with showimage.php on src)\n   * @param  {string} code - HTML code\n   * @param  {string} mode - base642showimage or img2mathml or img264 transform.\n   * @returns {string} html - code transformed.\n   */\n  static codeImgTransform(code, mode) {\n    let output = \"\";\n    let endPosition = 0;\n    const pattern = /<img/gi;\n    const patternLength = pattern.source.length;\n\n    while (pattern.test(code)) {\n      const startPosition = pattern.lastIndex - patternLength;\n      output += code.substring(endPosition, startPosition);\n\n      let i = startPosition + 1;\n\n      while (i < code.length && endPosition <= startPosition) {\n        const character = code.charAt(i);\n\n        if (character === '\"' || character === \"'\") {\n          const characterNextPosition = code.indexOf(character, i + 1);\n\n          if (characterNextPosition === -1) {\n            i = code.length; // End while.\n          } else {\n            i = characterNextPosition;\n          }\n        } else if (character === \">\") {\n          endPosition = i + 1;\n        }\n\n        i += 1;\n      }\n\n      if (endPosition < startPosition) {\n        // The img tag is stripped.\n        output += code.substring(startPosition, code.length);\n        return output;\n      }\n      let imgCode = code.substring(startPosition, endPosition);\n      const imgObject = Util.createObject(imgCode);\n      let xmlCode = imgObject.getAttribute(Configuration.get(\"imageMathmlAttribute\"));\n      let convertToXml;\n      let convertToSafeXml;\n\n      if (mode === \"base642showimage\") {\n        if (xmlCode == null) {\n          xmlCode = imgObject.getAttribute(\"alt\");\n        }\n        xmlCode = MathML.safeXmlDecode(xmlCode);\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, null, null);\n        output += Util.createObjectCode(imgCode);\n      } else if (mode === \"img2mathml\") {\n        if (Configuration.get(\"saveMode\")) {\n          if (Configuration.get(\"saveMode\") === \"safeXml\") {\n            convertToXml = true;\n            convertToSafeXml = true;\n          } else if (Configuration.get(\"saveMode\") === \"xml\") {\n            convertToXml = true;\n            convertToSafeXml = false;\n          }\n        }\n        output += Util.getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml);\n      } else if (mode === \"img264\") {\n        if (xmlCode === null) {\n          xmlCode = imgObject.getAttribute(\"alt\");\n        }\n        xmlCode = MathML.safeXmlDecode(xmlCode);\n\n        const properties = {};\n        properties.base64 = \"true\";\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, properties, null);\n        // Metrics.\n        Image.setImgSize(imgCode, imgCode.src, true);\n        output += Util.createObjectCode(imgCode);\n      }\n    }\n    output += code.substring(endPosition, code.length);\n    return output;\n  }\n\n  /**\n   * Converts all occurrences of MathML to the corresponding image.\n   * @param {string} content - string with valid MathML code.\n   * The MathML code doesn't contain semantics.\n   * @param {Constants} characters - Constant object containing xmlCharacters\n   * or safeXmlCharacters relation.\n   * @param {string} language - a valid language code\n   * in order to generate formula accessibility.\n   * @returns {string} The input string with all the MathML\n   * occurrences replaced by the corresponding image.\n   */\n  static parseMathmlToImg(content, characters, language) {\n    let output = \"\";\n    const mathTagBegin = `${characters.tagOpener}math`;\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\n    let start = content.indexOf(mathTagBegin);\n    let end = 0;\n\n    while (start !== -1) {\n      output += content.substring(end, start);\n      // Avoid WIRIS images to be parsed.\n      const imageMathmlAtrribute = content.indexOf(Configuration.get(\"imageMathmlAttribute\"));\n      end = content.indexOf(mathTagEnd, start);\n\n      if (end === -1) {\n        end = content.length - 1;\n      } else if (imageMathmlAtrribute !== -1) {\n        // First close tag of img attribute\n        // If a mathmlAttribute exists should be inside a img tag.\n        end += content.indexOf(\"/>\", start);\n      } else {\n        end += mathTagEnd.length;\n      }\n\n      if (!MathML.isMathmlInAttribute(content, start) && imageMathmlAtrribute === -1) {\n        let mathml = content.substring(start, end);\n        mathml =\n          characters.id === Constants.safeXmlCharacters.id\n            ? MathML.safeXmlDecode(mathml)\n            : MathML.mathMLEntities(mathml);\n        output += Util.createObjectCode(Parser.mathmlToImgObject(document, mathml, null, language));\n      } else {\n        output += content.substring(start, end);\n      }\n\n      start = content.indexOf(mathTagBegin, end);\n    }\n\n    output += content.substring(end, content.length);\n    return output;\n  }\n}\n\n// Mutation observers to avoid wiris image formulas class be removed.\nif (typeof MutationObserver !== \"undefined\") {\n  const mutationObserver = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.oldValue === Configuration.get(\"imageClassName\") &&\n        mutation.attributeName === \"class\" &&\n        mutation.target.className.indexOf(Configuration.get(\"imageClassName\")) === -1\n      ) {\n        mutation.target.className = Configuration.get(\"imageClassName\");\n      }\n    });\n  });\n\n  Parser.observer = Object.create(mutationObserver);\n  Parser.observer.Config = { attributes: true, attributeOldValue: true };\n  // We use own default config.\n  Parser.observer.observe = function (target) {\n    Object.getPrototypeOf(this).observe(target, this.Config);\n  };\n}\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-extra-semi */\n\n// The rules above are disabled because we are implementing\n// an external interface.\n\nexport default class EditorListener {\n  /**\n   * @classdesc\n   * Determines if the content of the\n   * MathType Editor has changes.\n   * @implements {EditorListeners}\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Indicates if the content of the editor has changed.\n     * @type {Boolean}\n     */\n    this.isContentChanged = false;\n\n    /**\n     * Indicates if the listener should be waiting for changes in the editor.\n     * @type {Boolean}\n     */\n    this.waitingForChanges = false;\n  }\n\n  /**\n   * Sets {@link EditorListener.isContentChanged} property.\n   * @param {Boolean} value - The new vlue.\n   */\n  setIsContentChanged(value) {\n    this.isContentChanged = value;\n  }\n\n  /**\n   * Returns true if the content of the editor has been changed, false otherwise.\n   * @return {Boolean}\n   */\n  getIsContentChanged() {\n    return this.isContentChanged;\n  }\n\n  /**\n   * Determines if the EditorListener should wait for any changes.\n   * @param {Boolean} value - True if the editor should wait for changes, false otherwise.\n   */\n  setWaitingForChanges(value) {\n    this.waitingForChanges = value;\n  }\n\n  /**\n   * EditorListener method to overwrite.\n   * @type {JsEditor}\n   * @ignore\n   */\n  caretPositionChanged(_editor) {}\n\n  /**\n   * EditorListener method to overwrite\n   * @type {JsEditor}\n   * @ignore\n   */\n  clipboardChanged(_editor) {}\n\n  /**\n   * Determines if the content of an editor has been changed.\n   * @param {JsEditor} editor - editor object.\n   */\n  contentChanged(_editor) {\n    if (this.waitingForChanges === true && this.isContentChanged === false) {\n      this.isContentChanged = true;\n    }\n  }\n\n  /**\n   * EditorListener method to overwrite\n   * @param {JsEditor} editor - The editor instance.\n   */\n  styleChanged(_editor) {}\n\n  /**\n   * EditorListener method to overwrite\n   * @param {JsEditor} - The editor instance.\n   */\n  transformationReceived(_editor) {}\n}\n","let wasm;\n\nconst cachedTextDecoder =\n  typeof TextDecoder !== \"undefined\"\n    ? new TextDecoder(\"utf-8\", { ignoreBOM: true, fatal: true })\n    : {\n        decode: () => {\n          throw Error(\"TextDecoder not available\");\n        },\n      };\n\nif (typeof TextDecoder !== \"undefined\") {\n  cachedTextDecoder.decode();\n}\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n  if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n    cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n  }\n  return cachedUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n  ptr = ptr >>> 0;\n  return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n  if (heap_next === heap.length) heap.push(heap.length + 1);\n  const idx = heap_next;\n  heap_next = heap[idx];\n\n  heap[idx] = obj;\n  return idx;\n}\n\nfunction getObject(idx) {\n  return heap[idx];\n}\n\nfunction dropObject(idx) {\n  if (idx < 132) return;\n  heap[idx] = heap_next;\n  heap_next = idx;\n}\n\nfunction takeObject(idx) {\n  const ret = getObject(idx);\n  dropObject(idx);\n  return ret;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst cachedTextEncoder =\n  typeof TextEncoder !== \"undefined\"\n    ? new TextEncoder(\"utf-8\")\n    : {\n        encode: () => {\n          throw Error(\"TextEncoder not available\");\n        },\n      };\n\nconst encodeString =\n  typeof cachedTextEncoder.encodeInto === \"function\"\n    ? function (arg, view) {\n        return cachedTextEncoder.encodeInto(arg, view);\n      }\n    : function (arg, view) {\n        const buf = cachedTextEncoder.encode(arg);\n        view.set(buf);\n        return {\n          read: arg.length,\n          written: buf.length,\n        };\n      };\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n  if (realloc === undefined) {\n    const buf = cachedTextEncoder.encode(arg);\n    const ptr = malloc(buf.length, 1) >>> 0;\n    getUint8Memory0()\n      .subarray(ptr, ptr + buf.length)\n      .set(buf);\n    WASM_VECTOR_LEN = buf.length;\n    return ptr;\n  }\n\n  let len = arg.length;\n  let ptr = malloc(len, 1) >>> 0;\n\n  const mem = getUint8Memory0();\n\n  let offset = 0;\n\n  for (; offset < len; offset++) {\n    const code = arg.charCodeAt(offset);\n    if (code > 0x7f) break;\n    mem[ptr + offset] = code;\n  }\n\n  if (offset !== len) {\n    if (offset !== 0) {\n      arg = arg.slice(offset);\n    }\n    ptr = realloc(ptr, len, (len = offset + arg.length * 3), 1) >>> 0;\n    const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n    const ret = encodeString(arg, view);\n\n    offset += ret.written;\n  }\n\n  WASM_VECTOR_LEN = offset;\n  return ptr;\n}\n\nfunction isLikeNone(x) {\n  return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n  if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n    cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n  }\n  return cachedInt32Memory0;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n  if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n    cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n  }\n  return cachedFloat64Memory0;\n}\n\nlet cachedBigInt64Memory0 = null;\n\nfunction getBigInt64Memory0() {\n  if (cachedBigInt64Memory0 === null || cachedBigInt64Memory0.byteLength === 0) {\n    cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\n  }\n  return cachedBigInt64Memory0;\n}\n\nfunction debugString(val) {\n  // primitive types\n  const type = typeof val;\n  if (type == \"number\" || type == \"boolean\" || val == null) {\n    return `${val}`;\n  }\n  if (type == \"string\") {\n    return `\"${val}\"`;\n  }\n  if (type == \"symbol\") {\n    const description = val.description;\n    if (description == null) {\n      return \"Symbol\";\n    } else {\n      return `Symbol(${description})`;\n    }\n  }\n  if (type == \"function\") {\n    const name = val.name;\n    if (typeof name == \"string\" && name.length > 0) {\n      return `Function(${name})`;\n    } else {\n      return \"Function\";\n    }\n  }\n  // objects\n  if (Array.isArray(val)) {\n    const length = val.length;\n    let debug = \"[\";\n    if (length > 0) {\n      debug += debugString(val[0]);\n    }\n    for (let i = 1; i < length; i++) {\n      debug += \", \" + debugString(val[i]);\n    }\n    debug += \"]\";\n    return debug;\n  }\n  // Test for built-in\n  const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n  let className;\n  if (builtInMatches.length > 1) {\n    className = builtInMatches[1];\n  } else {\n    // Failed to match the standard '[object ClassName]'\n    return toString.call(val);\n  }\n  if (className == \"Object\") {\n    // we're a user defined class or Object\n    // JSON.stringify avoids problems with cycles, and is generally much\n    // easier than looping through ownProperties of `val`.\n    try {\n      return \"Object(\" + JSON.stringify(val) + \")\";\n    } catch (_) {\n      return \"Object\";\n    }\n  }\n  // errors\n  if (val instanceof Error) {\n    return `${val.name}: ${val.message}\\n${val.stack}`;\n  }\n  // TODO we could test for more things here, like `Set`s and `Map`s.\n  return className;\n}\n\nfunction makeClosure(arg0, arg1, dtor, f) {\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\n  const real = (...args) => {\n    // First up with a closure we increment the internal reference\n    // count. This ensures that the Rust closure environment won't\n    // be deallocated while we're invoking it.\n    state.cnt++;\n    try {\n      return f(state.a, state.b, ...args);\n    } finally {\n      if (--state.cnt === 0) {\n        wasm.__wbindgen_export_2.get(state.dtor)(state.a, state.b);\n        state.a = 0;\n      }\n    }\n  };\n  real.original = state;\n\n  return real;\n}\nfunction __wbg_adapter_46(arg0, arg1, arg2) {\n  wasm.__wbindgen_export_3(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\n  const real = (...args) => {\n    // First up with a closure we increment the internal reference\n    // count. This ensures that the Rust closure environment won't\n    // be deallocated while we're invoking it.\n    state.cnt++;\n    const a = state.a;\n    state.a = 0;\n    try {\n      return f(a, state.b, ...args);\n    } finally {\n      if (--state.cnt === 0) {\n        wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\n      } else {\n        state.a = a;\n      }\n    }\n  };\n  real.original = state;\n\n  return real;\n}\nfunction __wbg_adapter_49(arg0, arg1) {\n  wasm.__wbindgen_export_4(arg0, arg1);\n}\n\nfunction __wbg_adapter_52(arg0, arg1, arg2) {\n  wasm.__wbindgen_export_5(arg0, arg1, addHeapObject(arg2));\n}\n\nfunction handleError(f, args) {\n  try {\n    return f.apply(this, args);\n  } catch (e) {\n    wasm.__wbindgen_export_6(addHeapObject(e));\n  }\n}\nfunction __wbg_adapter_103(arg0, arg1, arg2, arg3) {\n  wasm.__wbindgen_export_7(arg0, arg1, addHeapObject(arg2), addHeapObject(arg3));\n}\n\n/**\n */\nexport function main_js() {\n  wasm.main_js();\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n  ptr = ptr >>> 0;\n  return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n */\nexport const Level = Object.freeze({\n  Err: 0,\n  0: \"Err\",\n  Warn: 1,\n  1: \"Warn\",\n  Info: 2,\n  2: \"Info\",\n  Debug: 3,\n  3: \"Debug\",\n});\n/**\n */\nexport class Telemeter {\n  __destroy_into_raw() {\n    const ptr = this.__wbg_ptr;\n    this.__wbg_ptr = 0;\n\n    return ptr;\n  }\n\n  free() {\n    const ptr = this.__destroy_into_raw();\n    wasm.__wbg_telemeter_free(ptr);\n  }\n  /**\n   * @param {any} solution\n   * @param {any} hosts\n   * @param {any} config\n   */\n  constructor(solution, hosts, config) {\n    try {\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n      wasm.telemeter_new(retptr, addHeapObject(solution), addHeapObject(hosts), addHeapObject(config));\n      var r0 = getInt32Memory0()[retptr / 4 + 0];\n      var r1 = getInt32Memory0()[retptr / 4 + 1];\n      var r2 = getInt32Memory0()[retptr / 4 + 2];\n      if (r2) {\n        throw takeObject(r1);\n      }\n      this.__wbg_ptr = r0 >>> 0;\n      return this;\n    } finally {\n      wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n  }\n  /**\n   * @param {string} sender_id\n   * @returns {Promise<any>}\n   */\n  identify(sender_id) {\n    const ptr0 = passStringToWasm0(sender_id, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_identify(this.__wbg_ptr, ptr0, len0);\n    return takeObject(ret);\n  }\n  /**\n   * @param {string} event_type\n   * @param {any} event_payload\n   * @returns {Promise<any>}\n   */\n  track(event_type, event_payload) {\n    const ptr0 = passStringToWasm0(event_type, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_track(this.__wbg_ptr, ptr0, len0, addHeapObject(event_payload));\n    return takeObject(ret);\n  }\n  /**\n   * @param {any} level\n   * @param {string} message\n   * @param {any} payload\n   * @returns {Promise<any>}\n   */\n  log(level, message, payload) {\n    const ptr0 = passStringToWasm0(message, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len0 = WASM_VECTOR_LEN;\n    const ret = wasm.telemeter_log(this.__wbg_ptr, addHeapObject(level), ptr0, len0, addHeapObject(payload));\n    return takeObject(ret);\n  }\n  /**\n   * @returns {Promise<any>}\n   */\n  finish() {\n    const ptr = this.__destroy_into_raw();\n    const ret = wasm.telemeter_finish(ptr);\n    return takeObject(ret);\n  }\n  /**\n   * @param {boolean | undefined} [new_debug_status]\n   */\n  debug(new_debug_status) {\n    wasm.telemeter_debug(this.__wbg_ptr, isLikeNone(new_debug_status) ? 0xffffff : new_debug_status ? 1 : 0);\n  }\n}\n\nasync function __wbg_load(module, imports) {\n  if (typeof Response === \"function\" && module instanceof Response) {\n    if (typeof WebAssembly.instantiateStreaming === \"function\") {\n      try {\n        return await WebAssembly.instantiateStreaming(module, imports);\n      } catch (e) {\n        if (module.headers.get(\"Content-Type\") != \"application/wasm\") {\n          console.warn(\n            \"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\",\n            e,\n          );\n        } else {\n          throw e;\n        }\n      }\n    }\n\n    const bytes = await module.arrayBuffer();\n    return await WebAssembly.instantiate(bytes, imports);\n  } else {\n    const instance = await WebAssembly.instantiate(module, imports);\n\n    if (instance instanceof WebAssembly.Instance) {\n      return { instance, module };\n    } else {\n      return instance;\n    }\n  }\n}\n\nfunction __wbg_get_imports() {\n  const imports = {};\n  imports.wbg = {};\n  imports.wbg.__wbindgen_string_new = function (arg0, arg1) {\n    const ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_c728d68b8b34487e = function () {\n    const ret = new Object();\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_status_7841bb47be2a8f16 = function (arg0) {\n    const ret = getObject(arg0).status;\n    return ret;\n  };\n  imports.wbg.__wbg_headers_ea7ef583d1564b08 = function (arg0) {\n    const ret = getObject(arg0).headers;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new0_ad75dd38f92424e2 = function () {\n    const ret = new Date();\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getTime_ed6ee333b702f8fc = function (arg0) {\n    const ret = getObject(arg0).getTime();\n    return ret;\n  };\n  imports.wbg.__wbindgen_object_drop_ref = function (arg0) {\n    takeObject(arg0);\n  };\n  imports.wbg.__wbindgen_is_object = function (arg0) {\n    const val = getObject(arg0);\n    const ret = typeof val === \"object\" && val !== null;\n    return ret;\n  };\n  imports.wbg.__wbg_crypto_58f13aa23ffcb166 = function (arg0) {\n    const ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_process_5b786e71d465a513 = function (arg0) {\n    const ret = getObject(arg0).process;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_versions_c2ab80650590b6a2 = function (arg0) {\n    const ret = getObject(arg0).versions;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_node_523d7bd03ef69fba = function (arg0) {\n    const ret = getObject(arg0).node;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_is_string = function (arg0) {\n    const ret = typeof getObject(arg0) === \"string\";\n    return ret;\n  };\n  imports.wbg.__wbg_msCrypto_abcb1295e768d1f2 = function (arg0) {\n    const ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_require_2784e593a4674877 = function () {\n    return handleError(function () {\n      const ret = module.require;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_newwithlength_13b5319ab422dcf6 = function (arg0) {\n    const ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_get_4a9aa5157afeb382 = function (arg0, arg1) {\n    const ret = getObject(arg0)[arg1 >>> 0];\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_next_1989a20442400aaa = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).next();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_done_bc26bf4ada718266 = function (arg0) {\n    const ret = getObject(arg0).done;\n    return ret;\n  };\n  imports.wbg.__wbg_value_0570714ff7d75f35 = function (arg0) {\n    const ret = getObject(arg0).value;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_iterator_7ee1a391d310f8e4 = function () {\n    const ret = Symbol.iterator;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_get_2aff440840bb6202 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = Reflect.get(getObject(arg0), getObject(arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_next_15da6a3df9290720 = function (arg0) {\n    const ret = getObject(arg0).next;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_is_function = function (arg0) {\n    const ret = typeof getObject(arg0) === \"function\";\n    return ret;\n  };\n  imports.wbg.__wbg_call_669127b9d730c650 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = getObject(arg0).call(getObject(arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_object_clone_ref = function (arg0) {\n    const ret = getObject(arg0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_self_3fad056edded10bd = function () {\n    return handleError(function () {\n      const ret = self.self;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_window_a4f46c98a61d4089 = function () {\n    return handleError(function () {\n      const ret = window.window;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_globalThis_17eff828815f7d84 = function () {\n    return handleError(function () {\n      const ret = globalThis.globalThis;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_global_46f939f6541643c5 = function () {\n    return handleError(function () {\n      const ret = global.global;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_is_undefined = function (arg0) {\n    const ret = getObject(arg0) === undefined;\n    return ret;\n  };\n  imports.wbg.__wbg_newnoargs_ccdcae30fd002262 = function (arg0, arg1) {\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_isArray_38525be7442aa21e = function (arg0) {\n    const ret = Array.isArray(getObject(arg0));\n    return ret;\n  };\n  imports.wbg.__wbg_call_53fc3abd42e24ec8 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_isSafeInteger_c38b0a16d0c7cef7 = function (arg0) {\n    const ret = Number.isSafeInteger(getObject(arg0));\n    return ret;\n  };\n  imports.wbg.__wbg_new_feb65b865d980ae2 = function (arg0, arg1) {\n    try {\n      var state0 = { a: arg0, b: arg1 };\n      var cb0 = (arg0, arg1) => {\n        const a = state0.a;\n        state0.a = 0;\n        try {\n          return __wbg_adapter_103(a, state0.b, arg0, arg1);\n        } finally {\n          state0.a = a;\n        }\n      };\n      const ret = new Promise(cb0);\n      return addHeapObject(ret);\n    } finally {\n      state0.a = state0.b = 0;\n    }\n  };\n  imports.wbg.__wbindgen_memory = function () {\n    const ret = wasm.memory;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_buffer_344d9b41efe96da7 = function (arg0) {\n    const ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_d8a000788389a31e = function (arg0) {\n    const ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_set_dcfd613a3420f908 = function (arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n  };\n  imports.wbg.__wbg_length_a5587d6cd79ab197 = function (arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n  };\n  imports.wbg.__wbindgen_string_get = function (arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof obj === \"string\" ? obj : undefined;\n    var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    var len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_stringify_4039297315a25b00 = function () {\n    return handleError(function (arg0) {\n      const ret = JSON.stringify(getObject(arg0));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_set_40f7786a25a9cc7e = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n      return ret;\n    }, arguments);\n  };\n  imports.wbg.__wbg_has_cdf8b85f6e903c80 = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = Reflect.has(getObject(arg0), getObject(arg1));\n      return ret;\n    }, arguments);\n  };\n  imports.wbg.__wbg_fetch_701fcd2bde06379a = function (arg0, arg1) {\n    const ret = getObject(arg0).fetch(getObject(arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_fetch_b5d6bebed1e6c2d2 = function (arg0) {\n    const ret = fetch(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3 = function (arg0, arg1, arg2) {\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_new_e4960143e41697a4 = function () {\n    return handleError(function () {\n      const ret = new AbortController();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_signal_1ed842bebd6ae322 = function (arg0) {\n    const ret = getObject(arg0).signal;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_abort_8355f201f30300bb = function (arg0) {\n    getObject(arg0).abort();\n  };\n  imports.wbg.__wbindgen_error_new = function (arg0, arg1) {\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_jsval_loose_eq = function (arg0, arg1) {\n    const ret = getObject(arg0) == getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbindgen_boolean_get = function (arg0) {\n    const v = getObject(arg0);\n    const ret = typeof v === \"boolean\" ? (v ? 1 : 0) : 2;\n    return ret;\n  };\n  imports.wbg.__wbindgen_number_get = function (arg0, arg1) {\n    const obj = getObject(arg1);\n    const ret = typeof obj === \"number\" ? obj : undefined;\n    getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n  };\n  imports.wbg.__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Uint8Array;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof ArrayBuffer;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_entries_6d727b73ee02b7ce = function (arg0) {\n    const ret = Object.entries(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_String_917f38a1211cf44b = function (arg0, arg1) {\n    const ret = String(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_warn_ade8d3b7ecee11ff = function (arg0, arg1) {\n    console.warn(getObject(arg0), getObject(arg1));\n  };\n  imports.wbg.__wbg_readyState_13e55da5ad6d64e2 = function (arg0) {\n    const ret = getObject(arg0).readyState;\n    return ret;\n  };\n  imports.wbg.__wbg_warn_4affe1093892a4ef = function (arg0) {\n    console.warn(getObject(arg0));\n  };\n  imports.wbg.__wbg_close_f4135085ec3fc8f0 = function () {\n    return handleError(function (arg0) {\n      getObject(arg0).close();\n    }, arguments);\n  };\n  imports.wbg.__wbg_new_b9b318679315404f = function () {\n    return handleError(function (arg0, arg1) {\n      const ret = new WebSocket(getStringFromWasm0(arg0, arg1));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_setbinaryType_dcb62e0f2b346301 = function (arg0, arg1) {\n    getObject(arg0).binaryType = takeObject(arg1);\n  };\n  imports.wbg.__wbg_log_7811587c4c6d2844 = function (arg0) {\n    console.log(getObject(arg0));\n  };\n  imports.wbg.__wbg_error_f0a6627f4b23c19d = function (arg0) {\n    console.error(getObject(arg0));\n  };\n  imports.wbg.__wbg_info_3ca7870690403fee = function (arg0) {\n    console.info(getObject(arg0));\n  };\n  imports.wbg.__wbg_document_183cf1eecfdbffee = function (arg0) {\n    const ret = getObject(arg0).document;\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\n  };\n  imports.wbg.__wbg_visibilityState_9721703a5ef75faf = function (arg0) {\n    const ret = getObject(arg0).visibilityState;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getwithrefkey_3b3c46ba20582127 = function (arg0, arg1) {\n    const ret = getObject(arg0)[getObject(arg1)];\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_length_cace2e0b3ddc0502 = function (arg0) {\n    const ret = getObject(arg0).length;\n    return ret;\n  };\n  imports.wbg.__wbg_addEventListener_0f2891b0794e07fa = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      getObject(arg0).addEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\n    }, arguments);\n  };\n  imports.wbg.__wbg_removeEventListener_104d11302bb212d1 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      getObject(arg0).removeEventListener(getStringFromWasm0(arg1, arg2), getObject(arg3));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_is_bigint = function (arg0) {\n    const ret = typeof getObject(arg0) === \"bigint\";\n    return ret;\n  };\n  imports.wbg.__wbindgen_bigint_from_i64 = function (arg0) {\n    const ret = arg0;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_in = function (arg0, arg1) {\n    const ret = getObject(arg0) in getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbindgen_bigint_from_u64 = function (arg0) {\n    const ret = BigInt.asUintN(64, arg0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_jsval_eq = function (arg0, arg1) {\n    const ret = getObject(arg0) === getObject(arg1);\n    return ret;\n  };\n  imports.wbg.__wbg_localStorage_e11f72e996a4f5d9 = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).localStorage;\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_getItem_c81cd3ae30cd579a = function () {\n    return handleError(function (arg0, arg1, arg2, arg3) {\n      const ret = getObject(arg1).getItem(getStringFromWasm0(arg2, arg3));\n      var ptr1 = isLikeNone(ret) ? 0 : passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n      var len1 = WASM_VECTOR_LEN;\n      getInt32Memory0()[arg0 / 4 + 1] = len1;\n      getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    }, arguments);\n  };\n  imports.wbg.__wbg_navigator_7078da62d92ff5ad = function (arg0) {\n    const ret = getObject(arg0).navigator;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_mediaDevices_e00b1f64d2b9939f = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).mediaDevices;\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_enumerateDevices_619d52f5eef34c2f = function () {\n    return handleError(function (arg0) {\n      const ret = getObject(arg0).enumerateDevices();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_setItem_fe04f524052a3839 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n      getObject(arg0).setItem(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_cb_drop = function (arg0) {\n    const obj = takeObject(arg0).original;\n    if (obj.cnt-- == 1) {\n      obj.a = 0;\n      return true;\n    }\n    const ret = false;\n    return ret;\n  };\n  imports.wbg.__wbg_deviceId_58f7da2228a26c02 = function (arg0, arg1) {\n    const ret = getObject(arg1).deviceId;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_instanceof_Response_944e2745b5db71f5 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Response;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_randomFillSync_a0d98aa11c81fe89 = function () {\n    return handleError(function (arg0, arg1) {\n      getObject(arg0).randomFillSync(takeObject(arg1));\n    }, arguments);\n  };\n  imports.wbg.__wbg_subarray_6ca5cfa7fbb9abbe = function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_getRandomValues_504510b5564925af = function () {\n    return handleError(function (arg0, arg1) {\n      getObject(arg0).getRandomValues(getObject(arg1));\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_bigint_get_as_i64 = function (arg0, arg1) {\n    const v = getObject(arg1);\n    const ret = typeof v === \"bigint\" ? v : undefined;\n    getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? BigInt(0) : ret;\n    getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n  };\n  imports.wbg.__wbindgen_debug_string = function (arg0, arg1) {\n    const ret = debugString(getObject(arg1));\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n  };\n  imports.wbg.__wbg_then_89e1c559530b85cf = function (arg0, arg1) {\n    const ret = getObject(arg0).then(getObject(arg1));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_queueMicrotask_e5949c35d772a669 = function (arg0) {\n    queueMicrotask(getObject(arg0));\n  };\n  imports.wbg.__wbg_then_1bbc9edafd859b06 = function (arg0, arg1, arg2) {\n    const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_queueMicrotask_2be8b97a81fe4d00 = function (arg0) {\n    const ret = getObject(arg0).queueMicrotask;\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_resolve_a3252b2860f0a09e = function (arg0) {\n    const ret = Promise.resolve(getObject(arg0));\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbg_url_1f609e63ff1a7983 = function (arg0, arg1) {\n    const ret = getObject(arg1).url;\n    const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_export_0, wasm.__wbindgen_export_1);\n    const len1 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len1;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n  };\n  imports.wbg.__wbg_send_2860805104507701 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      getObject(arg0).send(getArrayU8FromWasm0(arg1, arg2));\n    }, arguments);\n  };\n  imports.wbg.__wbg_instanceof_Window_cde2416cf5126a72 = function (arg0) {\n    let result;\n    try {\n      result = getObject(arg0) instanceof Window;\n    } catch (_) {\n      result = false;\n    }\n    const ret = result;\n    return ret;\n  };\n  imports.wbg.__wbg_new_19676474aa414d62 = function () {\n    return handleError(function () {\n      const ret = new Headers();\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbg_append_feec4143bbf21904 = function () {\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n      getObject(arg0).append(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n    }, arguments);\n  };\n  imports.wbg.__wbg_newwithstrandinit_29038da14d09e330 = function () {\n    return handleError(function (arg0, arg1, arg2) {\n      const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\n      return addHeapObject(ret);\n    }, arguments);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1532 = function (arg0, arg1, arg2) {\n    const ret = makeClosure(arg0, arg1, 76, __wbg_adapter_46);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1602 = function (arg0, arg1, arg2) {\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_49);\n    return addHeapObject(ret);\n  };\n  imports.wbg.__wbindgen_closure_wrapper1834 = function (arg0, arg1, arg2) {\n    const ret = makeMutClosure(arg0, arg1, 76, __wbg_adapter_52);\n    return addHeapObject(ret);\n  };\n\n  return imports;\n}\n\nfunction __wbg_init_memory(imports, maybe_memory) {}\n\nfunction __wbg_finalize_init(instance, module) {\n  wasm = instance.exports;\n  __wbg_init.__wbindgen_wasm_module = module;\n  cachedBigInt64Memory0 = null;\n  cachedFloat64Memory0 = null;\n  cachedInt32Memory0 = null;\n  cachedUint8Memory0 = null;\n\n  wasm.__wbindgen_start();\n  return wasm;\n}\n\nfunction initSync(module) {\n  if (wasm !== undefined) return wasm;\n\n  const imports = __wbg_get_imports();\n\n  __wbg_init_memory(imports);\n\n  if (!(module instanceof WebAssembly.Module)) {\n    module = new WebAssembly.Module(module);\n  }\n\n  const instance = new WebAssembly.Instance(module, imports);\n\n  return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(input) {\n  if (wasm !== undefined) return wasm;\n\n  if (typeof input === \"undefined\") {\n    input = new URL(\"telemeter_wasm_bg.wasm\", import.meta.url);\n  }\n  const imports = __wbg_get_imports();\n\n  if (\n    typeof input === \"string\" ||\n    (typeof Request === \"function\" && input instanceof Request) ||\n    (typeof URL === \"function\" && input instanceof URL)\n  ) {\n    input = fetch(input);\n  }\n\n  __wbg_init_memory(imports);\n\n  const { instance, module } = await __wbg_load(await input, imports);\n\n  return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","import init, { Telemeter as TelemeterWASM } from \"../telemeter-wasm\";\n\n/**\n * @classdesc\n * This class implements the @wiris/telemeter-wasm. A utility that helps our Solutions to send the data\n * to Telemetry in a more comfortable and homogeneous way.\n */\nexport default class Telemeter {\n  /**\n   * Inits Telemeter class.\n   * The parameters structures are defiended on {@link [Telemeter API](https://github.com/wiris/telemeter/blob/main/docs/USAGE.md#telemeter-api)}\n   * @param {Object} telemeterAttributes.solution - The product that send data to Telemetry.\n   * @param {Object} telemeterAttributes.hosts - Data about the environment where solution is integrated.\n   * @param {Object} telemeterAttributes.config - Configuration parameters.\n   */\n  static init(telemeterAttributes) {\n    if (!this.telemeter && !this.waitingForInit) {\n      this.waitingForInit = true;\n      init(telemeterAttributes.url)\n        .then(() => {\n          this.telemeter = new TelemeterWASM(\n            telemeterAttributes.solution,\n            telemeterAttributes.hosts,\n            telemeterAttributes.config,\n          );\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => (this.waitingForInit = false));\n    }\n  }\n\n  /**\n   * Closes the Telemetry Session. After calling this method no data will be added to the Telemetry Session.\n   */\n  static async finish() {\n    if (!this.telemeter) return;\n\n    try {\n      let local_telemeter = this.telemeter;\n      this.telemeter = undefined;\n      await local_telemeter.finish();\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\n","import Configuration from \"./configuration\";\nimport Core from \"./core.src\";\nimport EditorListener from \"./editorlistener\";\nimport Listeners from \"./listeners\";\nimport MathML from \"./mathml\";\nimport Util from \"./util\";\nimport Telemeter from \"./telemeter\";\n\nexport default class ContentManager {\n  /**\n   * @classdesc\n   * This class represents a modal dialog, managing the following:\n   * - The insertion of content into the current instance of the {@link ModalDialog} class.\n   * - The actions to be done once the modal object has been submitted\n   *   (submitAction} method).\n   * - The update of the content when the {@link ModalDialog} class is also updated,\n   *   for example when ModalDialog is re-opened.\n   * - The communication between the {@link ModalDialog} class and itself, if the content\n   *   has been changed (hasChanges} method).\n   * @constructs\n   * @param {Object} contentManagerAttributes - Object containing all attributes needed to\n   * create a new instance.\n   */\n  constructor(contentManagerAttributes) {\n    /**\n     * An object containing MathType editor parameters. See\n     * http://docs.wiris.com/en/mathtype/mathtype_web/sdk-api/parameters for further information.\n     * @type {Object}\n     */\n    this.editorAttributes = {};\n    if (\"editorAttributes\" in contentManagerAttributes) {\n      this.editorAttributes = contentManagerAttributes.editorAttributes;\n    } else {\n      throw new Error(\"ContentManager constructor error: editorAttributes property missed.\");\n    }\n\n    /**\n     * CustomEditors instance. Contains the custom editors.\n     * @type {CustomEditors}\n     */\n    this.customEditors = null;\n    if (\"customEditors\" in contentManagerAttributes) {\n      this.customEditors = contentManagerAttributes.customEditors;\n    }\n\n    /**\n     * Environment properties. This object contains data about the integration platform.\n     * @type {Object}\n     * @property {String} editor - Editor name. Usually the HTML editor.\n     * @property {String} mode - Save mode. Xml by default.\n     * @property {String} version - Plugin version.\n     */\n    this.environment = {};\n    if (\"environment\" in contentManagerAttributes) {\n      this.environment = contentManagerAttributes.environment;\n    } else {\n      throw new Error(\"ContentManager constructor error: environment property missed\");\n    }\n\n    /**\n     * ContentManager language.\n     * @type {String}\n     */\n    this.language = \"\";\n    if (\"language\" in contentManagerAttributes) {\n      this.language = contentManagerAttributes.language;\n    } else {\n      throw new Error(\"ContentManager constructor error: language property missed\");\n    }\n\n    /**\n     * {@link EditorListener} instance. Manages the changes inside the editor.\n     * @type {EditorListener}\n     */\n    this.editorListener = new EditorListener();\n\n    /**\n     * MathType editor instance.\n     * @type {JsEditor}\n     */\n    this.editor = null;\n\n    /**\n     * Navigator user agent.\n     * @type {String}\n     */\n    this.ua = navigator.userAgent.toLowerCase();\n\n    /**\n     * Mobile device properties object\n     * @type {DeviceProperties}\n     */\n    this.deviceProperties = {};\n    this.deviceProperties.isAndroid = this.ua.indexOf(\"android\") > -1;\n    this.deviceProperties.isIOS = ContentManager.isIOS();\n\n    /**\n     * Custom editor toolbar.\n     * @type {String}\n     */\n    this.toolbar = null;\n\n    /**\n     * Custom editor toolbar.\n     * @type {String}\n     */\n    this.dbclick = null;\n\n    /**\n     * Instance of the {@link ModalDialog} class associated with the current\n     * {@link ContentManager} instance.\n     * @type {ModalDialog}\n     */\n    this.modalDialogInstance = null;\n\n    /**\n     * ContentManager listeners.\n     * @type {Listeners}\n     */\n    this.listeners = new Listeners();\n\n    /**\n     * MathML associated to the ContentManager instance.\n     * @type {String}\n     */\n    this.mathML = null;\n\n    /**\n     * Indicates if the edited element is a new one or not.\n     * @type {Boolean}\n     */\n    this.isNewElement = true;\n\n    /**\n     * {@link IntegrationModel} instance. Needed to call wrapper methods.\n     * @type {IntegrationModel}\n     */\n    this.integrationModel = null;\n  }\n\n  /**\n   * Adds a new listener to the current {@link ContentManager} instance.\n   * @param {Object} listener - The listener to be added.\n   */\n  addListener(listener) {\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Sets an instance of {@link IntegrationModel} class to the current {@link ContentManager}\n   * instance.\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} instance.\n   */\n  setIntegrationModel(integrationModel) {\n    this.integrationModel = integrationModel;\n  }\n\n  /**\n   * Sets the {@link ModalDialog} instance into the current {@link ContentManager} instance.\n   * @param {ModalDialog} modalDialogInstance - The {@link ModalDialog} instance\n   */\n  setModalDialogInstance(modalDialogInstance) {\n    this.modalDialogInstance = modalDialogInstance;\n  }\n\n  /**\n   * Inserts the content into the current {@link ModalDialog} instance updating\n   * the title and inserting the JavaScript editor.\n   */\n  insert() {\n    // Before insert the editor we update the modal object title to avoid weird render display.\n    this.updateTitle(this.modalDialogInstance);\n    this.insertEditor(this.modalDialogInstance);\n  }\n\n  /**\n   * Inserts MathType editor into the {@link ModalDialog.contentContainer}. It waits until\n   * editor's JavaScript is loaded.\n   */\n  insertEditor() {\n    if (ContentManager.isEditorLoaded()) {\n      this.editor = window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);\n      this.editor.insertInto(this.modalDialogInstance.contentContainer);\n      this.editor.focus();\n      if (this.modalDialogInstance.rtl) {\n        this.editor.action(\"rtl\");\n      }\n      // Setting div in rtl in case of it's activated.\n      if (this.editor.getEditorModel().isRTL()) {\n        this.editor.element.style.direction = \"rtl\";\n      }\n\n      // Editor listener: this object manages the changes logic of editor.\n      this.editor.getEditorModel().addEditorListener(this.editorListener);\n\n      // iOS events.\n      if (this.modalDialogInstance.deviceProperties.isIOS) {\n        setTimeout(function () {\n          // Make sure the modalDialogInstance is available when the timeout is over\n          // to avoid throw errors and stop execution.\n          if (this.hasOwnProperty(\"modalDialogInstance\")) this.modalDialogInstance.hideKeyboard(); // eslint-disable-line no-prototype-builtins\n        }, 400);\n\n        const formulaDisplayDiv = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n        Util.addEvent(formulaDisplayDiv, \"focus\", this.modalDialogInstance.handleOpenedIosSoftkeyboard);\n        Util.addEvent(formulaDisplayDiv, \"blur\", this.modalDialogInstance.handleClosedIosSoftkeyboard);\n      }\n      // Fire onLoad event. Necessary to set the MathML into the editor\n      // after is loaded.\n      this.listeners.fire(\"onLoad\", {});\n    } else {\n      setTimeout(ContentManager.prototype.insertEditor.bind(this), 100);\n    }\n  }\n\n  /**\n   * Initializes the current class by loading MathType script.\n   */\n  init() {\n    if (!ContentManager.isEditorLoaded()) {\n      this.addEditorAsExternalDependency();\n    }\n  }\n\n  /**\n   * Adds script element to the DOM to include editor externally.\n   */\n  addEditorAsExternalDependency() {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    let editorUrl = Configuration.get(\"editorUrl\");\n\n    // We create an object url for parse url string and work more efficiently.\n    const anchorElement = document.createElement(\"a\");\n\n    ContentManager.setHrefToAnchorElement(anchorElement, editorUrl);\n    ContentManager.setProtocolToAnchorElement(anchorElement);\n\n    editorUrl = ContentManager.getURLFromAnchorElement(anchorElement);\n\n    // Load editor URL. We add stats as GET params.\n    const stats = this.getEditorStats();\n    script.src = `${editorUrl}?lang=${this.language}&stats-editor=${stats.editor}&stats-mode=${stats.mode}&stats-version=${stats.version}`;\n\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n  }\n\n  /**\n   * Sets the specified url to the anchor element.\n   * @param {HTMLAnchorElement} anchorElement - Element where set 'url'.\n   * @param {String} url - URL to set.\n   */\n  static setHrefToAnchorElement(anchorElement, url) {\n    anchorElement.href = url;\n  }\n\n  /**\n   * Sets the current protocol to the anchor element.\n   * @param {HTMLAnchorElement} anchorElement - Element where set its protocol.\n   */\n  static setProtocolToAnchorElement(anchorElement) {\n    // Change to https if necessary.\n    if (window.location.href.indexOf(\"https://\") === 0) {\n      // It check if browser is https and configuration is http.\n      // If this is so, we will replace protocol.\n      if (anchorElement.protocol === \"http:\") {\n        anchorElement.protocol = \"https:\";\n      }\n    }\n  }\n\n  /**\n   * Returns the url of the anchor element adding the current port\n   * if it is needed.\n   * @param {HTMLAnchorElement} anchorElement - Element where extract the url.\n   * @returns {String}\n   */\n  static getURLFromAnchorElement(anchorElement) {\n    // Check protocol and remove port if it's standard.\n    const removePort = anchorElement.port === \"80\" || anchorElement.port === \"443\" || anchorElement.port === \"\";\n    return `${anchorElement.protocol}//${anchorElement.hostname}${removePort ? \"\" : `:${anchorElement.port}`}${anchorElement.pathname.startsWith(\"/\") ? anchorElement.pathname : `/${anchorElement.pathname}`}`; // eslint-disable-line max-len\n  }\n\n  /**\n   * Returns object with editor stats.\n   *\n   * @typedef {Object} EditorStatsObject\n   * @property {string} editor - Editor name.\n   * @property {string} mode - Current configuration for formula save mode.\n   * @property {string} version - Current plugins version.\n   * @returns {EditorStatsObject}\n   */\n  getEditorStats() {\n    // Editor stats. Use environment property to set it.\n    const stats = {};\n    if (\"editor\" in this.environment) {\n      stats.editor = this.environment.editor;\n    } else {\n      stats.editor = \"unknown\";\n    }\n\n    if (\"mode\" in this.environment) {\n      stats.mode = this.environment.mode;\n    } else {\n      stats.mode = Configuration.get(\"saveMode\");\n    }\n\n    if (\"version\" in this.environment) {\n      stats.version = this.environment.version;\n    } else {\n      stats.version = Configuration.get(\"version\");\n    }\n\n    return stats;\n  }\n\n  /**\n   * Returns true if device is iOS. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isIOS() {\n    return (\n      [\"iPad Simulator\", \"iPhone Simulator\", \"iPod Simulator\", \"iPad\", \"iPhone\", \"iPod\"].includes(navigator.platform) ||\n      // iPad on iOS 13 detection\n      (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n    );\n  }\n\n  /**\n   * Returns true if device is Mobile. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  }\n\n  /**\n   * Returns true if editor is loaded. Otherwise, false.\n   * @returns {Boolean}\n   */\n  static isEditorLoaded() {\n    // To know if editor JavaScript is loaded we need to wait until\n    // window.com.wiris.jsEditor.JsEditor.newInstance is ready.\n    return (\n      window.com &&\n      window.com.wiris &&\n      window.com.wiris.jsEditor &&\n      window.com.wiris.jsEditor.JsEditor &&\n      window.com.wiris.jsEditor.JsEditor.newInstance\n    );\n  }\n\n  /**\n   * Sets the {@link ContentManager.editor} initial content.\n   */\n  setInitialContent() {\n    if (!this.isNewElement) {\n      this.setMathML(this.mathML);\n    }\n  }\n\n  /**\n   * Sets a MathML into {@link ContentManager.editor} instance.\n   * @param {String} mathml - MathML string.\n   * @param {Boolean} focusDisabled - If true editor don't get focus after the MathML is set.\n   * False by default.\n   */\n  setMathML(mathml, focusDisabled) {\n    // By default focus is enabled.\n    if (typeof focusDisabled === \"undefined\") {\n      focusDisabled = false;\n    }\n    // Using setMathML method is not a change produced by the user but for the API\n    // so we set to false the contentChange property of editorListener.\n    this.editor.setMathMLWithCallback(mathml, () => {\n      this.editorListener.setWaitingForChanges(true);\n    });\n\n    // We need to wait a little until the callback finish.\n    setTimeout(() => {\n      this.editorListener.setIsContentChanged(false);\n    }, 500);\n\n    // In some scenarios - like closing modal object - editor mustn't be focused.\n    if (!focusDisabled) {\n      this.onFocus();\n    }\n  }\n\n  /**\n   * Sets the focus to the current instance of {@link ContentManager.editor}. Triggered by\n   * {@link ModalDialog.focus}.\n   */\n  onFocus() {\n    if (typeof this.editor !== \"undefined\" && this.editor != null) {\n      this.editor.focus();\n\n      // On WordPress integration, the focus gets lost right after setting it.\n      // To fix this, we enforce another focus some milliseconds after this behaviour.\n      setTimeout(() => {\n        this.editor.focus();\n      }, 100);\n    }\n  }\n\n  /**\n   * Updates the edition area by calling {@link IntegrationModel.updateFormula}.\n   * Triggered by {@link ModalDialog.submitAction}.\n   */\n  submitAction() {\n    if (!this.editor.isFormulaEmpty()) {\n      let mathML = this.editor.getMathMLWithSemantics();\n      // Add class for custom editors.\n      if (this.customEditors.getActiveEditor() !== null) {\n        const { toolbar } = this.customEditors.getActiveEditor();\n        mathML = MathML.addCustomEditorClassAttribute(mathML, toolbar);\n      } else {\n        // We need - if exists - the editor name from MathML\n        // class attribute.\n        Object.keys(this.customEditors.editors).forEach((key) => {\n          mathML = MathML.removeCustomEditorClassAttribute(mathML, key);\n        });\n      }\n      const mathmlEntitiesEncoded = MathML.mathMLEntities(mathML);\n      this.integrationModel.updateFormula(mathmlEntitiesEncoded);\n    } else {\n      this.integrationModel.updateFormula(null);\n    }\n\n    this.customEditors.disable();\n    this.integrationModel.notifyWindowClosed();\n\n    // Set disabled focus to prevent lost focus.\n    this.setEmptyMathML();\n    this.customEditors.disable();\n  }\n\n  /**\n   * Sets an empty MathML as {@link ContentManager.editor} content.\n   * This will open the MT/CT editor with the hand mode.\n   * It adds dir rtl in case of it's activated.\n   */\n  setEmptyMathML() {\n    const isMobile = this.deviceProperties.isAndroid || this.deviceProperties.isIOS;\n    const isRTL = this.editor.getEditorModel().isRTL();\n\n    if (isMobile || this.integrationModel.forcedHandMode) {\n      // For mobile devices or forced hand mode, set an empty annotation MATHML to maintain the editor in Hand mode.\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>`;\n      this.setMathML(mathML, true);\n    } else {\n      // For non-mobile devices or not forced hand mode, set the empty MathML without an annotation.\n      const mathML = `<math${isRTL ? ' dir=\"rtl\"' : \"\"}/>`;\n      this.setMathML(mathML, true);\n    }\n  }\n\n  /**\n   * Open event. Triggered by {@link ModalDialog.open}. Does the following:\n   * - Updates the {@link ContentManager.editor} content\n   *   (with an empty MathML or an existing formula),\n   * - Updates the {@link ContentManager.editor} toolbar.\n   * - Recovers the the focus.\n   */\n  onOpen() {\n    if (this.isNewElement) {\n      this.setEmptyMathML();\n    } else {\n      this.setMathML(this.mathML);\n    }\n    let toolbar = this.updateToolbar();\n    this.onFocus();\n\n    if (this.deviceProperties.isIOS) {\n      const zoom = document.documentElement.clientWidth / window.innerWidth;\n\n      if (zoom !== 1) {\n        // Open editor in Keyboard mode if user use iOS, Safari and page is zoomed.\n        this.setKeyboardMode();\n      }\n    }\n\n    let trigger = this.dbclick ? \"formula\" : \"button\";\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"OPENED_MTCT_EDITOR\", {\n        toolbar: toolbar,\n        trigger: trigger,\n      });\n    } catch (error) {\n      console.error(\"Error tracking OPENED_MTCT_EDITOR\", error);\n    }\n\n    Core.globalListeners.fire(\"onModalOpen\", {});\n\n    if (this.integrationModel.forcedHandMode) {\n      this.hideHandModeButton();\n\n      // In case we have a keyboard written formula, we still want it to be opened with handMode.\n      if (this.mathML && !this.mathML.includes('<annotation encoding=\"application/json\">') && !this.isNewElement) {\n        this.openHandOnKeyboardMathML(this.mathML, this.editor);\n      }\n    }\n  }\n\n  /**\n   * Change Editor in keyboard mode when is loaded\n   */\n  setKeyboardMode() {\n    const wrsEditor = document.getElementsByClassName(\"wrs_handOpen wrs_disablePalette\")[0];\n    if (wrsEditor) {\n      wrsEditor.classList.remove(\"wrs_handOpen\");\n      wrsEditor.classList.remove(\"wrs_disablePalette\");\n    } else {\n      setTimeout(ContentManager.prototype.setKeyboardMode.bind(this), 100);\n    }\n  }\n\n  /**\n   * Hides the hand <-> keyboard mode switch.\n   *\n   * This method relies completely on the classes used on different HTML elements within the editor itself, meaning\n   * any change on those classes will make this code stop working properly.\n   *\n   * On top of that, some of those classes are changed on runtime (for example, the one that makes some buttons change).\n   * This forces us to use some delayed code (this is, a timeout) to make sure everything exists when we need it.\n   * @param {*} forced (boolean) Forces the user to stay in Hand mode by hiding the keyboard mode button.\n   */\n  hideHandModeButton(forced = true) {\n    if (this.handSwitchHidden) {\n      return; // hand <-> keyboard button already hidden.\n    }\n\n    // \"Open hand mode\" button takes a little bit to be available.\n    // This selector gets the hand <-> keyboard mode switch\n    const handModeButtonSelector =\n      \"div.wrs_editor.wrs_flexEditor.wrs_withHand.wrs_animated .wrs_handWrapper input[type=button]\";\n\n    // If in \"forced mode\", we hide the \"keyboard button\" so the user can't can't change between hand and keyboard modes.\n    // We use an observer to ensure that the button it hidden as soon as it appears.\n    if (forced) {\n      const mutationInstance = new MutationObserver((mutations) => {\n        const handModeButton = document.querySelector(handModeButtonSelector);\n        if (handModeButton) {\n          handModeButton.hidden = true;\n          this.handSwitchHidden = true;\n          mutationInstance.disconnect();\n        }\n      });\n      mutationInstance.observe(document.body, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true,\n      });\n    }\n  }\n\n  /**\n   * It will open any formula written in Keyboard mode with the hand mode with the default hand trace.\n   *\n   * @param {String} mathml The original KeyBoard MathML\n   * @param {Object} editor The editor object.\n   */\n  async openHandOnKeyboardMathML(mathml, editor) {\n    // First, as an editor requirement, we need to update the editor object with the current MathML formula.\n    // Once the MathML formula is updated to the one we want to open with handMode, we will be able to proceed.\n    await new Promise((resolve) => {\n      editor.setMathMLWithCallback(mathml, resolve);\n    });\n\n    // We wait until the hand editor object exists.\n    await this.waitForHand(editor);\n\n    // Logic to get the hand traces and open the formula in hand mode.\n    // This logic comes from the editor.\n    const handEditor = editor.hand;\n    editor.handTemporalMathML = editor.getMathML();\n    const handCoordinates = editor.editorModel.getHandStrokes();\n    handEditor.setStrokes(handCoordinates);\n    handEditor.fitStrokes(true);\n    editor.openHand();\n  }\n\n  /**\n   * Waits until the hand editor object exists.\n   * @param {Obect} editor The editor object.\n   */\n  async waitForHand(editor) {\n    while (!editor.hand) {\n      await new Promise((resolve) => setTimeout(resolve, 100));\n    }\n  }\n\n  /**\n   * Sets the correct toolbar depending if exist other custom toolbars\n   * at the same time (e.g: Chemistry).\n   */\n  updateToolbar() {\n    this.updateTitle(this.modalDialogInstance);\n    const customEditor = this.customEditors.getActiveEditor();\n\n    let toolbar;\n    if (customEditor) {\n      toolbar = customEditor.toolbar ? customEditor.toolbar : _wrs_int_wirisProperties.toolbar;\n\n      if (this.toolbar == null || this.toolbar !== toolbar) {\n        this.setToolbar(toolbar);\n      }\n    } else {\n      toolbar = this.getToolbar();\n      if (this.toolbar == null || this.toolbar !== toolbar) {\n        this.setToolbar(toolbar);\n        this.customEditors.disable();\n      }\n    }\n\n    return toolbar;\n  }\n\n  /**\n   * Updates the current {@link ModalDialog.title}. If a {@link CustomEditors} is enabled\n   * sets the custom editor title. Otherwise sets the default title.\n   */\n  updateTitle() {\n    const customEditor = this.customEditors.getActiveEditor();\n    if (customEditor) {\n      this.modalDialogInstance.setTitle(customEditor.title);\n    } else {\n      this.modalDialogInstance.setTitle(\"MathType\");\n    }\n  }\n\n  /**\n   * Returns the editor toolbar, depending on the configuration local or server side.\n   * @returns {String} - Toolbar identifier.\n   */\n  getToolbar() {\n    let toolbar = \"general\";\n    if (\"toolbar\" in this.editorAttributes) {\n      ({ toolbar } = this.editorAttributes);\n    }\n    // TODO: Change global integration variable for integration custom toolbar.\n    if (toolbar === \"general\") {\n      // eslint-disable-next-line camelcase\n      toolbar =\n        typeof _wrs_int_wirisProperties === \"undefined\" || typeof _wrs_int_wirisProperties.toolbar === \"undefined\"\n          ? \"general\"\n          : _wrs_int_wirisProperties.toolbar;\n    }\n\n    return toolbar;\n  }\n\n  /**\n   * Sets the current {@link ContentManager.editor} instance toolbar.\n   * @param {String} toolbar - The toolbar name.\n   */\n  setToolbar(toolbar) {\n    this.toolbar = toolbar;\n    this.editor.setParams({ toolbar: this.toolbar });\n  }\n\n  /**\n   * Sets the custom headers added on editor requests.\n   * @returns {Object} headers - key value headers.\n   */\n  setCustomHeaders(headers) {\n    let headersObj = {};\n\n    // We control that we only get String or Object as the input.\n    if (typeof headers === \"object\") {\n      headersObj = headers;\n    } else if (typeof headers === \"string\") {\n      headersObj = Util.convertStringToObject(headers);\n    }\n\n    this.editor.setParams({ customHeaders: headersObj });\n    return headersObj;\n  }\n\n  /**\n   * Returns true if the content of the editor has been changed. The logic of the changes\n   * is delegated to {@link EditorListener} class.\n   * @returns {Boolean} True if the editor content has been changed. False otherwise.\n   */\n  hasChanges() {\n    return !this.editor.isFormulaEmpty() && this.editorListener.getIsContentChanged();\n  }\n\n  /**\n   * Handle keyboard events detected in modal when elements of this class intervene.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined && keyboardEvent.repeat === false) {\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n        // Code to detect Esc event.\n        // There should be only one element with class name 'wrs_pressed' at the same time.\n        let list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed\");\n        if (list.length === 0) {\n          list = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed\");\n          if (list.length === 0) {\n            list = document.getElementsByClassName(\"wrs_select wrs_pressed\");\n            if (list.length === 0) {\n              this.modalDialogInstance.cancelAction();\n              keyboardEvent.stopPropagation();\n              keyboardEvent.preventDefault();\n            }\n          }\n        }\n      } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\n        // Code to detect shift Tab event.\n        if (document.activeElement === this.modalDialogInstance.submitButton) {\n          // Focus is on OK button.\n          this.editor.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else if (document.querySelector('[title=\"Manual\"]') === document.activeElement) {\n          // Focus is on minimize button (_).\n          this.modalDialogInstance.closeDiv.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else {\n          if (document.activeElement === this.modalDialogInstance.minimizeDiv) {\n            // Focus on cancel button.\n            if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\n              this.modalDialogInstance.cancelButton.focus();\n              keyboardEvent.stopPropagation();\n              keyboardEvent.preventDefault();\n            }\n          }\n        }\n      } else if (keyboardEvent.key === \"Tab\") {\n        // Code to detect Tab event.\n        if (document.activeElement === this.modalDialogInstance.cancelButton) {\n          // Focus is on X button.\n          this.modalDialogInstance.minimizeDiv.focus();\n          keyboardEvent.stopPropagation();\n          keyboardEvent.preventDefault();\n        } else if (document.activeElement === this.modalDialogInstance.closeDiv) {\n          // Focus on help button.\n          if (!(this.modalDialogInstance.properties.state === \"minimized\")) {\n            const element = document.querySelector('[title=\"Manual\"]');\n            element.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          }\n        } else {\n          // There should be only one element with class name 'wrs_formulaDisplay'.\n          const element = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n          if (element.getAttribute(\"class\") === \"wrs_formulaDisplay wrs_focused\") {\n            // Focus is on formuladisplay.\n            this.modalDialogInstance.submitButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          }\n        }\n      }\n    }\n  }\n}\n","/**\n * A custom editor is MathType editor with a different\n * @typedef {Object} CustomEditor\n * @property {String} CustomEditor.name - Custom editor name.\n * @property {String} CustomEditor.toolbar - Custom editor toolbar.\n * @property {String} CustomEditor.icon - Custom editor icon.\n * @property {String} CustomEditor.confVariable - Configuration property to manage\n * the availability of the custom editor.\n * @property {String} CustomEditor.title - Custom editor modal dialog title.\n * @property {String} CustomEditor.tooltip - Custom editor icon tooltip.\n */\n\nexport default class CustomEditors {\n  /**\n   * @classdesc\n   * This class represents the MathType custom editors manager.\n   * A custom editor is MathType editor with a custom  toolbar.\n   * This class associates a {@link CustomEditor} to:\n   * - It's own formulas\n   * - A custom toolbar\n   * - An icon to open it from a HTML editor.\n   * - A tooltip for the icon.\n   * - A global variable to enable or disable it globally.\n   * @constructs\n   */\n  constructor() {\n    /**\n     * The custom editors.\n     * @type {Array.<CustomEditor>}\n     */\n\n    this.editors = [];\n    /**\n     * The active editor name.\n     * @type {String}\n     */\n    this.activeEditor = \"default\";\n  }\n\n  /**\n   * Adds a {@link CustomEditor} to editors array.\n   * @param {String} editorName - The editor name.\n   * @param {CustomEditor} editorParams - The custom editor parameters.\n   */\n  addEditor(editorName, editorParams) {\n    const customEditor = {};\n    customEditor.name = editorParams.name;\n    customEditor.toolbar = editorParams.toolbar;\n    customEditor.icon = editorParams.icon;\n    customEditor.confVariable = editorParams.confVariable;\n    customEditor.title = editorParams.title;\n    customEditor.tooltip = editorParams.tooltip;\n    this.editors[editorName] = customEditor;\n  }\n\n  /**\n   * Enables a {@link CustomEditor}.\n   * @param {String} customEditorName - The custom editor name.\n   */\n  enable(customEditorName) {\n    this.activeEditor = customEditorName;\n  }\n\n  /**\n   * Disables a {@link CustomEditor}.\n   */\n  disable() {\n    this.activeEditor = \"default\";\n  }\n\n  /**\n   * Returns the active editor.\n   * @return {CustomEditor} - A {@link CustomEditor} if a custom editor is enabled. Null otherwise.\n   */\n  getActiveEditor() {\n    if (this.activeEditor !== \"default\") {\n      return this.editors[this.activeEditor];\n    }\n    return null;\n  }\n}\n","/**\n * Represents the configuration properties generated from the frontend (JavaScript variables).\n * @type {Object}\n * @property {string} imageClassName - Default MathType formula image class.\n * @property {string} imageClassName - Default MathType CAS image class.\n * @ignore\n */\nconst jsProperties = {\n  imageCustomEditorName: \"data-custom-editor\",\n  imageClassName: \"Wirisformula\",\n  CASClassName: \"Wiriscas\",\n};\nexport default jsProperties;\n","export default class Event {\n  /**\n   * @classdesc\n   * This class represents a custom event. Events should be fired by the {@link Listener} class.\n   *\n   * ```js\n   *  let customEvent = new Event();\n   *  customEvent.properties = {};\n   *\n   *  let listeners = new Listeners();\n   *  listeners.newListener(eventName, callback);\n   *\n   *  listeners.fire(eventName, customEvent) *\n   * ```\n   * @constructs\n   */\n  constructor() {\n    /**\n     * Indicates if the event should be cancelled.\n     * @type {Boolean}\n     */\n\n    this.cancelled = false;\n    /**\n     * Indicates if the event should be prevented.\n     * @type {Boolean}\n     */\n    this.defaultPrevented = false;\n  }\n\n  /**\n   * Cancels the event.\n   */\n  cancel() {\n    this.cancelled = true;\n  }\n\n  /**\n   * Prevents the default action.\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n}\n","import IntegrationModel from \"./integrationmodel\";\n\n/**\n\n */\nexport default class PopUpMessage {\n  /**\n   * @classdesc\n   * This class represents a dialog message overlaying a DOM element in order to\n   * accept / cancel discard changes. The dialog can be closed i.e the overlay disappears\n   * o canceled. In this last case a callback function should be called.\n   * @constructs\n   * @param {Object} popupMessageAttributes - Object containing popup properties.\n   * @param {HTMLElement} popupMessageAttributes.overlayElement - Element to overlay.\n   * @param {Object} popupMessageAttributes.callbacks - Contains callback\n   * methods for close and cancel actions.\n   * @param {Object} popupMessageAttributes.strings - Contains all the strings needed.\n   */\n  constructor(popupMessageAttributes) {\n    /**\n     * Element to be overlaid when the popup appears.\n     */\n    this.overlayElement = popupMessageAttributes.overlayElement;\n\n    this.callbacks = popupMessageAttributes.callbacks;\n\n    /**\n     * HTMLElement element to wrap all HTML elements inside the popupMessage.\n     */\n    this.overlayWrapper = this.overlayElement.appendChild(document.createElement(\"div\"));\n    this.overlayWrapper.setAttribute(\"class\", \"wrs_popupmessage_overlay_envolture\");\n\n    /**\n     * HTMLElement to display the popup message, close button and cancel button.\n     */\n    this.message = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n    this.message.id = \"wrs_popupmessage\";\n    this.message.setAttribute(\"class\", \"wrs_popupmessage_panel\");\n    this.message.setAttribute(\"role\", \"dialog\");\n    this.message.setAttribute(\"aria-describedby\", \"description_txt\");\n    const paragraph = document.createElement(\"p\");\n    const text = document.createTextNode(popupMessageAttributes.strings.message);\n    paragraph.appendChild(text);\n    paragraph.id = \"description_txt\";\n    this.message.appendChild(paragraph);\n\n    /**\n     * HTML element overlaying the overlayElement.\n     */\n    const overlay = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n    overlay.setAttribute(\"class\", \"wrs_popupmessage_overlay\");\n    // We create a overlay that close popup message on click in there\n    overlay.addEventListener(\"click\", this.cancelAction.bind(this));\n\n    /**\n     * HTML element containing cancel and close buttons.\n     */\n    this.buttonArea = this.message.appendChild(document.createElement(\"div\"));\n    this.buttonArea.setAttribute(\"class\", \"wrs_popupmessage_button_area\");\n    this.buttonArea.id = \"wrs_popup_button_area\";\n\n    // Close button arguments.\n    const buttonSubmitArguments = {\n      class: \"wrs_button_accept\",\n      innerHTML: popupMessageAttributes.strings.submitString,\n      id: \"wrs_popup_accept_button\",\n      // To identifiy the element in automated testing\n      \"data-testid\": \"mtcteditor-cd-close-button\",\n    };\n\n    /**\n     * Close button arguments.\n     */\n    this.closeButton = this.createButton(buttonSubmitArguments, this.closeAction.bind(this));\n    this.buttonArea.appendChild(this.closeButton);\n\n    // Cancel button arguments.\n    const buttonCancelArguments = {\n      class: \"wrs_button_cancel\",\n      innerHTML: popupMessageAttributes.strings.cancelString,\n      id: \"wrs_popup_cancel_button\",\n      // To identifiy the element in automated testing\n      \"data-testid\": \"mtcteditor-cd-cancel-button\",\n    };\n\n    /**\n     * Cancel button.\n     */\n    this.cancelButton = this.createButton(buttonCancelArguments, this.cancelAction.bind(this));\n    this.buttonArea.appendChild(this.cancelButton);\n  }\n\n  /**\n   * This method create a button with arguments and return button dom object\n   * @param {Object} parameters - An object containing id, class and innerHTML button text.\n   * @param {String} parameters.id - Button id.\n   * @param {String} parameters.class - Button class name.\n   * @param {String} parameters.innerHTML - Button innerHTML text.\n   * @param {Object} callback- Callback method to call on click event.\n   * @returns {HTMLElement} HTML button.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  createButton(parameters, callback) {\n    let element = {};\n    element = document.createElement(\"button\");\n    element.setAttribute(\"id\", parameters.id);\n    element.setAttribute(\"class\", parameters.class);\n    element.innerHTML = parameters.innerHTML;\n    element.addEventListener(\"click\", callback);\n    if (parameters[\"data-testid\"]) {\n      element.setAttribute(\"data-testid\", parameters[\"data-testid\"]);\n    }\n\n    return element;\n  }\n\n  /**\n   * Shows the popupmessage containing a message, and two buttons\n   * to cancel the action or close the modal dialog.\n   */\n  show() {\n    if (this.overlayWrapper.style.display !== \"block\") {\n      // Clear focus with blur for prevent press any key.\n      document.activeElement.blur();\n      this.overlayWrapper.style.display = \"block\";\n      this.closeButton.focus();\n    } else {\n      this.overlayWrapper.style.display = \"none\";\n      // _wrs_modalWindow.focus(); This throws an error of not existing _wrs_modalWindow\n    }\n  }\n\n  /**\n   * This method cancels the popupMessage: the dialog disappears revealing the overlaid element.\n   * A callback method is called (if defined). For example a method to focus the overlaid element.\n   */\n  cancelAction() {\n    this.overlayWrapper.style.display = \"none\";\n    if (typeof this.callbacks.cancelCallback !== \"undefined\") {\n      this.callbacks.cancelCallback();\n      // Set temporal image to null to prevent loading\n      // an existent formula when starting one from scratch. Make focus come back too.\n      // IntegrationModel.setActionsOnCancelButtons();\n    }\n  }\n\n  /**\n   * This method closes the popupMessage: the dialog disappears and the close callback is called.\n   * For example to close the overlaid element.\n   */\n  closeAction() {\n    this.cancelAction();\n    if (typeof this.callbacks.closeCallback !== \"undefined\") {\n      this.callbacks.closeCallback();\n    }\n    IntegrationModel.setActionsOnCancelButtons();\n  }\n\n  /**\n   * Handle keyboard events detected in modal when elements of this class intervene.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined) {\n      // Code to detect Esc event.\n      if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n        this.cancelAction();\n        keyboardEvent.stopPropagation();\n        keyboardEvent.preventDefault();\n      } else if (keyboardEvent.key === \"Tab\") {\n        // Code to detect Tab event.\n        if (document.activeElement === this.closeButton) {\n          this.cancelButton.focus();\n        } else {\n          this.closeButton.focus();\n        }\n        keyboardEvent.stopPropagation();\n        keyboardEvent.preventDefault();\n      }\n    }\n  }\n}\n","// eslint-disable-next-line max-classes-per-file\nimport PopUpMessage from \"./popupmessage\";\nimport Util from \"./util\";\nimport Configuration from \"./configuration\";\nimport Listeners from \"./listeners\";\nimport StringManager from \"./stringmanager\";\nimport ContentManager from \"./contentmanager\";\nimport Telemeter from \"./telemeter\";\nimport IntegrationModel from \"./integrationmodel\";\nimport Core from \"./core.src\";\n\nimport closeIcon from \"../styles/icons/general/close_icon.svg\"; //eslint-disable-line\nimport closeHoverIcon from \"../styles/icons/hover/close_icon_h.svg\"; //eslint-disable-line\nimport fullsIcon from \"../styles/icons/general/fulls_icon.svg\"; //eslint-disable-line\nimport fullsHoverIcon from \"../styles/icons/hover/fulls_icon_h.svg\"; //eslint-disable-line\nimport minIcon from \"../styles/icons/general/min_icon.svg\"; //eslint-disable-line\nimport minHoverIcon from \"../styles/icons/hover/min_icon_h.svg\"; //eslint-disable-line\nimport minsIcon from \"../styles/icons/general/mins_icon.svg\"; //eslint-disable-line\nimport minsHoverIcon from \"../styles/icons/hover/mins_icon_h.svg\"; //eslint-disable-line\nimport maxIcon from \"../styles/icons/general/max_icon.svg\"; //eslint-disable-line\nimport maxHoverIcon from \"../styles/icons/hover/max_icon_h.svg\"; //eslint-disable-line\n\n/**\n * @typedef {Object} DeviceProperties\n * @property {String} DeviceProperties.orientation - Indicates of the orientation of the device.\n * @property {Boolean} DeviceProperties.isAndroid - True if the device is Android. False otherwise.\n * @property {Boolean} DeviceProperties.isIOS - True if the device is iOS. False otherwise.\n * @property {Boolean} DeviceProperties.isMobile - True if the device is a mobile one.\n * False otherwise.\n * @property {Boolean} DeviceProperties.isDesktop - True if the device is a desktop one.\n * False otherwise.\n */\n\nexport default class ModalDialog {\n  /**\n   * @classdesc\n   * This class represents a modal dialog. The modal dialog admits\n   * a {@link ContentManager} instance to manage the content of the dialog.\n   * @constructs\n   * @param {Object} modalDialogAttributes  - An object containing all modal dialog attributes.\n   */\n  constructor(modalDialogAttributes) {\n    this.attributes = modalDialogAttributes;\n\n    // Metrics.\n    const ua = navigator.userAgent.toLowerCase();\n    const isAndroid = ua.indexOf(\"android\") > -1;\n    const isIOS = ContentManager.isIOS();\n    this.iosSoftkeyboardOpened = false;\n    this.iosMeasureUnit = ua.indexOf(\"crios\") === -1 ? \"%\" : \"vh\";\n    this.iosDivHeight = `auto`;\n\n    const deviceWidth = window.outerWidth;\n    const deviceHeight = window.outerHeight;\n\n    const landscape = deviceWidth > deviceHeight;\n    const portrait = deviceWidth < deviceHeight;\n\n    // TODO: Detect isMobile without using editor metrics.\n    const isLandscape = landscape && this.attributes.height > deviceHeight;\n    const isPortrait = portrait && this.attributes.width > deviceWidth;\n    const isMobile = ContentManager.isMobile();\n\n    // Obtain number of current instance.\n    this.instanceId = document.getElementsByClassName(\"wrs_modal_dialogContainer\").length;\n\n    // Device object properties.\n\n    /**\n     * @type {DeviceProperties}\n     */\n    this.deviceProperties = {\n      orientation: landscape ? \"landscape\" : \"portrait\",\n      isAndroid,\n      isIOS,\n      isMobile,\n      isDesktop: !isMobile && !isIOS && !isAndroid,\n    };\n\n    this.properties = {\n      created: false,\n      state: \"\",\n      previousState: \"\",\n      position: { bottom: 0, right: 10 },\n      size: { height: 338, width: 580 },\n    };\n\n    /**\n     * Object to keep website's style before change it on lock scroll for mobile devices.\n     * @type {Object}\n     * @property {String} bodyStylePosition - Previous body style position.\n     * @property {String} bodyStyleOverflow - Previous body style overflow.\n     * @property {String} htmlStyleOverflow - Previous body style overflow.\n     * @property {String} windowScrollX - Previous window's scroll Y.\n     * @property {String} windowScrollY - Previous window's scroll X.\n     */\n    this.websiteBeforeLockParameters = null;\n\n    let attributes = {};\n    attributes.class = \"wrs_modal_overlay\";\n    attributes.id = this.getElementId(attributes.class);\n    this.overlay = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_title_bar\";\n    attributes.id = this.getElementId(attributes.class);\n    this.titleBar = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_title\";\n    attributes.id = this.getElementId(attributes.class);\n    this.title = Util.createElement(\"div\", attributes);\n    this.title.innerHTML = \"offline\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_close_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"close\");\n    attributes.style = {};\n    this.closeDiv = Util.createElement(\"a\", attributes);\n    this.closeDiv.setAttribute(\"role\", \"button\");\n    this.closeDiv.setAttribute(\"tabindex\", 3);\n    // Apply styles and events after the creation as createElement doesn't process them correctly\n    let generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeIcon)})`;\n    let hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeHoverIcon)})`;\n    this.closeDiv.setAttribute(\"style\", generalStyle);\n    this.closeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.closeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.closeDiv.setAttribute(\"data-testid\", \"mtcteditor-close-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_stack_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"exit_fullscreen\");\n    this.stackDiv = Util.createElement(\"a\", attributes);\n    this.stackDiv.setAttribute(\"role\", \"button\");\n    this.stackDiv.setAttribute(\"tabindex\", 2);\n    generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsIcon)})`;\n    hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsHoverIcon)})`;\n    this.stackDiv.setAttribute(\"style\", generalStyle);\n    this.stackDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.stackDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.stackDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-disable-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_maximize_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"fullscreen\");\n    this.maximizeDiv = Util.createElement(\"a\", attributes);\n    this.maximizeDiv.setAttribute(\"role\", \"button\");\n    this.maximizeDiv.setAttribute(\"tabindex\", 2);\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsIcon)})`;\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsHoverIcon)})`;\n    this.maximizeDiv.setAttribute(\"style\", generalStyle);\n    this.maximizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.maximizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identifiy the element in automated testing\n    this.maximizeDiv.setAttribute(\"data-testid\", \"mtcteditor-fullscreen-enable-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_minimize_button\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.title = StringManager.get(\"minimize\");\n    this.minimizeDiv = Util.createElement(\"a\", attributes);\n    this.minimizeDiv.setAttribute(\"role\", \"button\");\n    this.minimizeDiv.setAttribute(\"tabindex\", 1);\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    // To identify the element in automated testing\n    this.minimizeDiv.setAttribute(\"data-testid\", \"mtcteditor-minimize-button\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_dialogContainer\";\n    attributes.id = this.getElementId(attributes.class);\n    attributes.role = \"dialog\";\n    this.container = Util.createElement(\"div\", attributes);\n    this.container.setAttribute(\"aria-labeledby\", \"wrs_modal_title[0]\");\n\n    attributes = {};\n    attributes.class = \"wrs_modal_wrapper\";\n    attributes.id = this.getElementId(attributes.class);\n    this.wrapper = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_content_container\";\n    attributes.id = this.getElementId(attributes.class);\n    this.contentContainer = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_controls\";\n    attributes.id = this.getElementId(attributes.class);\n    this.controls = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_buttons_container\";\n    attributes.id = this.getElementId(attributes.class);\n    this.buttonContainer = Util.createElement(\"div\", attributes);\n\n    // Buttons: all button must be created using createSubmitButton method.\n    this.submitButton = this.createSubmitButton(\n      {\n        id: this.getElementId(\"wrs_modal_button_accept\"),\n        class: \"wrs_modal_button_accept\",\n        innerHTML: StringManager.get(\"accept\"),\n        // To identifiy the element in automated testing\n        \"data-testid\": \"mtcteditor-insert-button\",\n      },\n      this.submitAction.bind(this),\n    );\n\n    this.cancelButton = this.createSubmitButton(\n      {\n        id: this.getElementId(\"wrs_modal_button_cancel\"),\n        class: \"wrs_modal_button_cancel\",\n        innerHTML: StringManager.get(\"cancel\"),\n        // To identifiy the element in automated testing\n        \"data-testid\": \"mtcteditor-cancel-button\",\n      },\n      this.cancelAction.bind(this),\n    );\n\n    this.contentManager = null;\n\n    // Overlay popup.\n    const popupStrings = {\n      cancelString: StringManager.get(\"cancel\"),\n      submitString: StringManager.get(\"close\"),\n      message: StringManager.get(\"close_modal_warning\"),\n    };\n\n    const callbacks = {\n      closeCallback: () => {\n        this.close(\"mtc_close\");\n      },\n      cancelCallback: () => {\n        this.focus();\n      },\n    };\n\n    const popupupProperties = {\n      overlayElement: this.container,\n      callbacks,\n      strings: popupStrings,\n    };\n\n    this.popup = new PopUpMessage(popupupProperties);\n\n    /**\n     * Indicates if directionality of the modal dialog is RTL. false by default.\n     * @type {Boolean}\n     */\n    this.rtl = false;\n    if (\"rtl\" in this.attributes) {\n      this.rtl = this.attributes.rtl;\n    }\n\n    // Event handlers need modal instance context.\n    this.handleOpenedIosSoftkeyboard = this.handleOpenedIosSoftkeyboard.bind(this);\n    this.handleClosedIosSoftkeyboard = this.handleClosedIosSoftkeyboard.bind(this);\n  }\n\n  /**\n   * This method sets an ContentManager instance to ModalDialog. ContentManager\n   * manages the logic of ModalDialog content: submit, update, close and changes.\n   * @param {ContentManager} contentManager - ContentManager instance.\n   */\n  setContentManager(contentManager) {\n    this.contentManager = contentManager;\n  }\n\n  /**\n   * Returns the modal contentElement object.\n   * @returns {ContentManager} the instance of the ContentManager class.\n   */\n  getContentManager() {\n    return this.contentManager;\n  }\n\n  /**\n   * This method is called when the modal object has been submitted. Calls\n   * contentElement submitAction method - if exists - and closes the modal\n   * object. No logic about the content should be placed here,\n   * contentElement.submitAction is the responsible of the content logic.\n   */\n  async submitAction() {\n    if (typeof this.contentManager.submitAction !== \"undefined\") {\n      this.contentManager.submitAction();\n    }\n\n    await this.close(\"mtc_insert\");\n  }\n\n  /**\n   * Performs the cancel action.\n   * If there are no changes in the content, it closes the modal.\n   * Otherwise, it shows a pop-up message to confirm the cancel action.\n   * @returns {Promise<void>} - A promise that resolves when the modal is closed.\n   */\n  async cancelAction() {\n    if (typeof this.contentManager.hasChanges === \"undefined\" || !this.contentManager.hasChanges()) {\n      IntegrationModel.setActionsOnCancelButtons();\n      await this.close(\"mtc_close\");\n    } else {\n      this.showPopUpMessage();\n    }\n  }\n\n  /**\n   * Returns a button element.\n   * @param {Object} properties - Input button properties.\n   * @param {String} properties.class - Input button class.\n   * @param {String} properties.innerHTML - Input button innerHTML.\n   * @param {Object} callback - Callback function associated to click event.\n   * @returns {HTMLButtonElement} The button element.\n   *\n   */\n  // eslint-disable-next-line class-methods-use-this\n  createSubmitButton(properties, callback) {\n    class SubmitButton {\n      constructor() {\n        this.element = document.createElement(\"button\");\n        this.element.id = properties.id;\n        this.element.className = properties.class;\n        this.element.innerHTML = properties.innerHTML;\n        this.element.dataset.testid = properties[\"data-testid\"];\n        Util.addEvent(this.element, \"click\", callback);\n      }\n\n      getElement() {\n        return this.element;\n      }\n    }\n    return new SubmitButton(properties, callback).getElement();\n  }\n\n  /**\n   * Creates the modal window object inserting a contentElement object.\n   */\n  create() {\n    /* Modal Window Structure\n    _____________________________________________________________________________________\n    |wrs_modal_dialog_Container                                                         |\n    | _________________________________________________________________________________ |\n    | |title_bar                          minimize_button  stack_button  close_button | |\n    | |_______________________________________________________________________________| |\n    | |wrapper                                                                        | |\n    | | _____________________________________________________________________________ | |\n    | | |content                                                                    | | |\n    | | |                                                                           | | |\n    | | |                                                                           | | |\n    | | |___________________________________________________________________________| | |\n    | | _____________________________________________________________________________ | |\n    | | |controls                                                                   | | |\n    | | | ___________________________________                                       | | |\n    | | | |buttonContainer                  |                                       | | |\n    | | | | _______________________________ |                                       | | |\n    | | | | |button_accept | button_cancel| |                                       | | |\n    | | | |_|_____________ |______________|_|                                       | | |\n    | | |___________________________________________________________________________| | |\n    | |_______________________________________________________________________________| |\n    |___________________________________________________________________________________| */\n\n    this.titleBar.appendChild(this.closeDiv);\n    this.titleBar.appendChild(this.stackDiv);\n    this.titleBar.appendChild(this.maximizeDiv);\n    this.titleBar.appendChild(this.minimizeDiv);\n    this.titleBar.appendChild(this.title);\n\n    if (this.deviceProperties.isDesktop) {\n      this.container.appendChild(this.titleBar);\n    }\n\n    this.wrapper.appendChild(this.contentContainer);\n    this.wrapper.appendChild(this.controls);\n\n    this.controls.appendChild(this.buttonContainer);\n\n    this.buttonContainer.appendChild(this.submitButton);\n    this.buttonContainer.appendChild(this.cancelButton);\n\n    this.container.appendChild(this.wrapper);\n\n    // Check if browser has scrollBar before modal has modified.\n    this.recalculateScrollBar();\n\n    document.body.appendChild(this.container);\n    document.body.appendChild(this.overlay);\n\n    if (this.deviceProperties.isDesktop) {\n      // Desktop.\n      this.createModalWindowDesktop();\n      this.createResizeButtons();\n\n      this.addListeners();\n      // Maximize window only when the configuration is set and the device is not iOS or Android.\n      if (Configuration.get(\"modalWindowFullScreen\")) {\n        this.maximize();\n      }\n    } else if (this.deviceProperties.isAndroid) {\n      this.createModalWindowAndroid();\n    } else if (this.deviceProperties.isIOS) {\n      this.createModalWindowIos();\n    }\n\n    if (this.contentManager != null) {\n      this.contentManager.insert(this);\n    }\n\n    this.properties.open = true;\n    this.properties.created = true;\n\n    // Checks language directionality.\n    if (this.isRTL()) {\n      this.container.style.right = `${window.innerWidth - this.scrollbarWidth - this.container.offsetWidth}px`;\n      this.container.className += \" wrs_modal_rtl\";\n    }\n  }\n\n  /**\n   * Creates a button in the modal object to resize it.\n   */\n  createResizeButtons() {\n    // This is a definition of Resize Button Bottom-Right.\n    this.resizerBR = document.createElement(\"div\");\n    this.resizerBR.className = \"wrs_bottom_right_resizer\";\n    this.resizerBR.innerHTML = \"◢\";\n    // To identifiy the element in automated testing\n    this.resizerBR.dataset.testid = \"mtcteditor-resize-button-right\";\n    // This is a definition of Resize Button Top-Left.\n    this.resizerTL = document.createElement(\"div\");\n    this.resizerTL.className = \"wrs_bottom_left_resizer\";\n    // To identifiy the element in automated testing\n    this.resizerTL.dataset.testid = \"mtcteditor-resize-button-left\";\n    // Append resize buttons to modal.\n    this.container.appendChild(this.resizerBR);\n    this.titleBar.appendChild(this.resizerTL);\n    // Add events to resize on click and drag.\n    Util.addEvent(this.resizerBR, \"mousedown\", this.activateResizeStateBR.bind(this));\n    Util.addEvent(this.resizerTL, \"mousedown\", this.activateResizeStateTL.bind(this));\n  }\n\n  /**\n   * Initialize variables for Bottom-Right resize button\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  activateResizeStateBR(mouseEvent) {\n    this.initializeResizeProperties(mouseEvent, false);\n  }\n\n  /**\n   * Initialize variables for Top-Left resize button\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  activateResizeStateTL(mouseEvent) {\n    this.initializeResizeProperties(mouseEvent, true);\n  }\n\n  /**\n   * Common method to initialize variables at resize.\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   */\n  initializeResizeProperties(mouseEvent, leftOption) {\n    // Apply class for disable involuntary select text when drag.\n    Util.addClass(document.body, \"wrs_noselect\");\n    Util.addClass(this.overlay, \"wrs_overlay_active\");\n    this.resizeDataObject = {\n      x: this.eventClient(mouseEvent).X,\n      y: this.eventClient(mouseEvent).Y,\n    };\n    // Save Initial state of modal to compare on drag and obtain the difference.\n    this.initialWidth = parseInt(this.container.style.width, 10);\n    this.initialHeight = parseInt(this.container.style.height, 10);\n    if (!leftOption) {\n      this.initialRight = parseInt(this.container.style.right, 10);\n      this.initialBottom = parseInt(this.container.style.bottom, 10);\n    } else {\n      this.leftScale = true;\n    }\n    if (!this.initialRight) {\n      this.initialRight = 0;\n    }\n    if (!this.initialBottom) {\n      this.initialBottom = 0;\n    }\n    // Disable mouse events on editor when we start to drag modal.\n    document.body.style[\"user-select\"] = \"none\";\n  }\n\n  /**\n   * This method opens the modal window, restoring the previous state, position and metrics,\n   * if exists. By default the modal object opens in stack mode.\n   */\n  open() {\n    // Removing close class.\n    this.removeClass(\"wrs_closed\");\n    // Hiding keyboard for mobile devices.\n    const { isIOS } = this.deviceProperties;\n    const { isAndroid } = this.deviceProperties;\n    const { isMobile } = this.deviceProperties;\n    if (isIOS || isAndroid || isMobile) {\n      // Restore scale to 1.\n      this.restoreWebsiteScale();\n      this.lockWebsiteScroll();\n      // Due to editor wait we need to wait until editor focus.\n      setTimeout(() => {\n        this.hideKeyboard();\n      }, 400);\n    }\n\n    // New modal window. He need to create the whole object.\n    if (!this.properties.created) {\n      this.create();\n    } else {\n      // Previous state closed. Open method can be called even the previous state is open,\n      // for example updating the content of the modal object.\n      if (!this.properties.open) {\n        this.properties.open = true;\n\n        // Restoring the previous open state: if the modal object has been closed\n        // re-open it should preserve the state and the metrics.\n        if (!this.deviceProperties.isAndroid && !this.deviceProperties.isIOS) {\n          this.restoreState();\n        }\n      }\n\n      // Maximize window only when the configuration is set and the device is not iOs or Android.\n      if (this.deviceProperties.isDesktop && Configuration.get(\"modalWindowFullScreen\")) {\n        this.maximize();\n      }\n\n      // In iOS we need to recalculate the size of the modal object because\n      // iOS keyboard is a float div which can overlay the modal object.\n      if (this.deviceProperties.isIOS) {\n        this.iosSoftkeyboardOpened = false;\n      }\n    }\n\n    if (!ContentManager.isEditorLoaded()) {\n      const listener = Listeners.newListener(\"onLoad\", () => {\n        this.contentManager.onOpen(this);\n      });\n      this.contentManager.addListener(listener);\n    } else {\n      this.contentManager.onOpen(this);\n    }\n  }\n\n  /**\n   * Closes the modal.\n   * Removes specific CSS classes, saves modal properties, unlocks website scroll,\n   * sets the 'open' property to false, and triggers the 'onModalClose' event.\n   * If a close trigger is defined, it tracks the telemetry event 'CLOSED_MTCT_EDITOR' with the trigger.\n   * @returns {Promise<void>} A promise that resolves when the modal is closed.\n   */\n  async close(trigger) {\n    this.removeClass(\"wrs_maximized\");\n    this.removeClass(\"wrs_minimized\");\n    this.removeClass(\"wrs_stack\");\n    this.addClass(\"wrs_closed\");\n    this.saveModalProperties();\n    this.unlockWebsiteScroll();\n    this.properties.open = false;\n\n    if (trigger) {\n      try {\n        await Telemeter.telemeter.track(\"CLOSED_MTCT_EDITOR\", {\n          toolbar: this.contentManager.toolbar,\n          trigger: trigger,\n        });\n      } catch (error) {\n        console.error(\"Error tracking CLOSED_MTCT_EDITOR\", error);\n      }\n    }\n\n    Core.globalListeners.fire(\"onModalClose\", {});\n  }\n  /**\n   * Closes modal window and destroys the object.\n   */\n  destroy() {\n    // Close modal window.\n    this.close();\n    // Remove listeners and destroy the object.\n    this.removeListeners();\n    this.overlay.remove();\n    this.container.remove();\n    // Reset properties to allow open again.\n    this.properties.created = false;\n  }\n\n  /**\n   * Sets the website scale to one.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  restoreWebsiteScale() {\n    let viewportmeta = document.querySelector(\"meta[name=viewport]\");\n    // Let the equal symbols in order to search and make meta's final content.\n    const contentAttrsToUpdate = [\"initial-scale=\", \"minimum-scale=\", \"maximum-scale=\"];\n    const contentAttrsValuesToUpdate = [\"1.0\", \"1.0\", \"1.0\"];\n    const setMetaAttrFunc = (viewportelement, contentAttrs) => {\n      const contentAttr = viewportelement.getAttribute(\"content\");\n      // If it exists, we need to maintain old values and put our values.\n      if (contentAttr) {\n        const attrArray = contentAttr.split(\",\");\n        let finalContentMeta = \"\";\n        const oldAttrs = [];\n        for (let i = 0; i < attrArray.length; i += 1) {\n          let isAttrToUpdate = false;\n          let j = 0;\n          while (!isAttrToUpdate && j < contentAttrs.length) {\n            if (attrArray[i].indexOf(contentAttrs[j])) {\n              isAttrToUpdate = true;\n            }\n            j += 1;\n          }\n\n          if (!isAttrToUpdate) {\n            oldAttrs.push(attrArray[i]);\n          }\n        }\n\n        for (let i = 0; i < contentAttrs.length; i += 1) {\n          const attr = contentAttrs[i] + contentAttrsValuesToUpdate[i];\n          finalContentMeta += i === 0 ? attr : `,${attr}`;\n        }\n\n        for (let i = 0; i < oldAttrs.length; i += 1) {\n          finalContentMeta += `,${oldAttrs[i]}`;\n        }\n        viewportelement.setAttribute(\"content\", finalContentMeta);\n        // It needs to set to empty because setAttribute refresh only when attribute is different.\n        viewportelement.setAttribute(\"content\", \"\");\n        viewportelement.setAttribute(\"content\", contentAttr);\n      } else {\n        viewportelement.setAttribute(\"content\", \"initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0\");\n        viewportelement.removeAttribute(\"content\");\n      }\n    };\n\n    if (!viewportmeta) {\n      viewportmeta = document.createElement(\"meta\");\n      document.getElementsByTagName(\"head\")[0].appendChild(viewportmeta);\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\n      viewportmeta.remove();\n    } else {\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\n    }\n  }\n\n  /**\n   * Locks website scroll for mobile devices.\n   */\n  lockWebsiteScroll() {\n    this.websiteBeforeLockParameters = {\n      bodyStylePosition: document.body.style.position ? document.body.style.position : \"\",\n      bodyStyleOverflow: document.body.style.overflow ? document.body.style.overflow : \"\",\n      htmlStyleOverflow: document.documentElement.style.overflow ? document.documentElement.style.overflow : \"\",\n      windowScrollX: window.scrollX,\n      windowScrollY: window.scrollY,\n    };\n  }\n\n  /**\n   * Unlocks website scroll for mobile devices.\n   */\n  unlockWebsiteScroll() {\n    if (this.websiteBeforeLockParameters) {\n      document.body.style.position = this.websiteBeforeLockParameters.bodyStylePosition;\n      document.body.style.overflow = this.websiteBeforeLockParameters.bodyStyleOverflow;\n      document.documentElement.style.overflow = this.websiteBeforeLockParameters.htmlStyleOverflow;\n      const { windowScrollX } = this.websiteBeforeLockParameters;\n      const { windowScrollY } = this.websiteBeforeLockParameters;\n      window.scrollTo(windowScrollX, windowScrollY);\n      this.websiteBeforeLockParameters = null;\n    }\n  }\n\n  /**\n   * Util function to known if browser is IE11.\n   * @returns {Boolean} true if the browser is IE11. false otherwise.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  isIE11() {\n    if (\n      navigator.userAgent.search(\"Msie/\") >= 0 ||\n      navigator.userAgent.search(\"Trident/\") >= 0 ||\n      navigator.userAgent.search(\"Edge/\") >= 0\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns if the current language type is RTL.\n   * @return {Boolean} true if current language is RTL. false otherwise.\n   */\n  isRTL() {\n    if (this.attributes.language === \"ar\" || this.attributes.language === \"he\") {\n      return true;\n    }\n    return this.rtl;\n  }\n\n  /**\n   * Adds a class to all modal ModalDialog DOM elements.\n   * @param {String} className - Class name.\n   */\n  addClass(className) {\n    Util.addClass(this.overlay, className);\n    Util.addClass(this.titleBar, className);\n    Util.addClass(this.overlay, className);\n    Util.addClass(this.container, className);\n    Util.addClass(this.contentContainer, className);\n    Util.addClass(this.stackDiv, className);\n    Util.addClass(this.minimizeDiv, className);\n    Util.addClass(this.maximizeDiv, className);\n    Util.addClass(this.wrapper, className);\n  }\n\n  /**\n   * Remove a class from all modal DOM elements.\n   * @param {String} className - Class name.\n   */\n  removeClass(className) {\n    Util.removeClass(this.overlay, className);\n    Util.removeClass(this.titleBar, className);\n    Util.removeClass(this.overlay, className);\n    Util.removeClass(this.container, className);\n    Util.removeClass(this.contentContainer, className);\n    Util.removeClass(this.stackDiv, className);\n    Util.removeClass(this.minimizeDiv, className);\n    Util.removeClass(this.maximizeDiv, className);\n    Util.removeClass(this.wrapper, className);\n  }\n\n  /**\n   * Create modal dialog for desktop.\n   */\n  createModalWindowDesktop() {\n    this.addClass(\"wrs_modal_desktop\");\n    this.stack();\n  }\n\n  /**\n   * Create modal dialog for non android devices.\n   */\n  createModalWindowAndroid() {\n    this.addClass(\"wrs_modal_android\");\n    window.addEventListener(\"resize\", this.orientationChangeAndroidSoftkeyboard.bind(this));\n  }\n\n  /**\n   * Create modal dialog for iOS devices.\n   */\n  createModalWindowIos() {\n    this.addClass(\"wrs_modal_ios\");\n    // Refresh the size when the orientation is changed.\n    window.addEventListener(\"resize\", this.orientationChangeIosSoftkeyboard.bind(this));\n  }\n\n  /**\n   * Restore previous state, position and size of previous stacked modal dialog.\n   */\n  restoreState() {\n    if (this.properties.state === \"maximized\") {\n      // Reset states for prevent return to stack state.\n      this.maximize();\n    } else if (this.properties.state === \"minimized\") {\n      // Reset states for prevent return to stack state.\n      this.properties.state = this.properties.previousState;\n      this.properties.previousState = \"\";\n      this.minimize();\n    } else {\n      this.stack();\n    }\n  }\n\n  /**\n   * Stacks the modal object.\n   */\n  stack() {\n    this.properties.previousState = this.properties.state;\n    this.properties.state = \"stack\";\n    this.removeClass(\"wrs_maximized\");\n    this.minimizeDiv.title = StringManager.get(\"minimize\");\n    this.removeClass(\"wrs_minimized\");\n    this.addClass(\"wrs_stack\");\n\n    // Change maximize/minimize icon to minimize icon\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n\n    this.restoreModalProperties();\n\n    if (typeof this.resizerBR !== \"undefined\" && typeof this.resizerTL !== \"undefined\") {\n      this.setResizeButtonsVisibility();\n    }\n\n    // Need recalculate position of actual modal because window can was changed in fullscreenmode.\n    this.recalculateScrollBar();\n    this.recalculatePosition();\n    this.recalculateScale();\n    this.focus();\n  }\n\n  /**\n   * Minimizes the modal object.\n   */\n  minimize() {\n    // Saving width, height, top and bottom parameters to restore when opening.\n    this.saveModalProperties();\n    this.title.style.cursor = \"pointer\";\n    if (this.properties.state === \"minimized\" && this.properties.previousState === \"stack\") {\n      this.stack();\n    } else if (this.properties.state === \"minimized\" && this.properties.previousState === \"maximized\") {\n      this.maximize();\n    } else {\n      // Setting css to prevent important tag into css style.\n      this.container.style.height = \"30px\";\n      this.container.style.width = \"250px\";\n      this.container.style.bottom = \"0px\";\n      this.container.style.right = \"10px\";\n\n      this.removeListeners();\n      this.properties.previousState = this.properties.state;\n      this.properties.state = \"minimized\";\n      this.setResizeButtonsVisibility();\n      this.minimizeDiv.title = StringManager.get(\"maximize\");\n\n      if (Util.containsClass(this.overlay, \"wrs_stack\")) {\n        this.removeClass(\"wrs_stack\");\n      } else {\n        this.removeClass(\"wrs_maximized\");\n      }\n      this.addClass(\"wrs_minimized\");\n\n      // Change minimize icon to maximize icon\n      const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxIcon)})`;\n      const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxHoverIcon)})`;\n      this.minimizeDiv.setAttribute(\"style\", generalStyle);\n      this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n      this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n    }\n  }\n\n  /**\n   * Maximizes the modal object.\n   */\n  maximize() {\n    // Saving width, height, top and bottom parameters to restore when opening.\n    this.saveModalProperties();\n    if (this.properties.state !== \"maximized\") {\n      this.properties.previousState = this.properties.state;\n      this.properties.state = \"maximized\";\n    }\n    // Don't permit resize on maximize mode.\n    this.setResizeButtonsVisibility();\n\n    if (Util.containsClass(this.overlay, \"wrs_minimized\")) {\n      this.minimizeDiv.title = StringManager.get(\"minimize\");\n      this.removeClass(\"wrs_minimized\");\n    } else if (Util.containsClass(this.overlay, \"wrs_stack\")) {\n      this.container.style.left = null;\n      this.container.style.top = null;\n      this.removeClass(\"wrs_stack\");\n    }\n\n    this.addClass(\"wrs_maximized\");\n\n    // Change maximize icon to minimize icon\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\n    this.minimizeDiv.setAttribute(\"style\", generalStyle);\n    this.minimizeDiv.setAttribute(\"onmouseover\", `this.style = \"${hoverStyle}\";`);\n    this.minimizeDiv.setAttribute(\"onmouseout\", `this.style = \"${generalStyle}\";`);\n\n    // Set size to 80% screen with a max size.\n    this.setSize(parseInt(window.innerHeight * 0.8, 10), parseInt(window.innerWidth * 0.8, 10));\n    if (this.container.clientHeight > 700) {\n      this.container.style.height = \"700px\";\n    }\n    if (this.container.clientWidth > 1200) {\n      this.container.style.width = \"1200px\";\n    }\n\n    // Setting modal position in center on screen.\n    const { innerHeight } = window;\n    const { innerWidth } = window;\n    const { offsetHeight } = this.container;\n    const { offsetWidth } = this.container;\n    const bottom = innerHeight / 2 - offsetHeight / 2;\n    const right = innerWidth / 2 - offsetWidth / 2;\n\n    this.setPosition(bottom, right);\n    this.recalculateScale();\n    this.recalculatePosition();\n    this.recalculateSize();\n    this.focus();\n  }\n\n  /**\n   * Expand again the modal object from a minimized state.\n   */\n  reExpand() {\n    if (this.properties.state === \"minimized\") {\n      if (this.properties.previousState === \"maximized\") {\n        this.maximize();\n      } else {\n        this.stack();\n      }\n      this.title.style.cursor = \"\";\n    }\n  }\n\n  /**\n   * Sets modal size.\n   * @param {Number} height - Height of the ModalDialog\n   * @param {Number} width - Width of the ModalDialog.\n   */\n  setSize(height, width) {\n    this.container.style.height = `${height}px`;\n    this.container.style.width = `${width}px`;\n    this.recalculateSize();\n  }\n\n  /**\n   * Sets modal position using bottom and right style attributes.\n   * @param  {number} bottom - bottom attribute.\n   * @param  {number} right - right attribute.\n   */\n  setPosition(bottom, right) {\n    this.container.style.bottom = `${bottom}px`;\n    this.container.style.right = `${right}px`;\n  }\n\n  /**\n   * Saves position and size parameters of and open ModalDialog. This attributes\n   * are needed to restore it on re-open.\n   */\n  saveModalProperties() {\n    // Saving values of modal only when modal is in stack state.\n    if (this.properties.state === \"stack\") {\n      this.properties.position.bottom = parseInt(this.container.style.bottom, 10);\n      this.properties.position.right = parseInt(this.container.style.right, 10);\n      this.properties.size.width = parseInt(this.container.style.width, 10);\n      this.properties.size.height = parseInt(this.container.style.height, 10);\n    }\n  }\n\n  /**\n   * Restore ModalDialog position and size parameters.\n   */\n  restoreModalProperties() {\n    if (this.properties.state === \"stack\") {\n      // Restoring Bottom and Right values from last modal.\n      this.setPosition(this.properties.position.bottom, this.properties.position.right);\n      // Restoring Height and Left values from last modal.\n      this.setSize(this.properties.size.height, this.properties.size.width);\n    }\n  }\n\n  /**\n   * Sets the modal dialog initial size.\n   */\n  recalculateSize() {\n    this.contentContainer.style.height = `${parseInt(this.wrapper.offsetHeight - 50, 10)}px`;\n  }\n\n  /**\n   * Enable or disable visibility of resize buttons in modal window depend on state.\n   */\n  setResizeButtonsVisibility() {\n    if (this.properties.state === \"stack\") {\n      this.resizerTL.style.visibility = \"visible\";\n      this.resizerBR.style.visibility = \"visible\";\n    } else {\n      this.resizerTL.style.visibility = \"hidden\";\n      this.resizerBR.style.visibility = \"hidden\";\n    }\n  }\n\n  /**\n   * Makes an object draggable adding mouse and touch events.\n   */\n  addListeners() {\n    // Button events (maximize, minimize, stack and close).\n    this.maximizeDiv.addEventListener(\"click\", this.maximize.bind(this), true);\n    this.stackDiv.addEventListener(\"click\", this.stack.bind(this), true);\n    this.minimizeDiv.addEventListener(\"click\", this.minimize.bind(this), true);\n    this.closeDiv.addEventListener(\"click\", this.cancelAction.bind(this));\n    this.maximizeDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n        }\n      },\n      true,\n    );\n    this.stackDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n          e.preventDefault();\n        }\n      },\n      true,\n    );\n    this.minimizeDiv.addEventListener(\n      \"keypress\",\n      function (e) {\n        if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n          // Handle enter and space.\n          e.target.click();\n          e.preventDefault();\n        }\n      },\n      true,\n    );\n    this.closeDiv.addEventListener(\"keypress\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \" || e.keyCode === 13 || e.keyCode === 32) {\n        // Handle enter and space.\n        e.target.click();\n        e.preventDefault();\n      }\n    });\n    this.title.addEventListener(\"click\", this.reExpand.bind(this));\n\n    // Overlay events (close).\n    this.overlay.addEventListener(\"click\", this.cancelAction.bind(this));\n\n    // Mouse events.\n    Util.addEvent(window, \"mousedown\", this.startDrag.bind(this));\n    Util.addEvent(window, \"mouseup\", this.stopDrag.bind(this));\n    Util.addEvent(window, \"mousemove\", this.drag.bind(this));\n    Util.addEvent(window, \"resize\", this.onWindowResize.bind(this));\n    // Key events.\n    Util.addEvent(window, \"keydown\", this.onKeyDown.bind(this));\n  }\n\n  /**\n   * Removes draggable events from an object.\n   */\n  removeListeners() {\n    // Mouse events.\n    Util.removeEvent(window, \"mousedown\", this.startDrag);\n    Util.removeEvent(window, \"mouseup\", this.stopDrag);\n    Util.removeEvent(window, \"mousemove\", this.drag);\n    Util.removeEvent(window, \"resize\", this.onWindowResize);\n    // Key events.\n    Util.removeEvent(window, \"keydown\", this.onKeyDown);\n  }\n\n  /**\n   * Returns mouse or touch coordinates (on touch events ev.ClientX doesn't exists)\n   * @param {MouseEvent} mouseEvent - Mouse event.\n   * @return {Object} With the X and Y coordinates.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  eventClient(mouseEvent) {\n    if (typeof mouseEvent.clientX === \"undefined\" && mouseEvent.changedTouches) {\n      const client = {\n        X: mouseEvent.changedTouches[0].clientX,\n        Y: mouseEvent.changedTouches[0].clientY,\n      };\n      return client;\n    }\n    const client = {\n      X: mouseEvent.clientX,\n      Y: mouseEvent.clientY,\n    };\n    return client;\n  }\n\n  /**\n   * Start drag function: set the object dragDataObject with the draggable\n   * object offsets coordinates.\n   * when drag starts (on touchstart or mousedown events).\n   * @param {MouseEvent} mouseEvent - Touchstart or mousedown event.\n   */\n  startDrag(mouseEvent) {\n    if (this.properties.state === \"minimized\") {\n      return;\n    }\n    if (mouseEvent.target === this.title) {\n      if (typeof this.dragDataObject === \"undefined\" || this.dragDataObject === null) {\n        // Save first click mouse point on screen.\n        this.dragDataObject = {\n          x: this.eventClient(mouseEvent).X,\n          y: this.eventClient(mouseEvent).Y,\n        };\n        // Reset last drag position when start drag.\n        this.lastDrag = {\n          x: \"0px\",\n          y: \"0px\",\n        };\n        // Init right and bottom values for window modal if it isn't exist.\n        if (this.container.style.right === \"\") {\n          this.container.style.right = \"0px\";\n        }\n        if (this.container.style.bottom === \"\") {\n          this.container.style.bottom = \"0px\";\n        }\n\n        // Needed for IE11 for apply disabled mouse events on editor because\n        // internet explorer needs a dynamic object to apply this property.\n        if (this.isIE11()) {\n          // this.iframe.style['position'] = 'relative';\n        }\n        // Apply class for disable involuntary select text when drag.\n        Util.addClass(document.body, \"wrs_noselect\");\n        Util.addClass(this.overlay, \"wrs_overlay_active\");\n        // Obtain screen limits for prevent overflow.\n        this.limitWindow = this.getLimitWindow();\n      }\n    }\n  }\n\n  /**\n   * Updates dragDataObject with the draggable object coordinates when\n   * the draggable object is being moved.\n   * @param {MouseEvent} mouseEvent - The mouse event.\n   */\n  drag(mouseEvent) {\n    if (this.dragDataObject) {\n      mouseEvent.preventDefault();\n      // Calculate max and min between actual mouse position and limit of screeen.\n      // It restric the movement of modal into window.\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, this.limitWindow.minPointer.y);\n      limitY = Math.max(this.limitWindow.maxPointer.y, limitY);\n      let limitX = Math.min(this.eventClient(mouseEvent).X, this.limitWindow.minPointer.x);\n      limitX = Math.max(this.limitWindow.maxPointer.x, limitX);\n      // Subtract limit with first position to obtain relative pixels increment\n      // to the anchor point.\n      const dragX = `${limitX - this.dragDataObject.x}px`;\n      const dragY = `${limitY - this.dragDataObject.y}px`;\n      // Save last valid position of modal before window overflow.\n      this.lastDrag = {\n        x: dragX,\n        y: dragY,\n      };\n      // This move modal with hardware acceleration.\n      this.container.style.transform = `translate3d(${dragX},${dragY},0)`;\n    }\n    if (this.resizeDataObject) {\n      const { innerWidth } = window;\n      const { innerHeight } = window;\n      let limitX = Math.min(this.eventClient(mouseEvent).X, innerWidth - this.scrollbarWidth - 7);\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, innerHeight - 7);\n      if (limitX < 0) {\n        limitX = 0;\n      }\n\n      if (limitY < 0) {\n        limitY = 0;\n      }\n\n      let scaleMultiplier;\n      if (this.leftScale) {\n        scaleMultiplier = -1;\n      } else {\n        scaleMultiplier = 1;\n      }\n\n      this.container.style.width = `${this.initialWidth + scaleMultiplier * (limitX - this.resizeDataObject.x)}px`;\n      this.container.style.height = `${this.initialHeight + scaleMultiplier * (limitY - this.resizeDataObject.y)}px`;\n      if (!this.leftScale) {\n        if (this.resizeDataObject.x - limitX - this.initialWidth < -580) {\n          this.container.style.right = `${this.initialRight - (limitX - this.resizeDataObject.x)}px`;\n        } else {\n          this.container.style.right = `${this.initialRight + this.initialWidth - 580}px`;\n          this.container.style.width = \"580px\";\n        }\n        if (this.resizeDataObject.y - limitY < this.initialHeight - 338) {\n          this.container.style.bottom = `${this.initialBottom - (limitY - this.resizeDataObject.y)}px`;\n        } else {\n          this.container.style.bottom = `${this.initialBottom + this.initialHeight - 338}px`;\n          this.container.style.height = \"338px\";\n        }\n      }\n      this.recalculateScale();\n      this.recalculatePosition();\n    }\n  }\n\n  /**\n   * Returns the boundaries of actual window to limit modal movement.\n   * @return {Object} Object containing mouseX and mouseY coordinates of actual mouse on screen.\n   */\n  getLimitWindow() {\n    // Obtain dimensions of window page.\n    const maxWidth = window.innerWidth;\n    const maxHeight = window.innerHeight;\n\n    // Calculate relative position of mouse point into window.\n    const { offsetHeight } = this.container;\n    const contStyleBottom = parseInt(this.container.style.bottom, 10);\n    const contStyleRight = parseInt(this.container.style.right, 10);\n\n    const { pageXOffset } = window;\n    const dragY = this.dragDataObject.y;\n    const dragX = this.dragDataObject.x;\n\n    const offSetToolbarY = offsetHeight + contStyleBottom - (maxHeight - (dragY - pageXOffset));\n    const offSetToolbarX = maxWidth - this.scrollbarWidth - (dragX - pageXOffset) - contStyleRight;\n\n    // Calculate limits with sizes of window, modal and mouse position.\n    const minPointerY = maxHeight - this.container.offsetHeight + offSetToolbarY;\n    const maxPointerY = this.title.offsetHeight - (this.title.offsetHeight - offSetToolbarY);\n    const minPointerX = maxWidth - offSetToolbarX - this.scrollbarWidth;\n    const maxPointerX = this.container.offsetWidth - offSetToolbarX;\n    const minPointer = { x: minPointerX, y: minPointerY };\n    const maxPointer = { x: maxPointerX, y: maxPointerY };\n    return { minPointer, maxPointer };\n  }\n\n  /**\n   * Returns the scrollbar width size of browser\n   * @returns {Number} The scrollbar width.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getScrollBarWidth() {\n    // Create a paragraph with full width of page.\n    const inner = document.createElement(\"p\");\n    inner.style.width = \"100%\";\n    inner.style.height = \"200px\";\n\n    // Create a hidden div to compare sizes.\n    const outer = document.createElement(\"div\");\n    outer.style.position = \"absolute\";\n    outer.style.top = \"0px\";\n    outer.style.left = \"0px\";\n    outer.style.visibility = \"hidden\";\n    outer.style.width = \"200px\";\n    outer.style.height = \"150px\";\n    outer.style.overflow = \"hidden\";\n    outer.appendChild(inner);\n\n    document.body.appendChild(outer);\n    const widthOuter = inner.offsetWidth;\n\n    // Change type overflow of paragraph for measure scrollbar.\n    outer.style.overflow = \"scroll\";\n    let widthInner = inner.offsetWidth;\n\n    // If measure is the same, we compare with internal div.\n    if (widthOuter === widthInner) {\n      widthInner = outer.clientWidth;\n    }\n    document.body.removeChild(outer);\n\n    return widthOuter - widthInner;\n  }\n\n  /**\n   * Set the dragDataObject to null.\n   */\n  stopDrag() {\n    // Due to we have multiple events that call this function, we need only to execute\n    // the next modifiers one time,\n    // when the user stops to drag and dragDataObject is not null (the object to drag is attached).\n    if (this.dragDataObject || this.resizeDataObject) {\n      // If modal doesn't change, it's not necessary to set position with interpolation.\n      this.container.style.transform = \"\";\n      if (this.dragDataObject) {\n        this.container.style.right = `${parseInt(this.container.style.right, 10) - parseInt(this.lastDrag.x, 10)}px`;\n        this.container.style.bottom = `${parseInt(this.container.style.bottom, 10) - parseInt(this.lastDrag.y, 10)}px`;\n      }\n      // We make focus on editor after drag modal windows to prevent lose focus.\n      this.focus();\n      // Restore mouse events on iframe.\n      // this.iframe.style['pointer-events'] = 'auto';\n      document.body.style[\"user-select\"] = \"\";\n      // Restore static state of iframe if we use Internet Explorer.\n      if (this.isIE11()) {\n        // this.iframe.style['position'] = null;\n      }\n      // Active text select event.\n      Util.removeClass(document.body, \"wrs_noselect\");\n      Util.removeClass(this.overlay, \"wrs_overlay_active\");\n    }\n    this.dragDataObject = null;\n    this.resizeDataObject = null;\n    this.initialWidth = null;\n    this.leftScale = null;\n  }\n\n  /**\n   * Recalculates scale for modal when resize browser window.\n   */\n  onWindowResize() {\n    this.recalculateScrollBar();\n    this.recalculatePosition();\n    this.recalculateScale();\n  }\n\n  /**\n   * Triggers keyboard events:\n   * - Tab key tab to go to submit button.\n   * - Esc key to close the modal dialog.\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\n   */\n  onKeyDown(keyboardEvent) {\n    if (keyboardEvent.key !== undefined) {\n      // Popupmessage is not oppened.\n      if (this.popup.overlayWrapper.style.display !== \"block\") {\n        // Code to detect Esc event\n        if (keyboardEvent.key === \"Escape\" || keyboardEvent.key === \"Esc\") {\n          if (this.properties.open) {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        } else if (keyboardEvent.shiftKey && keyboardEvent.key === \"Tab\") {\n          // Code to detect shift Tab event.\n          if (document.activeElement === this.cancelButton) {\n            this.submitButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          } else {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        } else if (keyboardEvent.key === \"Tab\") {\n          // Code to detect Tab event.\n          if (document.activeElement === this.submitButton) {\n            this.cancelButton.focus();\n            keyboardEvent.stopPropagation();\n            keyboardEvent.preventDefault();\n          } else {\n            this.contentManager.onKeyDown(keyboardEvent);\n          }\n        }\n      } else {\n        // Popupmessage oppened.\n        this.popup.onKeyDown(keyboardEvent);\n      }\n    }\n  }\n\n  /**\n   * Recalculating position for modal dialog when the browser is resized.\n   */\n  recalculatePosition() {\n    this.container.style.right = `${Math.min(parseInt(this.container.style.right, 10), window.innerWidth - this.scrollbarWidth - this.container.offsetWidth)}px`;\n    if (parseInt(this.container.style.right, 10) < 0) {\n      this.container.style.right = \"0px\";\n    }\n    this.container.style.bottom = `${Math.min(parseInt(this.container.style.bottom, 10), window.innerHeight - this.container.offsetHeight)}px`;\n    if (parseInt(this.container.style.bottom, 10) < 0) {\n      this.container.style.bottom = \"0px\";\n    }\n  }\n\n  /**\n   * Recalculating scale for modal when the browser is resized.\n   */\n  recalculateScale() {\n    let sizeModified = false;\n\n    if (parseInt(this.container.style.width, 10) > 580) {\n      this.container.style.width = `${Math.min(parseInt(this.container.style.width, 10), window.innerWidth - this.scrollbarWidth)}px`;\n      sizeModified = true;\n    } else {\n      this.container.style.width = \"580px\";\n      sizeModified = true;\n    }\n\n    if (parseInt(this.container.style.height, 10) > 338) {\n      this.container.style.height = `${Math.min(parseInt(this.container.style.height, 10), window.innerHeight)}px`;\n      sizeModified = true;\n    } else {\n      this.container.style.height = \"338px\";\n      sizeModified = true;\n    }\n\n    if (sizeModified) {\n      this.recalculateSize();\n    }\n  }\n\n  /**\n   * Recalculating width of browser scroll bar.\n   */\n  recalculateScrollBar() {\n    this.hasScrollBar = window.innerWidth > document.documentElement.clientWidth;\n    if (this.hasScrollBar) {\n      this.scrollbarWidth = this.getScrollBarWidth();\n    } else {\n      this.scrollbarWidth = 0;\n    }\n  }\n\n  /**\n   * Hide soft keyboards on iOS devices.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  hideKeyboard() {\n    // iOS keyboard can't be detected or hide directly from JavaScript.\n    // So, this method simulates that user focus a text input and blur\n    // the selection.\n    const inputField = document.createElement(\"input\");\n    this.container.appendChild(inputField);\n    inputField.focus();\n    inputField.blur();\n    // Is removed to not see it.\n    inputField.remove();\n  }\n\n  /**\n   * Focus to contentManager object.\n   */\n  focus() {\n    if (this.contentManager != null && typeof this.contentManager.onFocus !== \"undefined\") {\n      this.contentManager.onFocus();\n    }\n  }\n\n  /**\n   * Returns true when the device is on portrait mode.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  portraitMode() {\n    return window.innerHeight > window.innerWidth;\n  }\n\n  /**\n   * Event handler that change container size when IOS soft keyboard is opened.\n   */\n  handleOpenedIosSoftkeyboard() {\n    if (!this.iosSoftkeyboardOpened && this.iosDivHeight != null && this.iosDivHeight\n    === `auto`\n    ) {\n      if (this.portraitMode()) {\n        this.setContainerHeight(`60${this.iosMeasureUnit}`);\n      } else {\n        this.setContainerHeight(`35${this.iosMeasureUnit}`);\n      }\n    }\n    this.iosSoftkeyboardOpened = true;\n    this.wrapper.style.flexGrow = \"1\";\n  }\n\n  /**\n   * Event handler that change container size when IOS soft keyboard is closed.\n   */\n  handleClosedIosSoftkeyboard() {\n    this.iosSoftkeyboardOpened = false;\n    this.wrapper.style.flexGrow = \"1\";\n  }\n\n  /**\n   * Change container sizes when orientation is changed on iOS.\n   */\n  orientationChangeIosSoftkeyboard() {\n    if (this.iosSoftkeyboardOpened) {\n      if (this.portraitMode()) {\n        this.setContainerHeight(`65${this.iosMeasureUnit}`);\n\n      } else {\n        this.setContainerHeight(`45${this.iosMeasureUnit}`);\n\n      }\n    } else {\n      this.wrapper.style.flexGrow = \"1\";\n    }\n  }\n\n  /**\n   * Change container sizes when orientation is changed on Android.\n   */\n  orientationChangeAndroidSoftkeyboard() {\n    this.wrapper.style.flexGrow = \"1\";\n  }\n\n  /**\n   * Set iframe container height.\n   * @param {Number} height - New height.\n   */\n  setContainerHeight(height) {\n    this.iosDivHeight = height;\n    this.wrapper.style.height = height;\n  }\n\n  /**\n   * Check content of editor before close action.\n   */\n  showPopUpMessage() {\n    if (this.properties.state === \"minimized\") {\n      this.stack();\n    }\n    this.popup.show();\n  }\n\n  /**\n   * Sets the title of the modal dialog.\n   * @param {String} title - Modal dialog title.\n   */\n  setTitle(title) {\n    this.title.innerHTML = title;\n  }\n\n  /**\n   * Returns the id of an element, adding the instance number to\n   * the element class name:\n   * className --> className[idNumber]\n   * @param {String} className - The element class name.\n   * @returns {String} A string appending the instance id to the className.\n   */\n  getElementId(className) {\n    return `${className}[${this.instanceId}]`;\n  }\n}\n","/* eslint-disable */\nvar polyfills;\nexport default polyfills;\n\n// Polyfills.\n/*! http://mths.be/codepointat v0.1.0 by @mathias */\nif (!String.prototype.codePointAt) {\n  (function () {\n    \"use strict\"; // needed to support `apply`/`call` with `undefined`/`null`\n    var codePointAt = function (position) {\n      if (this == null) {\n        throw TypeError();\n      }\n      var string = String(this);\n      var size = string.length;\n      // `ToInteger`\n      var index = position ? Number(position) : 0;\n      if (index != index) {\n        // better `isNaN`\n        index = 0;\n      }\n      // Account for out-of-bounds indices:\n      if (index < 0 || index >= size) {\n        return undefined;\n      }\n      // Get the first code unit\n      var first = string.charCodeAt(index);\n      var second;\n      if (\n        // check if it’s the start of a surrogate pair\n        first >= 0xd800 &&\n        first <= 0xdbff && // high surrogate\n        size > index + 1 // there is a next code unit\n      ) {\n        second = string.charCodeAt(index + 1);\n        if (second >= 0xdc00 && second <= 0xdfff) {\n          // low surrogate\n          // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n          return (first - 0xd800) * 0x400 + second - 0xdc00 + 0x10000;\n        }\n      }\n      return first;\n    };\n    if (Object.defineProperty) {\n      Object.defineProperty(String.prototype, \"codePointAt\", {\n        value: codePointAt,\n        configurable: true,\n        writable: true,\n      });\n    } else {\n      String.prototype.codePointAt = codePointAt;\n    }\n  })();\n}\n\n// Object.assign polyfill.\nif (typeof Object.assign != \"function\") {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target, varArgs) {\n      // .length of function is 2\n      \"use strict\";\n      if (target == null) {\n        // TypeError if undefined or null\n        throw new TypeError(\"Cannot convert undefined or null to object\");\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n          // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true,\n  });\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, \"includes\", {\n    value: function (searchElement, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" s null or is not defined');\n      }\n\n      // 1. Let O be ? ToObject(this value).\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. if len is 0, return false.\n      if (len === 0) {\n        return false;\n      }\n\n      // 4. Let n be ? ToInteger(fromIndex).\n      //    (if fromIndex is undefinedo, this step generates the value 0.)\n      var n = fromIndex | 0;\n\n      // 5. if n ≥ 0, then\n      //  a. Let k be n.\n      // 6. Else n < 0,\n      //  a. Let k be len + n.\n      //  b. if k < 0, let k be 0.\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || (typeof x === \"number\" && typeof y === \"number\" && isNaN(x) && isNaN(y));\n      }\n\n      // 7. Repeat while k < len\n      while (k < len) {\n        // a. let element k be the result of ? Get(O, ! ToString(k)).\n        // b. if SameValueZero(searchElement, elementK) is true, return true.\n        if (sameValueZero(o[k], searchElement)) {\n          return true;\n        }\n        // c. Increase k by 1.\n        k++;\n      }\n\n      // 8. Return false\n      return false;\n    },\n  });\n}\n\nif (!String.prototype.includes) {\n  String.prototype.includes = function (search, start) {\n    \"use strict\";\n\n    if (search instanceof RegExp) {\n      throw TypeError(\"first argument must not be a RegExp\");\n    }\n    if (start === undefined) {\n      start = 0;\n    }\n    return this.indexOf(search, start) !== -1;\n  };\n}\n\nif (!String.prototype.startsWith) {\n  Object.defineProperty(String.prototype, \"startsWith\", {\n    value: function (search, rawPos) {\n      var pos = rawPos > 0 ? rawPos | 0 : 0;\n      return this.substring(pos, pos + search.length) === search;\n    },\n  });\n}\n","import Parser from \"./parser\";\nimport Util from \"./util\";\nimport StringManager from \"./stringmanager\";\nimport ContentManager from \"./contentmanager\";\nimport Latex from \"./latex\";\nimport MathML from \"./mathml\";\nimport CustomEditors from \"./customeditors\";\nimport Configuration from \"./configuration\";\nimport jsProperties from \"./jsvariables\";\nimport Event from \"./event\";\nimport Listeners from \"./listeners\";\nimport Image from \"./image\";\nimport ServiceProvider from \"./serviceprovider\";\nimport ModalDialog from \"./modal\";\nimport Telemeter from \"./telemeter\";\nimport \"./polyfills\";\nimport \"../styles/styles.css\";\n\n/**\n * @typedef {Object} CoreProperties\n * @property {ServiceProviderProperties} serviceProviderProperties\n * - The ServiceProvider class properties. *\n */\nexport default class Core {\n  /**\n   * @classdesc\n   * This class represents MathType integration Core, managing the following:\n   * - Integration initialization.\n   * - Event managing.\n   * - Insertion of formulas into the edit area.\n   * ```js\n   *       let core = new Core();\n   *       core.addListener(listener);\n   *       core.language = 'en';\n   *\n   *       // Initializing Core class.\n   *       core.init(configurationService);\n   * ```\n   * @constructs\n   * Core constructor.\n   * @param {CoreProperties}\n   */\n  constructor(coreProperties) {\n    /**\n     * Language. Needed for accessibility and locales. 'en' by default.\n     * @type {String}\n     */\n    this.language = \"en\";\n\n    /**\n     * Edit mode, 'images' by default. Admits the following values:\n     * - images\n     * - latex\n     * @type {String}\n     */\n    this.editMode = \"images\";\n\n    /**\n     * Modal dialog instance.\n     * @type {ModalDialog}\n     */\n    this.modalDialog = null;\n\n    /**\n     * The instance of {@link CustomEditors}. By default\n     * the only custom editor is the Chemistry editor.\n     * @type {CustomEditors}\n     */\n    this.customEditors = new CustomEditors();\n\n    /**\n     * Chemistry editor.\n     * @type {CustomEditor}\n     */\n    const chemEditorParams = {\n      name: \"Chemistry\",\n      toolbar: \"chemistry\",\n      icon: \"chem.png\",\n      confVariable: \"chemEnabled\",\n      title: \"ChemType\",\n      tooltip: \"Insert a chemistry formula - ChemType\", // TODO: Localize tooltip.\n    };\n\n    this.customEditors.addEditor(\"chemistry\", chemEditorParams);\n\n    /**\n     * Environment properties. This object contains data about the integration platform.\n     * @typedef IntegrationEnvironment\n     * @property {String} IntegrationEnvironment.editor - Editor name. For example the HTML editor.\n     * @property {String} IntegrationEnvironment.mode - Integration save mode.\n     * @property {String} IntegrationEnvironment.version - Integration version.\n     *\n     */\n\n    /**\n     * The environment properties object.\n     * @type {IntegrationEnvironment}\n     */\n    this.environment = {};\n\n    /**\n     * @typedef EditionProperties\n     * @property {Boolean} editionProperties.isNewElement - True if the formula is a new one.\n     * False otherwise.\n     * @property {HTMLImageElement} editionProperties.temporalImage- The image element.\n     * Null if the formula is new.\n     * @property {Range} editionProperties.latexRange - Tha range that contains the LaTeX formula.\n     * @property {Range} editionProperties.range - The range that contains the image element.\n     * @property {String} editionProperties.editMode - The edition mode. 'images' by default.\n     */\n\n    /**\n     * The properties of the current edition process.\n     * @type {EditionProperties}\n     */\n    this.editionProperties = {};\n\n    this.editionProperties.isNewElement = true;\n    this.editionProperties.temporalImage = null;\n    this.editionProperties.latexRange = null;\n    this.editionProperties.range = null;\n    this.editionProperties.editionStartTime = null;\n\n    /**\n     * The {@link IntegrationModel} instance.\n     * @type {IntegrationModel}\n     */\n    this.integrationModel = null;\n\n    /**\n     * The {@link ContentManager} instance.\n     * @type {ContentManager}\n     */\n    this.contentManager = null;\n\n    /**\n     * The current browser.\n     * @type {String}\n     */\n    this.browser = (() => {\n      const ua = navigator.userAgent;\n      let browser = \"none\";\n      if (ua.search(\"Edge/\") >= 0) {\n        browser = \"EDGE\";\n      } else if (ua.search(\"Chrome/\") >= 0) {\n        browser = \"CHROME\";\n      } else if (ua.search(\"Trident/\") >= 0) {\n        browser = \"IE\";\n      } else if (ua.search(\"Firefox/\") >= 0) {\n        browser = \"FIREFOX\";\n      } else if (ua.search(\"Safari/\") >= 0) {\n        browser = \"SAFARI\";\n      }\n      return browser;\n    })();\n\n    /**\n     * Plugin listeners.\n     * @type {Array.<Object>}\n     */\n    this.listeners = new Listeners();\n\n    /**\n     * Service provider properties.\n     * @type {ServiceProviderProperties}\n     */\n    this.serviceProviderProperties = {};\n    if (\"serviceProviderProperties\" in coreProperties) {\n      this.serviceProviderProperties = coreProperties.serviceProviderProperties;\n    } else {\n      throw new Error(\"serviceProviderProperties property missing.\");\n    }\n  }\n\n  /**\n   * Static property.\n   * Core listeners.\n   * @private\n   * @type {Listeners}\n   */\n  static get globalListeners() {\n    return Core._globalListeners;\n  }\n\n  /**\n   * Static property setter.\n   * Set core listeners.\n   * @param {Listeners} value - The property value.\n   * @ignore\n   */\n  static set globalListeners(value) {\n    Core._globalListeners = value;\n  }\n\n  /**\n   * Core state. Says if it was loaded previously.\n   * True when Core.init was called. Otherwise, false.\n   * @private\n   * @type {Boolean}\n   */\n  static get initialized() {\n    return Core._initialized;\n  }\n\n  /**\n   * Core state. Says if it was loaded previously.\n   * @param {Boolean} value - True to say that Core.init was called. Otherwise, false.\n   * @ignore\n   */\n  static set initialized(value) {\n    Core._initialized = value;\n  }\n\n  /**\n   * Sets the {@link Core.integrationModel} property.\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} property.\n   */\n  setIntegrationModel(integrationModel) {\n    this.integrationModel = integrationModel;\n  }\n\n  /**\n   * Sets the {@link Core.environment} property.\n   * @param {IntegrationEnvironment} integrationEnvironment -\n   * The {@link IntegrationEnvironment} object.\n   */\n  setEnvironment(integrationEnvironment) {\n    if (\"editor\" in integrationEnvironment) {\n      this.environment.editor = integrationEnvironment.editor;\n    }\n    if (\"mode\" in integrationEnvironment) {\n      this.environment.mode = integrationEnvironment.mode;\n    }\n    if (\"version\" in integrationEnvironment) {\n      this.environment.version = integrationEnvironment.version;\n    }\n  }\n\n  /**\n   * Sets the custom headers added on editor requests if contentManager isn't undefined.\n   * @returns {Object} headers - key value headers.\n   */\n  setHeaders(headers) {\n    const headerObject = this?.contentManager?.setCustomHeaders(headers) || headers;\n    Configuration.set(\"customHeaders\", headerObject);\n  }\n\n  /**\n   * Returns the current {@link ModalDialog} instance.\n   * @returns {ModalDialog} The current {@link ModalDialog} instance.\n   */\n  getModalDialog() {\n    return this.modalDialog;\n  }\n\n  /**\n   * Inits the {@link Core} class, doing the following:\n   * - Calls asynchronously configuration service, retrieving the backend configuration in a JSON.\n   * - Updates {@link Configuration} class with the previous configuration properties.\n   * - Updates the {@link ServiceProvider} class using the configuration service path as reference.\n   * - Loads language strings.\n   * - Fires onLoad event.\n   * @param {Object} serviceParameters - Service parameters.\n   */\n  init() {\n    if (!Core.initialized) {\n      const serviceProviderListener = Listeners.newListener(\"onInit\", () => {\n        const jsConfiguration = ServiceProvider.getService(\"configurationjs\", \"\", \"get\");\n        const jsonConfiguration = JSON.parse(jsConfiguration);\n        Configuration.addConfiguration(jsonConfiguration);\n        // Adding JavaScript (not backend) configuration variables.\n        Configuration.addConfiguration(jsProperties);\n        // Fire 'onLoad' event:\n        // All integration must listen this event in order to know if the plugin\n        // has been properly loaded.\n        StringManager.language = this.language;\n        this.listeners.fire(\"onLoad\", {});\n      });\n\n      ServiceProvider.addListener(serviceProviderListener);\n      ServiceProvider.init(this.serviceProviderProperties);\n\n      Core.initialized = true;\n    } else {\n      // Case when there are more than two editor instances.\n      // After the first editor all the other editors don't need to load any file or service.\n      this.listeners.fire(\"onLoad\", {});\n    }\n  }\n\n  /**\n   * Adds a {@link Listener} to the current instance of the {@link Core} class.\n   * @param {Listener} listener - The listener object.\n   */\n  addListener(listener) {\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Adds the global {@link Listener} instance to {@link Core} class.\n   * @param {Listener} listener - The event listener to be added.\n   * @static\n   */\n  static addGlobalListener(listener) {\n    Core.globalListeners.add(listener);\n  }\n\n  beforeUpdateFormula(mathml, wirisProperties) {\n    /**\n     * This event is fired before updating the formula.\n     * @type {Object}\n     * @property {String} mathml - MathML to be transformed.\n     * @property {String} editMode - Edit mode.\n     * @property {Object} wirisProperties - Extra attributes for the formula.\n     * @property {String} language - Formula language.\n     */\n    const beforeUpdateEvent = new Event();\n\n    beforeUpdateEvent.mathml = mathml;\n\n    // Cloning wirisProperties object\n    // We don't want wirisProperties object modified.\n    beforeUpdateEvent.wirisProperties = {};\n\n    if (wirisProperties != null) {\n      Object.keys(wirisProperties).forEach((attr) => {\n        beforeUpdateEvent.wirisProperties[attr] = wirisProperties[attr];\n      });\n    }\n\n    // Read only.\n    beforeUpdateEvent.language = this.language;\n    beforeUpdateEvent.editMode = this.editMode;\n\n    if (this.listeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\n      return {};\n    }\n\n    if (Core.globalListeners.fire(\"onBeforeFormulaInsertion\", beforeUpdateEvent)) {\n      return {};\n    }\n\n    return {\n      mathml: beforeUpdateEvent.mathml,\n      wirisProperties: beforeUpdateEvent.wirisProperties,\n    };\n  }\n\n  /**\n   * Converts a MathML into it's correspondent image and inserts the image is\n   * inserted in a HTMLElement target by creating\n   * a new image or updating an existing one.\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the insertion.\n   * @param {Window} windowTarget - The window element where the editable content is.\n   * @param {String} mathml - The MathML.\n   * @param {Array.<Object>} wirisProperties - The extra attributes for the formula.\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\n   */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    /**\n     * It is the object with the information of the node or latex to insert.\n     * @typedef ReturnObject\n     * @property {Node} [node] - The DOM node to insert.\n     * @property {String} [latex] - The latex to insert.\n     */\n    const returnObject = {};\n\n    if (!mathml) {\n      this.insertElementOnSelection(null, focusElement, windowTarget);\n    } else if (this.editMode === \"latex\") {\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\n      // this.integrationModel.getNonLatexNode is an integration wrapper\n      // to have special behaviours for nonLatex.\n      // Not all the integrations have special behaviours for nonLatex.\n      if (!!this.integrationModel.fillNonLatexNode && !returnObject.latex) {\n        const afterUpdateEvent = new Event();\n        afterUpdateEvent.editMode = this.editMode;\n        afterUpdateEvent.windowTarget = windowTarget;\n        afterUpdateEvent.focusElement = focusElement;\n        afterUpdateEvent.latex = returnObject.latex;\n        this.integrationModel.fillNonLatexNode(afterUpdateEvent, windowTarget, mathml);\n      } else {\n        returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\n      }\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\n    } else {\n      returnObject.node = Parser.mathmlToImgObject(windowTarget.document, mathml, wirisProperties, this.language);\n\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\n    }\n\n    return returnObject;\n  }\n\n  afterUpdateFormula(focusElement, windowTarget, node, latex) {\n    /**\n     * This event is fired after update the formula.\n     * @type {Event}\n     * @param {String} editMode - edit mode.\n     * @param {Object} windowTarget - target window.\n     * @param {Object} focusElement - target element to be focused after update.\n     * @param {String} latex - LaTeX generated by the formula (editMode=latex).\n     * @param {Object} node - node generated after update the formula (text if LaTeX img otherwise).\n     */\n    const afterUpdateEvent = new Event();\n    afterUpdateEvent.editMode = this.editMode;\n    afterUpdateEvent.windowTarget = windowTarget;\n    afterUpdateEvent.focusElement = focusElement;\n    afterUpdateEvent.node = node;\n    afterUpdateEvent.latex = latex;\n\n    if (this.listeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\n      return {};\n    }\n\n    if (Core.globalListeners.fire(\"onAfterFormulaInsertion\", afterUpdateEvent)) {\n      return {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Sets the caret after a given Node and set the focus to the owner document.\n   * @param {Node} node - The Node element.\n   */\n  placeCaretAfterNode(node) {\n    if (node === null) return;\n\n    this.integrationModel.getSelection();\n    const nodeDocument = node.ownerDocument;\n    if (typeof nodeDocument.getSelection !== \"undefined\" && !!node.parentElement) {\n      const range = nodeDocument.createRange();\n      range.setStartAfter(node);\n      range.collapse(true);\n      const selection = nodeDocument.getSelection();\n      selection.removeAllRanges();\n      selection.addRange(range);\n      nodeDocument.body.focus();\n    }\n  }\n\n  /**\n   * Replaces a Selection object with an HTMLElement.\n   * @param {HTMLElement} element - The HTMLElement to replace the selection.\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the replace.\n   * @param {Window} windowTarget - The window target.\n   */\n  insertElementOnSelection(element, focusElement, windowTarget) {\n    let mathmlOrigin = null;\n    if (this.editionProperties.isNewElement) {\n      if (element) {\n        if (focusElement.type === \"textarea\") {\n          Util.updateTextArea(focusElement, element.textContent);\n        } else if (document.selection && document.getSelection === 0) {\n          let range = windowTarget.document.selection.createRange();\n          windowTarget.document.execCommand(\"InsertImage\", false, element.src);\n\n          if (!(\"parentElement\" in range)) {\n            windowTarget.document.execCommand(\"delete\", false);\n            range = windowTarget.document.selection.createRange();\n            windowTarget.document.execCommand(\"InsertImage\", false, element.src);\n          }\n\n          if (\"parentElement\" in range) {\n            const temporalObject = range.parentElement();\n\n            if (temporalObject.nodeName.toUpperCase() === \"IMG\") {\n              temporalObject.parentNode.replaceChild(element, temporalObject);\n            } else {\n              // IE9 fix: parentNode() does not return the IMG node,\n              // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\n              range.pasteHTML(Util.createObjectCode(element));\n            }\n          }\n        } else {\n          let range = null;\n          // In IE is needed keep the range due to after focus the modal window\n          // it can't be retrieved the last selection.\n          if (this.editionProperties.range) {\n            ({ range } = this.editionProperties);\n            this.editionProperties.range = null;\n          } else {\n            const editorSelection = this.integrationModel.getSelection();\n            range = editorSelection.getRangeAt(0);\n          }\n\n          // Delete if something was surrounded.\n          range.deleteContents();\n\n          let node = range.startContainer;\n          const position = range.startOffset;\n\n          if (node.nodeType === 3) {\n            // TEXT_NODE.\n            node = node.splitText(position);\n            node.parentNode.insertBefore(element, node);\n          } else if (node.nodeType === 1) {\n            // ELEMENT_NODE.\n            node.insertBefore(element, node.childNodes[position]);\n          }\n\n          this.placeCaretAfterNode(element);\n        }\n      } else if (focusElement.type === \"textarea\") {\n        focusElement.focus();\n      } else {\n        const editorSelection = this.integrationModel.getSelection();\n        editorSelection.removeAllRanges();\n\n        if (this.editionProperties.range) {\n          const { range } = this.editionProperties;\n          this.editionProperties.range = null;\n          editorSelection.addRange(range);\n        }\n      }\n    } else if (this.editionProperties.latexRange) {\n      if (document.selection && document.getSelection === 0) {\n        this.editionProperties.isNewElement = true;\n        this.editionProperties.latexRange.select();\n        this.insertElementOnSelection(element, focusElement, windowTarget);\n      } else {\n        this.editionProperties.latexRange.deleteContents();\n        this.editionProperties.latexRange.insertNode(element);\n        this.placeCaretAfterNode(element);\n      }\n    } else if (focusElement.type === \"textarea\") {\n      let item;\n      // Wrapper for some integrations that can have special behaviours to show latex.\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n        item = this.integrationModel.getSelectedItem(focusElement, false);\n      } else {\n        item = Util.getSelectedItemOnTextarea(focusElement);\n      }\n      Util.updateExistingTextOnTextarea(focusElement, element.textContent, item.startPosition, item.endPosition);\n    } else {\n      mathmlOrigin = this.editionProperties.temporalImage?.dataset.mathml;\n      if (element && element.nodeName.toLowerCase() === \"img\") {\n        // Editor empty, formula has been erased on edit.\n        // There are editors (e.g: CKEditor) that put attributes in images.\n        // We don't allow that behaviour in our images.\n        Image.removeImgDataAttributes(this.editionProperties.temporalImage);\n        // Clone is needed to maintain event references to temporalImage.\n        Image.clone(element, this.editionProperties.temporalImage);\n      } else {\n        this.editionProperties.temporalImage.remove();\n      }\n      this.placeCaretAfterNode(this.editionProperties.temporalImage);\n    }\n\n    // Build the telemeter payload separated to delete null/undefined entries.\n    const mathml = element?.dataset?.mathml;\n    let payload = {\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\n      elapsed_time: Date.now() - this.editionProperties.editionStartTime,\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\n      toolbar: this.modalDialog.contentManager.toolbar,\n      size: mathml?.length,\n    };\n\n    // Remove the desired null keys.\n    Object.keys(payload).forEach((key) => {\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\n    });\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\n        ...payload,\n      });\n    } catch (error) {\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\n    }\n  }\n\n  /**\n   * Opens a modal dialog containing MathType editor..\n   * @param {HTMLElement} target - The target HTMLElement where formulas should be inserted.\n   * @param {Boolean} isIframe - True if the target HTMLElement is an iframe. False otherwise.\n   */\n  openModalDialog(target, isIframe) {\n    // Count the time since the editor is open\n    this.editionProperties.editionStartTime = Date.now();\n\n    // Textarea elements don't have normal document ranges. It only accepts latex edit.\n    this.editMode = \"images\";\n\n    // In IE is needed keep the range due to after focus the modal window\n    // it can't be retrieved the last selection.\n    try {\n      if (isIframe) {\n        // Is needed focus the target first.\n        target.contentWindow.focus();\n        const selection = target.contentWindow.getSelection();\n        this.editionProperties.range = selection.getRangeAt(0);\n      } else {\n        // Is needed focus the target first.\n        target.focus();\n        const selection = getSelection();\n        this.editionProperties.range = selection.getRangeAt(0);\n      }\n    } catch (e) {\n      this.editionProperties.range = null;\n    }\n\n    if (isIframe === undefined) {\n      isIframe = true;\n    }\n\n    this.editionProperties.latexRange = null;\n\n    if (target) {\n      let selectedItem;\n      if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n        selectedItem = this.integrationModel.getSelectedItem(target, isIframe);\n      } else {\n        selectedItem = Util.getSelectedItem(target, isIframe);\n      }\n\n      // Check LaTeX if and only if the node is a text node (nodeType==3).\n      if (selectedItem) {\n        // Case when image was selected and button pressed.\n        if (!selectedItem.caretPosition && Util.containsClass(selectedItem.node, Configuration.get(\"imageClassName\"))) {\n          this.editionProperties.temporalImage = selectedItem.node;\n          this.editionProperties.isNewElement = false;\n        } else if (selectedItem.node.nodeType === 3) {\n          // If it's a text node means that editor is working with LaTeX.\n          if (this.integrationModel.getMathmlFromTextNode) {\n            // If integration has this function it isn't set range due to we don't\n            // know if it will be put into a textarea as a text or image.\n            const mathml = this.integrationModel.getMathmlFromTextNode(selectedItem.node, selectedItem.caretPosition);\n            if (mathml) {\n              this.editMode = \"latex\";\n              this.editionProperties.isNewElement = false;\n              this.editionProperties.temporalImage = document.createElement(\"img\");\n              this.editionProperties.temporalImage.setAttribute(\n                Configuration.get(\"imageMathmlAttribute\"),\n                MathML.safeXmlEncode(mathml),\n              );\n            }\n          } else {\n            const latexResult = Latex.getLatexFromTextNode(selectedItem.node, selectedItem.caretPosition);\n            if (latexResult) {\n              const mathml = Latex.getMathMLFromLatex(latexResult.latex);\n              this.editMode = \"latex\";\n              this.editionProperties.isNewElement = false;\n              this.editionProperties.temporalImage = document.createElement(\"img\");\n              this.editionProperties.temporalImage.setAttribute(\n                Configuration.get(\"imageMathmlAttribute\"),\n                MathML.safeXmlEncode(mathml),\n              );\n              const windowTarget = isIframe ? target.contentWindow : window;\n\n              if (target.tagName.toLowerCase() !== \"textarea\") {\n                if (document.selection) {\n                  let leftOffset = 0;\n                  let previousNode = latexResult.startNode.previousSibling;\n\n                  while (previousNode) {\n                    leftOffset += Util.getNodeLength(previousNode);\n                    previousNode = previousNode.previousSibling;\n                  }\n\n                  this.editionProperties.latexRange = windowTarget.document.selection.createRange();\n                  this.editionProperties.latexRange.moveToElementText(latexResult.startNode.parentNode);\n                  this.editionProperties.latexRange.move(\"character\", leftOffset + latexResult.startPosition);\n                  this.editionProperties.latexRange.moveEnd(\"character\", latexResult.latex.length + 4); // Plus 4 for the '$$' characters.\n                } else {\n                  this.editionProperties.latexRange = windowTarget.document.createRange();\n                  this.editionProperties.latexRange.setStart(latexResult.startNode, latexResult.startPosition);\n                  this.editionProperties.latexRange.setEnd(latexResult.endNode, latexResult.endPosition);\n                }\n              }\n            }\n          }\n        }\n      } else if (target.tagName.toLowerCase() === \"textarea\") {\n        // By default editMode is 'images', but when target is a textarea it needs to be 'latex'.\n        this.editMode = \"latex\";\n      }\n    }\n\n    // Setting an object with the editor parameters.\n    // Editor parameters can be customized in several ways:\n    // 1 - editorAttributes: Contains the default editor attributes,\n    //  usually the metrics in a comma separated string. Always exists.\n    // 2 - editorParameters: Object containing custom editor parameters.\n    // These parameters are defined in the backend. So they affects all integration instances.\n\n    // The backend send the default editor attributes in a coma separated\n    // with the following structure: key1=value1,key2=value2...\n    const defaultEditorAttributesArray = Configuration.get(\"editorAttributes\").split(\", \");\n    const defaultEditorAttributes = {};\n    for (let i = 0, len = defaultEditorAttributesArray.length; i < len; i += 1) {\n      const tempAttribute = defaultEditorAttributesArray[i].split(\"=\");\n      const key = tempAttribute[0];\n      const value = tempAttribute[1];\n      defaultEditorAttributes[key] = value;\n    }\n    // Custom editor parameters.\n    const editorAttributes = {\n      language: this.language, // Default language value\n    };\n    // Editor parameters in backend, usually configuration.ini.\n    const serverEditorParameters = Configuration.get(\"editorParameters\");\n    // Editor parameters through JavaScript configuration.\n    const clientEditorParameters = this.integrationModel.editorParameters;\n    Object.assign(editorAttributes, defaultEditorAttributes, serverEditorParameters);\n    Object.assign(editorAttributes, defaultEditorAttributes, clientEditorParameters);\n\n    // Now, update backwards: if user has set a custom language, pass that back to core properties\n    this.language = editorAttributes.language;\n    StringManager.language = this.language;\n\n    editorAttributes.rtl = this.integrationModel.rtl;\n\n    const customHeaders = Configuration.get(\"customHeaders\");\n    // This is not being used in the code, we are keeping it just in case it's needed.\n    // We check if it is a string since we have a setter that will make the customHeaders an object. And we do the conversion for the case when we get the headers from the backend.\n    editorAttributes.customHeaders =\n      typeof customHeaders === \"string\" ? Util.convertStringToObject(customHeaders) : customHeaders;\n\n    const contentManagerAttributes = {};\n    contentManagerAttributes.editorAttributes = editorAttributes;\n    contentManagerAttributes.language = this.language;\n    contentManagerAttributes.customEditors = this.customEditors;\n    contentManagerAttributes.environment = this.environment;\n\n    if (this.modalDialog == null) {\n      this.modalDialog = new ModalDialog(editorAttributes);\n      this.contentManager = new ContentManager(contentManagerAttributes);\n      // When an instance of ContentManager is created we need to wait until\n      // the ContentManager is ready by listening 'onLoad' event.\n      const listener = Listeners.newListener(\"onLoad\", () => {\n        this.contentManager.dbclick = this.editionProperties.dbclick;\n        this.contentManager.isNewElement = this.editionProperties.isNewElement;\n        if (this.editionProperties.temporalImage != null) {\n          const mathML = MathML.safeXmlDecode(\n            this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\n          );\n          this.contentManager.mathML = mathML;\n        }\n      });\n      this.contentManager.addListener(listener);\n      this.contentManager.init();\n      this.modalDialog.setContentManager(this.contentManager);\n      this.contentManager.setModalDialogInstance(this.modalDialog);\n    } else {\n      this.contentManager.dbclick = this.editionProperties.dbclick;\n      this.contentManager.isNewElement = this.editionProperties.isNewElement;\n      if (this.editionProperties.temporalImage != null) {\n        const mathML = MathML.safeXmlDecode(\n          this.editionProperties.temporalImage.getAttribute(Configuration.get(\"imageMathmlAttribute\")),\n        );\n        this.contentManager.mathML = mathML;\n      }\n    }\n    this.contentManager.setIntegrationModel(this.integrationModel);\n    this.modalDialog.open();\n  }\n\n  /**\n   * Returns the {@link CustomEditors} instance.\n   * @return {CustomEditors} The current {@link CustomEditors} instance.\n   */\n  getCustomEditors() {\n    return this.customEditors;\n  }\n}\n\n/**\n * Core static listeners.\n * @type {Listeners}\n * @private\n */\nCore._globalListeners = new Listeners();\n\n/**\n * Resources state. Says if they were loaded or not.\n * @type {Boolean}\n * @private\n */\nCore._initialized = false;\n","// eslint-disable-next-line no-unused-vars, import/named\nimport Core from \"./core.src\";\nimport Image from \"./image\";\nimport Listeners from \"./listeners\";\nimport Util from \"./util\";\nimport Configuration from \"./configuration\";\nimport ServiceProvider from \"./serviceprovider\";\nimport Telemeter from \"./telemeter\";\nimport warnIcon from \"../styles/icons/general/warn_icon.svg\"; //eslint-disable-line\n\n/**\n * @typedef {Object} IntegrationModelProperties\n * @property {string} configurationService - Configuration service path.\n * This parameter is needed to determine all services paths.\n * @property {HTMLElement} integrationModelProperties.target - HTML target.\n * @property {string} integrationModelProperties.scriptName - Integration script name.\n * Usually the name of the integration script.\n * @property {Object} integrationModelProperties.environment - integration environment properties.\n * @property {Object} [integrationModelProperties.callbackMethodArguments] - object containing\n * callback method arguments.\n * @property {string} [integrationModelProperties.version] - integration version number.\n * @property {Object} [integrationModelProperties.editorObject] - object containing\n * the integration editor instance.\n * @property {boolean} [integrationModelProperties.rtl] - true if the editor is in RTL mode.\n * false otherwise.\n * @property {ServiceProviderProperties} [integrationModelProperties.serviceProviderProperties]\n * - The service parameters.\n * @property {Object} [integrationModelProperties.integrationParameters]\n * - Overwritten integration parameters.\n */\n\nexport default class IntegrationModel {\n  /**\n   * @classdesc\n   * This class represents an integration model, allowing the integration script to\n   * communicate with Core class. Each integration must extend this class.\n   * @constructs\n   * @param {IntegrationModelProperties} integrationModelProperties\n   */\n  constructor(integrationModelProperties) {\n    /**\n     * Language. Needed for accessibility and locales. English by default.\n     */\n    this.language = \"en\";\n\n    /**\n     * Service parameters\n     * @type {ServiceProviderProperties}\n     */\n    this.serviceProviderProperties = integrationModelProperties.serviceProviderProperties ?? {};\n\n    /**\n     * Configuration service path. The integration service is needed by Core class to\n     * load all the backend configuration into the frontend and also to create the paths\n     * of all services (all services lives in the same route). Mandatory property.\n     */\n    this.configurationService = \"\";\n    if (\"configurationService\" in integrationModelProperties) {\n      this.serviceProviderProperties.URI = integrationModelProperties.configurationService;\n      console.warn(\"Deprecated property configurationService. Use serviceParameters on instead.\", [\n        integrationModelProperties.configurationService,\n      ]);\n    }\n\n    /**\n     * Plugin version. Needed to stats and caching.\n     * @type {string}\n     */\n    this.version = \"version\" in integrationModelProperties ? integrationModelProperties.version : \"\";\n\n    /**\n     * DOM target in which the plugin works. Needed to associate events, insert formulas, etc.\n     * Mandatory property.\n     */\n    this.target = null;\n    if (\"target\" in integrationModelProperties) {\n      this.target = integrationModelProperties.target;\n    } else {\n      throw new Error(\"IntegrationModel constructor error: target property missed.\");\n    }\n\n    /**\n     * Integration script name. Needed to know the plugin path.\n     */\n    if (\"scriptName\" in integrationModelProperties) {\n      this.scriptName = integrationModelProperties.scriptName;\n    }\n\n    /**\n     * Object containing the arguments needed by the callback function.\n     */\n    this.callbackMethodArguments = integrationModelProperties.callbackMethodArguments ?? {};\n\n    /**\n     * Contains information about the integration environment:\n     * like the name of the editor, the version, etc.\n     */\n    this.environment = integrationModelProperties.environment ?? {};\n\n    /**\n     * Indicates if the DOM target is - or not - and iframe.\n     */\n    this.isIframe = false;\n    if (this.target != null) {\n      this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n    }\n\n    /**\n     * Instance of the integration editor object. Usually the entry point to access the API\n     * of a HTML editor.\n     */\n    this.editorObject = integrationModelProperties.editorObject ?? null;\n\n    /**\n     * Specifies if the direction of the text is RTL. false by default.\n     */\n    this.rtl = integrationModelProperties.rtl ?? false;\n\n    /**\n     * Specifies if the integration model exposes the locale strings. false by default.\n     */\n    this.managesLanguage = integrationModelProperties.managesLanguage ?? false;\n\n    /**\n     * Specify if editor will open in hand mode only\n     */\n    this.forcedHandMode = integrationModelProperties?.integrationParameters?.forcedHandMode ?? false;\n\n    /**\n     * Indicates if an image is selected. Needed to resize the image to the original size in case\n     * the image is resized.\n     * @type {boolean}\n     */\n    this.temporalImageResizing = false;\n\n    /**\n     * The Core class instance associated to the integration model.\n     * @type {Core}\n     */\n    this.core = null;\n\n    /**\n     * Integration model listeners.\n     * @type {Listeners}\n     */\n    this.listeners = new Listeners();\n\n    // Parameters overwrite.\n    if (\"integrationParameters\" in integrationModelProperties) {\n      IntegrationModel.integrationParameters.forEach((parameter) => {\n        if (parameter in integrationModelProperties.integrationParameters) {\n          // Don't add empty parameters.\n          const value = integrationModelProperties.integrationParameters[parameter];\n          if (Object.keys(value).length !== 0) {\n            this[parameter] = value;\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Init function. Usually called from the integration side once the core.js file is loaded.\n   */\n  init() {\n    // Check if language is an object and select the property necessary\n    this.language = this.getLanguage();\n\n    // We need to wait until Core class is loaded ('onLoad' event) before\n    // call the callback method.\n    const listener = Listeners.newListener(\"onLoad\", () => {\n      this.callbackFunction(this.callbackMethodArguments);\n    });\n\n    // Backwards compatibility.\n    if (this.serviceProviderProperties.URI.indexOf(\"configuration\") !== -1) {\n      const uri = this.serviceProviderProperties.URI;\n      const server = ServiceProvider.getServerLanguageFromService(uri);\n      this.serviceProviderProperties.server = server;\n      const configurationIndex = this.serviceProviderProperties.URI.indexOf(\"configuration\");\n      const subsTring = this.serviceProviderProperties.URI.substring(0, configurationIndex);\n      this.serviceProviderProperties.URI = subsTring;\n    }\n\n    let serviceParametersURI = this.serviceProviderProperties.URI;\n    serviceParametersURI =\n      serviceParametersURI.indexOf(\"/\") === 0 || serviceParametersURI.indexOf(\"http\") === 0\n        ? serviceParametersURI\n        : Util.concatenateUrl(this.getPath(), serviceParametersURI);\n\n    this.serviceProviderProperties.URI = serviceParametersURI;\n\n    const coreProperties = {};\n    coreProperties.serviceProviderProperties = this.serviceProviderProperties;\n\n    this.setCore(new Core(coreProperties));\n    this.core.addListener(listener);\n    this.core.language = this.language;\n\n    // Initializing Core class.\n    this.core.init();\n    // TODO: Move to Core constructor.\n    this.core.setEnvironment(this.environment);\n\n    // No internet connection modal.\n    let attributes = {};\n    attributes.class = attributes.id = \"wrs_modal_offline\";\n    this.offlineModal = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_content_offline\";\n    this.offlineModalContent = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_close\";\n    this.offlineModalClose = Util.createElement(\"span\", attributes);\n    this.offlineModalClose.innerHTML = \"&times;\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_warn\";\n    this.offlineModalWarn = Util.createElement(\"span\", attributes);\n    let generalStyle = `background-image: url(data:image/svg+xml;base64,${window.btoa(warnIcon)})`;\n    this.offlineModalWarn.setAttribute(\"style\", generalStyle);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text_container\";\n    this.offlineModalMessage = Util.createElement(\"div\", attributes);\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text_warn\";\n    this.offlineModalMessage1 = Util.createElement(\"p\", attributes);\n    this.offlineModalMessage1.innerHTML = \"You are not online!\";\n\n    attributes = {};\n    attributes.class = \"wrs_modal_offline_text\";\n    this.offlineModalMessage2 = Util.createElement(\"p\", attributes);\n    this.offlineModalMessage2.innerHTML = `Thank you for using MathType. We have detected you are disconnected from the network. We remind you that you'll need to be connected to use MathType. <br /><br />Please refresh the page if this message continues appearing.`;\n\n    //Append offline modal elements\n    this.offlineModalContent.appendChild(this.offlineModalClose);\n    this.offlineModalMessage.appendChild(this.offlineModalMessage1);\n    this.offlineModalMessage.appendChild(this.offlineModalMessage2);\n    this.offlineModalContent.appendChild(this.offlineModalMessage);\n    this.offlineModalContent.appendChild(this.offlineModalWarn);\n    this.offlineModal.appendChild(this.offlineModalContent);\n    document.body.appendChild(this.offlineModal);\n\n    let modal = document.getElementById(\"wrs_modal_offline\");\n    this.offlineModalClose.addEventListener(\"click\", function () {\n      modal.style.display = \"none\";\n    });\n\n    // Store editor name for telemetry purposes.\n    let editorName = this.environment.editor;\n    editorName = editorName.slice(0, -1); // Remove version number from editors\n    if (editorName.includes(\"TinyMCE\")) editorName = \"TinyMCE\"; // Remove version from Tinymce editor.\n    if (editorName.includes(\"Generic\")) editorName = \"Generic\"; // Remove version from Generic editor.\n    let solutionTelemeter = editorName;\n\n    // If moodle, add information to hosts and solution.\n    let isMoodle = !!(typeof M === \"object\" && M !== null),\n      lms;\n\n    if (isMoodle) {\n      solutionTelemeter = \"Moodle\";\n      lms = {\n        nam: \"moodle\",\n        fam: \"lms\",\n        ver: this.environment.moodleVersion,\n        category: this.environment.moodleCourseCategory,\n        course: this.environment.moodleCourseName,\n      };\n      if (!editorName.includes(\"TinyMCE\")) {\n        editorName = \"Atto\";\n      }\n    }\n\n    // Get the OS and its version.\n    let OSData = this.getOS();\n\n    // Get the broswer and its version.\n    let broswerData = this.getBrowser();\n\n    // Create list of hosts to send to telemetry.\n    let hosts = [\n      {\n        nam: broswerData.detectedBrowser,\n        fam: \"browser\",\n        ver: broswerData.versionBrowser,\n      },\n      {\n        nam: editorName.toLowerCase(),\n        fam: \"html-editor\",\n        ver: this.environment.editorVersion,\n      },\n      {\n        nam: OSData.detectedOS,\n        fam: \"os\",\n        ver: OSData.versionOS,\n      },\n      {\n        nam: window.location.hostname,\n        fam: \"domain\",\n      },\n      lms,\n    ];\n\n    // Filter hosts to remove empty objects and empty keys.\n    hosts = hosts.filter(function (element) {\n      if (element) Object.keys(element).forEach((key) => (element[key] === \"unknown\" ? delete element[key] : {}));\n      return element !== undefined;\n    });\n\n    // Initialize telemeter\n    Telemeter.init({\n      solution: {\n        name: \"MathType for \" + solutionTelemeter,\n        version: this.version,\n      },\n      hosts: hosts,\n      config: {\n        test: false, // True to use the staging Telemetry endpoint instead of the production one.\n        debug: false, // True to show more information about Telemeter's execution and use dev-tools.\n        dry_run: false, // True to skip sending data to the Telemetry endpoint (for example for unit tests).\n        api_key: \"eda2ce9b-0e8a-46f2-acdd-c228a615314e\", // to auth against Telemetry. Data team is the responsible of providing it.\n      },\n      url: undefined,\n    });\n  }\n\n  /**\n   * Returns the Browser name and its version.\n   * @return {array} - detectedBrowser = Operating System name.\n   *                   versionBrowser = Operating System version.\n   */\n  getBrowser() {\n    // default value for OS just in case nothing is detected\n    let detectedBrowser = \"unknown\",\n      versionBrowser = \"unknown\";\n\n    let userAgent = window.navigator.userAgent;\n\n    if (/Brave/.test(userAgent)) {\n      detectedBrowser = \"brave\";\n      if (userAgent.indexOf(\"Brave/\")) {\n        let start = userAgent.indexOf(\"Brave\") + 6;\n        let end = userAgent.substring(start).indexOf(\" \");\n        end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n        versionBrowser = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (userAgent.indexOf(\"Edg/\") !== -1) {\n      detectedBrowser = \"edge_chromium\";\n      let start = userAgent.indexOf(\"Edg/\") + 4;\n      versionBrowser = userAgent\n        .substring(start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Edg/.test(userAgent)) {\n      detectedBrowser = \"edge\";\n      let start = userAgent.indexOf(\"Edg\") + 3;\n      start = start + userAgent.substring(start).indexOf(\"/\");\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Firefox/.test(userAgent) || /FxiOS/.test(userAgent)) {\n      detectedBrowser = \"firefox\";\n      let start = userAgent.indexOf(\"Firefox\");\n      start = start === -1 ? userAgent.indexOf(\"FxiOS\") : start;\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    } else if (/OPR/.test(userAgent)) {\n      detectedBrowser = \"opera\";\n      let start = userAgent.indexOf(\"OPR/\") + 4;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Chrome/.test(userAgent) || /CriOS/.test(userAgent)) {\n      detectedBrowser = \"chrome\";\n      let start = userAgent.indexOf(\"Chrome\");\n      start = start === -1 ? userAgent.indexOf(\"CriOS\") : start;\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    } else if (/Safari/.test(userAgent)) {\n      detectedBrowser = \"safari\";\n      let start = userAgent.indexOf(\"Version/\");\n      start = start + userAgent.substring(start).indexOf(\"/\") + 1;\n      let end = userAgent.substring(start).indexOf(\" \");\n      end = end === -1 ? userAgent.lastIndexOf(\"\") : end;\n      versionBrowser = userAgent.substring(start, end + start).replace(\"_\", \".\");\n    }\n\n    return { detectedBrowser, versionBrowser };\n  }\n\n  /**\n   * Returns the operating system and its version.\n   * @return {array} - detectedOS = Operating System name.\n   *                   versionOS = Operating System version.\n   */\n  getOS() {\n    // default value for OS just in case nothing is detected\n    let detectedOS = \"unknown\",\n      versionOS = \"unknown\";\n\n    // Retrieve properties to easily detect the OS\n    let userAgent = window.navigator.userAgent,\n      platform = window.navigator.platform,\n      macosPlatforms = [\"Macintosh\", \"MacIntel\", \"MacPPC\", \"Mac68K\"],\n      windowsPlatforms = [\"Win32\", \"Win64\", \"Windows\", \"WinCE\"],\n      iosPlatforms = [\"iPhone\", \"iPad\", \"iPod\"];\n\n    // Find OS and their respective versions\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"macos\";\n      if (userAgent.indexOf(\"OS X\") !== -1) {\n        let start = userAgent.indexOf(\"OS X\") + 5;\n        let end = userAgent.substring(start).indexOf(\" \");\n        versionOS = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"ios\";\n      if (userAgent.indexOf(\"OS \") !== -1) {\n        let start = userAgent.indexOf(\"OS \") + 3;\n        let end = userAgent.substring(start).indexOf(\")\");\n        versionOS = userAgent\n          .substring(start, end + start)\n          .replace(\"_\", \".\")\n          .replace(/[^\\d.-]/g, \"\");\n      }\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      detectedOS = \"windows\";\n      let start = userAgent.indexOf(\"Windows\");\n      let end = userAgent.substring(start).indexOf(\";\");\n      if (end === -1) {\n        end = userAgent.substring(start).indexOf(\")\");\n      }\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/Android/.test(userAgent)) {\n      detectedOS = \"android\";\n      let start = userAgent.indexOf(\"Android\");\n      let end = userAgent.substring(start).indexOf(\";\");\n      if (end === -1) {\n        end = userAgent.substring(start).indexOf(\")\");\n      }\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (/CrOS/.test(userAgent)) {\n      detectedOS = \"chromeos\";\n      let start = userAgent.indexOf(\"CrOS \") + 5;\n      start = start + userAgent.substring(start).indexOf(\" \");\n      let end = userAgent.substring(start).indexOf(\")\");\n      versionOS = userAgent\n        .substring(start, end + start)\n        .replace(\"_\", \".\")\n        .replace(/[^\\d.-]/g, \"\");\n    } else if (detectedOS === \"unknown\" && /Linux/.test(platform)) {\n      detectedOS = \"linux\";\n    }\n\n    return { detectedOS, versionOS };\n  }\n\n  /**\n   * Returns the absolute path of the integration script.\n   * @return {string} - Absolute path for the integration script.\n   */\n  getPath() {\n    if (typeof this.scriptName === \"undefined\") {\n      throw new Error(\"scriptName property needed for getPath.\");\n    }\n    const col = document.getElementsByTagName(\"script\");\n    let path = \"\";\n    for (let i = 0; i < col.length; i += 1) {\n      const j = col[i].src.lastIndexOf(this.scriptName);\n      if (j >= 0) {\n        path = col[i].src.substr(0, j - 1);\n      }\n    }\n    return path;\n  }\n\n  /**\n   * Returns integration model plugin version\n   * @param {string} - Plugin version\n   */\n  getVersion() {\n    return this.version;\n  }\n\n  /**\n   * Sets the language property.\n   * @param {string} language - language code.\n   */\n  setLanguage(language) {\n    this.language = language;\n  }\n\n  /**\n   * Sets a Core instance.\n   * @param {Core} core - instance of Core class.\n   */\n  setCore(core) {\n    this.core = core;\n    core.setIntegrationModel(this);\n  }\n\n  /**\n   * Returns the Core instance.\n   * @returns {Core} instance of Core class.\n   */\n  getCore() {\n    return this.core;\n  }\n\n  /**\n   * Sets the object target and updates the iframe property.\n   * @param {HTMLElement} target - target object.\n   */\n  setTarget(target) {\n    this.target = target;\n    this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n  }\n\n  /**\n   * Sets the editor object.\n   * @param {Object} editorObject - The editor object.\n   */\n  setEditorObject(editorObject) {\n    this.editorObject = editorObject;\n  }\n\n  /**\n   * Opens formula editor to editing a new formula. Can be overwritten in order to make some\n   * actions from integration part before the formula is edited.\n   */\n  openNewFormulaEditor() {\n    if (window.navigator.onLine) {\n      this.core.editionProperties.dbclick = false;\n      this.core.editionProperties.isNewElement = true;\n      this.core.openModalDialog(this.target, this.isIframe);\n    } else {\n      let modal = document.getElementById(\"wrs_modal_offline\");\n      modal.style.display = \"block\";\n    }\n  }\n\n  /**\n   * Opens formula editor to editing an existing formula. Can be overwritten in order to make some\n   * actions from integration part before the formula is edited.\n   */\n  openExistingFormulaEditor() {\n    if (window.navigator.onLine) {\n      this.core.editionProperties.isNewElement = false;\n      this.core.openModalDialog(this.target, this.isIframe);\n    } else {\n      let modal = document.getElementById(\"wrs_modal_offline\");\n      modal.style.display = \"block\";\n    }\n  }\n\n  /**\n   * Wrapper to Core.updateFormula method.\n   * Transform a MathML into a image formula.\n   * Then the image formula is inserted in the specified target, creating a new image (new formula)\n   * or updating an existing one.\n   * @param {string} mathml - MathML to generate the formula.\n   * @param {string} editMode - Edit Mode (LaTeX or images).\n   */\n  updateFormula(mathml) {\n    if (this.editorParameters) {\n      mathml = com.wiris.editor.util.EditorUtils.addAnnotation(\n        mathml,\n        \"application/vnd.wiris.mtweb-params+json\",\n        JSON.stringify(this.editorParameters),\n      );\n    }\n    let focusElement;\n    let windowTarget;\n    const wirisProperties = null;\n\n    if (this.isIframe) {\n      focusElement = this.target.contentWindow;\n      windowTarget = this.target.contentWindow;\n    } else {\n      focusElement = this.target;\n      windowTarget = window;\n    }\n\n    let obj = this.core.beforeUpdateFormula(mathml, wirisProperties);\n\n    if (!obj) {\n      return \"\";\n    }\n\n    obj = this.insertFormula(focusElement, windowTarget, obj.mathml, obj.wirisProperties);\n\n    if (!obj) {\n      return \"\";\n    }\n\n    return this.core.afterUpdateFormula(obj.focusElement, obj.windowTarget, obj.node, obj.latex);\n  }\n\n  /**\n   * Wrapper to Core.insertFormula method.\n   * Inserts the formula in the specified target, creating\n   * a new image (new formula) or updating an existing one.\n   * @param {string} mathml - MathML to generate the formula.\n   * @param {string} editMode - Edit Mode (LaTeX or images).\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\n   */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    const obj = this.core.insertFormula(focusElement, windowTarget, mathml, wirisProperties);\n\n    // Delete temporal image when inserted\n    this.core.editionProperties.temporalImage = null;\n\n    return obj;\n  }\n\n  /**\n   * Returns the target selection.\n   * @returns {Selection} target selection.\n   */\n  getSelection() {\n    if (this.isIframe) {\n      this.target.contentWindow.focus();\n      return this.target.contentWindow.getSelection();\n    }\n    this.target.focus();\n    return window.getSelection();\n  }\n\n  /**\n   * Add events to formulas in the DOM target. The events added are the following:\n   * - doubleClickHandler: handles Double-click event on formulas by opening an editor\n   * to edit them.\n   * - mouseDownHandler: handles mouse down event on formulas by saving the size of the formula\n   * in case the the formula is resized.\n   * - mouseUpHandler: handles mouse up event on formulas by restoring the saved formula size\n   * in case the formula is resized.\n   */\n  addEvents() {\n    const eventTarget = this.isIframe ? this.target.contentWindow.document : this.target;\n    Util.addElementEvents(\n      eventTarget,\n      (element, event) => {\n        this.doubleClickHandler(element, event);\n        // Avoid creating the double click listener more than once for each element.\n        event.stopImmediatePropagation();\n      },\n      (element, event) => {\n        this.mousedownHandler(element, event);\n      },\n      (element, event) => {\n        this.mouseupHandler(element, event);\n      },\n    );\n  }\n\n  /**\n   * Remove events to formulas in the DOM target.\n   */\n  removeEvents() {\n    const eventTarget =\n      this.isIframe && this.target.contentWindow?.document ? this.target.contentWindow.document : this.target;\n\n    if (!eventTarget) {\n      return;\n    }\n\n    Util.removeElementEvents(eventTarget);\n  }\n\n  /**\n   * Remove events, modals and set this.editorObject to null in order to prevent memory leaks.\n   */\n  destroy() {\n    this.removeEvents();\n    // Destroy modal dialog if exists.\n    if (this.core.modalDialog) {\n      this.core.modalDialog.destroy();\n    }\n\n    // Remove offline modal dialog if exists.\n    if (this.offlineModal) {\n      this.offlineModal.remove();\n    }\n\n    this.editorObject = null;\n  }\n\n  /**\n   * Handles a Double-click on the target element. Opens an editor\n   * to re-edit the double-clicked formula.\n   * @param {HTMLElement} element - DOM object target.\n   */\n  doubleClickHandler(element) {\n    this.core.editionProperties.dbclick = true;\n    if (element.nodeName.toLowerCase() === \"img\") {\n      this.core.getCustomEditors().disable();\n      const customEditorAttributeName = Configuration.get(\"imageCustomEditorName\");\n      if (element.hasAttribute(customEditorAttributeName)) {\n        const customEditor = element.getAttribute(customEditorAttributeName);\n        this.core.getCustomEditors().enable(customEditor);\n      }\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n        this.core.editionProperties.temporalImage = element;\n        this.core.editionProperties.isNewElement = true;\n        this.openExistingFormulaEditor();\n      }\n    }\n  }\n\n  /**\n   * Handles a mouse up event on the target element. Restores the image size to avoid\n   * resizing formulas.\n   */\n  mouseupHandler() {\n    if (this.temporalImageResizing) {\n      setTimeout(() => {\n        Image.fixAfterResize(this.temporalImageResizing);\n      }, 10);\n    }\n  }\n\n  /**\n   * Handles a mouse down event on the target element. Saves the formula size to avoid\n   * resizing formulas.\n   * @param {HTMLElement} element - target element.\n   */\n  mousedownHandler(element) {\n    if (element.nodeName.toLowerCase() === \"img\") {\n      if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n        this.temporalImageResizing = element;\n      }\n    }\n  }\n\n  /**\n   * Returns the integration language. By default the browser agent. This method\n   * should be overwritten to obtain the integration language, for example using the\n   * plugin API of an HTML editor.\n   * @returns {string} integration language.\n   */\n  getLanguage() {\n    return this.getBrowserLanguage();\n  }\n\n  /**\n   * Returns the browser language.\n   * @returns {string} the browser language.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getBrowserLanguage() {\n    let language = \"en\";\n    if (navigator.userLanguage) {\n      language = navigator.userLanguage.substring(0, 2);\n    } else if (navigator.language) {\n      language = navigator.language.substring(0, 2);\n    } else {\n      language = \"en\";\n    }\n    return language;\n  }\n\n  /**\n   * This function is called once the {@link Core} is loaded. IntegrationModel class\n   * will fire this method when {@link Core} 'onLoad' event is fired.\n   * This method should content all the logic to init\n   * the integration.\n   */\n  callbackFunction() {\n    // It's needed to wait until the integration target is ready. The event is fired\n    // from the integration side.\n    const listener = Listeners.newListener(\"onTargetReady\", () => {\n      this.addEvents(this.target);\n    });\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Function called when the content submits an action.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  notifyWindowClosed() {\n    // Nothing.\n  }\n\n  /**\n   * Wrapper.\n   * Extracts mathml of a determined text node. This function is used as a wrapper inside core.js\n   * in order to get mathml from a text node that can contain normal LaTeX or other chosen text.\n   * @param {string} textNode - text node to extract the MathML.\n   * @param {int} caretPosition - caret position inside the text node.\n   * @returns {string} MathML inside the text node.\n   */\n\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  getMathmlFromTextNode(textNode, caretPosition) {}\n\n  /**\n   * Wrapper\n   * It fills wrs event object of nonLatex with the desired data.\n   * @param {Object} event - event object.\n   * @param {Object} window dom window object.\n   * @param {string} mathml valid mathml.\n   */\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  fillNonLatexNode(event, window, mathml) {}\n\n  /**\n    Wrapper.\n   * Returns selected item from the target.\n   * @param {HTMLElement} target - target element\n   * @param {boolean} iframe\n   */\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  getSelectedItem(target, isIframe) {}\n\n  // Set temporal image to null and make focus come back.\n  static setActionsOnCancelButtons() {\n    // Make focus come back on the previous place it was when click cancel button\n    const currentInstance = WirisPlugin.currentInstance;\n    const editorSelection = currentInstance.getSelection();\n    editorSelection.removeAllRanges();\n\n    if (currentInstance.core.editionProperties.range) {\n      const { range } = currentInstance.core.editionProperties;\n      currentInstance.core.editionProperties.range = null;\n      editorSelection.addRange(range);\n      if (range.startOffset !== range.endOffset) {\n        currentInstance.core.placeCaretAfterNode(currentInstance.core.editionProperties.temporalImage);\n      }\n    }\n\n    // eslint-disable-next-line no-undef\n    if (WirisPlugin.currentInstance) {\n      WirisPlugin.currentInstance.core.editionProperties.temporalImage = null; // eslint-disable-line\n    }\n  }\n}\n\n// To know if the integration that extends this class implements\n// wrapper methods, they are set as undefined.\nIntegrationModel.prototype.getMathmlFromTextNode = undefined;\nIntegrationModel.prototype.fillNonLatexNode = undefined;\nIntegrationModel.prototype.getSelectedItem = undefined;\n\n/**\n * An object containing a list with the overwritable class constructor properties.\n * @type {Object}\n */\nIntegrationModel.integrationParameters = [\"serviceProviderProperties\", \"editorParameters\"];\n","import IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\nimport Telemeter from \"@wiris/mathtype-html-integration-devkit/src/telemeter.js\";\n\n/**\n * This class represents the MathType integration for CKEditor5.\n * @extends {IntegrationModel}\n */\nexport default class CKEditor5Integration extends IntegrationModel {\n  constructor(ckeditorIntegrationModelProperties) {\n    const editor = ckeditorIntegrationModelProperties.editorObject;\n\n    if (typeof editor.config !== \"undefined\" && typeof editor.config.get(\"mathTypeParameters\") !== \"undefined\") {\n      ckeditorIntegrationModelProperties.integrationParameters = editor.config.get(\"mathTypeParameters\");\n    }\n    /**\n     * CKEditor5 Integration.\n     *\n     * @param {integrationModelProperties} integrationModelAttributes\n     */\n    super(ckeditorIntegrationModelProperties);\n\n    /**\n     * Folder name used for the integration inside CKEditor plugins folder.\n     */\n    this.integrationFolderName = \"ckeditor_wiris\";\n  }\n\n  /**\n   * @inheritdoc\n   * @returns {string} - The CKEditor instance language.\n   * @override\n   */\n  getLanguage() {\n    // Returns the CKEDitor instance language taking into account that the language can be an object.\n    // Try to get editorParameters.language, fail silently otherwise\n    try {\n      return this.editorParameters.language;\n    } catch (e) {}\n    const languageObject = this.editorObject.config.get(\"language\");\n    if (languageObject != null) {\n      if (typeof languageObject === \"object\") {\n        // eslint-disable-next-line no-prototype-builtins\n        if (languageObject.hasOwnProperty(\"ui\")) {\n          return languageObject.ui;\n        }\n        return languageObject;\n      }\n      return languageObject;\n    }\n    return super.getLanguage();\n  }\n\n  /**\n   * Adds callbacks to the following CKEditor listeners:\n   * - 'focus' - updates the current instance.\n   * - 'contentDom' - adds 'doubleclick' callback.\n   * - 'doubleclick' - sets to null data.dialog property to avoid modifications for MathType formulas.\n   * - 'setData' - parses the data converting MathML into images.\n   * - 'afterSetData' - adds an observer to MathType formulas to avoid modifications.\n   * - 'getData' - parses the data converting images into selected save mode (MathML by default).\n   * - 'mode' - recalculates the active element.\n   */\n  addEditorListeners() {\n    const editor = this.editorObject;\n\n    if (typeof editor.config.wirislistenersdisabled === \"undefined\" || !editor.config.wirislistenersdisabled) {\n      this.checkElement();\n    }\n  }\n\n  /**\n   * Checks the current container and assign events in case that it doesn't have them.\n   * CKEditor replaces several times the element element during its execution,\n   * so we must assign the events again to editor element.\n   */\n  checkElement() {\n    const editor = this.editorObject;\n    const newElement = editor.sourceElement;\n\n    // If the element wasn't treated, add the events.\n    if (!newElement.wirisActive) {\n      this.setTarget(newElement);\n      this.addEvents();\n      // Set the element as treated\n      newElement.wirisActive = true;\n    }\n  }\n\n  /**\n   * @inheritdoc\n   * @param {HTMLElement} element - HTMLElement target.\n   * @param {MouseEvent} event - event which trigger the handler.\n   */\n  doubleClickHandler(element, event) {\n    this.core.editionProperties.dbclick = true;\n    if (this.editorObject.isReadOnly === false) {\n      if (element.nodeName.toLowerCase() === \"img\") {\n        if (Util.containsClass(element, Configuration.get(\"imageClassName\"))) {\n          // Some plugins (image2, image) open a dialog on Double-click. On formulas\n          // doubleclick event ends here.\n          if (typeof event.stopPropagation !== \"undefined\") {\n            // old I.E compatibility.\n            event.stopPropagation();\n          } else {\n            event.returnValue = false;\n          }\n          this.core.getCustomEditors().disable();\n          const customEditorAttr = element.getAttribute(Configuration.get(\"imageCustomEditorName\"));\n          if (customEditorAttr) {\n            this.core.getCustomEditors().enable(customEditorAttr);\n          }\n          this.core.editionProperties.temporalImage = element;\n          this.openExistingFormulaEditor();\n        }\n      }\n    }\n  }\n\n  /** @inheritdoc */\n  static getCorePath() {\n    return null; // TODO\n  }\n\n  /** @inheritdoc */\n  callbackFunction() {\n    super.callbackFunction();\n    this.addEditorListeners();\n  }\n\n  openNewFormulaEditor() {\n    // Store the editor selection as it will be lost upon opening the modal\n    this.core.editionProperties.selection = this.editorObject.editing.view.document.selection;\n\n    // Focus on the selected editor when multiple editor instances are present\n    WirisPlugin.currentInstance = this;\n\n    return super.openNewFormulaEditor();\n  }\n\n  /**\n   * Replaces old formula with new MathML or inserts it in caret position if new\n   * @param {String} mathml MathML to update old one or insert\n   * @returns {module:engine/model/element~Element} The model element corresponding to the inserted image\n   */\n  insertMathml(mathml) {\n    // This returns the value returned by the callback function (writer => {...})\n    return this.editorObject.model.change((writer) => {\n      const core = this.getCore();\n      const selection = this.editorObject.model.document.selection;\n\n      const modelElementNew = writer.createElement(\"mathml\", {\n        formula: mathml,\n        ...Object.fromEntries(selection.getAttributes()), // To keep the format, such as style and font\n      });\n\n      // Obtain the DOM <span><img ... /></span> object corresponding to the formula\n      if (core.editionProperties.isNewElement) {\n        // Don't bother inserting anything at all if the MathML is empty.\n        if (!mathml) return;\n\n        const viewSelection =\n          this.core.editionProperties.selection || this.editorObject.editing.view.document.selection;\n        const modelPosition = this.editorObject.editing.mapper.toModelPosition(viewSelection.getLastPosition());\n\n        this.editorObject.model.insertObject(modelElementNew, modelPosition);\n\n        // Remove selection\n        if (!viewSelection.isCollapsed) {\n          for (const range of viewSelection.getRanges()) {\n            writer.remove(this.editorObject.editing.mapper.toModelRange(range));\n          }\n        }\n\n        // Set carret after the formula\n        const position = this.editorObject.model.createPositionAfter(modelElementNew);\n        writer.setSelection(position);\n      } else {\n        const img = core.editionProperties.temporalImage;\n        const viewElement = this.editorObject.editing.view.domConverter.domToView(img).parent;\n        const modelElementOld = this.editorObject.editing.mapper.toModelElement(viewElement);\n\n        // Insert the new <mathml> and remove the old one\n        const position = this.editorObject.model.createPositionBefore(modelElementOld);\n\n        // If the given MathML is empty, don't insert a new formula.\n        if (mathml) {\n          this.editorObject.model.insertObject(modelElementNew, position);\n        }\n        writer.remove(modelElementOld);\n      }\n\n      // eslint-disable-next-line consistent-return\n      return modelElementNew;\n    });\n  }\n\n  /**\n   * Finds the text node corresponding to given DOM text element.\n   * @param {element} viewElement Element to find corresponding text node of.\n   * @returns {module:engine/model/text~Text|undefined} Text node corresponding to the given element or undefined if it doesn't exist.\n   */\n  findText(viewElement) {\n    // eslint-disable-line consistent-return\n    // mapper always converts text nodes to *new* model elements so we need to convert the text's parents and then come back down\n    let pivot = viewElement;\n    let element;\n    while (!element) {\n      element = this.editorObject.editing.mapper.toModelElement(\n        this.editorObject.editing.view.domConverter.domToView(pivot),\n      );\n      pivot = pivot.parentElement;\n    }\n\n    // Navigate through all the subtree under `pivot` in order to find the correct text node\n    const range = this.editorObject.model.createRangeIn(element);\n    const descendants = Array.from(range.getItems());\n    for (const node of descendants) {\n      let viewElementData = viewElement.data;\n      if (viewElement.nodeType === 3) {\n        // Remove invisible white spaces\n        viewElementData = viewElementData.replaceAll(String.fromCharCode(8288), \"\");\n      }\n      if (node.is(\"textProxy\") && node.data === viewElementData.replace(String.fromCharCode(160), \" \")) {\n        return node.textNode;\n      }\n    }\n  }\n\n  /** @inheritdoc */\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\n    // eslint-disable-line no-unused-vars\n    const returnObject = {};\n\n    let mathmlOrigin;\n    if (!mathml) {\n      this.insertMathml(\"\");\n    } else if (this.core.editMode === \"latex\") {\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\n      returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\n\n      this.editorObject.model.change((writer) => {\n        const { latexRange } = this.core.editionProperties;\n\n        const startNode = this.findText(latexRange.startContainer);\n        const endNode = this.findText(latexRange.endContainer);\n\n        let startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + latexRange.startOffset);\n        let endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + latexRange.endOffset);\n\n        let range = writer.createRange(startPosition, endPosition);\n\n        // When Latex is next to image/formula.\n        if (latexRange.startContainer.nodeType === 3 && latexRange.startContainer.previousSibling?.nodeType === 1) {\n          // Get the position of the latex to be replaced.\n          let latexEdited =\n            \"$$\" +\n            Latex.getLatexFromMathML(MathML.safeXmlDecode(this.core.editionProperties.temporalImage.dataset.mathml)) +\n            \"$$\";\n          let data = latexRange.startContainer.data;\n\n          // Remove invisible characters.\n          data = data.replaceAll(String.fromCharCode(8288), \"\");\n\n          // Get to the start of the latex we are editing.\n          let offset = data.indexOf(latexEdited);\n          let dataOffset = data.substring(offset);\n          let second$ = dataOffset.substring(2).indexOf(\"$$\") + 4;\n          let substring = dataOffset.substr(0, second$);\n          data = data.replace(substring, \"\");\n\n          if (!data) {\n            startPosition = writer.createPositionBefore(startNode);\n            range = startNode;\n          } else {\n            startPosition = startPosition = writer.createPositionAt(startNode.parent, startNode.startOffset + offset);\n            endPosition = writer.createPositionAt(endNode.parent, endNode.startOffset + second$ + offset);\n            range = writer.createRange(startPosition, endPosition);\n          }\n        }\n\n        writer.remove(range);\n        writer.insertText(`$$${returnObject.latex}$$`, startNode.getAttributes(), startPosition);\n      });\n    } else {\n      mathmlOrigin = this.core.editionProperties.temporalImage?.dataset.mathml;\n      try {\n        returnObject.node = this.editorObject.editing.view.domConverter.viewToDom(\n          this.editorObject.editing.mapper.toViewElement(this.insertMathml(mathml)),\n          windowTarget.document,\n        );\n      } catch (e) {\n        const x = e.toString();\n        if (x.includes(\"CKEditorError: Cannot read property 'parent' of undefined\")) {\n          this.core.modalDialog.cancelAction();\n        }\n      }\n    }\n\n    // Build the telemeter payload separated to delete null/undefined entries.\n    let payload = {\n      mathml_origin: mathmlOrigin ? MathML.safeXmlDecode(mathmlOrigin) : mathmlOrigin,\n      mathml: mathml ? MathML.safeXmlDecode(mathml) : mathml,\n      elapsed_time: Date.now() - this.core.editionProperties.editionStartTime,\n      editor_origin: null, // TODO read formula to find out whether it comes from Oxygen Desktop\n      toolbar: this.core.modalDialog.contentManager.toolbar,\n      size: mathml?.length,\n    };\n\n    // Remove desired null keys.\n    Object.keys(payload).forEach((key) => {\n      if (key === \"mathml_origin\" || key === \"editor_origin\") !payload[key] ? delete payload[key] : {};\n    });\n\n    // Call Telemetry service to track the event.\n    try {\n      Telemeter.telemeter.track(\"INSERTED_FORMULA\", {\n        ...payload,\n      });\n    } catch (error) {\n      console.error(\"Error tracking INSERTED_FORMULA\", error);\n    }\n\n    /* Due to PLUGINS-1329, we add the onChange event to the CK4 insertFormula.\n        We probably should add it here as well, but we should look further into how */\n    // this.editorObject.fire('change');\n\n    // Remove temporal image of inserted formula\n    this.core.editionProperties.temporalImage = null;\n\n    return returnObject;\n  }\n\n  /**\n   * Function called when the content submits an action.\n   */\n  notifyWindowClosed() {\n    this.editorObject.editing.view.focus();\n  }\n}\n","/* eslint-disable max-classes-per-file */\nimport { Command } from \"ckeditor5/src/core.js\";\nimport CKEditor5Integration from \"./integration.js\";\n\n/**\n * Command for opening the MathType editor\n */\nexport class MathTypeCommand extends Command {\n  execute(options = {}) {\n    // Check we get a valid integration\n    // eslint-disable-next-line no-prototype-builtins\n    if (!options.hasOwnProperty(\"integration\") || !(options.integration instanceof CKEditor5Integration)) {\n      throw 'Must pass a valid CKEditor5Integration instance as attribute \"integration\" of options';\n    }\n\n    // Save the integration instance as a property of the command.\n    this.integration = options.integration;\n\n    // Set custom editor or disable it\n    this.setEditor();\n\n    // Open the editor\n    this.openEditor();\n  }\n\n  /**\n   * Sets the appropriate custom editor, if any, or disables them.\n   */\n  setEditor() {\n    // It's possible that a custom editor was last used.\n    // We need to disable it to avoid wrong behaviors.\n    this.integration.core.getCustomEditors().disable();\n  }\n\n  /**\n   * Checks whether we are editing an existing formula or a new one and opens the editor.\n   */\n  openEditor() {\n    this.integration.core.editionProperties.dbclick = false;\n    const image = this._getSelectedImage();\n    if (\n      typeof image !== \"undefined\" &&\n      image !== null &&\n      image.classList.contains(WirisPlugin.Configuration.get(\"imageClassName\"))\n    ) {\n      this.integration.core.editionProperties.temporalImage = image;\n      this.integration.openExistingFormulaEditor();\n    } else {\n      this.integration.openNewFormulaEditor();\n    }\n  }\n\n  /**\n   * Gets the currently selected formula image\n   * @returns {Element} selected image, if any, undefined otherwise\n   */\n  _getSelectedImage() {\n    const { selection } = this.editor.editing.view.document;\n\n    // If we can not extract the formula, fall back to default behavior.\n    if (selection.isCollapsed || selection.rangeCount !== 1) {\n      return;\n    }\n\n    // Look for the <span> wrapping the formula and then for the <img/> inside\n\n    const range = selection.getFirstRange();\n\n    let image;\n\n    for (const span of range) {\n      if (span.item.name !== \"span\") {\n        return;\n      }\n      image = span.item.getChild(0);\n      break;\n    }\n\n    if (!image) {\n      return;\n    }\n\n    // eslint-disable-next-line consistent-return\n    return this.editor.editing.view.domConverter.mapViewToDom(image);\n  }\n}\n\n/**\n * Command for opening the ChemType editor\n */\nexport class ChemTypeCommand extends MathTypeCommand {\n  setEditor() {\n    this.integration.core.getCustomEditors().enable(\"chemistry\");\n  }\n}\n","// CKEditor imports\nimport { Plugin } from \"ckeditor5/src/core.js\";\nimport { ButtonView } from \"ckeditor5/src/ui.js\";\nimport { ClickObserver, HtmlDataProcessor, XmlDataProcessor, UpcastWriter } from \"ckeditor5/src/engine.js\";\nimport { Widget, toWidget, viewToModelPositionOutsideModelElement } from \"ckeditor5/src/widget.js\";\n\n// MathType API imports\nimport IntegrationModel from \"@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\";\nimport Core from \"@wiris/mathtype-html-integration-devkit/src/core.src.js\";\nimport Parser from \"@wiris/mathtype-html-integration-devkit/src/parser.js\";\nimport Util from \"@wiris/mathtype-html-integration-devkit/src/util.js\";\nimport Image from \"@wiris/mathtype-html-integration-devkit/src/image.js\";\nimport Configuration from \"@wiris/mathtype-html-integration-devkit/src/configuration.js\";\nimport Listeners from \"@wiris/mathtype-html-integration-devkit/src/listeners.js\";\nimport MathML from \"@wiris/mathtype-html-integration-devkit/src/mathml.js\";\nimport Latex from \"@wiris/mathtype-html-integration-devkit/src/latex.js\";\nimport StringManager from \"@wiris/mathtype-html-integration-devkit/src/stringmanager.js\";\n\n// Local imports\nimport { MathTypeCommand, ChemTypeCommand } from \"./commands.js\";\nimport CKEditor5Integration from \"./integration.js\";\n\nimport mathIcon from \"../theme/icons/ckeditor5-formula.svg\";\nimport chemIcon from \"../theme/icons/ckeditor5-chem.svg\";\n\nimport packageInfo from \"../package.json\";\n\nexport let currentInstance = null; // eslint-disable-line import/no-mutable-exports\n\nexport default class MathType extends Plugin {\n  static get requires() {\n    return [Widget];\n  }\n\n  static get pluginName() {\n    return \"MathType\";\n  }\n\n  init() {\n    // Create the MathType API Integration object\n    const integration = this._addIntegration();\n    currentInstance = integration;\n\n    // Add the MathType and ChemType commands to the editor\n    this._addCommands();\n\n    // Add the buttons for MathType and ChemType\n    this._addViews(integration);\n\n    // Registers the <mathml> element in the schema\n    this._addSchema();\n\n    // Add the downcast and upcast converters\n    this._addConverters(integration);\n\n    // Expose the WirisPlugin variable to the window\n    this._exposeWiris();\n  }\n\n  /**\n   * Inherited from Plugin class: Executed when CKEditor5 is destroyed\n   */\n  destroy() {\n    // eslint-disable-line class-methods-use-this\n    currentInstance.destroy();\n  }\n\n  /**\n   * Create the MathType API Integration object\n   * @returns {CKEditor5Integration} the integration object\n   */\n  _addIntegration() {\n    const { editor } = this;\n\n    /**\n     * Integration model constructor attributes.\n     * @type {integrationModelProperties}\n     */\n    const integrationProperties = {};\n    integrationProperties.environment = {};\n    integrationProperties.environment.editor = \"CKEditor5\";\n    integrationProperties.environment.editorVersion = \"5.x\";\n    integrationProperties.version = packageInfo.version;\n    integrationProperties.editorObject = editor;\n    integrationProperties.serviceProviderProperties = {};\n    integrationProperties.serviceProviderProperties.URI = \"https://www.wiris.net/demo/plugins/app\";\n    integrationProperties.serviceProviderProperties.server = \"java\";\n    integrationProperties.target = editor.sourceElement;\n    integrationProperties.scriptName = \"bundle.js\";\n    integrationProperties.managesLanguage = true;\n    // etc\n\n    // There are platforms like Drupal that initialize CKEditor but they hide or remove the container element.\n    // To avoid a wrong behaviour, this integration only starts if the workspace container exists.\n    let integration;\n    if (integrationProperties.target) {\n      // Instance of the integration associated to this editor instance\n      integration = new CKEditor5Integration(integrationProperties);\n      integration.init();\n      integration.listeners.fire(\"onTargetReady\", {});\n\n      integration.checkElement();\n\n      this.listenTo(\n        editor.editing.view.document,\n        \"click\",\n        (evt, data) => {\n          // Is Double-click\n          if (data.domEvent.detail === 2) {\n            integration.doubleClickHandler(data.domTarget, data.domEvent);\n            evt.stop();\n          }\n        },\n        { priority: \"highest\" },\n      );\n    }\n\n    return integration;\n  }\n\n  /**\n   * Add the MathType and ChemType commands to the editor\n   */\n  _addCommands() {\n    const { editor } = this;\n\n    // Add command to open the formula editor\n    editor.commands.add(\"MathType\", new MathTypeCommand(editor));\n\n    // Add command to open the chemistry formula editor\n    editor.commands.add(\"ChemType\", new ChemTypeCommand(editor));\n  }\n\n  /**\n   * Add the buttons for MathType and ChemType\n   * @param {CKEditor5Integration} integration the integration object\n   */\n  _addViews(integration) {\n    const { editor } = this;\n\n    // Check if MathType editor is enabled\n    if (Configuration.get(\"editorEnabled\")) {\n      // Add button for the formula editor\n      editor.ui.componentFactory.add(\"MathType\", (locale) => {\n        const view = new ButtonView(locale);\n\n        // View is enabled iff command is enabled\n        view.bind(\"isEnabled\").to(editor.commands.get(\"MathType\"), \"isEnabled\");\n        view.set({\n          label: StringManager.get(\"insert_math\", integration.getLanguage()),\n          icon: mathIcon,\n          tooltip: true,\n        });\n\n        // Callback executed once the image is clicked.\n        view.on(\"execute\", () => {\n          editor.execute(\"MathType\", {\n            integration, // Pass integration as parameter\n          });\n        });\n\n        return view;\n      });\n    }\n\n    // Check if ChemType editor is enabled\n    if (Configuration.get(\"chemEnabled\")) {\n      // Add button for the chemistry formula editor\n      editor.ui.componentFactory.add(\"ChemType\", (locale) => {\n        const view = new ButtonView(locale);\n\n        // View is enabled iff command is enabled\n        view.bind(\"isEnabled\").to(editor.commands.get(\"ChemType\"), \"isEnabled\");\n\n        view.set({\n          label: StringManager.get(\"insert_chem\", integration.getLanguage()),\n          icon: chemIcon,\n          tooltip: true,\n        });\n\n        // Callback executed once the image is clicked.\n        view.on(\"execute\", () => {\n          editor.execute(\"ChemType\", {\n            integration, // Pass integration as parameter\n          });\n        });\n\n        return view;\n      });\n    }\n\n    // Observer for the Double-click event\n    editor.editing.view.addObserver(ClickObserver);\n  }\n\n  /**\n   * Registers the <mathml> element in the schema\n   */\n  _addSchema() {\n    const { schema } = this.editor.model;\n\n    schema.register(\"mathml\", {\n      inheritAllFrom: \"$inlineObject\",\n      allowAttributes: [\"formula\", \"htmlContent\"],\n    });\n  }\n\n  /**\n   * Add the downcast and upcast converters\n   */\n  _addConverters(integration) {\n    const { editor } = this;\n\n    // Editing view -> Model\n    editor.conversion.for(\"upcast\").elementToElement({\n      view: {\n        name: \"span\",\n        classes: \"ck-math-widget\",\n      },\n      model: (viewElement, { writer: modelWriter }) => {\n        const formula = MathML.safeXmlDecode(viewElement.getChild(0).getAttribute(\"data-mathml\"));\n        return modelWriter.createElement(\"mathml\", {\n          formula,\n        });\n      },\n    });\n\n    // Data view -> Model\n    editor.data.upcastDispatcher.on(\"element:math\", (evt, data, conversionApi) => {\n      const { consumable, writer } = conversionApi;\n      const { viewItem } = data;\n\n      // When element was already consumed then skip it.\n      if (!consumable.test(viewItem, { name: true })) {\n        return;\n      }\n\n      // If we encounter any <math> with a LaTeX annotation inside,\n      // convert it into a \"$$...$$\" string.\n      const isLatex = mathIsLatex(viewItem); // eslint-disable-line no-use-before-define\n\n      // Get the formula of the <math> (which is all its children).\n      const processor = new XmlDataProcessor(editor.editing.view.document);\n\n      // Only god knows why the following line makes viewItem lose all of its children,\n      // so we obtain isLatex before doing this because we need viewItem's children for that.\n      const upcastWriter = new UpcastWriter(editor.editing.view.document);\n      const viewDocumentFragment = upcastWriter.createDocumentFragment(viewItem.getChildren());\n\n      // and obtain the attributes of <math> too!\n      const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\n\n      // We process the document fragment\n      let formula = processor.toData(viewDocumentFragment) || \"\";\n\n      // And obtain the complete formula\n      formula = Util.htmlSanitize(`<math${mathAttributes}>${formula}</math>`);\n\n      // Replaces the < & > characters to its HTMLEntity to avoid render issues.\n      formula = formula.replaceAll('\"<\"', '\"&lt;\"').replaceAll('\">\"', '\"&gt;\"').replaceAll(\"><<\", \">&lt;<\");\n\n      /* Model node that contains what's going to actually be inserted. This can be either:\n            - A <mathml> element with a formula attribute set to the given formula, or\n            - If the original <math> had a LaTeX annotation, then the annotation surrounded by \"$$...$$\" */\n      const modelNode = isLatex\n        ? writer.createText(Parser.initParse(formula, integration.getLanguage()))\n        : writer.createElement(\"mathml\", { formula });\n\n      // Find allowed parent for element that we are going to insert.\n      // If current parent does not allow to insert element but one of the ancestors does\n      // then split nodes to allowed parent.\n      const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\n\n      // When there is no split result it means that we can't insert element to model tree, so let's skip it.\n      if (!splitResult) {\n        return;\n      }\n\n      // Insert element on allowed position.\n      conversionApi.writer.insert(modelNode, splitResult.position);\n\n      // Consume appropriate value from consumable values list.\n      consumable.consume(viewItem, { name: true });\n\n      const parts = conversionApi.getSplitParts(modelNode);\n\n      // Set conversion result range.\n      data.modelRange = writer.createRange(\n        conversionApi.writer.createPositionBefore(modelNode),\n        conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\n      );\n\n      // Now we need to check where the `modelCursor` should be.\n      if (splitResult.cursorParent) {\n        // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n        //\n        // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n        // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\n        data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\n      } else {\n        // Otherwise just continue after inserted element.\n        data.modelCursor = data.modelRange.end;\n      }\n    });\n\n    // Data view -> Model\n    editor.data.upcastDispatcher.on(\"element:img\", (evt, data, conversionApi) => {\n      const { consumable, writer } = conversionApi;\n      const { viewItem } = data;\n\n      // Only upcast when is wiris formula\n      if (viewItem.getClassNames().next().value !== \"Wirisformula\") {\n        return;\n      }\n\n      const mathAttributes = [...viewItem.getAttributes()].map(([key, value]) => ` ${key}=\"${value}\"`).join(\"\");\n      let htmlContent = Util.htmlSanitize(`<img${mathAttributes}>`);\n\n      const modelNode = writer.createElement(\"mathml\", { htmlContent });\n\n      // Find allowed parent for element that we are going to insert.\n      // If current parent does not allow to insert element but one of the ancestors does\n      // then split nodes to allowed parent.\n      const splitResult = conversionApi.splitToAllowedParent(modelNode, data.modelCursor);\n\n      // When there is no split result it means that we can't insert element to model tree, so let's skip it.\n      if (!splitResult) {\n        return;\n      }\n\n      // Insert element on allowed position.\n      conversionApi.writer.insert(modelNode, splitResult.position);\n\n      // Consume appropriate value from consumable values list.\n      consumable.consume(viewItem, { name: true });\n\n      const parts = conversionApi.getSplitParts(modelNode);\n\n      // Set conversion result range.\n      data.modelRange = writer.createRange(\n        conversionApi.writer.createPositionBefore(modelNode),\n        conversionApi.writer.createPositionAfter(parts[parts.length - 1]),\n      );\n\n      // Now we need to check where the `modelCursor` should be.\n      if (splitResult.cursorParent) {\n        // If we split parent to insert our element then we want to continue conversion in the new part of the split parent.\n        //\n        // before: <allowed><notAllowed>foo[]</notAllowed></allowed>\n        // after:  <allowed><notAllowed>foo</notAllowed><converted></converted><notAllowed>[]</notAllowed></allowed>\n\n        data.modelCursor = conversionApi.writer.createPositionAt(splitResult.cursorParent, 0);\n      } else {\n        // Otherwise just continue after inserted element.\n        data.modelCursor = data.modelRange.end;\n      }\n    });\n\n    /**\n     * Whether the given view <math> element has a LaTeX annotation element.\n     * @param {*} math\n     * @returns {bool}\n     */\n    function mathIsLatex(math) {\n      const semantics = math.getChild(0);\n      if (!semantics || semantics.name !== \"semantics\") return false;\n      for (const child of semantics.getChildren()) {\n        if (child.name === \"annotation\" && child.getAttribute(\"encoding\") === \"LaTeX\") {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    function createViewWidget(modelItem, { writer: viewWriter }) {\n      const widgetElement = viewWriter.createContainerElement(\"span\", {\n        class: \"ck-math-widget\",\n      });\n\n      const mathUIElement = createViewImage(modelItem, { writer: viewWriter }); // eslint-disable-line no-use-before-define\n\n      if (mathUIElement) {\n        viewWriter.insert(viewWriter.createPositionAt(widgetElement, 0), mathUIElement);\n      }\n\n      return toWidget(widgetElement, viewWriter);\n    }\n\n    function createViewImage(modelItem, { writer: viewWriter }) {\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\n\n      const formula = modelItem.getAttribute(\"formula\");\n      const htmlContent = modelItem.getAttribute(\"htmlContent\");\n\n      if(!formula && !htmlContent){\n        return null;\n      }\n\n      let imgElement = null;\n\n      if (htmlContent) {\n        imgElement = htmlDataProcessor.toView(htmlContent).getChild(0);\n      } else if(formula) {\n        const mathString = formula.replaceAll('ref=\"<\"', 'ref=\"&lt;\"');\n\n        const imgHtml = Parser.initParse(mathString, integration.getLanguage());\n        imgElement = htmlDataProcessor.toView(imgHtml).getChild(0);\n\n        // Add HTML element (<img>) to model\n        viewWriter.setAttribute(\"htmlContent\", imgHtml, modelItem);\n      }\n\n      /* Although we use the HtmlDataProcessor to obtain the attributes,\n        *  we must create a new EmptyElement which is independent of the\n        *  DataProcessor being used by this editor instance\n        */\n      if (imgElement) {\n        return viewWriter.createEmptyElement(\"img\", imgElement.getAttributes(), {\n          renderUnsafeAttributes: [\"src\"],\n        });\n      }\n\n      return null;\n    }\n\n    // Model -> Editing view\n    editor.conversion.for(\"editingDowncast\").elementToElement({\n      model: \"mathml\",\n      view: createViewWidget,\n    });\n\n    // Model -> Data view\n    editor.conversion.for(\"dataDowncast\").elementToElement({\n      model: \"mathml\",\n      view: createDataString, // eslint-disable-line no-use-before-define\n    });\n\n    /**\n     * Makes a copy of the given view node.\n     * @param {module:engine/view/node~Node} sourceNode Node to copy.\n     * @returns {module:engine/view/node~Node} Copy of the node.\n     */\n    function clone(viewWriter, sourceNode) {\n      if (sourceNode.is(\"text\")) {\n        return viewWriter.createText(sourceNode.data);\n      }\n      if (sourceNode.is(\"element\")) {\n        if (sourceNode.is(\"emptyElement\")) {\n          return viewWriter.createEmptyElement(sourceNode.name, sourceNode.getAttributes());\n        }\n        const element = viewWriter.createContainerElement(sourceNode.name, sourceNode.getAttributes());\n        for (const child of sourceNode.getChildren()) {\n          viewWriter.insert(viewWriter.createPositionAt(element, \"end\"), clone(viewWriter, child));\n        }\n        return element;\n      }\n\n      throw new Exception(\"Given node has unsupported type.\"); // eslint-disable-line no-undef\n    }\n\n    function createDataString(modelItem, { writer: viewWriter }) {\n      const htmlDataProcessor = new HtmlDataProcessor(viewWriter.document);\n\n      // Load img element\n      let mathString = modelItem.getAttribute(\"htmlContent\");\n\n      const sourceMathElement = htmlDataProcessor.toView(mathString).getChild(0);\n\n      return clone(viewWriter, sourceMathElement);\n    }\n\n    // This stops the view selection getting into the <span>s and messing up caret movement\n    editor.editing.mapper.on(\n      \"viewToModelPosition\",\n      viewToModelPositionOutsideModelElement(editor.model, (viewElement) => viewElement.hasClass(\"ck-math-widget\")),\n    );\n\n    // Keep a reference to the original get and set function.\n    const { get, set } = editor.data;\n\n    /**\n     * Hack to transform $$latex$$ into <math> in editor.getData()'s output.\n     */\n    editor.data.on(\n      \"get\",\n      (e) => {\n        let output = e.return;\n        const parsedResult = Parser.endParse(output);\n\n        // Cleans all the semantics tag for safexml\n        // including the handwritten data points\n        e.return = MathML.removeSafeXMLSemantics(parsedResult);\n      },\n      { priority: \"low\" },\n    );\n\n    /**\n     * Hack to transform <math> with LaTeX into $$LaTeX$$ and formula images in editor.setData().\n     */\n    editor.data.on(\n      \"set\",\n      (e, args) => {\n        // Retrieve the data to be set on the CKEditor.\n        let modifiedData = args[0];\n        // Regex to find all mathml formulas.\n        const regexp = /(<img\\b[^>]*>)|(<math(.*?)<\\/math>)/gm;\n        const formulas = [];\n        let formula;\n\n        // Both data.set from the source plugin and console command are taken into account as the data received is MathML or an image containing the MathML.\n        while ((formula = regexp.exec(modifiedData)) !== null) {\n          formulas.push(formula[0]);\n        }\n\n        // Loop to find LaTeX and formula images and replace the MathML for the both.\n        formulas.forEach((formula) => {\n          if (formula.includes('encoding=\"LaTeX\"')) {\n            // LaTeX found.\n            let latex = \"$$$\" + Latex.getLatexFromMathML(formula) + \"$$$\"; // We add $$$ instead of $$ because the replace function ignores one $.\n            modifiedData = modifiedData.replace(formula, latex);\n          } else if (formula.includes(\"<img\")) {\n            // If we found a formula image, we should find MathML data, and then substitute the entire image.\n            const regexp = /«math\\b[^»]*»(.*?)«\\/math»/g;\n            const safexml = formula.match(regexp);\n            if(safexml !== null) {\n              let decodeXML = MathML.safeXmlDecode(safexml[0]);\n              modifiedData = modifiedData.replace(formula, decodeXML);\n            }\n          }\n        });\n\n        args[0] = modifiedData;\n      },\n      { priority: \"high\" },\n    );\n  }\n\n  /**\n   * Expose the WirisPlugin variable to the window\n   */\n  // eslint-disable-next-line class-methods-use-this\n  _exposeWiris() {\n    window.WirisPlugin = {\n      Core,\n      Parser,\n      Image,\n      MathML,\n      Util,\n      Configuration,\n      Listeners,\n      IntegrationModel,\n      currentInstance,\n      Latex,\n    };\n  }\n}\n"],"names":["Constants","safeXmlCharactersEntities","tagOpener","tagCloser","doubleQuote","realDoubleQuote","safeBadBlackboardCharacters","ltElement","gtElement","ampElement","safeGoodBlackboardCharacters","xmlCharacters","id","ampersand","quote","safeXmlCharacters","MathML","isMathmlInAttribute","content","i","mathAtt","attContent","att","atts","regex","expression","RegExp","actualContent","substring","reversed","split","reverse","join","exists","test","safeXmlDecode","input","window","_wrs_blackboard","returnValue","currentEntity","length","character","charAt","match","safeXmlEncode","mathMLEntities","mathml","toReturn","codePointAt","end","indexOf","container","document","createElement","innerHTML","Util","fixedCharCodeAt","textContent","innerText","addCustomEditorClassAttribute","customEditor","start","substr","removeCustomEditorClassAttribute","replace","addAnnotation","annotationEncoding","containsAnnotation","mathmlWithAnnotation","closeSemanticsIndex","isEmpty","endIndexInline","endIndexNonInline","endIndex","beginMathMLContent","endMathmlContent","lastIndexOf","mathmlContent","removeAnnotation","mathmlWithoutAnnotation","openAnnotationTag","closeAnnotationTag","startAnnotationIndex","differentAnnotationFound","differentAnnotationIndex","closeIndex","endAnnotationIndex","startIndex","removeSemantics","semanticsStartingTagRegex","semanticsEndingTagRegex","removeSafeXMLSemantics","element","semanticsSafeStartingTagRegex","semanticsSafeEndingTagRegex","removeSemanticsOcurrences","text","characters","mathTagStart","mathTagEnd","mathTagEndline","semanticsTagStart","annotationTagStart","output","mathTagEndIndex","mathTagEndlineIndex","firstTagCloser","semanticsIndex","mmlTagStart","annotationIndex","mmlContent","containClass","mathML","className","classIndex","classTagEndIndex","classTag","closeTag","closeTagInline","firstCloseTagIndex","firstCloseTagInlineIndex","empty","mathTagEndRegex","mathTagEndArray","exec","index","encodeProperties","replacer","quoteIndex","propertyValue","propertyValueEncoded","htmlEntities","matchEncoded","mathmlEncoded","Configuration","addConfiguration","properties","Object","assign","_properties","value","get","key","prototype","hasOwnProperty","call","set","update","updateProperty","TextCache","constructor","cache","populate","Listeners","listeners","add","listener","push","fire","eventName","event","cancelled","callback","defaultPrevented","newListener","ServiceProvider","_listeners","addListener","fireEvent","parameters","_parameters","servicePaths","_servicePaths","setServicePath","service","path","getServicePath","serviceName","integrationPath","_integrationPath","getServerURL","url","location","href","arr","result","init","configurationURI","createServiceURI","createImageURI","showImageURI","getMathMLURI","serviceURI","URI","serverPath","getUrl","postVariables","currentPath","toString","httpRequest","createHttpRequest","open","header","convertStringToObject","entries","forEach","val","setRequestHeader","send","httpBuildQuery","responseText","getService","response","getVariables","serviceUrl","getServerLanguageFromService","extension","serverExtension","concatenateUrl","server","Latex","_cache","getLatexFromMathML","mathmlWithoutSemantics","data","mml","jsonResponse","JSON","parse","latex","status","latexHtmlEntitiesEncoded","mathmlWithSemantics","getMathMLFromLatex","includeLatexOnSemantics","latexCache","saveLatex","parseMathmlToLatex","mathTagBegin","openTarget","closeTarget","startAnnotation","closeAnnotation","getLatexFromTextNode","textNode","caretPosition","latexTags","defaultLatexTags","close","startNode","previousSibling","nodeType","getNextLatexPosition","currentNode","currentPosition","tag","position","nodeValue","nextSibling","node","isPrevious","endNode","endPosition","tagLength","startPosition","StringManager","Error","lang","language","slice","strings","console","warn","translations","eventTarget","createEvent","eventObject","initEvent","dispatchEvent","createEventObject","addEvent","callBackFunction","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","addElementEvents","doubleClickHandler","mousedownHandler","mouseupHandler","callbackDblclick","realEvent","srcElement","target","callbackMousedown","callbackMouseup","removeElementEvents","addClass","containsClass","currentClasses","removeClass","newClassName","classes","trim","convertOldXmlinitialtextAttribute","xitpos","valpos","startquote","endquote","newvalue","keyValueString","map","pair","reduce","resultObject","tagName","attributes","creator","undefined","html","keys","attributeName","e","setAttribute","createObject","objectCode","recursiveParamsFix","object","getAttribute","attributesParsed","nodeName","param","NAME","name","VALUE","removeAttribute","parentNode","replaceChild","applet","childNodes","toLowerCase","appendChild","firstChild","createObjectCode","specified","path1","path2","separator","htmlSanitize","annotationRegex","annotation","DOMPurify","sanitize","ADD_TAGS","ADD_ATTR","htmlEntitiesDecode","textarea","XMLHttpRequest","ActiveXObject","oc","urlEncode","propertiesToString","hash","n","j","s1","s2","compareStrings","a","b","an","bn","c","string","idx","code","charCodeAt","hi","low","Number","isNaN","urlToAssArray","query","ss","h","s","kv","decodeURIComponent","clearString","encodeURIComponent","getWIRISImageOutput","imgCode","convertToXml","convertToSafeXml","imgObject","dataMathML","safeMathML","getNodeLength","staticNodeLengths","IMG","BR","toUpperCase","getSelectedItem","isIframe","forceGetSelection","windowTarget","contentWindow","focus","selection","range","createRange","parentElement","htmlText","execCommand","temporalObject","pasteHTML","getElementById","createTextNode","insertBefore","removeChild","item","getSelection","getRangeAt","startContainer","startOffset","endContainer","endOffset","localName","classList","contains","remove","emptySpan","getSelectedItemOnTextarea","textNodeValues","selectionStart","getElementsByNameFromString","autoClosed","elements","endString","decode64","PLUS","SLASH","NUMBER","LOWER","UPPER","PLUS_URL_SAFE","SLASH_URL_SAFE","b64ToByteArray","b64String","tmp","l","placeHolders","readInt32","bytes","int32","splice","readByte","shift","readBytes","pos","len","updateTextArea","selectionEnd","selectionEndSub","updateExistingTextOnTextarea","textareaStart","addArgument","parameter","sep","Image","removeImgDataAttributes","img","attributesToRemove","attribute","clone","originImg","destImg","customEditorAttributeName","hasAttribute","mathmlAttributeName","imgAttributes","iterator","originAttribute","isSvg","src","startsWith","isBase64","setImgSize","uri","ar","base64String","svgString","getMetricsFromSvgString","String","fromCharCode","getMetricsFromBytes","width","cw","height","ch","baseline","cb","dpi","style","verticalAlign","fixAfterResize","maxWidth","processImg","atob","encodedSvgString","svg","base64","reader","FileReader","onload","fetch","then","r","blob","readAsDataURL","first","last","typ","Math","round","Accessibility","mathMLToAccessible","mode","ignoreStyles","accessibleText","accessibleJsonResponse","Parser","mathmlToImgObject","wirisProperties","align","wirisEditorProperties","metrics","centerbaseline","mathmlSubstring","createShowImageSrc","format","alt","createImageSrc","observer","observe","baseParts","pop","initParse","initParseSaveMode","initParseEditMode","parseMathmlToImg","codeImgTransform","imgList","token","carry","mathmlStartToken","mathmlStart","mathmlEnd","latexStartPosition","latexEndPosition","replaceText","endParse","codeEndParsedEditMode","endParseEditMode","codeEndParseSaveMode","endParseSaveMode","decodedLatex","savemode","base64savemode","createShowImageSrcData","dataMd5","renderParams","dataObject","formula","com","wiris","js","JsPluginTools","md5encode","version","pattern","patternLength","source","lastIndex","characterNextPosition","xmlCode","imageMathmlAtrribute","MutationObserver","mutationObserver","mutations","mutation","oldValue","create","Config","attributeOldValue","getPrototypeOf","EditorListener","isContentChanged","waitingForChanges","setIsContentChanged","getIsContentChanged","setWaitingForChanges","caretPositionChanged","_editor","clipboardChanged","contentChanged","styleChanged","transformationReceived","wasm","cachedTextDecoder","TextDecoder","ignoreBOM","fatal","decode","cachedUint8Memory0","getUint8Memory0","byteLength","Uint8Array","memory","buffer","getStringFromWasm0","ptr","subarray","heap","Array","fill","heap_next","addHeapObject","obj","getObject","dropObject","takeObject","ret","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encode","encodeString","encodeInto","arg","view","buf","read","written","passStringToWasm0","malloc","realloc","mem","offset","isLikeNone","x","cachedInt32Memory0","getInt32Memory0","Int32Array","cachedFloat64Memory0","getFloat64Memory0","Float64Array","cachedBigInt64Memory0","getBigInt64Memory0","BigInt64Array","debugString","type","description","isArray","debug","builtInMatches","stringify","_","message","stack","makeClosure","arg0","arg1","dtor","f","state","cnt","real","args","__wbindgen_export_2","original","__wbg_adapter_46","arg2","__wbindgen_export_3","makeMutClosure","__wbg_adapter_49","__wbindgen_export_4","__wbg_adapter_52","__wbindgen_export_5","handleError","apply","__wbindgen_export_6","__wbg_adapter_103","arg3","__wbindgen_export_7","getArrayU8FromWasm0","Telemeter","__destroy_into_raw","__wbg_ptr","free","__wbg_telemeter_free","solution","hosts","config","retptr","__wbindgen_add_to_stack_pointer","telemeter_new","r0","r1","r2","identify","sender_id","ptr0","__wbindgen_export_0","__wbindgen_export_1","len0","telemeter_identify","track","event_type","event_payload","telemeter_track","log","level","payload","telemeter_log","finish","telemeter_finish","new_debug_status","telemeter_debug","__wbg_load","module","imports","Response","WebAssembly","instantiateStreaming","headers","arrayBuffer","instantiate","instance","Instance","__wbg_get_imports","wbg","__wbindgen_string_new","__wbg_new_c728d68b8b34487e","__wbg_status_7841bb47be2a8f16","__wbg_headers_ea7ef583d1564b08","__wbg_new0_ad75dd38f92424e2","Date","__wbg_getTime_ed6ee333b702f8fc","getTime","__wbindgen_object_drop_ref","__wbindgen_is_object","__wbg_crypto_58f13aa23ffcb166","crypto","__wbg_process_5b786e71d465a513","process","__wbg_versions_c2ab80650590b6a2","versions","__wbg_node_523d7bd03ef69fba","__wbindgen_is_string","__wbg_msCrypto_abcb1295e768d1f2","msCrypto","__wbg_require_2784e593a4674877","require","arguments","__wbg_newwithlength_13b5319ab422dcf6","__wbg_get_4a9aa5157afeb382","__wbg_next_1989a20442400aaa","next","__wbg_done_bc26bf4ada718266","done","__wbg_value_0570714ff7d75f35","__wbg_iterator_7ee1a391d310f8e4","Symbol","__wbg_get_2aff440840bb6202","Reflect","__wbg_next_15da6a3df9290720","__wbindgen_is_function","__wbg_call_669127b9d730c650","__wbindgen_object_clone_ref","__wbg_self_3fad056edded10bd","self","__wbg_window_a4f46c98a61d4089","__wbg_globalThis_17eff828815f7d84","globalThis","__wbg_global_46f939f6541643c5","global","__wbindgen_is_undefined","__wbg_newnoargs_ccdcae30fd002262","Function","__wbg_isArray_38525be7442aa21e","__wbg_call_53fc3abd42e24ec8","__wbg_isSafeInteger_c38b0a16d0c7cef7","isSafeInteger","__wbg_new_feb65b865d980ae2","state0","cb0","Promise","__wbindgen_memory","__wbg_buffer_344d9b41efe96da7","__wbg_new_d8a000788389a31e","__wbg_set_dcfd613a3420f908","__wbg_length_a5587d6cd79ab197","__wbindgen_string_get","ptr1","len1","__wbg_stringify_4039297315a25b00","__wbg_set_40f7786a25a9cc7e","__wbg_has_cdf8b85f6e903c80","has","__wbg_fetch_701fcd2bde06379a","__wbg_fetch_b5d6bebed1e6c2d2","__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3","__wbg_new_e4960143e41697a4","AbortController","__wbg_signal_1ed842bebd6ae322","signal","__wbg_abort_8355f201f30300bb","abort","__wbindgen_error_new","__wbindgen_jsval_loose_eq","__wbindgen_boolean_get","v","__wbindgen_number_get","__wbg_instanceof_Uint8Array_19e6f142a5e7e1e1","__wbg_instanceof_ArrayBuffer_c7cc317e5c29cc0d","ArrayBuffer","__wbg_entries_6d727b73ee02b7ce","__wbg_String_917f38a1211cf44b","__wbg_warn_ade8d3b7ecee11ff","__wbg_readyState_13e55da5ad6d64e2","readyState","__wbg_warn_4affe1093892a4ef","__wbg_close_f4135085ec3fc8f0","__wbg_new_b9b318679315404f","WebSocket","__wbg_setbinaryType_dcb62e0f2b346301","binaryType","__wbg_log_7811587c4c6d2844","__wbg_error_f0a6627f4b23c19d","error","__wbg_info_3ca7870690403fee","info","__wbg_document_183cf1eecfdbffee","__wbg_visibilityState_9721703a5ef75faf","visibilityState","__wbg_getwithrefkey_3b3c46ba20582127","__wbg_length_cace2e0b3ddc0502","__wbg_addEventListener_0f2891b0794e07fa","__wbg_removeEventListener_104d11302bb212d1","__wbindgen_is_bigint","__wbindgen_bigint_from_i64","__wbindgen_in","__wbindgen_bigint_from_u64","BigInt","asUintN","__wbindgen_jsval_eq","__wbg_localStorage_e11f72e996a4f5d9","localStorage","__wbg_getItem_c81cd3ae30cd579a","getItem","__wbg_navigator_7078da62d92ff5ad","navigator","__wbg_mediaDevices_e00b1f64d2b9939f","mediaDevices","__wbg_enumerateDevices_619d52f5eef34c2f","enumerateDevices","__wbg_setItem_fe04f524052a3839","arg4","setItem","__wbindgen_cb_drop","__wbg_deviceId_58f7da2228a26c02","deviceId","__wbg_instanceof_Response_944e2745b5db71f5","__wbg_randomFillSync_a0d98aa11c81fe89","randomFillSync","__wbg_subarray_6ca5cfa7fbb9abbe","__wbg_getRandomValues_504510b5564925af","getRandomValues","__wbindgen_bigint_get_as_i64","__wbindgen_debug_string","__wbindgen_throw","__wbg_then_89e1c559530b85cf","__wbg_queueMicrotask_e5949c35d772a669","queueMicrotask","__wbg_then_1bbc9edafd859b06","__wbg_queueMicrotask_2be8b97a81fe4d00","__wbg_resolve_a3252b2860f0a09e","resolve","__wbg_url_1f609e63ff1a7983","__wbg_send_2860805104507701","__wbg_instanceof_Window_cde2416cf5126a72","Window","__wbg_new_19676474aa414d62","Headers","__wbg_append_feec4143bbf21904","append","__wbg_newwithstrandinit_29038da14d09e330","Request","__wbindgen_closure_wrapper1532","__wbindgen_closure_wrapper1602","__wbindgen_closure_wrapper1834","__wbg_finalize_init","exports","__wbg_init","__wbindgen_wasm_module","__wbindgen_start","URL","telemeterAttributes","telemeter","waitingForInit","TelemeterWASM","catch","finally","local_telemeter","ContentManager","contentManagerAttributes","editorAttributes","customEditors","environment","editorListener","editor","ua","userAgent","deviceProperties","isAndroid","isIOS","toolbar","dbclick","modalDialogInstance","isNewElement","integrationModel","setIntegrationModel","setModalDialogInstance","insert","updateTitle","insertEditor","isEditorLoaded","jsEditor","JsEditor","newInstance","insertInto","contentContainer","rtl","action","getEditorModel","isRTL","direction","addEditorListener","setTimeout","hideKeyboard","formulaDisplayDiv","getElementsByClassName","handleOpenedIosSoftkeyboard","handleClosedIosSoftkeyboard","bind","addEditorAsExternalDependency","script","editorUrl","anchorElement","setHrefToAnchorElement","setProtocolToAnchorElement","getURLFromAnchorElement","stats","getEditorStats","getElementsByTagName","protocol","removePort","port","hostname","pathname","includes","platform","isMobile","setInitialContent","setMathML","focusDisabled","setMathMLWithCallback","onFocus","submitAction","isFormulaEmpty","getMathMLWithSemantics","getActiveEditor","editors","mathmlEntitiesEncoded","updateFormula","disable","notifyWindowClosed","setEmptyMathML","forcedHandMode","onOpen","updateToolbar","zoom","documentElement","clientWidth","innerWidth","setKeyboardMode","trigger","Core","globalListeners","hideHandModeButton","openHandOnKeyboardMathML","wrsEditor","forced","handSwitchHidden","handModeButtonSelector","mutationInstance","handModeButton","querySelector","hidden","disconnect","body","childList","characterData","subtree","waitForHand","handEditor","hand","handTemporalMathML","getMathML","handCoordinates","editorModel","getHandStrokes","setStrokes","fitStrokes","openHand","_wrs_int_wirisProperties","setToolbar","getToolbar","setTitle","title","setParams","setCustomHeaders","headersObj","customHeaders","hasChanges","onKeyDown","keyboardEvent","repeat","list","cancelAction","stopPropagation","preventDefault","shiftKey","activeElement","submitButton","closeDiv","minimizeDiv","cancelButton","CustomEditors","activeEditor","addEditor","editorName","editorParams","icon","confVariable","tooltip","enable","customEditorName","jsProperties","imageCustomEditorName","imageClassName","CASClassName","Event","cancel","PopUpMessage","popupMessageAttributes","overlayElement","callbacks","overlayWrapper","paragraph","overlay","buttonArea","buttonSubmitArguments","class","submitString","closeButton","createButton","closeAction","buttonCancelArguments","cancelString","show","display","blur","cancelCallback","closeCallback","IntegrationModel","setActionsOnCancelButtons","ModalDialog","modalDialogAttributes","iosSoftkeyboardOpened","iosMeasureUnit","iosDivHeight","deviceWidth","outerWidth","deviceHeight","outerHeight","landscape","portrait","instanceId","orientation","isDesktop","created","previousState","bottom","right","size","websiteBeforeLockParameters","getElementId","titleBar","generalStyle","btoa","closeIcon","hoverStyle","closeHoverIcon","stackDiv","minsIcon","minsHoverIcon","maximizeDiv","fullsIcon","fullsHoverIcon","minIcon","minHoverIcon","role","wrapper","controls","buttonContainer","createSubmitButton","contentManager","popupStrings","popupupProperties","popup","setContentManager","getContentManager","showPopUpMessage","SubmitButton","dataset","testid","getElement","recalculateScrollBar","createModalWindowDesktop","createResizeButtons","addListeners","maximize","createModalWindowAndroid","createModalWindowIos","scrollbarWidth","offsetWidth","resizerBR","resizerTL","activateResizeStateBR","activateResizeStateTL","mouseEvent","initializeResizeProperties","leftOption","resizeDataObject","eventClient","X","y","Y","initialWidth","parseInt","initialHeight","initialRight","initialBottom","leftScale","restoreWebsiteScale","lockWebsiteScroll","restoreState","saveModalProperties","unlockWebsiteScroll","destroy","removeListeners","viewportmeta","contentAttrsToUpdate","contentAttrsValuesToUpdate","setMetaAttrFunc","viewportelement","contentAttrs","contentAttr","attrArray","finalContentMeta","oldAttrs","isAttrToUpdate","attr","bodyStylePosition","bodyStyleOverflow","overflow","htmlStyleOverflow","windowScrollX","scrollX","windowScrollY","scrollY","scrollTo","isIE11","search","orientationChangeAndroidSoftkeyboard","orientationChangeIosSoftkeyboard","minimize","restoreModalProperties","setResizeButtonsVisibility","recalculatePosition","recalculateScale","cursor","maxIcon","maxHoverIcon","left","top","setSize","innerHeight","clientHeight","offsetHeight","setPosition","recalculateSize","reExpand","visibility","keyCode","click","startDrag","stopDrag","drag","onWindowResize","clientX","changedTouches","client","clientY","dragDataObject","lastDrag","limitWindow","getLimitWindow","limitY","min","minPointer","max","maxPointer","limitX","dragX","dragY","transform","scaleMultiplier","maxHeight","contStyleBottom","contStyleRight","pageXOffset","offSetToolbarY","offSetToolbarX","minPointerY","maxPointerY","minPointerX","maxPointerX","getScrollBarWidth","inner","outer","widthOuter","widthInner","sizeModified","hasScrollBar","inputField","portraitMode","setContainerHeight","flexGrow","TypeError","second","defineProperty","configurable","writable","varArgs","to","nextSource","nextKey","searchElement","fromIndex","o","k","abs","sameValueZero","rawPos","coreProperties","editMode","modalDialog","chemEditorParams","editionProperties","temporalImage","latexRange","editionStartTime","browser","serviceProviderProperties","_globalListeners","initialized","_initialized","setEnvironment","integrationEnvironment","setHeaders","headerObject","getModalDialog","serviceProviderListener","jsConfiguration","jsonConfiguration","addGlobalListener","beforeUpdateFormula","beforeUpdateEvent","insertFormula","focusElement","returnObject","insertElementOnSelection","fillNonLatexNode","afterUpdateEvent","afterUpdateFormula","placeCaretAfterNode","nodeDocument","ownerDocument","setStartAfter","collapse","removeAllRanges","addRange","mathmlOrigin","editorSelection","deleteContents","splitText","select","insertNode","mathml_origin","elapsed_time","now","editor_origin","openModalDialog","selectedItem","getMathmlFromTextNode","latexResult","leftOffset","previousNode","moveToElementText","move","moveEnd","setStart","setEnd","defaultEditorAttributesArray","defaultEditorAttributes","tempAttribute","serverEditorParameters","clientEditorParameters","editorParameters","getCustomEditors","integrationModelProperties","configurationService","scriptName","callbackMethodArguments","editorObject","managesLanguage","integrationParameters","temporalImageResizing","core","getLanguage","callbackFunction","configurationIndex","subsTring","serviceParametersURI","getPath","setCore","offlineModal","offlineModalContent","offlineModalClose","offlineModalWarn","warnIcon","offlineModalMessage","offlineModalMessage1","offlineModalMessage2","modal","solutionTelemeter","isMoodle","M","lms","nam","fam","ver","moodleVersion","category","moodleCourseCategory","course","moodleCourseName","OSData","getOS","broswerData","getBrowser","detectedBrowser","versionBrowser","editorVersion","detectedOS","versionOS","filter","dry_run","api_key","macosPlatforms","windowsPlatforms","iosPlatforms","col","getVersion","setLanguage","getCore","setTarget","setEditorObject","openNewFormulaEditor","onLine","openExistingFormulaEditor","util","EditorUtils","addEvents","stopImmediatePropagation","removeEvents","getBrowserLanguage","userLanguage","currentInstance","WirisPlugin","CKEditor5Integration","ckeditorIntegrationModelProperties","integrationFolderName","languageObject","ui","addEditorListeners","wirislistenersdisabled","checkElement","newElement","sourceElement","wirisActive","isReadOnly","customEditorAttr","getCorePath","editing","insertMathml","model","change","writer","modelElementNew","fromEntries","getAttributes","viewSelection","modelPosition","mapper","toModelPosition","getLastPosition","insertObject","isCollapsed","getRanges","toModelRange","createPositionAfter","setSelection","viewElement","domConverter","domToView","parent","modelElementOld","toModelElement","createPositionBefore","findText","pivot","createRangeIn","descendants","from","getItems","viewElementData","replaceAll","is","createPositionAt","latexEdited","dataOffset","second$","insertText","viewToDom","toViewElement","MathTypeCommand","Command","execute","options","integration","setEditor","openEditor","image","_getSelectedImage","rangeCount","getFirstRange","span","getChild","mapViewToDom","ChemTypeCommand","MathType","Plugin","requires","Widget","pluginName","_addIntegration","_addCommands","_addViews","_addSchema","_addConverters","_exposeWiris","integrationProperties","packageInfo","listenTo","evt","domEvent","detail","domTarget","stop","priority","commands","componentFactory","locale","ButtonView","label","mathIcon","on","chemIcon","addObserver","ClickObserver","schema","register","inheritAllFrom","allowAttributes","conversion","for","elementToElement","modelWriter","upcastDispatcher","conversionApi","consumable","viewItem","isLatex","mathIsLatex","processor","XmlDataProcessor","upcastWriter","UpcastWriter","viewDocumentFragment","createDocumentFragment","getChildren","mathAttributes","toData","modelNode","createText","splitResult","splitToAllowedParent","modelCursor","consume","parts","getSplitParts","modelRange","cursorParent","getClassNames","htmlContent","math","semantics","child","createViewWidget","modelItem","viewWriter","widgetElement","createContainerElement","mathUIElement","createViewImage","toWidget","htmlDataProcessor","HtmlDataProcessor","imgElement","toView","mathString","imgHtml","createEmptyElement","renderUnsafeAttributes","createDataString","sourceNode","Exception","sourceMathElement","viewToModelPositionOutsideModelElement","hasClass","return","parsedResult","modifiedData","regexp","formulas","safexml","decodeXML"],"mappings":"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","x_google_ignoreList":[0]}